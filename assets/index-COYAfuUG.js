(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function AS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Rp={exports:{}},Bl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0;function wR(){if(o0)return Bl;o0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var u=null;if(a!==void 0&&(u=""+a),r.key!==void 0&&(u=""+r.key),"key"in r){a={};for(var d in r)d!=="key"&&(a[d]=r[d])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:u,ref:r!==void 0?r:null,props:a}}return Bl.Fragment=e,Bl.jsx=t,Bl.jsxs=t,Bl}var r0;function RR(){return r0||(r0=1,Rp.exports=wR()),Rp.exports}var I=RR(),bp={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0;function bR(){if(a0)return be;a0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function w(V){return V===null||typeof V!="object"?null:(V=S&&V[S]||V["@@iterator"],typeof V=="function"?V:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,O={};function Y(V,ee,ae){this.props=V,this.context=ee,this.refs=O,this.updater=ae||P}Y.prototype.isReactComponent={},Y.prototype.setState=function(V,ee){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ee,"setState")},Y.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Q(){}Q.prototype=Y.prototype;function j(V,ee,ae){this.props=V,this.context=ee,this.refs=O,this.updater=ae||P}var oe=j.prototype=new Q;oe.constructor=j,G(oe,Y.prototype),oe.isPureReactComponent=!0;var W=Array.isArray;function he(){}var N={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function M(V,ee,ae){var ue=ae.ref;return{$$typeof:n,type:V,key:ee,ref:ue!==void 0?ue:null,props:ae}}function L(V,ee){return M(V.type,ee,V.props)}function U(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function q(V){var ee={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ae){return ee[ae]})}var D=/\/+/g;function xe(V,ee){return typeof V=="object"&&V!==null&&V.key!=null?q(""+V.key):ee.toString(36)}function nt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(he,he):(V.status="pending",V.then(function(ee){V.status==="pending"&&(V.status="fulfilled",V.value=ee)},function(ee){V.status==="pending"&&(V.status="rejected",V.reason=ee)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Z(V,ee,ae,ue,Te){var Me=typeof V;(Me==="undefined"||Me==="boolean")&&(V=null);var ze=!1;if(V===null)ze=!0;else switch(Me){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(V.$$typeof){case n:case e:ze=!0;break;case v:return ze=V._init,Z(ze(V._payload),ee,ae,ue,Te)}}if(ze)return Te=Te(V),ze=ue===""?"."+xe(V,0):ue,W(Te)?(ae="",ze!=null&&(ae=ze.replace(D,"$&/")+"/"),Z(Te,ee,ae,"",function(Co){return Co})):Te!=null&&(U(Te)&&(Te=L(Te,ae+(Te.key==null||V&&V.key===Te.key?"":(""+Te.key).replace(D,"$&/")+"/")+ze)),ee.push(Te)),1;ze=0;var Vt=ue===""?".":ue+":";if(W(V))for(var ft=0;ft<V.length;ft++)ue=V[ft],Me=Vt+xe(ue,ft),ze+=Z(ue,ee,ae,Me,Te);else if(ft=w(V),typeof ft=="function")for(V=ft.call(V),ft=0;!(ue=V.next()).done;)ue=ue.value,Me=Vt+xe(ue,ft++),ze+=Z(ue,ee,ae,Me,Te);else if(Me==="object"){if(typeof V.then=="function")return Z(nt(V),ee,ae,ue,Te);throw ee=String(V),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return ze}function ce(V,ee,ae){if(V==null)return V;var ue=[],Te=0;return Z(V,ue,"","",function(Me){return ee.call(ae,Me,Te++)}),ue}function me(V){if(V._status===-1){var ee=V._result;ee=ee(),ee.then(function(ae){(V._status===0||V._status===-1)&&(V._status=1,V._result=ae)},function(ae){(V._status===0||V._status===-1)&&(V._status=2,V._result=ae)}),V._status===-1&&(V._status=0,V._result=ee)}if(V._status===1)return V._result.default;throw V._result}var ke=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},fe={map:ce,forEach:function(V,ee,ae){ce(V,function(){ee.apply(this,arguments)},ae)},count:function(V){var ee=0;return ce(V,function(){ee++}),ee},toArray:function(V){return ce(V,function(ee){return ee})||[]},only:function(V){if(!U(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return be.Activity=E,be.Children=fe,be.Component=Y,be.Fragment=t,be.Profiler=r,be.PureComponent=j,be.StrictMode=i,be.Suspense=g,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,be.__COMPILER_RUNTIME={__proto__:null,c:function(V){return N.H.useMemoCache(V)}},be.cache=function(V){return function(){return V.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(V,ee,ae){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ue=G({},V.props),Te=V.key;if(ee!=null)for(Me in ee.key!==void 0&&(Te=""+ee.key),ee)!x.call(ee,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&ee.ref===void 0||(ue[Me]=ee[Me]);var Me=arguments.length-2;if(Me===1)ue.children=ae;else if(1<Me){for(var ze=Array(Me),Vt=0;Vt<Me;Vt++)ze[Vt]=arguments[Vt+2];ue.children=ze}return M(V.type,Te,ue)},be.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:a,_context:V},V},be.createElement=function(V,ee,ae){var ue,Te={},Me=null;if(ee!=null)for(ue in ee.key!==void 0&&(Me=""+ee.key),ee)x.call(ee,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(Te[ue]=ee[ue]);var ze=arguments.length-2;if(ze===1)Te.children=ae;else if(1<ze){for(var Vt=Array(ze),ft=0;ft<ze;ft++)Vt[ft]=arguments[ft+2];Te.children=Vt}if(V&&V.defaultProps)for(ue in ze=V.defaultProps,ze)Te[ue]===void 0&&(Te[ue]=ze[ue]);return M(V,Me,Te)},be.createRef=function(){return{current:null}},be.forwardRef=function(V){return{$$typeof:d,render:V}},be.isValidElement=U,be.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:me}},be.memo=function(V,ee){return{$$typeof:p,type:V,compare:ee===void 0?null:ee}},be.startTransition=function(V){var ee=N.T,ae={};N.T=ae;try{var ue=V(),Te=N.S;Te!==null&&Te(ae,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(he,ke)}catch(Me){ke(Me)}finally{ee!==null&&ae.types!==null&&(ee.types=ae.types),N.T=ee}},be.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},be.use=function(V){return N.H.use(V)},be.useActionState=function(V,ee,ae){return N.H.useActionState(V,ee,ae)},be.useCallback=function(V,ee){return N.H.useCallback(V,ee)},be.useContext=function(V){return N.H.useContext(V)},be.useDebugValue=function(){},be.useDeferredValue=function(V,ee){return N.H.useDeferredValue(V,ee)},be.useEffect=function(V,ee){return N.H.useEffect(V,ee)},be.useEffectEvent=function(V){return N.H.useEffectEvent(V)},be.useId=function(){return N.H.useId()},be.useImperativeHandle=function(V,ee,ae){return N.H.useImperativeHandle(V,ee,ae)},be.useInsertionEffect=function(V,ee){return N.H.useInsertionEffect(V,ee)},be.useLayoutEffect=function(V,ee){return N.H.useLayoutEffect(V,ee)},be.useMemo=function(V,ee){return N.H.useMemo(V,ee)},be.useOptimistic=function(V,ee){return N.H.useOptimistic(V,ee)},be.useReducer=function(V,ee,ae){return N.H.useReducer(V,ee,ae)},be.useRef=function(V){return N.H.useRef(V)},be.useState=function(V){return N.H.useState(V)},be.useSyncExternalStore=function(V,ee,ae){return N.H.useSyncExternalStore(V,ee,ae)},be.useTransition=function(){return N.H.useTransition()},be.version="19.2.4",be}var l0;function km(){return l0||(l0=1,bp.exports=bR()),bp.exports}var Ee=km();const NR=AS(Ee);var Np={exports:{}},Hl={},xp={exports:{}},Mp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function xR(){return u0||(u0=1,(function(n){function e(Z,ce){var me=Z.length;Z.push(ce);e:for(;0<me;){var ke=me-1>>>1,fe=Z[ke];if(0<r(fe,ce))Z[ke]=ce,Z[me]=fe,me=ke;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var ce=Z[0],me=Z.pop();if(me!==ce){Z[0]=me;e:for(var ke=0,fe=Z.length,V=fe>>>1;ke<V;){var ee=2*(ke+1)-1,ae=Z[ee],ue=ee+1,Te=Z[ue];if(0>r(ae,me))ue<fe&&0>r(Te,ae)?(Z[ke]=Te,Z[ue]=me,ke=ue):(Z[ke]=ae,Z[ee]=me,ke=ee);else if(ue<fe&&0>r(Te,me))Z[ke]=Te,Z[ue]=me,ke=ue;else break e}}return ce}function r(Z,ce){var me=Z.sortIndex-ce.sortIndex;return me!==0?me:Z.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var g=[],p=[],v=1,E=null,S=3,w=!1,P=!1,G=!1,O=!1,Y=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function oe(Z){for(var ce=t(p);ce!==null;){if(ce.callback===null)i(p);else if(ce.startTime<=Z)i(p),ce.sortIndex=ce.expirationTime,e(g,ce);else break;ce=t(p)}}function W(Z){if(G=!1,oe(Z),!P)if(t(g)!==null)P=!0,he||(he=!0,q());else{var ce=t(p);ce!==null&&nt(W,ce.startTime-Z)}}var he=!1,N=-1,x=5,M=-1;function L(){return O?!0:!(n.unstable_now()-M<x)}function U(){if(O=!1,he){var Z=n.unstable_now();M=Z;var ce=!0;try{e:{P=!1,G&&(G=!1,Q(N),N=-1),w=!0;var me=S;try{t:{for(oe(Z),E=t(g);E!==null&&!(E.expirationTime>Z&&L());){var ke=E.callback;if(typeof ke=="function"){E.callback=null,S=E.priorityLevel;var fe=ke(E.expirationTime<=Z);if(Z=n.unstable_now(),typeof fe=="function"){E.callback=fe,oe(Z),ce=!0;break t}E===t(g)&&i(g),oe(Z)}else i(g);E=t(g)}if(E!==null)ce=!0;else{var V=t(p);V!==null&&nt(W,V.startTime-Z),ce=!1}}break e}finally{E=null,S=me,w=!1}ce=void 0}}finally{ce?q():he=!1}}}var q;if(typeof j=="function")q=function(){j(U)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,xe=D.port2;D.port1.onmessage=U,q=function(){xe.postMessage(null)}}else q=function(){Y(U,0)};function nt(Z,ce){N=Y(function(){Z(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(Z){switch(S){case 1:case 2:case 3:var ce=3;break;default:ce=S}var me=S;S=ce;try{return Z()}finally{S=me}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(Z,ce){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var me=S;S=Z;try{return ce()}finally{S=me}},n.unstable_scheduleCallback=function(Z,ce,me){var ke=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?ke+me:ke):me=ke,Z){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=me+fe,Z={id:v++,callback:ce,priorityLevel:Z,startTime:me,expirationTime:fe,sortIndex:-1},me>ke?(Z.sortIndex=me,e(p,Z),t(g)===null&&Z===t(p)&&(G?(Q(N),N=-1):G=!0,nt(W,me-ke))):(Z.sortIndex=fe,e(g,Z),P||w||(P=!0,he||(he=!0,q()))),Z},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(Z){var ce=S;return function(){var me=S;S=ce;try{return Z.apply(this,arguments)}finally{S=me}}}})(Mp)),Mp}var c0;function MR(){return c0||(c0=1,xp.exports=xR()),xp.exports}var Dp={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function DR(){if(f0)return en;f0=1;var n=km();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(g,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:g,containerInfo:p,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,en.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(g,p,null,v)},en.flushSync=function(g){var p=u.T,v=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=p,i.p=v,i.d.f()}},en.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(g,p))},en.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},en.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,E=d(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:w}):v==="script"&&i.d.X(g,{crossOrigin:E,integrity:S,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},en.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);i.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(g)},en.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=d(v,p.crossOrigin);i.d.L(g,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},en.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=d(p.as,p.crossOrigin);i.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(g)},en.requestFormReset=function(g){i.d.r(g)},en.unstable_batchedUpdates=function(g,p){return g(p)},en.useFormState=function(g,p,v){return u.H.useFormState(g,p,v)},en.useFormStatus=function(){return u.H.useHostTransitionStatus()},en.version="19.2.4",en}var d0;function PR(){if(d0)return Dp.exports;d0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Dp.exports=DR(),Dp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function VR(){if(h0)return Hl;h0=1;var n=MR(),e=km(),t=PR();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,l=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(l=o.return),s=o.return;while(s)}return o.tag===3?l:null}function u(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function d(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function g(s){if(a(s)!==s)throw Error(i(188))}function p(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(i(188));return o!==s?null:s}for(var l=s,c=o;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return g(y),s;if(_===c)return g(y),o;_=_.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=_;else{for(var A=!1,R=y.child;R;){if(R===l){A=!0,l=y,c=_;break}if(R===c){A=!0,c=y,l=_;break}R=R.sibling}if(!A){for(R=_.child;R;){if(R===l){A=!0,l=_,c=y;break}if(R===c){A=!0,c=_,l=y;break}R=R.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:o}function v(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=v(s),o!==null)return o;s=s.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),j=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function xe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case G:return"Fragment";case Y:return"Profiler";case O:return"StrictMode";case W:return"Suspense";case he:return"SuspenseList";case M:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case P:return"Portal";case j:return s.displayName||"Context";case Q:return(s._context.displayName||"Context")+".Consumer";case oe:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case N:return o=s.displayName||null,o!==null?o:xe(s.type)||"Memo";case x:o=s._payload,s=s._init;try{return xe(s(o))}catch{}}return null}var nt=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},ke=[],fe=-1;function V(s){return{current:s}}function ee(s){0>fe||(s.current=ke[fe],ke[fe]=null,fe--)}function ae(s,o){fe++,ke[fe]=s.current,s.current=o}var ue=V(null),Te=V(null),Me=V(null),ze=V(null);function Vt(s,o){switch(ae(Me,o),ae(Te,s),ae(ue,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?bv(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=bv(o),s=Nv(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ee(ue),ae(ue,s)}function ft(){ee(ue),ee(Te),ee(Me)}function Co(s){s.memoizedState!==null&&ae(ze,s);var o=ue.current,l=Nv(o,s.type);o!==l&&(ae(Te,s),ae(ue,l))}function yr(s){Te.current===s&&(ee(ue),ee(Te)),ze.current===s&&(ee(ze),Ol._currentValue=me)}var _r,vr;function gi(s){if(_r===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);_r=o&&o[1]||"",vr=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_r+s+vr}var Oa=!1;function Io(s,o){if(!s||Oa)return"";Oa=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(X){var K=X}Reflect.construct(s,[],ie)}else{try{ie.call()}catch(X){K=X}s.call(ie.prototype)}}else{try{throw Error()}catch(X){K=X}(ie=s())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),A=_[0],R=_[1];if(A&&R){var k=A.split(`
`),J=R.split(`
`);for(y=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(c===k.length||y===J.length)for(c=k.length-1,y=J.length-1;1<=c&&0<=y&&k[c]!==J[y];)y--;for(;1<=c&&0<=y;c--,y--)if(k[c]!==J[y]){if(c!==1||y!==1)do if(c--,y--,0>y||k[c]!==J[y]){var te=`
`+k[c].replace(" at new "," at ");return s.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",s.displayName)),te}while(1<=c&&0<=y);break}}}finally{Oa=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?gi(l):""}function Fa(s,o){switch(s.tag){case 26:case 27:case 5:return gi(s.type);case 16:return gi("Lazy");case 13:return s.child!==o&&o!==null?gi("Suspense Fallback"):gi("Suspense");case 19:return gi("SuspenseList");case 0:case 15:return Io(s.type,!1);case 11:return Io(s.type.render,!1);case 1:return Io(s.type,!0);case 31:return gi("Activity");default:return""}}function Ga(s){try{var o="",l=null;do o+=Fa(s,l),l=s,s=s.return;while(s);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var At=Object.prototype.hasOwnProperty,kt=n.unstable_scheduleCallback,As=n.unstable_cancelCallback,Nd=n.unstable_shouldYield,Pu=n.unstable_requestPaint,ln=n.unstable_now,wo=n.unstable_getCurrentPriorityLevel,qa=n.unstable_ImmediatePriority,Ba=n.unstable_UserBlockingPriority,Cs=n.unstable_NormalPriority,xd=n.unstable_LowPriority,Vu=n.unstable_IdlePriority,ku=n.log,Uu=n.unstable_setDisableYieldValue,Wn=null,Jt=null;function Pn(s){if(typeof ku=="function"&&Uu(s),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(Wn,s)}catch{}}var _t=Math.clz32?Math.clz32:Ou,Lu=Math.log,Er=Math.LN2;function Ou(s){return s>>>=0,s===0?32:31-(Lu(s)/Er|0)|0}var yi=256,Ro=262144,Ct=4194304;function _i(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function vi(s,o,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,_=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var R=c&134217727;return R!==0?(c=R&~_,c!==0?y=_i(c):(A&=R,A!==0?y=_i(A):l||(l=R&~s,l!==0&&(y=_i(l))))):(R=c&~_,R!==0?y=_i(R):A!==0?y=_i(A):l||(l=c&~s,l!==0&&(y=_i(l)))),y===0?0:o!==0&&o!==y&&(o&_)===0&&(_=y&-y,l=o&-o,_>=l||_===32&&(l&4194048)!==0)?o:y}function jn(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function Md(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fu(){var s=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),s}function Ei(s){for(var o=[],l=0;31>l;l++)o.push(s);return o}function bo(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Dd(s,o,l,c,y,_){var A=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var R=s.entanglements,k=s.expirationTimes,J=s.hiddenUpdates;for(l=A&~l;0<l;){var te=31-_t(l),ie=1<<te;R[te]=0,k[te]=-1;var K=J[te];if(K!==null)for(J[te]=null,te=0;te<K.length;te++){var X=K[te];X!==null&&(X.lane&=-536870913)}l&=~ie}c!==0&&No(s,c,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(A&~o))}function No(s,o,l){s.pendingLanes|=o,s.suspendedLanes&=~o;var c=31-_t(o);s.entangledLanes|=o,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function Ha(s,o){var l=s.entangledLanes|=o;for(s=s.entanglements;l;){var c=31-_t(l),y=1<<c;y&o|s[c]&o&&(s[c]|=o),l&=~y}}function za(s,o){var l=o&-o;return l=(l&42)!==0?1:xo(l),(l&(s.suspendedLanes|o))!==0?0:l}function xo(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ji(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Gu(){var s=ce.p;return s!==0?s:(s=window.event,s===void 0?32:jv(s.type))}function Zn(s,o){var l=ce.p;try{return ce.p=s,o()}finally{ce.p=l}}var ei=Math.random().toString(36).slice(2),It="__reactFiber$"+ei,Ft="__reactProps$"+ei,Ti="__reactContainer$"+ei,Tr="__reactEvents$"+ei,Pd="__reactListeners$"+ei,qu="__reactHandles$"+ei,Bu="__reactResources$"+ei,Si="__reactMarker$"+ei;function Sr(s){delete s[It],delete s[Ft],delete s[Tr],delete s[Pd],delete s[qu]}function Ai(s){var o=s[It];if(o)return o;for(var l=s.parentNode;l;){if(o=l[Ti]||l[It]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(s=Uv(s);s!==null;){if(l=s[It])return l;s=Uv(s)}return o}s=l,l=s.parentNode}return null}function Vn(s){if(s=s[It]||s[Ti]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function Sn(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function Ci(s){var o=s[Bu];return o||(o=s[Bu]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function wt(s){s[Si]=!0}var Ja=new Set,Ka={};function Ii(s,o){wi(s,o),wi(s+"Capture",o)}function wi(s,o){for(Ka[s]=o,s=0;s<o.length;s++)Ja.add(o[s])}var Ya=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$a={},Qa={};function Hu(s){return At.call(Qa,s)?!0:At.call($a,s)?!1:Ya.test(s)?Qa[s]=!0:($a[s]=!0,!1)}function Ar(s,o,l){if(Hu(o))if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+l)}}function An(s,o,l){if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+l)}}function Rt(s,o,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(o,l,""+c)}}function Gt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Is(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Xa(s,o,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,_.call(this,A)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Ze(s){if(!s._valueTracker){var o=Is(s)?"checked":"value";s._valueTracker=Xa(s,o,""+s[o])}}function Mo(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var l=o.getValue(),c="";return s&&(c=Is(s)?s.checked?"true":"false":s.value),s=c,s!==l?(o.setValue(s),!0):!1}function Ri(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Do=/[\n"\\]/g;function hn(s){return s.replace(Do,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Cr(s,o,l,c,y,_,A,R){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),o!=null?A==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+Gt(o)):s.value!==""+Gt(o)&&(s.value=""+Gt(o)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),o!=null?Wa(s,A,Gt(o)):l!=null?Wa(s,A,Gt(l)):c!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+Gt(R):s.removeAttribute("name")}function zu(s,o,l,c,y,_,A,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),o!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){Ze(s);return}l=l!=null?""+Gt(l):"",o=o!=null?""+Gt(o):l,R||o===s.value||(s.value=o),s.defaultValue=o}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=R?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),Ze(s)}function Wa(s,o,l){o==="number"&&Ri(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function ws(s,o,l,c){if(s=s.options,o){o={};for(var y=0;y<l.length;y++)o["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=o.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+Gt(l),o=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}o!==null||s[y].disabled||(o=s[y])}o!==null&&(o.selected=!0)}}function Ju(s,o,l){if(o!=null&&(o=""+Gt(o),o!==s.value&&(s.value=o),l==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=l!=null?""+Gt(l):""}function Rs(s,o,l,c){if(o==null){if(c!=null){if(l!=null)throw Error(i(92));if(nt(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),o=l}l=Gt(o),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),Ze(s)}function pn(s,o){if(o){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=o;return}}s.textContent=o}var Ku=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ja(s,o,l){var c=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":c?s.setProperty(o,l):typeof l!="number"||l===0||Ku.has(o)?o==="float"?s.cssFloat=l:s[o]=(""+l).trim():s[o]=l+"px"}function Za(s,o,l){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in o)c=o[y],o.hasOwnProperty(y)&&l[y]!==c&&ja(s,y,c)}else for(var _ in o)o.hasOwnProperty(_)&&ja(s,_,o[_])}function Ir(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wr(s){return bs.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ti(){}var el=null;function kn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ns=null,bi=null;function Po(s){var o=Vn(s);if(o&&(s=o.stateNode)){var l=s[Ft]||null;e:switch(s=o.stateNode,o.type){case"input":if(Cr(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+hn(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var c=l[o];if(c!==s&&c.form===s.form){var y=c[Ft]||null;if(!y)throw Error(i(90));Cr(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<l.length;o++)c=l[o],c.form===s.form&&Mo(c)}break e;case"textarea":Ju(s,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&ws(s,!!l.multiple,o,!1)}}}var Rr=!1;function xs(s,o,l){if(Rr)return s(o,l);Rr=!0;try{var c=s(o);return c}finally{if(Rr=!1,(Ns!==null||bi!==null)&&(Gc(),Ns&&(o=Ns,s=bi,bi=Ns=null,Po(o),s)))for(o=0;o<s.length;o++)Po(s[o])}}function ni(s,o){var l=s.stateNode;if(l===null)return null;var c=l[Ft]||null;if(c===null)return null;l=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,o,typeof l));return l}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vo=!1;if(Un)try{var it={};Object.defineProperty(it,"passive",{get:function(){Vo=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{Vo=!1}var Ni=null,tl=null,ko=null;function nl(){if(ko)return ko;var s,o=tl,l=o.length,c,y="value"in Ni?Ni.value:Ni.textContent,_=y.length;for(s=0;s<l&&o[s]===y[s];s++);var A=l-s;for(c=1;c<=A&&o[l-c]===y[_-c];c++);return ko=y.slice(s,1<c?1-c:void 0)}function Uo(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Ki(){return!0}function ii(){return!1}function Kt(s){function o(l,c,y,_,A){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(l=s[R],this[R]=l?l(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ki:ii,this.isPropagationStopped=ii,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),o}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xi=Kt(Yi),Ms=E({},Yi,{view:0,detail:0}),il=Kt(Ms),Ds,br,Mi,Nr=E({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ps,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Mi&&(Mi&&s.type==="mousemove"?(Ds=s.screenX-Mi.screenX,br=s.screenY-Mi.screenY):br=Ds=0,Mi=s),Ds)},movementY:function(s){return"movementY"in s?s.movementY:br}}),sl=Kt(Nr),Lo=E({},Nr,{dataTransfer:0}),$u=Kt(Lo),Qu=E({},Ms,{relatedTarget:0}),Oo=Kt(Qu),ol=E({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),Xu=Kt(ol),xr=E({},Yi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Wu=Kt(xr),ju=E({},Yi,{data:0}),Di=Kt(ju),Zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nc(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=tc[s])?!!o[s]:!1}function Ps(){return nc}var un=E({},Ms,{key:function(s){if(s.key){var o=Zu[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Uo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ec[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ps,charCode:function(s){return s.type==="keypress"?Uo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Uo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ic=Kt(un),sc=E({},Nr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$i=Kt(sc),m=E({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ps}),T=Kt(m),C=E({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Kt(C),H=E({},Nr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),$=Kt(H),le=E({},Yi,{newState:0,oldState:0}),De=Kt(le),vt=[9,13,27,32],Qe=Un&&"CompositionEvent"in window,dt=null;Un&&"documentMode"in document&&(dt=document.documentMode);var Ln=Un&&"TextEvent"in window&&!dt,Pi=Un&&(!Qe||dt&&8<dt&&11>=dt),si=" ",oi=!1;function Fo(s,o){switch(s){case"keyup":return vt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mr(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Dr=!1;function XI(s,o){switch(s){case"compositionend":return Mr(o);case"keypress":return o.which!==32?null:(oi=!0,si);case"textInput":return s=o.data,s===si&&oi?null:s;default:return null}}function WI(s,o){if(Dr)return s==="compositionend"||!Qe&&Fo(s,o)?(s=nl(),ko=tl=Ni=null,Dr=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Pi&&o.locale!=="ko"?null:o.data;default:return null}}var jI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fg(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!jI[s.type]:o==="textarea"}function Gg(s,o,l,c){Ns?bi?bi.push(c):bi=[c]:Ns=c,o=Yc(o,"onChange"),0<o.length&&(l=new xi("onChange","change",null,l,c),s.push({event:l,listeners:o}))}var rl=null,al=null;function ZI(s){Sv(s,0)}function oc(s){var o=Sn(s);if(Mo(o))return s}function qg(s,o){if(s==="change")return o}var Bg=!1;if(Un){var Vd;if(Un){var kd="oninput"in document;if(!kd){var Hg=document.createElement("div");Hg.setAttribute("oninput","return;"),kd=typeof Hg.oninput=="function"}Vd=kd}else Vd=!1;Bg=Vd&&(!document.documentMode||9<document.documentMode)}function zg(){rl&&(rl.detachEvent("onpropertychange",Jg),al=rl=null)}function Jg(s){if(s.propertyName==="value"&&oc(al)){var o=[];Gg(o,al,s,kn(s)),xs(ZI,o)}}function ew(s,o,l){s==="focusin"?(zg(),rl=o,al=l,rl.attachEvent("onpropertychange",Jg)):s==="focusout"&&zg()}function tw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return oc(al)}function nw(s,o){if(s==="click")return oc(o)}function iw(s,o){if(s==="input"||s==="change")return oc(o)}function sw(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Cn=typeof Object.is=="function"?Object.is:sw;function ll(s,o){if(Cn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var l=Object.keys(s),c=Object.keys(o);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!At.call(o,y)||!Cn(s[y],o[y]))return!1}return!0}function Kg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Yg(s,o){var l=Kg(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=o&&c>=o)return{node:l,offset:o-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Kg(l)}}function $g(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?$g(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Qg(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Ri(s.document);o instanceof s.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)s=o.contentWindow;else break;o=Ri(s.document)}return o}function Ud(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var ow=Un&&"documentMode"in document&&11>=document.documentMode,Pr=null,Ld=null,ul=null,Od=!1;function Xg(s,o,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Od||Pr==null||Pr!==Ri(c)||(c=Pr,"selectionStart"in c&&Ud(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ul&&ll(ul,c)||(ul=c,c=Yc(Ld,"onSelect"),0<c.length&&(o=new xi("onSelect","select",null,o,l),s.push({event:o,listeners:c}),o.target=Pr)))}function Go(s,o){var l={};return l[s.toLowerCase()]=o.toLowerCase(),l["Webkit"+s]="webkit"+o,l["Moz"+s]="moz"+o,l}var Vr={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionrun:Go("Transition","TransitionRun"),transitionstart:Go("Transition","TransitionStart"),transitioncancel:Go("Transition","TransitionCancel"),transitionend:Go("Transition","TransitionEnd")},Fd={},Wg={};Un&&(Wg=document.createElement("div").style,"AnimationEvent"in window||(delete Vr.animationend.animation,delete Vr.animationiteration.animation,delete Vr.animationstart.animation),"TransitionEvent"in window||delete Vr.transitionend.transition);function qo(s){if(Fd[s])return Fd[s];if(!Vr[s])return s;var o=Vr[s],l;for(l in o)if(o.hasOwnProperty(l)&&l in Wg)return Fd[s]=o[l];return s}var jg=qo("animationend"),Zg=qo("animationiteration"),ey=qo("animationstart"),rw=qo("transitionrun"),aw=qo("transitionstart"),lw=qo("transitioncancel"),ty=qo("transitionend"),ny=new Map,Gd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gd.push("scrollEnd");function ri(s,o){ny.set(s,o),Ii(o,[s])}var rc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},On=[],kr=0,qd=0;function ac(){for(var s=kr,o=qd=kr=0;o<s;){var l=On[o];On[o++]=null;var c=On[o];On[o++]=null;var y=On[o];On[o++]=null;var _=On[o];if(On[o++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}_!==0&&iy(l,y,_)}}function lc(s,o,l,c){On[kr++]=s,On[kr++]=o,On[kr++]=l,On[kr++]=c,qd|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Bd(s,o,l,c){return lc(s,o,l,c),uc(s)}function Bo(s,o){return lc(s,null,null,o),uc(s)}function iy(s,o,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,_=s.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&o!==null&&(y=31-_t(l),s=_.hiddenUpdates,c=s[y],c===null?s[y]=[o]:c.push(o),o.lane=l|536870912),_):null}function uc(s){if(50<Ml)throw Ml=0,Wh=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Ur={};function uw(s,o,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(s,o,l,c){return new uw(s,o,l,c)}function Hd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Qi(s,o){var l=s.alternate;return l===null?(l=In(s.tag,o,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=o,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,o=s.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function sy(s,o){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,o=l.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function cc(s,o,l,c,y,_){var A=0;if(c=s,typeof s=="function")Hd(s)&&(A=1);else if(typeof s=="string")A=pR(s,l,ue.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case M:return s=In(31,l,o,y),s.elementType=M,s.lanes=_,s;case G:return Ho(l.children,y,_,o);case O:A=8,y|=24;break;case Y:return s=In(12,l,o,y|2),s.elementType=Y,s.lanes=_,s;case W:return s=In(13,l,o,y),s.elementType=W,s.lanes=_,s;case he:return s=In(19,l,o,y),s.elementType=he,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:A=10;break e;case Q:A=9;break e;case oe:A=11;break e;case N:A=14;break e;case x:A=16,c=null;break e}A=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return o=In(A,l,o,y),o.elementType=s,o.type=c,o.lanes=_,o}function Ho(s,o,l,c){return s=In(7,s,c,o),s.lanes=l,s}function zd(s,o,l){return s=In(6,s,null,o),s.lanes=l,s}function oy(s){var o=In(18,null,null,0);return o.stateNode=s,o}function Jd(s,o,l){return o=In(4,s.children!==null?s.children:[],s.key,o),o.lanes=l,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var ry=new WeakMap;function Fn(s,o){if(typeof s=="object"&&s!==null){var l=ry.get(s);return l!==void 0?l:(o={value:s,source:o,stack:Ga(o)},ry.set(s,o),o)}return{value:s,source:o,stack:Ga(o)}}var Lr=[],Or=0,fc=null,cl=0,Gn=[],qn=0,Vs=null,Vi=1,ki="";function Xi(s,o){Lr[Or++]=cl,Lr[Or++]=fc,fc=s,cl=o}function ay(s,o,l){Gn[qn++]=Vi,Gn[qn++]=ki,Gn[qn++]=Vs,Vs=s;var c=Vi;s=ki;var y=32-_t(c)-1;c&=~(1<<y),l+=1;var _=32-_t(o)+y;if(30<_){var A=y-y%5;_=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Vi=1<<32-_t(o)+y|l<<y|c,ki=_+s}else Vi=1<<_|l<<y|c,ki=s}function Kd(s){s.return!==null&&(Xi(s,1),ay(s,1,0))}function Yd(s){for(;s===fc;)fc=Lr[--Or],Lr[Or]=null,cl=Lr[--Or],Lr[Or]=null;for(;s===Vs;)Vs=Gn[--qn],Gn[qn]=null,ki=Gn[--qn],Gn[qn]=null,Vi=Gn[--qn],Gn[qn]=null}function ly(s,o){Gn[qn++]=Vi,Gn[qn++]=ki,Gn[qn++]=Vs,Vi=o.id,ki=o.overflow,Vs=s}var Yt=null,lt=null,He=!1,ks=null,Bn=!1,$d=Error(i(519));function Us(s){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fl(Fn(o,s)),$d}function uy(s){var o=s.stateNode,l=s.type,c=s.memoizedProps;switch(o[It]=s,o[Ft]=c,l){case"dialog":Le("cancel",o),Le("close",o);break;case"iframe":case"object":case"embed":Le("load",o);break;case"video":case"audio":for(l=0;l<Pl.length;l++)Le(Pl[l],o);break;case"source":Le("error",o);break;case"img":case"image":case"link":Le("error",o),Le("load",o);break;case"details":Le("toggle",o);break;case"input":Le("invalid",o),zu(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Le("invalid",o);break;case"textarea":Le("invalid",o),Rs(o,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||c.suppressHydrationWarning===!0||wv(o.textContent,l)?(c.popover!=null&&(Le("beforetoggle",o),Le("toggle",o)),c.onScroll!=null&&Le("scroll",o),c.onScrollEnd!=null&&Le("scrollend",o),c.onClick!=null&&(o.onclick=ti),o=!0):o=!1,o||Us(s,!0)}function cy(s){for(Yt=s.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:Bn=!1;return;case 27:case 3:Bn=!0;return;default:Yt=Yt.return}}function Fr(s){if(s!==Yt)return!1;if(!He)return cy(s),He=!0,!1;var o=s.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||dp(s.type,s.memoizedProps)),l=!l),l&&lt&&Us(s),cy(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));lt=kv(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));lt=kv(s)}else o===27?(o=lt,Xs(s.type)?(s=yp,yp=null,lt=s):lt=o):lt=Yt?zn(s.stateNode.nextSibling):null;return!0}function zo(){lt=Yt=null,He=!1}function Qd(){var s=ks;return s!==null&&(_n===null?_n=s:_n.push.apply(_n,s),ks=null),s}function fl(s){ks===null?ks=[s]:ks.push(s)}var Xd=V(null),Jo=null,Wi=null;function Ls(s,o,l){ae(Xd,o._currentValue),o._currentValue=l}function ji(s){s._currentValue=Xd.current,ee(Xd)}function Wd(s,o,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),s===l)break;s=s.return}}function jd(s,o,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var A=y.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=y;for(var k=0;k<o.length;k++)if(R.context===o[k]){_.lanes|=l,R=_.alternate,R!==null&&(R.lanes|=l),Wd(_.return,l,s),c||(A=null);break e}_=R.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,_=A.alternate,_!==null&&(_.lanes|=l),Wd(A,l,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Gr(s,o,l,c){s=null;for(var y=o,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var R=y.type;Cn(y.pendingProps.value,A.value)||(s!==null?s.push(R):s=[R])}}else if(y===ze.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Ol):s=[Ol])}y=y.return}s!==null&&jd(o,s,l,c),o.flags|=262144}function dc(s){for(s=s.firstContext;s!==null;){if(!Cn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ko(s){Jo=s,Wi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function $t(s){return fy(Jo,s)}function hc(s,o){return Jo===null&&Ko(s),fy(s,o)}function fy(s,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},Wi===null){if(s===null)throw Error(i(308));Wi=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Wi=Wi.next=o;return l}var cw=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){o.aborted=!0,s.forEach(function(l){return l()})}},fw=n.unstable_scheduleCallback,dw=n.unstable_NormalPriority,bt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zd(){return{controller:new cw,data:new Map,refCount:0}}function dl(s){s.refCount--,s.refCount===0&&fw(dw,function(){s.controller.abort()})}var hl=null,eh=0,qr=0,Br=null;function hw(s,o){if(hl===null){var l=hl=[];eh=0,qr=ip(),Br={status:"pending",value:void 0,then:function(c){l.push(c)}}}return eh++,o.then(dy,dy),o}function dy(){if(--eh===0&&hl!==null){Br!==null&&(Br.status="fulfilled");var s=hl;hl=null,qr=0,Br=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function pw(s,o){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=o;for(var y=0;y<l.length;y++)(0,l[y])(o)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var hy=Z.S;Z.S=function(s,o){X_=ln(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&hw(s,o),hy!==null&&hy(s,o)};var Yo=V(null);function th(){var s=Yo.current;return s!==null?s:at.pooledCache}function pc(s,o){o===null?ae(Yo,Yo.current):ae(Yo,o.pool)}function py(){var s=th();return s===null?null:{parent:bt._currentValue,pool:s}}var Hr=Error(i(460)),nh=Error(i(474)),mc=Error(i(542)),gc={then:function(){}};function my(s){return s=s.status,s==="fulfilled"||s==="rejected"}function gy(s,o,l){switch(l=s[l],l===void 0?s.push(o):l!==o&&(o.then(ti,ti),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,_y(s),s;default:if(typeof o.status=="string")o.then(ti,ti);else{if(s=at,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(c){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=c}},function(c){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,_y(s),s}throw Qo=o,Hr}}function $o(s){try{var o=s._init;return o(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Qo=l,Hr):l}}var Qo=null;function yy(){if(Qo===null)throw Error(i(459));var s=Qo;return Qo=null,s}function _y(s){if(s===Hr||s===mc)throw Error(i(483))}var zr=null,pl=0;function yc(s){var o=pl;return pl+=1,zr===null&&(zr=[]),gy(zr,s,o)}function ml(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function _c(s,o){throw o.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function vy(s){function o(B,F){if(s){var z=B.deletions;z===null?(B.deletions=[F],B.flags|=16):z.push(F)}}function l(B,F){if(!s)return null;for(;F!==null;)o(B,F),F=F.sibling;return null}function c(B){for(var F=new Map;B!==null;)B.key!==null?F.set(B.key,B):F.set(B.index,B),B=B.sibling;return F}function y(B,F){return B=Qi(B,F),B.index=0,B.sibling=null,B}function _(B,F,z){return B.index=z,s?(z=B.alternate,z!==null?(z=z.index,z<F?(B.flags|=67108866,F):z):(B.flags|=67108866,F)):(B.flags|=1048576,F)}function A(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function R(B,F,z,ne){return F===null||F.tag!==6?(F=zd(z,B.mode,ne),F.return=B,F):(F=y(F,z),F.return=B,F)}function k(B,F,z,ne){var ve=z.type;return ve===G?te(B,F,z.props.children,ne,z.key):F!==null&&(F.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===x&&$o(ve)===F.type)?(F=y(F,z.props),ml(F,z),F.return=B,F):(F=cc(z.type,z.key,z.props,null,B.mode,ne),ml(F,z),F.return=B,F)}function J(B,F,z,ne){return F===null||F.tag!==4||F.stateNode.containerInfo!==z.containerInfo||F.stateNode.implementation!==z.implementation?(F=Jd(z,B.mode,ne),F.return=B,F):(F=y(F,z.children||[]),F.return=B,F)}function te(B,F,z,ne,ve){return F===null||F.tag!==7?(F=Ho(z,B.mode,ne,ve),F.return=B,F):(F=y(F,z),F.return=B,F)}function ie(B,F,z){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=zd(""+F,B.mode,z),F.return=B,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return z=cc(F.type,F.key,F.props,null,B.mode,z),ml(z,F),z.return=B,z;case P:return F=Jd(F,B.mode,z),F.return=B,F;case x:return F=$o(F),ie(B,F,z)}if(nt(F)||q(F))return F=Ho(F,B.mode,z,null),F.return=B,F;if(typeof F.then=="function")return ie(B,yc(F),z);if(F.$$typeof===j)return ie(B,hc(B,F),z);_c(B,F)}return null}function K(B,F,z,ne){var ve=F!==null?F.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return ve!==null?null:R(B,F,""+z,ne);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case w:return z.key===ve?k(B,F,z,ne):null;case P:return z.key===ve?J(B,F,z,ne):null;case x:return z=$o(z),K(B,F,z,ne)}if(nt(z)||q(z))return ve!==null?null:te(B,F,z,ne,null);if(typeof z.then=="function")return K(B,F,yc(z),ne);if(z.$$typeof===j)return K(B,F,hc(B,z),ne);_c(B,z)}return null}function X(B,F,z,ne,ve){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return B=B.get(z)||null,R(F,B,""+ne,ve);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case w:return B=B.get(ne.key===null?z:ne.key)||null,k(F,B,ne,ve);case P:return B=B.get(ne.key===null?z:ne.key)||null,J(F,B,ne,ve);case x:return ne=$o(ne),X(B,F,z,ne,ve)}if(nt(ne)||q(ne))return B=B.get(z)||null,te(F,B,ne,ve,null);if(typeof ne.then=="function")return X(B,F,z,yc(ne),ve);if(ne.$$typeof===j)return X(B,F,z,hc(F,ne),ve);_c(F,ne)}return null}function ge(B,F,z,ne){for(var ve=null,Ke=null,ye=F,Ve=F=0,Fe=null;ye!==null&&Ve<z.length;Ve++){ye.index>Ve?(Fe=ye,ye=null):Fe=ye.sibling;var Ye=K(B,ye,z[Ve],ne);if(Ye===null){ye===null&&(ye=Fe);break}s&&ye&&Ye.alternate===null&&o(B,ye),F=_(Ye,F,Ve),Ke===null?ve=Ye:Ke.sibling=Ye,Ke=Ye,ye=Fe}if(Ve===z.length)return l(B,ye),He&&Xi(B,Ve),ve;if(ye===null){for(;Ve<z.length;Ve++)ye=ie(B,z[Ve],ne),ye!==null&&(F=_(ye,F,Ve),Ke===null?ve=ye:Ke.sibling=ye,Ke=ye);return He&&Xi(B,Ve),ve}for(ye=c(ye);Ve<z.length;Ve++)Fe=X(ye,B,Ve,z[Ve],ne),Fe!==null&&(s&&Fe.alternate!==null&&ye.delete(Fe.key===null?Ve:Fe.key),F=_(Fe,F,Ve),Ke===null?ve=Fe:Ke.sibling=Fe,Ke=Fe);return s&&ye.forEach(function(to){return o(B,to)}),He&&Xi(B,Ve),ve}function Ae(B,F,z,ne){if(z==null)throw Error(i(151));for(var ve=null,Ke=null,ye=F,Ve=F=0,Fe=null,Ye=z.next();ye!==null&&!Ye.done;Ve++,Ye=z.next()){ye.index>Ve?(Fe=ye,ye=null):Fe=ye.sibling;var to=K(B,ye,Ye.value,ne);if(to===null){ye===null&&(ye=Fe);break}s&&ye&&to.alternate===null&&o(B,ye),F=_(to,F,Ve),Ke===null?ve=to:Ke.sibling=to,Ke=to,ye=Fe}if(Ye.done)return l(B,ye),He&&Xi(B,Ve),ve;if(ye===null){for(;!Ye.done;Ve++,Ye=z.next())Ye=ie(B,Ye.value,ne),Ye!==null&&(F=_(Ye,F,Ve),Ke===null?ve=Ye:Ke.sibling=Ye,Ke=Ye);return He&&Xi(B,Ve),ve}for(ye=c(ye);!Ye.done;Ve++,Ye=z.next())Ye=X(ye,B,Ve,Ye.value,ne),Ye!==null&&(s&&Ye.alternate!==null&&ye.delete(Ye.key===null?Ve:Ye.key),F=_(Ye,F,Ve),Ke===null?ve=Ye:Ke.sibling=Ye,Ke=Ye);return s&&ye.forEach(function(IR){return o(B,IR)}),He&&Xi(B,Ve),ve}function rt(B,F,z,ne){if(typeof z=="object"&&z!==null&&z.type===G&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case w:e:{for(var ve=z.key;F!==null;){if(F.key===ve){if(ve=z.type,ve===G){if(F.tag===7){l(B,F.sibling),ne=y(F,z.props.children),ne.return=B,B=ne;break e}}else if(F.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===x&&$o(ve)===F.type){l(B,F.sibling),ne=y(F,z.props),ml(ne,z),ne.return=B,B=ne;break e}l(B,F);break}else o(B,F);F=F.sibling}z.type===G?(ne=Ho(z.props.children,B.mode,ne,z.key),ne.return=B,B=ne):(ne=cc(z.type,z.key,z.props,null,B.mode,ne),ml(ne,z),ne.return=B,B=ne)}return A(B);case P:e:{for(ve=z.key;F!==null;){if(F.key===ve)if(F.tag===4&&F.stateNode.containerInfo===z.containerInfo&&F.stateNode.implementation===z.implementation){l(B,F.sibling),ne=y(F,z.children||[]),ne.return=B,B=ne;break e}else{l(B,F);break}else o(B,F);F=F.sibling}ne=Jd(z,B.mode,ne),ne.return=B,B=ne}return A(B);case x:return z=$o(z),rt(B,F,z,ne)}if(nt(z))return ge(B,F,z,ne);if(q(z)){if(ve=q(z),typeof ve!="function")throw Error(i(150));return z=ve.call(z),Ae(B,F,z,ne)}if(typeof z.then=="function")return rt(B,F,yc(z),ne);if(z.$$typeof===j)return rt(B,F,hc(B,z),ne);_c(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,F!==null&&F.tag===6?(l(B,F.sibling),ne=y(F,z),ne.return=B,B=ne):(l(B,F),ne=zd(z,B.mode,ne),ne.return=B,B=ne),A(B)):l(B,F)}return function(B,F,z,ne){try{pl=0;var ve=rt(B,F,z,ne);return zr=null,ve}catch(ye){if(ye===Hr||ye===mc)throw ye;var Ke=In(29,ye,null,B.mode);return Ke.lanes=ne,Ke.return=B,Ke}finally{}}}var Xo=vy(!0),Ey=vy(!1),Os=!1;function ih(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sh(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Fs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Gs(s,o,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Xe&2)!==0){var y=c.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),c.pending=o,o=uc(s),iy(s,null,l),o}return lc(s,c,o,l),uc(s)}function gl(s,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var c=o.lanes;c&=s.pendingLanes,l|=c,o.lanes=l,Ha(s,l)}}function oh(s,o){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=A:_=_.next=A,l=l.next}while(l!==null);_===null?y=_=o:_=_.next=o}else y=_=o;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=o:s.next=o,l.lastBaseUpdate=o}var rh=!1;function yl(){if(rh){var s=Br;if(s!==null)throw s}}function _l(s,o,l,c){rh=!1;var y=s.updateQueue;Os=!1;var _=y.firstBaseUpdate,A=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var k=R,J=k.next;k.next=null,A===null?_=J:A.next=J,A=k;var te=s.alternate;te!==null&&(te=te.updateQueue,R=te.lastBaseUpdate,R!==A&&(R===null?te.firstBaseUpdate=J:R.next=J,te.lastBaseUpdate=k))}if(_!==null){var ie=y.baseState;A=0,te=J=k=null,R=_;do{var K=R.lane&-536870913,X=K!==R.lane;if(X?(Oe&K)===K:(c&K)===K){K!==0&&K===qr&&(rh=!0),te!==null&&(te=te.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ge=s,Ae=R;K=o;var rt=l;switch(Ae.tag){case 1:if(ge=Ae.payload,typeof ge=="function"){ie=ge.call(rt,ie,K);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ae.payload,K=typeof ge=="function"?ge.call(rt,ie,K):ge,K==null)break e;ie=E({},ie,K);break e;case 2:Os=!0}}K=R.callback,K!==null&&(s.flags|=64,X&&(s.flags|=8192),X=y.callbacks,X===null?y.callbacks=[K]:X.push(K))}else X={lane:K,tag:R.tag,payload:R.payload,callback:R.callback,next:null},te===null?(J=te=X,k=ie):te=te.next=X,A|=K;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;X=R,R=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);te===null&&(k=ie),y.baseState=k,y.firstBaseUpdate=J,y.lastBaseUpdate=te,_===null&&(y.shared.lanes=0),Js|=A,s.lanes=A,s.memoizedState=ie}}function Ty(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function Sy(s,o){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Ty(l[s],o)}var Jr=V(null),vc=V(0);function Ay(s,o){s=as,ae(vc,s),ae(Jr,o),as=s|o.baseLanes}function ah(){ae(vc,as),ae(Jr,Jr.current)}function lh(){as=vc.current,ee(Jr),ee(vc)}var wn=V(null),Hn=null;function qs(s){var o=s.alternate;ae(Et,Et.current&1),ae(wn,s),Hn===null&&(o===null||Jr.current!==null||o.memoizedState!==null)&&(Hn=s)}function uh(s){ae(Et,Et.current),ae(wn,s),Hn===null&&(Hn=s)}function Cy(s){s.tag===22?(ae(Et,Et.current),ae(wn,s),Hn===null&&(Hn=s)):Bs()}function Bs(){ae(Et,Et.current),ae(wn,wn.current)}function Rn(s){ee(wn),Hn===s&&(Hn=null),ee(Et)}var Et=V(0);function Ec(s){for(var o=s;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||mp(l)||gp(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Zi=0,Pe=null,st=null,Nt=null,Tc=!1,Kr=!1,Wo=!1,Sc=0,vl=0,Yr=null,mw=0;function gt(){throw Error(i(321))}function ch(s,o){if(o===null)return!1;for(var l=0;l<o.length&&l<s.length;l++)if(!Cn(s[l],o[l]))return!1;return!0}function fh(s,o,l,c,y,_){return Zi=_,Pe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Z.H=s===null||s.memoizedState===null?a_:wh,Wo=!1,_=l(c,y),Wo=!1,Kr&&(_=wy(o,l,c,y)),Iy(s),_}function Iy(s){Z.H=Sl;var o=st!==null&&st.next!==null;if(Zi=0,Nt=st=Pe=null,Tc=!1,vl=0,Yr=null,o)throw Error(i(300));s===null||xt||(s=s.dependencies,s!==null&&dc(s)&&(xt=!0))}function wy(s,o,l,c){Pe=s;var y=0;do{if(Kr&&(Yr=null),vl=0,Kr=!1,25<=y)throw Error(i(301));if(y+=1,Nt=st=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Z.H=l_,_=o(l,c)}while(Kr);return _}function gw(){var s=Z.H,o=s.useState()[0];return o=typeof o.then=="function"?El(o):o,s=s.useState()[0],(st!==null?st.memoizedState:null)!==s&&(Pe.flags|=1024),o}function dh(){var s=Sc!==0;return Sc=0,s}function hh(s,o,l){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~l}function ph(s){if(Tc){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Tc=!1}Zi=0,Nt=st=Pe=null,Kr=!1,vl=Sc=0,Yr=null}function cn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Pe.memoizedState=Nt=s:Nt=Nt.next=s,Nt}function Tt(){if(st===null){var s=Pe.alternate;s=s!==null?s.memoizedState:null}else s=st.next;var o=Nt===null?Pe.memoizedState:Nt.next;if(o!==null)Nt=o,st=s;else{if(s===null)throw Pe.alternate===null?Error(i(467)):Error(i(310));st=s,s={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Nt===null?Pe.memoizedState=Nt=s:Nt=Nt.next=s}return Nt}function Ac(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function El(s){var o=vl;return vl+=1,Yr===null&&(Yr=[]),s=gy(Yr,s,o),o=Pe,(Nt===null?o.memoizedState:Nt.next)===null&&(o=o.alternate,Z.H=o===null||o.memoizedState===null?a_:wh),s}function Cc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return El(s);if(s.$$typeof===j)return $t(s)}throw Error(i(438,String(s)))}function mh(s){var o=null,l=Pe.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var c=Pe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=Ac(),Pe.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(s),c=0;c<s;c++)l[c]=L;return o.index++,l}function es(s,o){return typeof o=="function"?o(s):o}function Ic(s){var o=Tt();return gh(o,st,s)}function gh(s,o,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,_=c.pending;if(_!==null){if(y!==null){var A=y.next;y.next=_.next,_.next=A}o.baseQueue=y=_,c.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{o=y.next;var R=A=null,k=null,J=o,te=!1;do{var ie=J.lane&-536870913;if(ie!==J.lane?(Oe&ie)===ie:(Zi&ie)===ie){var K=J.revertLane;if(K===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ie===qr&&(te=!0);else if((Zi&K)===K){J=J.next,K===qr&&(te=!0);continue}else ie={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(R=k=ie,A=_):k=k.next=ie,Pe.lanes|=K,Js|=K;ie=J.action,Wo&&l(_,ie),_=J.hasEagerState?J.eagerState:l(_,ie)}else K={lane:ie,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(R=k=K,A=_):k=k.next=K,Pe.lanes|=ie,Js|=ie;J=J.next}while(J!==null&&J!==o);if(k===null?A=_:k.next=R,!Cn(_,s.memoizedState)&&(xt=!0,te&&(l=Br,l!==null)))throw l;s.memoizedState=_,s.baseState=A,s.baseQueue=k,c.lastRenderedState=_}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function yh(s){var o=Tt(),l=o.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,_=o.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do _=s(_,A.action),A=A.next;while(A!==y);Cn(_,o.memoizedState)||(xt=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),l.lastRenderedState=_}return[_,c]}function Ry(s,o,l){var c=Pe,y=Tt(),_=He;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=o();var A=!Cn((st||y).memoizedState,l);if(A&&(y.memoizedState=l,xt=!0),y=y.queue,Eh(xy.bind(null,c,y,s),[s]),y.getSnapshot!==o||A||Nt!==null&&Nt.memoizedState.tag&1){if(c.flags|=2048,$r(9,{destroy:void 0},Ny.bind(null,c,y,l,o),null),at===null)throw Error(i(349));_||(Zi&127)!==0||by(c,o,l)}return l}function by(s,o,l){s.flags|=16384,s={getSnapshot:o,value:l},o=Pe.updateQueue,o===null?(o=Ac(),Pe.updateQueue=o,o.stores=[s]):(l=o.stores,l===null?o.stores=[s]:l.push(s))}function Ny(s,o,l,c){o.value=l,o.getSnapshot=c,My(o)&&Dy(s)}function xy(s,o,l){return l(function(){My(o)&&Dy(s)})}function My(s){var o=s.getSnapshot;s=s.value;try{var l=o();return!Cn(s,l)}catch{return!0}}function Dy(s){var o=Bo(s,2);o!==null&&vn(o,s,2)}function _h(s){var o=cn();if(typeof s=="function"){var l=s;if(s=l(),Wo){Pn(!0);try{l()}finally{Pn(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:s},o}function Py(s,o,l,c){return s.baseState=l,gh(s,st,typeof c=="function"?c:es)}function yw(s,o,l,c,y){if(bc(s))throw Error(i(485));if(s=o.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};Z.T!==null?l(!0):_.isTransition=!1,c(_),l=o.pending,l===null?(_.next=o.pending=_,Vy(o,_)):(_.next=l.next,o.pending=l.next=_)}}function Vy(s,o){var l=o.action,c=o.payload,y=s.state;if(o.isTransition){var _=Z.T,A={};Z.T=A;try{var R=l(y,c),k=Z.S;k!==null&&k(A,R),ky(s,o,R)}catch(J){vh(s,o,J)}finally{_!==null&&A.types!==null&&(_.types=A.types),Z.T=_}}else try{_=l(y,c),ky(s,o,_)}catch(J){vh(s,o,J)}}function ky(s,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Uy(s,o,c)},function(c){return vh(s,o,c)}):Uy(s,o,l)}function Uy(s,o,l){o.status="fulfilled",o.value=l,Ly(o),s.state=l,o=s.pending,o!==null&&(l=o.next,l===o?s.pending=null:(l=l.next,o.next=l,Vy(s,l)))}function vh(s,o,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=l,Ly(o),o=o.next;while(o!==c)}s.action=null}function Ly(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function Oy(s,o){return o}function Fy(s,o){if(He){var l=at.formState;if(l!==null){e:{var c=Pe;if(He){if(lt){t:{for(var y=lt,_=Bn;y.nodeType!==8;){if(!_){y=null;break t}if(y=zn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){lt=zn(y.nextSibling),c=y.data==="F!";break e}}Us(c)}c=!1}c&&(o=l[0])}}return l=cn(),l.memoizedState=l.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oy,lastRenderedState:o},l.queue=c,l=s_.bind(null,Pe,c),c.dispatch=l,c=_h(!1),_=Ih.bind(null,Pe,!1,c.queue),c=cn(),y={state:o,dispatch:null,action:s,pending:null},c.queue=y,l=yw.bind(null,Pe,y,_,l),y.dispatch=l,c.memoizedState=s,[o,l,!1]}function Gy(s){var o=Tt();return qy(o,st,s)}function qy(s,o,l){if(o=gh(s,o,Oy)[0],s=Ic(es)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=El(o)}catch(A){throw A===Hr?mc:A}else c=o;o=Tt();var y=o.queue,_=y.dispatch;return l!==o.memoizedState&&(Pe.flags|=2048,$r(9,{destroy:void 0},_w.bind(null,y,l),null)),[c,_,s]}function _w(s,o){s.action=o}function By(s){var o=Tt(),l=st;if(l!==null)return qy(o,l,s);Tt(),o=o.memoizedState,l=Tt();var c=l.queue.dispatch;return l.memoizedState=s,[o,c,!1]}function $r(s,o,l,c){return s={tag:s,create:l,deps:c,inst:o,next:null},o=Pe.updateQueue,o===null&&(o=Ac(),Pe.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,o.lastEffect=s),s}function Hy(){return Tt().memoizedState}function wc(s,o,l,c){var y=cn();Pe.flags|=s,y.memoizedState=$r(1|o,{destroy:void 0},l,c===void 0?null:c)}function Rc(s,o,l,c){var y=Tt();c=c===void 0?null:c;var _=y.memoizedState.inst;st!==null&&c!==null&&ch(c,st.memoizedState.deps)?y.memoizedState=$r(o,_,l,c):(Pe.flags|=s,y.memoizedState=$r(1|o,_,l,c))}function zy(s,o){wc(8390656,8,s,o)}function Eh(s,o){Rc(2048,8,s,o)}function vw(s){Pe.flags|=4;var o=Pe.updateQueue;if(o===null)o=Ac(),Pe.updateQueue=o,o.events=[s];else{var l=o.events;l===null?o.events=[s]:l.push(s)}}function Jy(s){var o=Tt().memoizedState;return vw({ref:o,nextImpl:s}),function(){if((Xe&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function Ky(s,o){return Rc(4,2,s,o)}function Yy(s,o){return Rc(4,4,s,o)}function $y(s,o){if(typeof o=="function"){s=s();var l=o(s);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Qy(s,o,l){l=l!=null?l.concat([s]):null,Rc(4,4,$y.bind(null,o,s),l)}function Th(){}function Xy(s,o){var l=Tt();o=o===void 0?null:o;var c=l.memoizedState;return o!==null&&ch(o,c[1])?c[0]:(l.memoizedState=[s,o],s)}function Wy(s,o){var l=Tt();o=o===void 0?null:o;var c=l.memoizedState;if(o!==null&&ch(o,c[1]))return c[0];if(c=s(),Wo){Pn(!0);try{s()}finally{Pn(!1)}}return l.memoizedState=[c,o],c}function Sh(s,o,l){return l===void 0||(Zi&1073741824)!==0&&(Oe&261930)===0?s.memoizedState=o:(s.memoizedState=l,s=j_(),Pe.lanes|=s,Js|=s,l)}function jy(s,o,l,c){return Cn(l,o)?l:Jr.current!==null?(s=Sh(s,l,c),Cn(s,o)||(xt=!0),s):(Zi&42)===0||(Zi&1073741824)!==0&&(Oe&261930)===0?(xt=!0,s.memoizedState=l):(s=j_(),Pe.lanes|=s,Js|=s,o)}function Zy(s,o,l,c,y){var _=ce.p;ce.p=_!==0&&8>_?_:8;var A=Z.T,R={};Z.T=R,Ih(s,!1,o,l);try{var k=y(),J=Z.S;if(J!==null&&J(R,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var te=pw(k,c);Tl(s,o,te,xn(s))}else Tl(s,o,c,xn(s))}catch(ie){Tl(s,o,{then:function(){},status:"rejected",reason:ie},xn())}finally{ce.p=_,A!==null&&R.types!==null&&(A.types=R.types),Z.T=A}}function Ew(){}function Ah(s,o,l,c){if(s.tag!==5)throw Error(i(476));var y=e_(s).queue;Zy(s,y,o,me,l===null?Ew:function(){return t_(s),l(c)})}function e_(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:me},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:l},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function t_(s){var o=e_(s);o.next===null&&(o=s.alternate.memoizedState),Tl(s,o.next.queue,{},xn())}function Ch(){return $t(Ol)}function n_(){return Tt().memoizedState}function i_(){return Tt().memoizedState}function Tw(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var l=xn();s=Fs(l);var c=Gs(o,s,l);c!==null&&(vn(c,o,l),gl(c,o,l)),o={cache:Zd()},s.payload=o;return}o=o.return}}function Sw(s,o,l){var c=xn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},bc(s)?o_(o,l):(l=Bd(s,o,l,c),l!==null&&(vn(l,s,c),r_(l,o,c)))}function s_(s,o,l){var c=xn();Tl(s,o,l,c)}function Tl(s,o,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(bc(s))o_(o,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var A=o.lastRenderedState,R=_(A,l);if(y.hasEagerState=!0,y.eagerState=R,Cn(R,A))return lc(s,o,y,0),at===null&&ac(),!1}catch{}finally{}if(l=Bd(s,o,y,c),l!==null)return vn(l,s,c),r_(l,o,c),!0}return!1}function Ih(s,o,l,c){if(c={lane:2,revertLane:ip(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},bc(s)){if(o)throw Error(i(479))}else o=Bd(s,l,c,2),o!==null&&vn(o,s,2)}function bc(s){var o=s.alternate;return s===Pe||o!==null&&o===Pe}function o_(s,o){Kr=Tc=!0;var l=s.pending;l===null?o.next=o:(o.next=l.next,l.next=o),s.pending=o}function r_(s,o,l){if((l&4194048)!==0){var c=o.lanes;c&=s.pendingLanes,l|=c,o.lanes=l,Ha(s,l)}}var Sl={readContext:$t,use:Cc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};Sl.useEffectEvent=gt;var a_={readContext:$t,use:Cc,useCallback:function(s,o){return cn().memoizedState=[s,o===void 0?null:o],s},useContext:$t,useEffect:zy,useImperativeHandle:function(s,o,l){l=l!=null?l.concat([s]):null,wc(4194308,4,$y.bind(null,o,s),l)},useLayoutEffect:function(s,o){return wc(4194308,4,s,o)},useInsertionEffect:function(s,o){wc(4,2,s,o)},useMemo:function(s,o){var l=cn();o=o===void 0?null:o;var c=s();if(Wo){Pn(!0);try{s()}finally{Pn(!1)}}return l.memoizedState=[c,o],c},useReducer:function(s,o,l){var c=cn();if(l!==void 0){var y=l(o);if(Wo){Pn(!0);try{l(o)}finally{Pn(!1)}}}else y=o;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=Sw.bind(null,Pe,s),[c.memoizedState,s]},useRef:function(s){var o=cn();return s={current:s},o.memoizedState=s},useState:function(s){s=_h(s);var o=s.queue,l=s_.bind(null,Pe,o);return o.dispatch=l,[s.memoizedState,l]},useDebugValue:Th,useDeferredValue:function(s,o){var l=cn();return Sh(l,s,o)},useTransition:function(){var s=_h(!1);return s=Zy.bind(null,Pe,s.queue,!0,!1),cn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,l){var c=Pe,y=cn();if(He){if(l===void 0)throw Error(i(407));l=l()}else{if(l=o(),at===null)throw Error(i(349));(Oe&127)!==0||by(c,o,l)}y.memoizedState=l;var _={value:l,getSnapshot:o};return y.queue=_,zy(xy.bind(null,c,_,s),[s]),c.flags|=2048,$r(9,{destroy:void 0},Ny.bind(null,c,_,l,o),null),l},useId:function(){var s=cn(),o=at.identifierPrefix;if(He){var l=ki,c=Vi;l=(c&~(1<<32-_t(c)-1)).toString(32)+l,o="_"+o+"R_"+l,l=Sc++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=mw++,o="_"+o+"r_"+l.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:Ch,useFormState:Fy,useActionState:Fy,useOptimistic:function(s){var o=cn();o.memoizedState=o.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=Ih.bind(null,Pe,!0,l),l.dispatch=o,[s,o]},useMemoCache:mh,useCacheRefresh:function(){return cn().memoizedState=Tw.bind(null,Pe)},useEffectEvent:function(s){var o=cn(),l={impl:s};return o.memoizedState=l,function(){if((Xe&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},wh={readContext:$t,use:Cc,useCallback:Xy,useContext:$t,useEffect:Eh,useImperativeHandle:Qy,useInsertionEffect:Ky,useLayoutEffect:Yy,useMemo:Wy,useReducer:Ic,useRef:Hy,useState:function(){return Ic(es)},useDebugValue:Th,useDeferredValue:function(s,o){var l=Tt();return jy(l,st.memoizedState,s,o)},useTransition:function(){var s=Ic(es)[0],o=Tt().memoizedState;return[typeof s=="boolean"?s:El(s),o]},useSyncExternalStore:Ry,useId:n_,useHostTransitionStatus:Ch,useFormState:Gy,useActionState:Gy,useOptimistic:function(s,o){var l=Tt();return Py(l,st,s,o)},useMemoCache:mh,useCacheRefresh:i_};wh.useEffectEvent=Jy;var l_={readContext:$t,use:Cc,useCallback:Xy,useContext:$t,useEffect:Eh,useImperativeHandle:Qy,useInsertionEffect:Ky,useLayoutEffect:Yy,useMemo:Wy,useReducer:yh,useRef:Hy,useState:function(){return yh(es)},useDebugValue:Th,useDeferredValue:function(s,o){var l=Tt();return st===null?Sh(l,s,o):jy(l,st.memoizedState,s,o)},useTransition:function(){var s=yh(es)[0],o=Tt().memoizedState;return[typeof s=="boolean"?s:El(s),o]},useSyncExternalStore:Ry,useId:n_,useHostTransitionStatus:Ch,useFormState:By,useActionState:By,useOptimistic:function(s,o){var l=Tt();return st!==null?Py(l,st,s,o):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:mh,useCacheRefresh:i_};l_.useEffectEvent=Jy;function Rh(s,o,l,c){o=s.memoizedState,l=l(c,o),l=l==null?o:E({},o,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var bh={enqueueSetState:function(s,o,l){s=s._reactInternals;var c=xn(),y=Fs(c);y.payload=o,l!=null&&(y.callback=l),o=Gs(s,y,c),o!==null&&(vn(o,s,c),gl(o,s,c))},enqueueReplaceState:function(s,o,l){s=s._reactInternals;var c=xn(),y=Fs(c);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=Gs(s,y,c),o!==null&&(vn(o,s,c),gl(o,s,c))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var l=xn(),c=Fs(l);c.tag=2,o!=null&&(c.callback=o),o=Gs(s,c,l),o!==null&&(vn(o,s,l),gl(o,s,l))}};function u_(s,o,l,c,y,_,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,_,A):o.prototype&&o.prototype.isPureReactComponent?!ll(l,c)||!ll(y,_):!0}function c_(s,o,l,c){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,c),o.state!==s&&bh.enqueueReplaceState(o,o.state,null)}function jo(s,o){var l=o;if("ref"in o){l={};for(var c in o)c!=="ref"&&(l[c]=o[c])}if(s=s.defaultProps){l===o&&(l=E({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function f_(s){rc(s)}function d_(s){console.error(s)}function h_(s){rc(s)}function Nc(s,o){try{var l=s.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function p_(s,o,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Nh(s,o,l){return l=Fs(l),l.tag=3,l.payload={element:null},l.callback=function(){Nc(s,o)},l}function m_(s){return s=Fs(s),s.tag=3,s}function g_(s,o,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;s.payload=function(){return y(_)},s.callback=function(){p_(o,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){p_(o,l,c),typeof y!="function"&&(Ks===null?Ks=new Set([this]):Ks.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function Aw(s,o,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=l.alternate,o!==null&&Gr(o,l,y,!0),l=wn.current,l!==null){switch(l.tag){case 31:case 13:return Hn===null?qc():l.alternate===null&&yt===0&&(yt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===gc?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([c]):o.add(c),ep(s,c,y)),!1;case 22:return l.flags|=65536,c===gc?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([c]):l.add(c)),ep(s,c,y)),!1}throw Error(i(435,l.tag))}return ep(s,c,y),qc(),!1}if(He)return o=wn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,c!==$d&&(s=Error(i(422),{cause:c}),fl(Fn(s,l)))):(c!==$d&&(o=Error(i(423),{cause:c}),fl(Fn(o,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=Fn(c,l),y=Nh(s.stateNode,c,y),oh(s,y),yt!==4&&(yt=2)),!1;var _=Error(i(520),{cause:c});if(_=Fn(_,l),xl===null?xl=[_]:xl.push(_),yt!==4&&(yt=2),o===null)return!0;c=Fn(c,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=Nh(l.stateNode,c,s),oh(l,s),!1;case 1:if(o=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ks===null||!Ks.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=m_(y),g_(y,s,l,c),oh(l,y),!1}l=l.return}while(l!==null);return!1}var xh=Error(i(461)),xt=!1;function Qt(s,o,l,c){o.child=s===null?Ey(o,null,l,c):Xo(o,s.child,l,c)}function y_(s,o,l,c,y){l=l.render;var _=o.ref;if("ref"in c){var A={};for(var R in c)R!=="ref"&&(A[R]=c[R])}else A=c;return Ko(o),c=fh(s,o,l,A,_,y),R=dh(),s!==null&&!xt?(hh(s,o,y),ts(s,o,y)):(He&&R&&Kd(o),o.flags|=1,Qt(s,o,c,y),o.child)}function __(s,o,l,c,y){if(s===null){var _=l.type;return typeof _=="function"&&!Hd(_)&&_.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=_,v_(s,o,_,c,y)):(s=cc(l.type,null,c,o,o.mode,y),s.ref=o.ref,s.return=o,o.child=s)}if(_=s.child,!Oh(s,y)){var A=_.memoizedProps;if(l=l.compare,l=l!==null?l:ll,l(A,c)&&s.ref===o.ref)return ts(s,o,y)}return o.flags|=1,s=Qi(_,c),s.ref=o.ref,s.return=o,o.child=s}function v_(s,o,l,c,y){if(s!==null){var _=s.memoizedProps;if(ll(_,c)&&s.ref===o.ref)if(xt=!1,o.pendingProps=c=_,Oh(s,y))(s.flags&131072)!==0&&(xt=!0);else return o.lanes=s.lanes,ts(s,o,y)}return Mh(s,o,l,c,y)}function E_(s,o,l,c){var y=c.children,_=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,s!==null){for(c=o.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,o.child=null;return T_(s,o,_,l,c)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&pc(o,_!==null?_.cachePool:null),_!==null?Ay(o,_):ah(),Cy(o);else return c=o.lanes=536870912,T_(s,o,_!==null?_.baseLanes|l:l,l,c)}else _!==null?(pc(o,_.cachePool),Ay(o,_),Bs(),o.memoizedState=null):(s!==null&&pc(o,null),ah(),Bs());return Qt(s,o,y,l),o.child}function Al(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function T_(s,o,l,c,y){var _=th();return _=_===null?null:{parent:bt._currentValue,pool:_},o.memoizedState={baseLanes:l,cachePool:_},s!==null&&pc(o,null),ah(),Cy(o),s!==null&&Gr(s,o,c,!0),o.childLanes=y,null}function xc(s,o){return o=Dc({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function S_(s,o,l){return Xo(o,s.child,null,l),s=xc(o,o.pendingProps),s.flags|=2,Rn(o),o.memoizedState=null,s}function Cw(s,o,l){var c=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(He){if(c.mode==="hidden")return s=xc(o,c),o.lanes=536870912,Al(null,s);if(uh(o),(s=lt)?(s=Vv(s,Bn),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Vs!==null?{id:Vi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},l=oy(s),l.return=o,o.child=l,Yt=o,lt=null)):s=null,s===null)throw Us(o);return o.lanes=536870912,null}return xc(o,c)}var _=s.memoizedState;if(_!==null){var A=_.dehydrated;if(uh(o),y)if(o.flags&256)o.flags&=-257,o=S_(s,o,l);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(i(558));else if(xt||Gr(s,o,l,!1),y=(l&s.childLanes)!==0,xt||y){if(c=at,c!==null&&(A=za(c,l),A!==0&&A!==_.retryLane))throw _.retryLane=A,Bo(s,A),vn(c,s,A),xh;qc(),o=S_(s,o,l)}else s=_.treeContext,lt=zn(A.nextSibling),Yt=o,He=!0,ks=null,Bn=!1,s!==null&&ly(o,s),o=xc(o,c),o.flags|=4096;return o}return s=Qi(s.child,{mode:c.mode,children:c.children}),s.ref=o.ref,o.child=s,s.return=o,s}function Mc(s,o){var l=o.ref;if(l===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(o.flags|=4194816)}}function Mh(s,o,l,c,y){return Ko(o),l=fh(s,o,l,c,void 0,y),c=dh(),s!==null&&!xt?(hh(s,o,y),ts(s,o,y)):(He&&c&&Kd(o),o.flags|=1,Qt(s,o,l,y),o.child)}function A_(s,o,l,c,y,_){return Ko(o),o.updateQueue=null,l=wy(o,c,l,y),Iy(s),c=dh(),s!==null&&!xt?(hh(s,o,_),ts(s,o,_)):(He&&c&&Kd(o),o.flags|=1,Qt(s,o,l,_),o.child)}function C_(s,o,l,c,y){if(Ko(o),o.stateNode===null){var _=Ur,A=l.contextType;typeof A=="object"&&A!==null&&(_=$t(A)),_=new l(c,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=bh,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=c,_.state=o.memoizedState,_.refs={},ih(o),A=l.contextType,_.context=typeof A=="object"&&A!==null?$t(A):Ur,_.state=o.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(Rh(o,l,A,c),_.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&bh.enqueueReplaceState(_,_.state,null),_l(o,c,_,y),yl(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(s===null){_=o.stateNode;var R=o.memoizedProps,k=jo(l,R);_.props=k;var J=_.context,te=l.contextType;A=Ur,typeof te=="object"&&te!==null&&(A=$t(te));var ie=l.getDerivedStateFromProps;te=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=o.pendingProps!==R,te||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||J!==A)&&c_(o,_,c,A),Os=!1;var K=o.memoizedState;_.state=K,_l(o,c,_,y),yl(),J=o.memoizedState,R||K!==J||Os?(typeof ie=="function"&&(Rh(o,l,ie,c),J=o.memoizedState),(k=Os||u_(o,l,k,c,K,J,A))?(te||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=J),_.props=c,_.state=J,_.context=A,c=k):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{_=o.stateNode,sh(s,o),A=o.memoizedProps,te=jo(l,A),_.props=te,ie=o.pendingProps,K=_.context,J=l.contextType,k=Ur,typeof J=="object"&&J!==null&&(k=$t(J)),R=l.getDerivedStateFromProps,(J=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ie||K!==k)&&c_(o,_,c,k),Os=!1,K=o.memoizedState,_.state=K,_l(o,c,_,y),yl();var X=o.memoizedState;A!==ie||K!==X||Os||s!==null&&s.dependencies!==null&&dc(s.dependencies)?(typeof R=="function"&&(Rh(o,l,R,c),X=o.memoizedState),(te=Os||u_(o,l,te,c,K,X,k)||s!==null&&s.dependencies!==null&&dc(s.dependencies))?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,X,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,X,k)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&K===s.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&K===s.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=X),_.props=c,_.state=X,_.context=k,c=te):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&K===s.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&K===s.memoizedState||(o.flags|=1024),c=!1)}return _=c,Mc(s,o),c=(o.flags&128)!==0,_||c?(_=o.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,s!==null&&c?(o.child=Xo(o,s.child,null,y),o.child=Xo(o,null,l,y)):Qt(s,o,l,y),o.memoizedState=_.state,s=o.child):s=ts(s,o,y),s}function I_(s,o,l,c){return zo(),o.flags|=256,Qt(s,o,l,c),o.child}var Dh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ph(s){return{baseLanes:s,cachePool:py()}}function Vh(s,o,l){return s=s!==null?s.childLanes&~l:0,o&&(s|=Nn),s}function w_(s,o,l){var c=o.pendingProps,y=!1,_=(o.flags&128)!==0,A;if((A=_)||(A=s!==null&&s.memoizedState===null?!1:(Et.current&2)!==0),A&&(y=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,s===null){if(He){if(y?qs(o):Bs(),(s=lt)?(s=Vv(s,Bn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Vs!==null?{id:Vi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},l=oy(s),l.return=o,o.child=l,Yt=o,lt=null)):s=null,s===null)throw Us(o);return gp(s)?o.lanes=32:o.lanes=536870912,null}var R=c.children;return c=c.fallback,y?(Bs(),y=o.mode,R=Dc({mode:"hidden",children:R},y),c=Ho(c,y,l,null),R.return=o,c.return=o,R.sibling=c,o.child=R,c=o.child,c.memoizedState=Ph(l),c.childLanes=Vh(s,A,l),o.memoizedState=Dh,Al(null,c)):(qs(o),kh(o,R))}var k=s.memoizedState;if(k!==null&&(R=k.dehydrated,R!==null)){if(_)o.flags&256?(qs(o),o.flags&=-257,o=Uh(s,o,l)):o.memoizedState!==null?(Bs(),o.child=s.child,o.flags|=128,o=null):(Bs(),R=c.fallback,y=o.mode,c=Dc({mode:"visible",children:c.children},y),R=Ho(R,y,l,null),R.flags|=2,c.return=o,R.return=o,c.sibling=R,o.child=c,Xo(o,s.child,null,l),c=o.child,c.memoizedState=Ph(l),c.childLanes=Vh(s,A,l),o.memoizedState=Dh,o=Al(null,c));else if(qs(o),gp(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var J=A.dgst;A=J,c=Error(i(419)),c.stack="",c.digest=A,fl({value:c,source:null,stack:null}),o=Uh(s,o,l)}else if(xt||Gr(s,o,l,!1),A=(l&s.childLanes)!==0,xt||A){if(A=at,A!==null&&(c=za(A,l),c!==0&&c!==k.retryLane))throw k.retryLane=c,Bo(s,c),vn(A,s,c),xh;mp(R)||qc(),o=Uh(s,o,l)}else mp(R)?(o.flags|=192,o.child=s.child,o=null):(s=k.treeContext,lt=zn(R.nextSibling),Yt=o,He=!0,ks=null,Bn=!1,s!==null&&ly(o,s),o=kh(o,c.children),o.flags|=4096);return o}return y?(Bs(),R=c.fallback,y=o.mode,k=s.child,J=k.sibling,c=Qi(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,J!==null?R=Qi(J,R):(R=Ho(R,y,l,null),R.flags|=2),R.return=o,c.return=o,c.sibling=R,o.child=c,Al(null,c),c=o.child,R=s.child.memoizedState,R===null?R=Ph(l):(y=R.cachePool,y!==null?(k=bt._currentValue,y=y.parent!==k?{parent:k,pool:k}:y):y=py(),R={baseLanes:R.baseLanes|l,cachePool:y}),c.memoizedState=R,c.childLanes=Vh(s,A,l),o.memoizedState=Dh,Al(s.child,c)):(qs(o),l=s.child,s=l.sibling,l=Qi(l,{mode:"visible",children:c.children}),l.return=o,l.sibling=null,s!==null&&(A=o.deletions,A===null?(o.deletions=[s],o.flags|=16):A.push(s)),o.child=l,o.memoizedState=null,l)}function kh(s,o){return o=Dc({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Dc(s,o){return s=In(22,s,null,o),s.lanes=0,s}function Uh(s,o,l){return Xo(o,s.child,null,l),s=kh(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function R_(s,o,l){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o),Wd(s.return,o,l)}function Lh(s,o,l,c,y,_){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:_}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=y,A.treeForkCount=_)}function b_(s,o,l){var c=o.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var A=Et.current,R=(A&2)!==0;if(R?(A=A&1|2,o.flags|=128):A&=1,ae(Et,A),Qt(s,o,c,l),c=He?cl:0,!R&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&R_(s,l,o);else if(s.tag===19)R_(s,l,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=o.child,y=null;l!==null;)s=l.alternate,s!==null&&Ec(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=o.child,o.child=null):(y=l.sibling,l.sibling=null),Lh(o,!1,y,l,_,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=o.child,o.child=null;y!==null;){if(s=y.alternate,s!==null&&Ec(s)===null){o.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}Lh(o,!0,l,null,_,c);break;case"together":Lh(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function ts(s,o,l){if(s!==null&&(o.dependencies=s.dependencies),Js|=o.lanes,(l&o.childLanes)===0)if(s!==null){if(Gr(s,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,l=Qi(s,s.pendingProps),o.child=l,l.return=o;s.sibling!==null;)s=s.sibling,l=l.sibling=Qi(s,s.pendingProps),l.return=o;l.sibling=null}return o.child}function Oh(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&dc(s)))}function Iw(s,o,l){switch(o.tag){case 3:Vt(o,o.stateNode.containerInfo),Ls(o,bt,s.memoizedState.cache),zo();break;case 27:case 5:Co(o);break;case 4:Vt(o,o.stateNode.containerInfo);break;case 10:Ls(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,uh(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(qs(o),o.flags|=128,null):(l&o.child.childLanes)!==0?w_(s,o,l):(qs(o),s=ts(s,o,l),s!==null?s.sibling:null);qs(o);break;case 19:var y=(s.flags&128)!==0;if(c=(l&o.childLanes)!==0,c||(Gr(s,o,l,!1),c=(l&o.childLanes)!==0),y){if(c)return b_(s,o,l);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ae(Et,Et.current),c)break;return null;case 22:return o.lanes=0,E_(s,o,l,o.pendingProps);case 24:Ls(o,bt,s.memoizedState.cache)}return ts(s,o,l)}function N_(s,o,l){if(s!==null)if(s.memoizedProps!==o.pendingProps)xt=!0;else{if(!Oh(s,l)&&(o.flags&128)===0)return xt=!1,Iw(s,o,l);xt=(s.flags&131072)!==0}else xt=!1,He&&(o.flags&1048576)!==0&&ay(o,cl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(s=$o(o.elementType),o.type=s,typeof s=="function")Hd(s)?(c=jo(s,c),o.tag=1,o=C_(null,o,s,c,l)):(o.tag=0,o=Mh(null,o,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===oe){o.tag=11,o=y_(null,o,s,c,l);break e}else if(y===N){o.tag=14,o=__(null,o,s,c,l);break e}}throw o=xe(s)||s,Error(i(306,o,""))}}return o;case 0:return Mh(s,o,o.type,o.pendingProps,l);case 1:return c=o.type,y=jo(c,o.pendingProps),C_(s,o,c,y,l);case 3:e:{if(Vt(o,o.stateNode.containerInfo),s===null)throw Error(i(387));c=o.pendingProps;var _=o.memoizedState;y=_.element,sh(s,o),_l(o,c,null,l);var A=o.memoizedState;if(c=A.cache,Ls(o,bt,c),c!==_.cache&&jd(o,[bt],l,!0),yl(),c=A.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=I_(s,o,c,l);break e}else if(c!==y){y=Fn(Error(i(424)),o),fl(y),o=I_(s,o,c,l);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(lt=zn(s.firstChild),Yt=o,He=!0,ks=null,Bn=!0,l=Ey(o,null,c,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(zo(),c===y){o=ts(s,o,l);break e}Qt(s,o,c,l)}o=o.child}return o;case 26:return Mc(s,o),s===null?(l=Gv(o.type,null,o.pendingProps,null))?o.memoizedState=l:He||(l=o.type,s=o.pendingProps,c=$c(Me.current).createElement(l),c[It]=o,c[Ft]=s,Xt(c,l,s),wt(c),o.stateNode=c):o.memoizedState=Gv(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Co(o),s===null&&He&&(c=o.stateNode=Lv(o.type,o.pendingProps,Me.current),Yt=o,Bn=!0,y=lt,Xs(o.type)?(yp=y,lt=zn(c.firstChild)):lt=y),Qt(s,o,o.pendingProps.children,l),Mc(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&He&&((y=c=lt)&&(c=tR(c,o.type,o.pendingProps,Bn),c!==null?(o.stateNode=c,Yt=o,lt=zn(c.firstChild),Bn=!1,y=!0):y=!1),y||Us(o)),Co(o),y=o.type,_=o.pendingProps,A=s!==null?s.memoizedProps:null,c=_.children,dp(y,_)?c=null:A!==null&&dp(y,A)&&(o.flags|=32),o.memoizedState!==null&&(y=fh(s,o,gw,null,null,l),Ol._currentValue=y),Mc(s,o),Qt(s,o,c,l),o.child;case 6:return s===null&&He&&((s=l=lt)&&(l=nR(l,o.pendingProps,Bn),l!==null?(o.stateNode=l,Yt=o,lt=null,s=!0):s=!1),s||Us(o)),null;case 13:return w_(s,o,l);case 4:return Vt(o,o.stateNode.containerInfo),c=o.pendingProps,s===null?o.child=Xo(o,null,c,l):Qt(s,o,c,l),o.child;case 11:return y_(s,o,o.type,o.pendingProps,l);case 7:return Qt(s,o,o.pendingProps,l),o.child;case 8:return Qt(s,o,o.pendingProps.children,l),o.child;case 12:return Qt(s,o,o.pendingProps.children,l),o.child;case 10:return c=o.pendingProps,Ls(o,o.type,c.value),Qt(s,o,c.children,l),o.child;case 9:return y=o.type._context,c=o.pendingProps.children,Ko(o),y=$t(y),c=c(y),o.flags|=1,Qt(s,o,c,l),o.child;case 14:return __(s,o,o.type,o.pendingProps,l);case 15:return v_(s,o,o.type,o.pendingProps,l);case 19:return b_(s,o,l);case 31:return Cw(s,o,l);case 22:return E_(s,o,l,o.pendingProps);case 24:return Ko(o),c=$t(bt),s===null?(y=th(),y===null&&(y=at,_=Zd(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),o.memoizedState={parent:c,cache:y},ih(o),Ls(o,bt,y)):((s.lanes&l)!==0&&(sh(s,o),_l(o,null,null,l),yl()),y=s.memoizedState,_=o.memoizedState,y.parent!==c?(y={parent:c,cache:c},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),Ls(o,bt,c)):(c=_.cache,Ls(o,bt,c),c!==y.cache&&jd(o,[bt],l,!0))),Qt(s,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function ns(s){s.flags|=4}function Fh(s,o,l,c,y){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(nv())s.flags|=8192;else throw Qo=gc,nh}else s.flags&=-16777217}function x_(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Jv(o))if(nv())s.flags|=8192;else throw Qo=gc,nh}function Pc(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Fu():536870912,s.lanes|=o,jr|=o)}function Cl(s,o){if(!He)switch(s.tailMode){case"hidden":o=s.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ut(s){var o=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(o)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,o}function ww(s,o,l){var c=o.pendingProps;switch(Yd(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(o),null;case 1:return ut(o),null;case 3:return l=o.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),ji(bt),ft(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Fr(o)?ns(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Qd())),ut(o),null;case 26:var y=o.type,_=o.memoizedState;return s===null?(ns(o),_!==null?(ut(o),x_(o,_)):(ut(o),Fh(o,y,null,c,l))):_?_!==s.memoizedState?(ns(o),ut(o),x_(o,_)):(ut(o),o.flags&=-16777217):(s=s.memoizedProps,s!==c&&ns(o),ut(o),Fh(o,y,s,c,l)),null;case 27:if(yr(o),l=Me.current,y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&ns(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return ut(o),null}s=ue.current,Fr(o)?uy(o):(s=Lv(y,c,l),o.stateNode=s,ns(o))}return ut(o),null;case 5:if(yr(o),y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&ns(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return ut(o),null}if(_=ue.current,Fr(o))uy(o);else{var A=$c(Me.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}_[It]=o,_[Ft]=c;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=_;e:switch(Xt(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ns(o)}}return ut(o),Fh(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,l),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==c&&ns(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(i(166));if(s=Me.current,Fr(o)){if(s=o.stateNode,l=o.memoizedProps,c=null,y=Yt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[It]=o,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||wv(s.nodeValue,l)),s||Us(o,!0)}else s=$c(s).createTextNode(c),s[It]=o,o.stateNode=s}return ut(o),null;case 31:if(l=o.memoizedState,s===null||s.memoizedState!==null){if(c=Fr(o),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[It]=o}else zo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ut(o),s=!1}else l=Qd(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return o.flags&256?(Rn(o),o):(Rn(o),null);if((o.flags&128)!==0)throw Error(i(558))}return ut(o),null;case 13:if(c=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Fr(o),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[It]=o}else zo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ut(o),y=!1}else y=Qd(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Rn(o),o):(Rn(o),null)}return Rn(o),(o.flags&128)!==0?(o.lanes=l,o):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=o.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),l!==s&&l&&(o.child.flags|=8192),Pc(o,o.updateQueue),ut(o),null);case 4:return ft(),s===null&&ap(o.stateNode.containerInfo),ut(o),null;case 10:return ji(o.type),ut(o),null;case 19:if(ee(Et),c=o.memoizedState,c===null)return ut(o),null;if(y=(o.flags&128)!==0,_=c.rendering,_===null)if(y)Cl(c,!1);else{if(yt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(_=Ec(s),_!==null){for(o.flags|=128,Cl(c,!1),s=_.updateQueue,o.updateQueue=s,Pc(o,s),o.subtreeFlags=0,s=l,l=o.child;l!==null;)sy(l,s),l=l.sibling;return ae(Et,Et.current&1|2),He&&Xi(o,c.treeForkCount),o.child}s=s.sibling}c.tail!==null&&ln()>Oc&&(o.flags|=128,y=!0,Cl(c,!1),o.lanes=4194304)}else{if(!y)if(s=Ec(_),s!==null){if(o.flags|=128,y=!0,s=s.updateQueue,o.updateQueue=s,Pc(o,s),Cl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!He)return ut(o),null}else 2*ln()-c.renderingStartTime>Oc&&l!==536870912&&(o.flags|=128,y=!0,Cl(c,!1),o.lanes=4194304);c.isBackwards?(_.sibling=o.child,o.child=_):(s=c.last,s!==null?s.sibling=_:o.child=_,c.last=_)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=ln(),s.sibling=null,l=Et.current,ae(Et,y?l&1|2:l&1),He&&Xi(o,c.treeForkCount),s):(ut(o),null);case 22:case 23:return Rn(o),lh(),c=o.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(l&536870912)!==0&&(o.flags&128)===0&&(ut(o),o.subtreeFlags&6&&(o.flags|=8192)):ut(o),l=o.updateQueue,l!==null&&Pc(o,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==l&&(o.flags|=2048),s!==null&&ee(Yo),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),ji(bt),ut(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function Rw(s,o){switch(Yd(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return ji(bt),ft(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return yr(o),null;case 31:if(o.memoizedState!==null){if(Rn(o),o.alternate===null)throw Error(i(340));zo()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(Rn(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));zo()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return ee(Et),null;case 4:return ft(),null;case 10:return ji(o.type),null;case 22:case 23:return Rn(o),lh(),s!==null&&ee(Yo),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return ji(bt),null;case 25:return null;default:return null}}function M_(s,o){switch(Yd(o),o.tag){case 3:ji(bt),ft();break;case 26:case 27:case 5:yr(o);break;case 4:ft();break;case 31:o.memoizedState!==null&&Rn(o);break;case 13:Rn(o);break;case 19:ee(Et);break;case 10:ji(o.type);break;case 22:case 23:Rn(o),lh(),s!==null&&ee(Yo);break;case 24:ji(bt)}}function Il(s,o){try{var l=o.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var _=l.create,A=l.inst;c=_(),A.destroy=c}l=l.next}while(l!==y)}}catch(R){tt(o,o.return,R)}}function Hs(s,o,l){try{var c=o.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&s)===s){var A=c.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,y=o;var k=l,J=R;try{J()}catch(te){tt(y,k,te)}}}c=c.next}while(c!==_)}}catch(te){tt(o,o.return,te)}}function D_(s){var o=s.updateQueue;if(o!==null){var l=s.stateNode;try{Sy(o,l)}catch(c){tt(s,s.return,c)}}}function P_(s,o,l){l.props=jo(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){tt(s,o,c)}}function wl(s,o){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){tt(s,o,y)}}function Ui(s,o){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){tt(s,o,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){tt(s,o,y)}else l.current=null}function V_(s){var o=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){tt(s,s.return,y)}}function Gh(s,o,l){try{var c=s.stateNode;Qw(c,s.type,l,o),c[Ft]=o}catch(y){tt(s,s.return,y)}}function k_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Xs(s.type)||s.tag===4}function qh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||k_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Xs(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Bh(s,o,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(s),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=ti));else if(c!==4&&(c===27&&Xs(s.type)&&(l=s.stateNode,o=null),s=s.child,s!==null))for(Bh(s,o,l),s=s.sibling;s!==null;)Bh(s,o,l),s=s.sibling}function Vc(s,o,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?l.insertBefore(s,o):l.appendChild(s);else if(c!==4&&(c===27&&Xs(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Vc(s,o,l),s=s.sibling;s!==null;)Vc(s,o,l),s=s.sibling}function U_(s){var o=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);Xt(o,c,l),o[It]=s,o[Ft]=l}catch(_){tt(s,s.return,_)}}var is=!1,Mt=!1,Hh=!1,L_=typeof WeakSet=="function"?WeakSet:Set,qt=null;function bw(s,o){if(s=s.containerInfo,cp=tf,s=Qg(s),Ud(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var A=0,R=-1,k=-1,J=0,te=0,ie=s,K=null;t:for(;;){for(var X;ie!==l||y!==0&&ie.nodeType!==3||(R=A+y),ie!==_||c!==0&&ie.nodeType!==3||(k=A+c),ie.nodeType===3&&(A+=ie.nodeValue.length),(X=ie.firstChild)!==null;)K=ie,ie=X;for(;;){if(ie===s)break t;if(K===l&&++J===y&&(R=A),K===_&&++te===c&&(k=A),(X=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=X}l=R===-1||k===-1?null:{start:R,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(fp={focusedElem:s,selectionRange:l},tf=!1,qt=o;qt!==null;)if(o=qt,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,qt=s;else for(;qt!==null;){switch(o=qt,_=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,l=o,y=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var ge=jo(l.type,y);s=c.getSnapshotBeforeUpdate(ge,_),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ae){tt(l,l.return,Ae)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,l=s.nodeType,l===9)pp(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":pp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,qt=s;break}qt=o.return}}function O_(s,o,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:os(s,l),c&4&&Il(5,l);break;case 1:if(os(s,l),c&4)if(s=l.stateNode,o===null)try{s.componentDidMount()}catch(A){tt(l,l.return,A)}else{var y=jo(l.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(y,o,s.__reactInternalSnapshotBeforeUpdate)}catch(A){tt(l,l.return,A)}}c&64&&D_(l),c&512&&wl(l,l.return);break;case 3:if(os(s,l),c&64&&(s=l.updateQueue,s!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{Sy(s,o)}catch(A){tt(l,l.return,A)}}break;case 27:o===null&&c&4&&U_(l);case 26:case 5:os(s,l),o===null&&c&4&&V_(l),c&512&&wl(l,l.return);break;case 12:os(s,l);break;case 31:os(s,l),c&4&&q_(s,l);break;case 13:os(s,l),c&4&&B_(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=Lw.bind(null,l),iR(s,l))));break;case 22:if(c=l.memoizedState!==null||is,!c){o=o!==null&&o.memoizedState!==null||Mt,y=is;var _=Mt;is=c,(Mt=o)&&!_?rs(s,l,(l.subtreeFlags&8772)!==0):os(s,l),is=y,Mt=_}break;case 30:break;default:os(s,l)}}function F_(s){var o=s.alternate;o!==null&&(s.alternate=null,F_(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Sr(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ht=null,mn=!1;function ss(s,o,l){for(l=l.child;l!==null;)G_(s,o,l),l=l.sibling}function G_(s,o,l){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Wn,l)}catch{}switch(l.tag){case 26:Mt||Ui(l,o),ss(s,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Mt||Ui(l,o);var c=ht,y=mn;Xs(l.type)&&(ht=l.stateNode,mn=!1),ss(s,o,l),kl(l.stateNode),ht=c,mn=y;break;case 5:Mt||Ui(l,o);case 6:if(c=ht,y=mn,ht=null,ss(s,o,l),ht=c,mn=y,ht!==null)if(mn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(l.stateNode)}catch(_){tt(l,o,_)}else try{ht.removeChild(l.stateNode)}catch(_){tt(l,o,_)}break;case 18:ht!==null&&(mn?(s=ht,Dv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),ra(s)):Dv(ht,l.stateNode));break;case 4:c=ht,y=mn,ht=l.stateNode.containerInfo,mn=!0,ss(s,o,l),ht=c,mn=y;break;case 0:case 11:case 14:case 15:Hs(2,l,o),Mt||Hs(4,l,o),ss(s,o,l);break;case 1:Mt||(Ui(l,o),c=l.stateNode,typeof c.componentWillUnmount=="function"&&P_(l,o,c)),ss(s,o,l);break;case 21:ss(s,o,l);break;case 22:Mt=(c=Mt)||l.memoizedState!==null,ss(s,o,l),Mt=c;break;default:ss(s,o,l)}}function q_(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ra(s)}catch(l){tt(o,o.return,l)}}}function B_(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ra(s)}catch(l){tt(o,o.return,l)}}function Nw(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new L_),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new L_),o;default:throw Error(i(435,s.tag))}}function kc(s,o){var l=Nw(s);o.forEach(function(c){if(!l.has(c)){l.add(c);var y=Ow.bind(null,s,c);c.then(y,y)}})}function gn(s,o){var l=o.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],_=s,A=o,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(Xs(R.type)){ht=R.stateNode,mn=!1;break e}break;case 5:ht=R.stateNode,mn=!1;break e;case 3:case 4:ht=R.stateNode.containerInfo,mn=!0;break e}R=R.return}if(ht===null)throw Error(i(160));G_(_,A,y),ht=null,mn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)H_(o,s),o=o.sibling}var ai=null;function H_(s,o){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:gn(o,s),yn(s),c&4&&(Hs(3,s,s.return),Il(3,s),Hs(5,s,s.return));break;case 1:gn(o,s),yn(s),c&512&&(Mt||l===null||Ui(l,l.return)),c&64&&is&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=ai;if(gn(o,s),yn(s),c&512&&(Mt||l===null||Ui(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Si]||_[It]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),Xt(_,c,l),_[It]=s,wt(_),c=_;break e;case"link":var A=Hv("link","href",y).get(c+(l.href||""));if(A){for(var R=0;R<A.length;R++)if(_=A[R],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(R,1);break t}}_=y.createElement(c),Xt(_,c,l),y.head.appendChild(_);break;case"meta":if(A=Hv("meta","content",y).get(c+(l.content||""))){for(R=0;R<A.length;R++)if(_=A[R],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(R,1);break t}}_=y.createElement(c),Xt(_,c,l),y.head.appendChild(_);break;default:throw Error(i(468,c))}_[It]=s,wt(_),c=_}s.stateNode=c}else zv(y,s.type,s.stateNode);else s.stateNode=Bv(y,c,s.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?zv(y,s.type,s.stateNode):Bv(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Gh(s,s.memoizedProps,l.memoizedProps)}break;case 27:gn(o,s),yn(s),c&512&&(Mt||l===null||Ui(l,l.return)),l!==null&&c&4&&Gh(s,s.memoizedProps,l.memoizedProps);break;case 5:if(gn(o,s),yn(s),c&512&&(Mt||l===null||Ui(l,l.return)),s.flags&32){y=s.stateNode;try{pn(y,"")}catch(ge){tt(s,s.return,ge)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,Gh(s,y,l!==null?l.memoizedProps:y)),c&1024&&(Hh=!0);break;case 6:if(gn(o,s),yn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(ge){tt(s,s.return,ge)}}break;case 3:if(Wc=null,y=ai,ai=Qc(o.containerInfo),gn(o,s),ai=y,yn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{ra(o.containerInfo)}catch(ge){tt(s,s.return,ge)}Hh&&(Hh=!1,z_(s));break;case 4:c=ai,ai=Qc(s.stateNode.containerInfo),gn(o,s),yn(s),ai=c;break;case 12:gn(o,s),yn(s);break;case 31:gn(o,s),yn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,kc(s,c)));break;case 13:gn(o,s),yn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Lc=ln()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,kc(s,c)));break;case 22:y=s.memoizedState!==null;var k=l!==null&&l.memoizedState!==null,J=is,te=Mt;if(is=J||y,Mt=te||k,gn(o,s),Mt=te,is=J,yn(s),c&8192)e:for(o=s.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(l===null||k||is||Mt||Zo(s)),l=null,o=s;;){if(o.tag===5||o.tag===26){if(l===null){k=l=o;try{if(_=k.stateNode,y)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=k.stateNode;var ie=k.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;R.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ge){tt(k,k.return,ge)}}}else if(o.tag===6){if(l===null){k=o;try{k.stateNode.nodeValue=y?"":k.memoizedProps}catch(ge){tt(k,k.return,ge)}}}else if(o.tag===18){if(l===null){k=o;try{var X=k.stateNode;y?Pv(X,!0):Pv(k.stateNode,!1)}catch(ge){tt(k,k.return,ge)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,kc(s,l))));break;case 19:gn(o,s),yn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,kc(s,c)));break;case 30:break;case 21:break;default:gn(o,s),yn(s)}}function yn(s){var o=s.flags;if(o&2){try{for(var l,c=s.return;c!==null;){if(k_(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=qh(s);Vc(s,_,y);break;case 5:var A=l.stateNode;l.flags&32&&(pn(A,""),l.flags&=-33);var R=qh(s);Vc(s,R,A);break;case 3:case 4:var k=l.stateNode.containerInfo,J=qh(s);Bh(s,J,k);break;default:throw Error(i(161))}}catch(te){tt(s,s.return,te)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function z_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;z_(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function os(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)O_(s,o.alternate,o),o=o.sibling}function Zo(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Hs(4,o,o.return),Zo(o);break;case 1:Ui(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&P_(o,o.return,l),Zo(o);break;case 27:kl(o.stateNode);case 26:case 5:Ui(o,o.return),Zo(o);break;case 22:o.memoizedState===null&&Zo(o);break;case 30:Zo(o);break;default:Zo(o)}s=s.sibling}}function rs(s,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,y=s,_=o,A=_.flags;switch(_.tag){case 0:case 11:case 15:rs(y,_,l),Il(4,_);break;case 1:if(rs(y,_,l),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){tt(c,c.return,J)}if(c=_,y=c.updateQueue,y!==null){var R=c.stateNode;try{var k=y.shared.hiddenCallbacks;if(k!==null)for(y.shared.hiddenCallbacks=null,y=0;y<k.length;y++)Ty(k[y],R)}catch(J){tt(c,c.return,J)}}l&&A&64&&D_(_),wl(_,_.return);break;case 27:U_(_);case 26:case 5:rs(y,_,l),l&&c===null&&A&4&&V_(_),wl(_,_.return);break;case 12:rs(y,_,l);break;case 31:rs(y,_,l),l&&A&4&&q_(y,_);break;case 13:rs(y,_,l),l&&A&4&&B_(y,_);break;case 22:_.memoizedState===null&&rs(y,_,l),wl(_,_.return);break;case 30:break;default:rs(y,_,l)}o=o.sibling}}function zh(s,o){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&dl(l))}function Jh(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&dl(s))}function li(s,o,l,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)J_(s,o,l,c),o=o.sibling}function J_(s,o,l,c){var y=o.flags;switch(o.tag){case 0:case 11:case 15:li(s,o,l,c),y&2048&&Il(9,o);break;case 1:li(s,o,l,c);break;case 3:li(s,o,l,c),y&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&dl(s)));break;case 12:if(y&2048){li(s,o,l,c),s=o.stateNode;try{var _=o.memoizedProps,A=_.id,R=_.onPostCommit;typeof R=="function"&&R(A,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(k){tt(o,o.return,k)}}else li(s,o,l,c);break;case 31:li(s,o,l,c);break;case 13:li(s,o,l,c);break;case 23:break;case 22:_=o.stateNode,A=o.alternate,o.memoizedState!==null?_._visibility&2?li(s,o,l,c):Rl(s,o):_._visibility&2?li(s,o,l,c):(_._visibility|=2,Qr(s,o,l,c,(o.subtreeFlags&10256)!==0||!1)),y&2048&&zh(A,o);break;case 24:li(s,o,l,c),y&2048&&Jh(o.alternate,o);break;default:li(s,o,l,c)}}function Qr(s,o,l,c,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=s,A=o,R=l,k=c,J=A.flags;switch(A.tag){case 0:case 11:case 15:Qr(_,A,R,k,y),Il(8,A);break;case 23:break;case 22:var te=A.stateNode;A.memoizedState!==null?te._visibility&2?Qr(_,A,R,k,y):Rl(_,A):(te._visibility|=2,Qr(_,A,R,k,y)),y&&J&2048&&zh(A.alternate,A);break;case 24:Qr(_,A,R,k,y),y&&J&2048&&Jh(A.alternate,A);break;default:Qr(_,A,R,k,y)}o=o.sibling}}function Rl(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=s,c=o,y=c.flags;switch(c.tag){case 22:Rl(l,c),y&2048&&zh(c.alternate,c);break;case 24:Rl(l,c),y&2048&&Jh(c.alternate,c);break;default:Rl(l,c)}o=o.sibling}}var bl=8192;function Xr(s,o,l){if(s.subtreeFlags&bl)for(s=s.child;s!==null;)K_(s,o,l),s=s.sibling}function K_(s,o,l){switch(s.tag){case 26:Xr(s,o,l),s.flags&bl&&s.memoizedState!==null&&mR(l,ai,s.memoizedState,s.memoizedProps);break;case 5:Xr(s,o,l);break;case 3:case 4:var c=ai;ai=Qc(s.stateNode.containerInfo),Xr(s,o,l),ai=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=bl,bl=16777216,Xr(s,o,l),bl=c):Xr(s,o,l));break;default:Xr(s,o,l)}}function Y_(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Nl(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];qt=c,Q_(c,s)}Y_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)$_(s),s=s.sibling}function $_(s){switch(s.tag){case 0:case 11:case 15:Nl(s),s.flags&2048&&Hs(9,s,s.return);break;case 3:Nl(s);break;case 12:Nl(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Uc(s)):Nl(s);break;default:Nl(s)}}function Uc(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];qt=c,Q_(c,s)}Y_(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Hs(8,o,o.return),Uc(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Uc(o));break;default:Uc(o)}s=s.sibling}}function Q_(s,o){for(;qt!==null;){var l=qt;switch(l.tag){case 0:case 11:case 15:Hs(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:dl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,qt=c;else e:for(l=s;qt!==null;){c=qt;var y=c.sibling,_=c.return;if(F_(c),c===l){qt=null;break e}if(y!==null){y.return=_,qt=y;break e}qt=_}}}var xw={getCacheForType:function(s){var o=$t(bt),l=o.data.get(s);return l===void 0&&(l=s(),o.data.set(s,l)),l},cacheSignal:function(){return $t(bt).controller.signal}},Mw=typeof WeakMap=="function"?WeakMap:Map,Xe=0,at=null,Ue=null,Oe=0,et=0,bn=null,zs=!1,Wr=!1,Kh=!1,as=0,yt=0,Js=0,er=0,Yh=0,Nn=0,jr=0,xl=null,_n=null,$h=!1,Lc=0,X_=0,Oc=1/0,Fc=null,Ks=null,Ut=0,Ys=null,Zr=null,ls=0,Qh=0,Xh=null,W_=null,Ml=0,Wh=null;function xn(){return(Xe&2)!==0&&Oe!==0?Oe&-Oe:Z.T!==null?ip():Gu()}function j_(){if(Nn===0)if((Oe&536870912)===0||He){var s=Ro;Ro<<=1,(Ro&3932160)===0&&(Ro=262144),Nn=s}else Nn=536870912;return s=wn.current,s!==null&&(s.flags|=32),Nn}function vn(s,o,l){(s===at&&(et===2||et===9)||s.cancelPendingCommit!==null)&&(ea(s,0),$s(s,Oe,Nn,!1)),bo(s,l),((Xe&2)===0||s!==at)&&(s===at&&((Xe&2)===0&&(er|=l),yt===4&&$s(s,Oe,Nn,!1)),Li(s))}function Z_(s,o,l){if((Xe&6)!==0)throw Error(i(327));var c=!l&&(o&127)===0&&(o&s.expiredLanes)===0||jn(s,o),y=c?Vw(s,o):Zh(s,o,!0),_=c;do{if(y===0){Wr&&!c&&$s(s,o,0,!1);break}else{if(l=s.current.alternate,_&&!Dw(l)){y=Zh(s,o,!1),_=!1;continue}if(y===2){if(_=o,s.errorRecoveryDisabledLanes&_)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var R=s;y=xl;var k=R.current.memoizedState.isDehydrated;if(k&&(ea(R,A).flags|=256),A=Zh(R,A,!1),A!==2){if(Kh&&!k){R.errorRecoveryDisabledLanes|=_,er|=_,y=4;break e}_=_n,_n=y,_!==null&&(_n===null?_n=_:_n.push.apply(_n,_))}y=A}if(_=!1,y!==2)continue}}if(y===1){ea(s,0),$s(s,o,0,!0);break}e:{switch(c=s,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:$s(c,o,Nn,!zs);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(y=Lc+300-ln(),10<y)){if($s(c,o,Nn,!zs),vi(c,0,!0)!==0)break e;ls=o,c.timeoutHandle=xv(ev.bind(null,c,l,_n,Fc,$h,o,Nn,er,jr,zs,_,"Throttled",-0,0),y);break e}ev(c,l,_n,Fc,$h,o,Nn,er,jr,zs,_,null,-0,0)}}break}while(!0);Li(s)}function ev(s,o,l,c,y,_,A,R,k,J,te,ie,K,X){if(s.timeoutHandle=-1,ie=o.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ti},K_(o,_,ie);var ge=(_&62914560)===_?Lc-ln():(_&4194048)===_?X_-ln():0;if(ge=gR(ie,ge),ge!==null){ls=_,s.cancelPendingCommit=ge(lv.bind(null,s,o,_,l,c,y,A,R,k,te,ie,null,K,X)),$s(s,_,A,!J);return}}lv(s,o,_,l,c,y,A,R,k)}function Dw(s){for(var o=s;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],_=y.getSnapshot;y=y.value;try{if(!Cn(_(),y))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function $s(s,o,l,c){o&=~Yh,o&=~er,s.suspendedLanes|=o,s.pingedLanes&=~o,c&&(s.warmLanes|=o),c=s.expirationTimes;for(var y=o;0<y;){var _=31-_t(y),A=1<<_;c[_]=-1,y&=~A}l!==0&&No(s,l,o)}function Gc(){return(Xe&6)===0?(Dl(0),!1):!0}function jh(){if(Ue!==null){if(et===0)var s=Ue.return;else s=Ue,Wi=Jo=null,ph(s),zr=null,pl=0,s=Ue;for(;s!==null;)M_(s.alternate,s),s=s.return;Ue=null}}function ea(s,o){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,jw(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),ls=0,jh(),at=s,Ue=l=Qi(s.current,null),Oe=o,et=0,bn=null,zs=!1,Wr=jn(s,o),Kh=!1,jr=Nn=Yh=er=Js=yt=0,_n=xl=null,$h=!1,(o&8)!==0&&(o|=o&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=o;0<c;){var y=31-_t(c),_=1<<y;o|=s[y],c&=~_}return as=o,ac(),l}function tv(s,o){Pe=null,Z.H=Sl,o===Hr||o===mc?(o=yy(),et=3):o===nh?(o=yy(),et=4):et=o===xh?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,bn=o,Ue===null&&(yt=1,Nc(s,Fn(o,s.current)))}function nv(){var s=wn.current;return s===null?!0:(Oe&4194048)===Oe?Hn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?s===Hn:!1}function iv(){var s=Z.H;return Z.H=Sl,s===null?Sl:s}function sv(){var s=Z.A;return Z.A=xw,s}function qc(){yt=4,zs||(Oe&4194048)!==Oe&&wn.current!==null||(Wr=!0),(Js&134217727)===0&&(er&134217727)===0||at===null||$s(at,Oe,Nn,!1)}function Zh(s,o,l){var c=Xe;Xe|=2;var y=iv(),_=sv();(at!==s||Oe!==o)&&(Fc=null,ea(s,o)),o=!1;var A=yt;e:do try{if(et!==0&&Ue!==null){var R=Ue,k=bn;switch(et){case 8:jh(),A=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(o=!0);var J=et;if(et=0,bn=null,ta(s,R,k,J),l&&Wr){A=0;break e}break;default:J=et,et=0,bn=null,ta(s,R,k,J)}}Pw(),A=yt;break}catch(te){tv(s,te)}while(!0);return o&&s.shellSuspendCounter++,Wi=Jo=null,Xe=c,Z.H=y,Z.A=_,Ue===null&&(at=null,Oe=0,ac()),A}function Pw(){for(;Ue!==null;)ov(Ue)}function Vw(s,o){var l=Xe;Xe|=2;var c=iv(),y=sv();at!==s||Oe!==o?(Fc=null,Oc=ln()+500,ea(s,o)):Wr=jn(s,o);e:do try{if(et!==0&&Ue!==null){o=Ue;var _=bn;t:switch(et){case 1:et=0,bn=null,ta(s,o,_,1);break;case 2:case 9:if(my(_)){et=0,bn=null,rv(o);break}o=function(){et!==2&&et!==9||at!==s||(et=7),Li(s)},_.then(o,o);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:my(_)?(et=0,bn=null,rv(o)):(et=0,bn=null,ta(s,o,_,7));break;case 5:var A=null;switch(Ue.tag){case 26:A=Ue.memoizedState;case 5:case 27:var R=Ue;if(A?Jv(A):R.stateNode.complete){et=0,bn=null;var k=R.sibling;if(k!==null)Ue=k;else{var J=R.return;J!==null?(Ue=J,Bc(J)):Ue=null}break t}}et=0,bn=null,ta(s,o,_,5);break;case 6:et=0,bn=null,ta(s,o,_,6);break;case 8:jh(),yt=6;break e;default:throw Error(i(462))}}kw();break}catch(te){tv(s,te)}while(!0);return Wi=Jo=null,Z.H=c,Z.A=y,Xe=l,Ue!==null?0:(at=null,Oe=0,ac(),yt)}function kw(){for(;Ue!==null&&!Nd();)ov(Ue)}function ov(s){var o=N_(s.alternate,s,as);s.memoizedProps=s.pendingProps,o===null?Bc(s):Ue=o}function rv(s){var o=s,l=o.alternate;switch(o.tag){case 15:case 0:o=A_(l,o,o.pendingProps,o.type,void 0,Oe);break;case 11:o=A_(l,o,o.pendingProps,o.type.render,o.ref,Oe);break;case 5:ph(o);default:M_(l,o),o=Ue=sy(o,as),o=N_(l,o,as)}s.memoizedProps=s.pendingProps,o===null?Bc(s):Ue=o}function ta(s,o,l,c){Wi=Jo=null,ph(o),zr=null,pl=0;var y=o.return;try{if(Aw(s,y,o,l,Oe)){yt=1,Nc(s,Fn(l,s.current)),Ue=null;return}}catch(_){if(y!==null)throw Ue=y,_;yt=1,Nc(s,Fn(l,s.current)),Ue=null;return}o.flags&32768?(He||c===1?s=!0:Wr||(Oe&536870912)!==0?s=!1:(zs=s=!0,(c===2||c===9||c===3||c===6)&&(c=wn.current,c!==null&&c.tag===13&&(c.flags|=16384))),av(o,s)):Bc(o)}function Bc(s){var o=s;do{if((o.flags&32768)!==0){av(o,zs);return}s=o.return;var l=ww(o.alternate,o,as);if(l!==null){Ue=l;return}if(o=o.sibling,o!==null){Ue=o;return}Ue=o=s}while(o!==null);yt===0&&(yt=5)}function av(s,o){do{var l=Rw(s.alternate,s);if(l!==null){l.flags&=32767,Ue=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(s=s.sibling,s!==null)){Ue=s;return}Ue=s=l}while(s!==null);yt=6,Ue=null}function lv(s,o,l,c,y,_,A,R,k){s.cancelPendingCommit=null;do Hc();while(Ut!==0);if((Xe&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(_=o.lanes|o.childLanes,_|=qd,Dd(s,l,_,A,R,k),s===at&&(Ue=at=null,Oe=0),Zr=o,Ys=s,ls=l,Qh=_,Xh=y,W_=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Fw(Cs,function(){return hv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=Z.T,Z.T=null,y=ce.p,ce.p=2,A=Xe,Xe|=4;try{bw(s,o,l)}finally{Xe=A,ce.p=y,Z.T=c}}Ut=1,uv(),cv(),fv()}}function uv(){if(Ut===1){Ut=0;var s=Ys,o=Zr,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=Z.T,Z.T=null;var c=ce.p;ce.p=2;var y=Xe;Xe|=4;try{H_(o,s);var _=fp,A=Qg(s.containerInfo),R=_.focusedElem,k=_.selectionRange;if(A!==R&&R&&R.ownerDocument&&$g(R.ownerDocument.documentElement,R)){if(k!==null&&Ud(R)){var J=k.start,te=k.end;if(te===void 0&&(te=J),"selectionStart"in R)R.selectionStart=J,R.selectionEnd=Math.min(te,R.value.length);else{var ie=R.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var X=K.getSelection(),ge=R.textContent.length,Ae=Math.min(k.start,ge),rt=k.end===void 0?Ae:Math.min(k.end,ge);!X.extend&&Ae>rt&&(A=rt,rt=Ae,Ae=A);var B=Yg(R,Ae),F=Yg(R,rt);if(B&&F&&(X.rangeCount!==1||X.anchorNode!==B.node||X.anchorOffset!==B.offset||X.focusNode!==F.node||X.focusOffset!==F.offset)){var z=ie.createRange();z.setStart(B.node,B.offset),X.removeAllRanges(),Ae>rt?(X.addRange(z),X.extend(F.node,F.offset)):(z.setEnd(F.node,F.offset),X.addRange(z))}}}}for(ie=[],X=R;X=X.parentNode;)X.nodeType===1&&ie.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ie.length;R++){var ne=ie[R];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}tf=!!cp,fp=cp=null}finally{Xe=y,ce.p=c,Z.T=l}}s.current=o,Ut=2}}function cv(){if(Ut===2){Ut=0;var s=Ys,o=Zr,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=Z.T,Z.T=null;var c=ce.p;ce.p=2;var y=Xe;Xe|=4;try{O_(s,o.alternate,o)}finally{Xe=y,ce.p=c,Z.T=l}}Ut=3}}function fv(){if(Ut===4||Ut===3){Ut=0,Pu();var s=Ys,o=Zr,l=ls,c=W_;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ut=5:(Ut=0,Zr=Ys=null,dv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Ks=null),Ji(l),o=o.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Wn,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=Z.T,y=ce.p,ce.p=2,Z.T=null;try{for(var _=s.onRecoverableError,A=0;A<c.length;A++){var R=c[A];_(R.value,{componentStack:R.stack})}}finally{Z.T=o,ce.p=y}}(ls&3)!==0&&Hc(),Li(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===Wh?Ml++:(Ml=0,Wh=s):Ml=0,Dl(0)}}function dv(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,dl(o)))}function Hc(){return uv(),cv(),fv(),hv()}function hv(){if(Ut!==5)return!1;var s=Ys,o=Qh;Qh=0;var l=Ji(ls),c=Z.T,y=ce.p;try{ce.p=32>l?32:l,Z.T=null,l=Xh,Xh=null;var _=Ys,A=ls;if(Ut=0,Zr=Ys=null,ls=0,(Xe&6)!==0)throw Error(i(331));var R=Xe;if(Xe|=4,$_(_.current),J_(_,_.current,A,l),Xe=R,Dl(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Wn,_)}catch{}return!0}finally{ce.p=y,Z.T=c,dv(s,o)}}function pv(s,o,l){o=Fn(l,o),o=Nh(s.stateNode,o,2),s=Gs(s,o,2),s!==null&&(bo(s,2),Li(s))}function tt(s,o,l){if(s.tag===3)pv(s,s,l);else for(;o!==null;){if(o.tag===3){pv(o,s,l);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ks===null||!Ks.has(c))){s=Fn(l,s),l=m_(2),c=Gs(o,l,2),c!==null&&(g_(l,c,o,s),bo(c,2),Li(c));break}}o=o.return}}function ep(s,o,l){var c=s.pingCache;if(c===null){c=s.pingCache=new Mw;var y=new Set;c.set(o,y)}else y=c.get(o),y===void 0&&(y=new Set,c.set(o,y));y.has(l)||(Kh=!0,y.add(l),s=Uw.bind(null,s,o,l),o.then(s,s))}function Uw(s,o,l){var c=s.pingCache;c!==null&&c.delete(o),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,at===s&&(Oe&l)===l&&(yt===4||yt===3&&(Oe&62914560)===Oe&&300>ln()-Lc?(Xe&2)===0&&ea(s,0):Yh|=l,jr===Oe&&(jr=0)),Li(s)}function mv(s,o){o===0&&(o=Fu()),s=Bo(s,o),s!==null&&(bo(s,o),Li(s))}function Lw(s){var o=s.memoizedState,l=0;o!==null&&(l=o.retryLane),mv(s,l)}function Ow(s,o){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(o),mv(s,l)}function Fw(s,o){return kt(s,o)}var zc=null,na=null,tp=!1,Jc=!1,np=!1,Qs=0;function Li(s){s!==na&&s.next===null&&(na===null?zc=na=s:na=na.next=s),Jc=!0,tp||(tp=!0,qw())}function Dl(s,o){if(!np&&Jc){np=!0;do for(var l=!1,c=zc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var A=c.suspendedLanes,R=c.pingedLanes;_=(1<<31-_t(42|s)+1)-1,_&=y&~(A&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,vv(c,_))}else _=Oe,_=vi(c,c===at?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||jn(c,_)||(l=!0,vv(c,_));c=c.next}while(l);np=!1}}function Gw(){gv()}function gv(){Jc=tp=!1;var s=0;Qs!==0&&Ww()&&(s=Qs);for(var o=ln(),l=null,c=zc;c!==null;){var y=c.next,_=yv(c,o);_===0?(c.next=null,l===null?zc=y:l.next=y,y===null&&(na=l)):(l=c,(s!==0||(_&3)!==0)&&(Jc=!0)),c=y}Ut!==0&&Ut!==5||Dl(s),Qs!==0&&(Qs=0)}function yv(s,o){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var A=31-_t(_),R=1<<A,k=y[A];k===-1?((R&l)===0||(R&c)!==0)&&(y[A]=Md(R,o)):k<=o&&(s.expiredLanes|=R),_&=~R}if(o=at,l=Oe,l=vi(s,s===o?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===o&&(et===2||et===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&As(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||jn(s,l)){if(o=l&-l,o===s.callbackPriority)return o;switch(c!==null&&As(c),Ji(l)){case 2:case 8:l=Ba;break;case 32:l=Cs;break;case 268435456:l=Vu;break;default:l=Cs}return c=_v.bind(null,s),l=kt(l,c),s.callbackPriority=o,s.callbackNode=l,o}return c!==null&&c!==null&&As(c),s.callbackPriority=2,s.callbackNode=null,2}function _v(s,o){if(Ut!==0&&Ut!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Hc()&&s.callbackNode!==l)return null;var c=Oe;return c=vi(s,s===at?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Z_(s,c,o),yv(s,ln()),s.callbackNode!=null&&s.callbackNode===l?_v.bind(null,s):null)}function vv(s,o){if(Hc())return null;Z_(s,o,!0)}function qw(){Zw(function(){(Xe&6)!==0?kt(qa,Gw):gv()})}function ip(){if(Qs===0){var s=qr;s===0&&(s=yi,yi<<=1,(yi&261888)===0&&(yi=256)),Qs=s}return Qs}function Ev(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:wr(""+s)}function Tv(s,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,s.id&&l.setAttribute("form",s.id),o.parentNode.insertBefore(l,o),s=new FormData(s),l.parentNode.removeChild(l),s}function Bw(s,o,l,c,y){if(o==="submit"&&l&&l.stateNode===y){var _=Ev((y[Ft]||null).action),A=c.submitter;A&&(o=(o=A[Ft]||null)?Ev(o.formAction):A.getAttribute("formAction"),o!==null&&(_=o,A=null));var R=new xi("action","action",null,c,y);s.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Qs!==0){var k=A?Tv(y,A):new FormData(y);Ah(l,{pending:!0,data:k,method:y.method,action:_},null,k)}}else typeof _=="function"&&(R.preventDefault(),k=A?Tv(y,A):new FormData(y),Ah(l,{pending:!0,data:k,method:y.method,action:_},_,k))},currentTarget:y}]})}}for(var sp=0;sp<Gd.length;sp++){var op=Gd[sp],Hw=op.toLowerCase(),zw=op[0].toUpperCase()+op.slice(1);ri(Hw,"on"+zw)}ri(jg,"onAnimationEnd"),ri(Zg,"onAnimationIteration"),ri(ey,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(rw,"onTransitionRun"),ri(aw,"onTransitionStart"),ri(lw,"onTransitionCancel"),ri(ty,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pl));function Sv(s,o){o=(o&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var _=void 0;if(o)for(var A=c.length-1;0<=A;A--){var R=c[A],k=R.instance,J=R.currentTarget;if(R=R.listener,k!==_&&y.isPropagationStopped())break e;_=R,y.currentTarget=J;try{_(y)}catch(te){rc(te)}y.currentTarget=null,_=k}else for(A=0;A<c.length;A++){if(R=c[A],k=R.instance,J=R.currentTarget,R=R.listener,k!==_&&y.isPropagationStopped())break e;_=R,y.currentTarget=J;try{_(y)}catch(te){rc(te)}y.currentTarget=null,_=k}}}}function Le(s,o){var l=o[Tr];l===void 0&&(l=o[Tr]=new Set);var c=s+"__bubble";l.has(c)||(Av(o,s,2,!1),l.add(c))}function rp(s,o,l){var c=0;o&&(c|=4),Av(l,s,c,o)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function ap(s){if(!s[Kc]){s[Kc]=!0,Ja.forEach(function(l){l!=="selectionchange"&&(Jw.has(l)||rp(l,!1,s),rp(l,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Kc]||(o[Kc]=!0,rp("selectionchange",!1,o))}}function Av(s,o,l,c){switch(jv(o)){case 2:var y=vR;break;case 8:y=ER;break;default:y=Sp}l=y.bind(null,o,l,s),y=void 0,!Vo||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(o,l,{capture:!0,passive:y}):s.addEventListener(o,l,!0):y!==void 0?s.addEventListener(o,l,{passive:y}):s.addEventListener(o,l,!1)}function lp(s,o,l,c,y){var _=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var R=c.stateNode.containerInfo;if(R===y)break;if(A===4)for(A=c.return;A!==null;){var k=A.tag;if((k===3||k===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;R!==null;){if(A=Ai(R),A===null)return;if(k=A.tag,k===5||k===6||k===26||k===27){c=_=A;continue e}R=R.parentNode}}c=c.return}xs(function(){var J=_,te=kn(l),ie=[];e:{var K=ny.get(s);if(K!==void 0){var X=xi,ge=s;switch(s){case"keypress":if(Uo(l)===0)break e;case"keydown":case"keyup":X=ic;break;case"focusin":ge="focus",X=Oo;break;case"focusout":ge="blur",X=Oo;break;case"beforeblur":case"afterblur":X=Oo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=sl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=$u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=T;break;case jg:case Zg:case ey:X=Xu;break;case ty:X=b;break;case"scroll":case"scrollend":X=il;break;case"wheel":X=$;break;case"copy":case"cut":case"paste":X=Wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=$i;break;case"toggle":case"beforetoggle":X=De}var Ae=(o&4)!==0,rt=!Ae&&(s==="scroll"||s==="scrollend"),B=Ae?K!==null?K+"Capture":null:K;Ae=[];for(var F=J,z;F!==null;){var ne=F;if(z=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||z===null||B===null||(ne=ni(F,B),ne!=null&&Ae.push(Vl(F,ne,z))),rt)break;F=F.return}0<Ae.length&&(K=new X(K,ge,null,l,te),ie.push({event:K,listeners:Ae}))}}if((o&7)===0){e:{if(K=s==="mouseover"||s==="pointerover",X=s==="mouseout"||s==="pointerout",K&&l!==el&&(ge=l.relatedTarget||l.fromElement)&&(Ai(ge)||ge[Ti]))break e;if((X||K)&&(K=te.window===te?te:(K=te.ownerDocument)?K.defaultView||K.parentWindow:window,X?(ge=l.relatedTarget||l.toElement,X=J,ge=ge?Ai(ge):null,ge!==null&&(rt=a(ge),Ae=ge.tag,ge!==rt||Ae!==5&&Ae!==27&&Ae!==6)&&(ge=null)):(X=null,ge=J),X!==ge)){if(Ae=sl,ne="onMouseLeave",B="onMouseEnter",F="mouse",(s==="pointerout"||s==="pointerover")&&(Ae=$i,ne="onPointerLeave",B="onPointerEnter",F="pointer"),rt=X==null?K:Sn(X),z=ge==null?K:Sn(ge),K=new Ae(ne,F+"leave",X,l,te),K.target=rt,K.relatedTarget=z,ne=null,Ai(te)===J&&(Ae=new Ae(B,F+"enter",ge,l,te),Ae.target=z,Ae.relatedTarget=rt,ne=Ae),rt=ne,X&&ge)t:{for(Ae=Kw,B=X,F=ge,z=0,ne=B;ne;ne=Ae(ne))z++;ne=0;for(var ve=F;ve;ve=Ae(ve))ne++;for(;0<z-ne;)B=Ae(B),z--;for(;0<ne-z;)F=Ae(F),ne--;for(;z--;){if(B===F||F!==null&&B===F.alternate){Ae=B;break t}B=Ae(B),F=Ae(F)}Ae=null}else Ae=null;X!==null&&Cv(ie,K,X,Ae,!1),ge!==null&&rt!==null&&Cv(ie,rt,ge,Ae,!0)}}e:{if(K=J?Sn(J):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var Ke=qg;else if(Fg(K))if(Bg)Ke=iw;else{Ke=tw;var ye=ew}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?J&&Ir(J.elementType)&&(Ke=qg):Ke=nw;if(Ke&&(Ke=Ke(s,J))){Gg(ie,Ke,l,te);break e}ye&&ye(s,K,J),s==="focusout"&&J&&K.type==="number"&&J.memoizedProps.value!=null&&Wa(K,"number",K.value)}switch(ye=J?Sn(J):window,s){case"focusin":(Fg(ye)||ye.contentEditable==="true")&&(Pr=ye,Ld=J,ul=null);break;case"focusout":ul=Ld=Pr=null;break;case"mousedown":Od=!0;break;case"contextmenu":case"mouseup":case"dragend":Od=!1,Xg(ie,l,te);break;case"selectionchange":if(ow)break;case"keydown":case"keyup":Xg(ie,l,te)}var Ve;if(Qe)e:{switch(s){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Dr?Fo(s,l)&&(Fe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Fe="onCompositionStart");Fe&&(Pi&&l.locale!=="ko"&&(Dr||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Dr&&(Ve=nl()):(Ni=te,tl="value"in Ni?Ni.value:Ni.textContent,Dr=!0)),ye=Yc(J,Fe),0<ye.length&&(Fe=new Di(Fe,s,null,l,te),ie.push({event:Fe,listeners:ye}),Ve?Fe.data=Ve:(Ve=Mr(l),Ve!==null&&(Fe.data=Ve)))),(Ve=Ln?XI(s,l):WI(s,l))&&(Fe=Yc(J,"onBeforeInput"),0<Fe.length&&(ye=new Di("onBeforeInput","beforeinput",null,l,te),ie.push({event:ye,listeners:Fe}),ye.data=Ve)),Bw(ie,s,J,l,te)}Sv(ie,o)})}function Vl(s,o,l){return{instance:s,listener:o,currentTarget:l}}function Yc(s,o){for(var l=o+"Capture",c=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=ni(s,l),y!=null&&c.unshift(Vl(s,y,_)),y=ni(s,o),y!=null&&c.push(Vl(s,y,_))),s.tag===3)return c;s=s.return}return[]}function Kw(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Cv(s,o,l,c,y){for(var _=o._reactName,A=[];l!==null&&l!==c;){var R=l,k=R.alternate,J=R.stateNode;if(R=R.tag,k!==null&&k===c)break;R!==5&&R!==26&&R!==27||J===null||(k=J,y?(J=ni(l,_),J!=null&&A.unshift(Vl(l,J,k))):y||(J=ni(l,_),J!=null&&A.push(Vl(l,J,k)))),l=l.return}A.length!==0&&s.push({event:o,listeners:A})}var Yw=/\r\n?/g,$w=/\u0000|\uFFFD/g;function Iv(s){return(typeof s=="string"?s:""+s).replace(Yw,`
`).replace($w,"")}function wv(s,o){return o=Iv(o),Iv(s)===o}function ot(s,o,l,c,y,_){switch(l){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||pn(s,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&pn(s,""+c);break;case"className":An(s,"class",c);break;case"tabIndex":An(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":An(s,l,c);break;case"style":Za(s,c,_);break;case"data":if(o!=="object"){An(s,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=wr(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(o!=="input"&&ot(s,o,"name",y.name,y,null),ot(s,o,"formEncType",y.formEncType,y,null),ot(s,o,"formMethod",y.formMethod,y,null),ot(s,o,"formTarget",y.formTarget,y,null)):(ot(s,o,"encType",y.encType,y,null),ot(s,o,"method",y.method,y,null),ot(s,o,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=wr(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=ti);break;case"onScroll":c!=null&&Le("scroll",s);break;case"onScrollEnd":c!=null&&Le("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=wr(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Le("beforetoggle",s),Le("toggle",s),Ar(s,"popover",c);break;case"xlinkActuate":Rt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Rt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Rt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Rt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Rt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Rt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Rt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Rt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Rt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ar(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Yu.get(l)||l,Ar(s,l,c))}}function up(s,o,l,c,y,_){switch(l){case"style":Za(s,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?pn(s,c):(typeof c=="number"||typeof c=="bigint")&&pn(s,""+c);break;case"onScroll":c!=null&&Le("scroll",s);break;case"onScrollEnd":c!=null&&Le("scrollend",s);break;case"onClick":c!=null&&(s.onclick=ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ka.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),o=l.slice(2,y?l.length-7:void 0),_=s[Ft]||null,_=_!=null?_[l]:null,typeof _=="function"&&s.removeEventListener(o,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(o,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):Ar(s,l,c)}}}function Xt(s,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",s),Le("load",s);var c=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var A=l[_];if(A!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ot(s,o,_,A,l,null)}}y&&ot(s,o,"srcSet",l.srcSet,l,null),c&&ot(s,o,"src",l.src,l,null);return;case"input":Le("invalid",s);var R=_=A=y=null,k=null,J=null;for(c in l)if(l.hasOwnProperty(c)){var te=l[c];if(te!=null)switch(c){case"name":y=te;break;case"type":A=te;break;case"checked":k=te;break;case"defaultChecked":J=te;break;case"value":_=te;break;case"defaultValue":R=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,o));break;default:ot(s,o,c,te,l,null)}}zu(s,_,R,k,J,A,y,!1);return;case"select":Le("invalid",s),c=A=_=null;for(y in l)if(l.hasOwnProperty(y)&&(R=l[y],R!=null))switch(y){case"value":_=R;break;case"defaultValue":A=R;break;case"multiple":c=R;default:ot(s,o,y,R,l,null)}o=_,l=A,s.multiple=!!c,o!=null?ws(s,!!c,o,!1):l!=null&&ws(s,!!c,l,!0);return;case"textarea":Le("invalid",s),_=y=c=null;for(A in l)if(l.hasOwnProperty(A)&&(R=l[A],R!=null))switch(A){case"value":c=R;break;case"defaultValue":y=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:ot(s,o,A,R,l,null)}Rs(s,c,y,_);return;case"option":for(k in l)if(l.hasOwnProperty(k)&&(c=l[k],c!=null))switch(k){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ot(s,o,k,c,l,null)}return;case"dialog":Le("beforetoggle",s),Le("toggle",s),Le("cancel",s),Le("close",s);break;case"iframe":case"object":Le("load",s);break;case"video":case"audio":for(c=0;c<Pl.length;c++)Le(Pl[c],s);break;case"image":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"embed":case"source":case"link":Le("error",s),Le("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in l)if(l.hasOwnProperty(J)&&(c=l[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ot(s,o,J,c,l,null)}return;default:if(Ir(o)){for(te in l)l.hasOwnProperty(te)&&(c=l[te],c!==void 0&&up(s,o,te,c,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(c=l[R],c!=null&&ot(s,o,R,c,l,null))}function Qw(s,o,l,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,A=null,R=null,k=null,J=null,te=null;for(X in l){var ie=l[X];if(l.hasOwnProperty(X)&&ie!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":k=ie;default:c.hasOwnProperty(X)||ot(s,o,X,null,c,ie)}}for(var K in c){var X=c[K];if(ie=l[K],c.hasOwnProperty(K)&&(X!=null||ie!=null))switch(K){case"type":_=X;break;case"name":y=X;break;case"checked":J=X;break;case"defaultChecked":te=X;break;case"value":A=X;break;case"defaultValue":R=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,o));break;default:X!==ie&&ot(s,o,K,X,c,ie)}}Cr(s,A,R,k,J,te,_,y);return;case"select":X=A=R=K=null;for(_ in l)if(k=l[_],l.hasOwnProperty(_)&&k!=null)switch(_){case"value":break;case"multiple":X=k;default:c.hasOwnProperty(_)||ot(s,o,_,null,c,k)}for(y in c)if(_=c[y],k=l[y],c.hasOwnProperty(y)&&(_!=null||k!=null))switch(y){case"value":K=_;break;case"defaultValue":R=_;break;case"multiple":A=_;default:_!==k&&ot(s,o,y,_,c,k)}o=R,l=A,c=X,K!=null?ws(s,!!l,K,!1):!!c!=!!l&&(o!=null?ws(s,!!l,o,!0):ws(s,!!l,l?[]:"",!1));return;case"textarea":X=K=null;for(R in l)if(y=l[R],l.hasOwnProperty(R)&&y!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:ot(s,o,R,null,c,y)}for(A in c)if(y=c[A],_=l[A],c.hasOwnProperty(A)&&(y!=null||_!=null))switch(A){case"value":K=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&ot(s,o,A,y,c,_)}Ju(s,K,X);return;case"option":for(var ge in l)if(K=l[ge],l.hasOwnProperty(ge)&&K!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":s.selected=!1;break;default:ot(s,o,ge,null,c,K)}for(k in c)if(K=c[k],X=l[k],c.hasOwnProperty(k)&&K!==X&&(K!=null||X!=null))switch(k){case"selected":s.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:ot(s,o,k,K,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in l)K=l[Ae],l.hasOwnProperty(Ae)&&K!=null&&!c.hasOwnProperty(Ae)&&ot(s,o,Ae,null,c,K);for(J in c)if(K=c[J],X=l[J],c.hasOwnProperty(J)&&K!==X&&(K!=null||X!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,o));break;default:ot(s,o,J,K,c,X)}return;default:if(Ir(o)){for(var rt in l)K=l[rt],l.hasOwnProperty(rt)&&K!==void 0&&!c.hasOwnProperty(rt)&&up(s,o,rt,void 0,c,K);for(te in c)K=c[te],X=l[te],!c.hasOwnProperty(te)||K===X||K===void 0&&X===void 0||up(s,o,te,K,c,X);return}}for(var B in l)K=l[B],l.hasOwnProperty(B)&&K!=null&&!c.hasOwnProperty(B)&&ot(s,o,B,null,c,K);for(ie in c)K=c[ie],X=l[ie],!c.hasOwnProperty(ie)||K===X||K==null&&X==null||ot(s,o,ie,K,c,X)}function Rv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xw(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],_=y.transferSize,A=y.initiatorType,R=y.duration;if(_&&R&&Rv(A)){for(A=0,R=y.responseEnd,c+=1;c<l.length;c++){var k=l[c],J=k.startTime;if(J>R)break;var te=k.transferSize,ie=k.initiatorType;te&&Rv(ie)&&(k=k.responseEnd,A+=te*(k<R?1:(R-J)/(k-J)))}if(--c,o+=8*(_+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var cp=null,fp=null;function $c(s){return s.nodeType===9?s:s.ownerDocument}function bv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nv(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function dp(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var hp=null;function Ww(){var s=window.event;return s&&s.type==="popstate"?s===hp?!1:(hp=s,!0):(hp=null,!1)}var xv=typeof setTimeout=="function"?setTimeout:void 0,jw=typeof clearTimeout=="function"?clearTimeout:void 0,Mv=typeof Promise=="function"?Promise:void 0,Zw=typeof queueMicrotask=="function"?queueMicrotask:typeof Mv<"u"?function(s){return Mv.resolve(null).then(s).catch(eR)}:xv;function eR(s){setTimeout(function(){throw s})}function Xs(s){return s==="head"}function Dv(s,o){var l=o,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),ra(o);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")kl(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,kl(l);for(var _=l.firstChild;_;){var A=_.nextSibling,R=_.nodeName;_[Si]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=A}}else l==="body"&&kl(s.ownerDocument.body);l=y}while(l);ra(o)}function Pv(s,o){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function pp(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":pp(l),Sr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function tR(s,o,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Si])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=zn(s.nextSibling),s===null)break}return null}function nR(s,o,l){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=zn(s.nextSibling),s===null))return null;return s}function Vv(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=zn(s.nextSibling),s===null))return null;return s}function mp(s){return s.data==="$?"||s.data==="$~"}function gp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function iR(s,o){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||l.readyState!=="loading")o();else{var c=function(){o(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function zn(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var yp=null;function kv(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(o===0)return zn(s.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}s=s.nextSibling}return null}function Uv(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return s;o--}else l!=="/$"&&l!=="/&"||o++}s=s.previousSibling}return null}function Lv(s,o,l){switch(o=$c(l),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function kl(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Sr(s)}var Jn=new Map,Ov=new Set;function Qc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var us=ce.d;ce.d={f:sR,r:oR,D:rR,C:aR,L:lR,m:uR,X:fR,S:cR,M:dR};function sR(){var s=us.f(),o=Gc();return s||o}function oR(s){var o=Vn(s);o!==null&&o.tag===5&&o.type==="form"?t_(o):us.r(s)}var ia=typeof document>"u"?null:document;function Fv(s,o,l){var c=ia;if(c&&typeof o=="string"&&o){var y=hn(o);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),Ov.has(y)||(Ov.add(y),s={rel:s,crossOrigin:l,href:o},c.querySelector(y)===null&&(o=c.createElement("link"),Xt(o,"link",s),wt(o),c.head.appendChild(o)))}}function rR(s){us.D(s),Fv("dns-prefetch",s,null)}function aR(s,o){us.C(s,o),Fv("preconnect",s,o)}function lR(s,o,l){us.L(s,o,l);var c=ia;if(c&&s&&o){var y='link[rel="preload"][as="'+hn(o)+'"]';o==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+hn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+hn(l.imageSizes)+'"]')):y+='[href="'+hn(s)+'"]';var _=y;switch(o){case"style":_=sa(s);break;case"script":_=oa(s)}Jn.has(_)||(s=E({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:s,as:o},l),Jn.set(_,s),c.querySelector(y)!==null||o==="style"&&c.querySelector(Ul(_))||o==="script"&&c.querySelector(Ll(_))||(o=c.createElement("link"),Xt(o,"link",s),wt(o),c.head.appendChild(o)))}}function uR(s,o){us.m(s,o);var l=ia;if(l&&s){var c=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+hn(c)+'"][href="'+hn(s)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=oa(s)}if(!Jn.has(_)&&(s=E({rel:"modulepreload",href:s},o),Jn.set(_,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ll(_)))return}c=l.createElement("link"),Xt(c,"link",s),wt(c),l.head.appendChild(c)}}}function cR(s,o,l){us.S(s,o,l);var c=ia;if(c&&s){var y=Ci(c).hoistableStyles,_=sa(s);o=o||"default";var A=y.get(_);if(!A){var R={loading:0,preload:null};if(A=c.querySelector(Ul(_)))R.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":o},l),(l=Jn.get(_))&&_p(s,l);var k=A=c.createElement("link");wt(k),Xt(k,"link",s),k._p=new Promise(function(J,te){k.onload=J,k.onerror=te}),k.addEventListener("load",function(){R.loading|=1}),k.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Xc(A,o,c)}A={type:"stylesheet",instance:A,count:1,state:R},y.set(_,A)}}}function fR(s,o){us.X(s,o);var l=ia;if(l&&s){var c=Ci(l).hoistableScripts,y=oa(s),_=c.get(y);_||(_=l.querySelector(Ll(y)),_||(s=E({src:s,async:!0},o),(o=Jn.get(y))&&vp(s,o),_=l.createElement("script"),wt(_),Xt(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function dR(s,o){us.M(s,o);var l=ia;if(l&&s){var c=Ci(l).hoistableScripts,y=oa(s),_=c.get(y);_||(_=l.querySelector(Ll(y)),_||(s=E({src:s,async:!0,type:"module"},o),(o=Jn.get(y))&&vp(s,o),_=l.createElement("script"),wt(_),Xt(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function Gv(s,o,l,c){var y=(y=Me.current)?Qc(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=sa(l.href),l=Ci(y).hoistableStyles,c=l.get(o),c||(c={type:"style",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=sa(l.href);var _=Ci(y).hoistableStyles,A=_.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,A),(_=y.querySelector(Ul(s)))&&!_._p&&(A.instance=_,A.state.loading=5),Jn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Jn.set(s,l),_||hR(y,s,l,A.state))),o&&c===null)throw Error(i(528,""));return A}if(o&&c!==null)throw Error(i(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=oa(l),l=Ci(y).hoistableScripts,c=l.get(o),c||(c={type:"script",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function sa(s){return'href="'+hn(s)+'"'}function Ul(s){return'link[rel="stylesheet"]['+s+"]"}function qv(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function hR(s,o,l,c){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=s.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),Xt(o,"link",l),wt(o),s.head.appendChild(o))}function oa(s){return'[src="'+hn(s)+'"]'}function Ll(s){return"script[async]"+s}function Bv(s,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var c=s.querySelector('style[data-href~="'+hn(l.href)+'"]');if(c)return o.instance=c,wt(c),c;var y=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),wt(c),Xt(c,"style",y),Xc(c,l.precedence,s),o.instance=c;case"stylesheet":y=sa(l.href);var _=s.querySelector(Ul(y));if(_)return o.state.loading|=4,o.instance=_,wt(_),_;c=qv(l),(y=Jn.get(y))&&_p(c,y),_=(s.ownerDocument||s).createElement("link"),wt(_);var A=_;return A._p=new Promise(function(R,k){A.onload=R,A.onerror=k}),Xt(_,"link",c),o.state.loading|=4,Xc(_,l.precedence,s),o.instance=_;case"script":return _=oa(l.src),(y=s.querySelector(Ll(_)))?(o.instance=y,wt(y),y):(c=l,(y=Jn.get(_))&&(c=E({},l),vp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),wt(y),Xt(y,"link",c),s.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,Xc(c,l.precedence,s));return o.instance}function Xc(s,o,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,A=0;A<c.length;A++){var R=c[A];if(R.dataset.precedence===o)_=R;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(s,o.firstChild))}function _p(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function vp(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Wc=null;function Hv(s,o,l){if(Wc===null){var c=new Map,y=Wc=new Map;y.set(l,c)}else y=Wc,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var _=l[y];if(!(_[Si]||_[It]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(o)||"";A=s+A;var R=c.get(A);R?R.push(_):c.set(A,[_])}}return c}function zv(s,o,l){s=s.ownerDocument||s,s.head.insertBefore(l,o==="title"?s.querySelector("head > title"):null)}function pR(s,o,l){if(l===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Jv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function mR(s,o,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=sa(c.href),_=o.querySelector(Ul(y));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=jc.bind(s),o.then(s,s)),l.state.loading|=4,l.instance=_,wt(_);return}_=o.ownerDocument||o,c=qv(c),(y=Jn.get(y))&&_p(c,y),_=_.createElement("link"),wt(_);var A=_;A._p=new Promise(function(R,k){A.onload=R,A.onerror=k}),Xt(_,"link",c),l.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=jc.bind(s),o.addEventListener("load",l),o.addEventListener("error",l))}}var Ep=0;function gR(s,o){return s.stylesheets&&s.count===0&&ef(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&ef(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+o);0<s.imgBytes&&Ep===0&&(Ep=62500*Xw());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&ef(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>Ep?50:800)+o);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function jc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ef(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Zc=null;function ef(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Zc=new Map,o.forEach(yR,s),Zc=null,jc.call(s))}function yR(s,o){if(!(o.state.loading&4)){var l=Zc.get(s);if(l)var c=l.get(null);else{l=new Map,Zc.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var A=y[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}y=o.instance,A=y.getAttribute("data-precedence"),_=l.get(A)||c,_===c&&l.set(null,y),l.set(A,y),this.count++,c=jc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),o.state.loading|=4}}var Ol={$$typeof:j,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function _R(s,o,l,c,y,_,A,R,k){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.hiddenUpdates=Ei(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Kv(s,o,l,c,y,_,A,R,k,J,te,ie){return s=new _R(s,o,l,A,k,J,te,ie,R),o=1,_===!0&&(o|=24),_=In(3,null,null,o),s.current=_,_.stateNode=s,o=Zd(),o.refCount++,s.pooledCache=o,o.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:o},ih(_),s}function Yv(s){return s?(s=Ur,s):Ur}function $v(s,o,l,c,y,_){y=Yv(y),c.context===null?c.context=y:c.pendingContext=y,c=Fs(o),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=Gs(s,c,o),l!==null&&(vn(l,s,o),gl(l,s,o))}function Qv(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<o?l:o}}function Tp(s,o){Qv(s,o),(s=s.alternate)&&Qv(s,o)}function Xv(s){if(s.tag===13||s.tag===31){var o=Bo(s,67108864);o!==null&&vn(o,s,67108864),Tp(s,67108864)}}function Wv(s){if(s.tag===13||s.tag===31){var o=xn();o=xo(o);var l=Bo(s,o);l!==null&&vn(l,s,o),Tp(s,o)}}var tf=!0;function vR(s,o,l,c){var y=Z.T;Z.T=null;var _=ce.p;try{ce.p=2,Sp(s,o,l,c)}finally{ce.p=_,Z.T=y}}function ER(s,o,l,c){var y=Z.T;Z.T=null;var _=ce.p;try{ce.p=8,Sp(s,o,l,c)}finally{ce.p=_,Z.T=y}}function Sp(s,o,l,c){if(tf){var y=Ap(c);if(y===null)lp(s,o,c,nf,l),Zv(s,c);else if(SR(y,s,o,l,c))c.stopPropagation();else if(Zv(s,c),o&4&&-1<TR.indexOf(s)){for(;y!==null;){var _=Vn(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=_i(_.pendingLanes);if(A!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var k=1<<31-_t(A);R.entanglements[1]|=k,A&=~k}Li(_),(Xe&6)===0&&(Oc=ln()+500,Dl(0))}}break;case 31:case 13:R=Bo(_,2),R!==null&&vn(R,_,2),Gc(),Tp(_,2)}if(_=Ap(c),_===null&&lp(s,o,c,nf,l),_===y)break;y=_}y!==null&&c.stopPropagation()}else lp(s,o,c,null,l)}}function Ap(s){return s=kn(s),Cp(s)}var nf=null;function Cp(s){if(nf=null,s=Ai(s),s!==null){var o=a(s);if(o===null)s=null;else{var l=o.tag;if(l===13){if(s=u(o),s!==null)return s;s=null}else if(l===31){if(s=d(o),s!==null)return s;s=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return nf=s,null}function jv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wo()){case qa:return 2;case Ba:return 8;case Cs:case xd:return 32;case Vu:return 268435456;default:return 32}default:return 32}}var Ip=!1,Ws=null,js=null,Zs=null,Fl=new Map,Gl=new Map,eo=[],TR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zv(s,o){switch(s){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":Fl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(o.pointerId)}}function ql(s,o,l,c,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:o,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},o!==null&&(o=Vn(o),o!==null&&Xv(o)),s):(s.eventSystemFlags|=c,o=s.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),s)}function SR(s,o,l,c,y){switch(o){case"focusin":return Ws=ql(Ws,s,o,l,c,y),!0;case"dragenter":return js=ql(js,s,o,l,c,y),!0;case"mouseover":return Zs=ql(Zs,s,o,l,c,y),!0;case"pointerover":var _=y.pointerId;return Fl.set(_,ql(Fl.get(_)||null,s,o,l,c,y)),!0;case"gotpointercapture":return _=y.pointerId,Gl.set(_,ql(Gl.get(_)||null,s,o,l,c,y)),!0}return!1}function e0(s){var o=Ai(s.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=u(l),o!==null){s.blockedOn=o,Zn(s.priority,function(){Wv(l)});return}}else if(o===31){if(o=d(l),o!==null){s.blockedOn=o,Zn(s.priority,function(){Wv(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function sf(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var l=Ap(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);el=c,l.target.dispatchEvent(c),el=null}else return o=Vn(l),o!==null&&Xv(o),s.blockedOn=l,!1;o.shift()}return!0}function t0(s,o,l){sf(s)&&l.delete(o)}function AR(){Ip=!1,Ws!==null&&sf(Ws)&&(Ws=null),js!==null&&sf(js)&&(js=null),Zs!==null&&sf(Zs)&&(Zs=null),Fl.forEach(t0),Gl.forEach(t0)}function of(s,o){s.blockedOn===o&&(s.blockedOn=null,Ip||(Ip=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,AR)))}var rf=null;function n0(s){rf!==s&&(rf=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){rf===s&&(rf=null);for(var o=0;o<s.length;o+=3){var l=s[o],c=s[o+1],y=s[o+2];if(typeof c!="function"){if(Cp(c||l)===null)continue;break}var _=Vn(l);_!==null&&(s.splice(o,3),o-=3,Ah(_,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function ra(s){function o(k){return of(k,s)}Ws!==null&&of(Ws,s),js!==null&&of(js,s),Zs!==null&&of(Zs,s),Fl.forEach(o),Gl.forEach(o);for(var l=0;l<eo.length;l++){var c=eo[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<eo.length&&(l=eo[0],l.blockedOn===null);)e0(l),l.blockedOn===null&&eo.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],_=l[c+1],A=y[Ft]||null;if(typeof _=="function")A||n0(l);else if(A){var R=null;if(_&&_.hasAttribute("formAction")){if(y=_,A=_[Ft]||null)R=A.formAction;else if(Cp(y)!==null)continue}else R=A.action;typeof R=="function"?l[c+1]=R:(l.splice(c,3),c-=3),n0(l)}}}function i0(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function wp(s){this._internalRoot=s}af.prototype.render=wp.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var l=o.current,c=xn();$v(l,c,s,o,null,null)},af.prototype.unmount=wp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;$v(s.current,2,null,s,null,null),Gc(),o[Ti]=null}};function af(s){this._internalRoot=s}af.prototype.unstable_scheduleHydration=function(s){if(s){var o=Gu();s={blockedOn:null,target:s,priority:o};for(var l=0;l<eo.length&&o!==0&&o<eo[l].priority;l++);eo.splice(l,0,s),l===0&&e0(s)}};var s0=e.version;if(s0!=="19.2.4")throw Error(i(527,s0,"19.2.4"));ce.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=p(o),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var CR={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lf.isDisabled&&lf.supportsFiber)try{Wn=lf.inject(CR),Jt=lf}catch{}}return Hl.createRoot=function(s,o){if(!r(s))throw Error(i(299));var l=!1,c="",y=f_,_=d_,A=h_;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=Kv(s,1,!1,null,null,l,c,null,y,_,A,i0),s[Ti]=o.current,ap(s),new wp(o)},Hl.hydrateRoot=function(s,o,l){if(!r(s))throw Error(i(299));var c=!1,y="",_=f_,A=d_,R=h_,k=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(k=l.formState)),o=Kv(s,1,!0,o,l??null,c,y,k,_,A,R,i0),o.context=Yv(null),l=o.current,c=xn(),c=xo(c),y=Fs(c),y.callback=null,Gs(l,y,c),l=c,o.current.lanes=l,bo(o,l),Li(o),s[Ti]=o.current,ap(s),new af(o)},Hl.version="19.2.4",Hl}var p0;function kR(){if(p0)return Np.exports;p0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Np.exports=VR(),Np.exports}var UR=kR();const LR=AS(UR),OR=()=>{};var m0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},FR=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[t++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[t++],u=n[t++],d=n[t++],g=((r&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|u&63)}}return e.join("")},IS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const a=n[r],u=r+1<n.length,d=u?n[r+1]:0,g=r+2<n.length,p=g?n[r+2]:0,v=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|p>>6,w=p&63;g||(w=64,u||(S=64)),i.push(t[v],t[E],t[S],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(CS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):FR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const a=t[n.charAt(r++)],d=r<n.length?t[n.charAt(r)]:0;++r;const p=r<n.length?t[n.charAt(r)]:64;++r;const E=r<n.length?t[n.charAt(r)]:64;if(++r,a==null||d==null||p==null||E==null)throw new GR;const S=a<<2|d>>4;if(i.push(S),p!==64){const w=d<<4&240|p>>2;if(i.push(w),E!==64){const P=p<<6&192|E;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class GR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qR=function(n){const e=CS(n);return IS.encodeByteArray(e,!0)},Df=function(n){return qR(n).replace(/\./g,"")},wS=function(n){try{return IS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=()=>BR().__FIREBASE_DEFAULTS__,zR=()=>{if(typeof process>"u"||typeof m0>"u")return;const n=m0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},JR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&wS(n[1]);return e&&JSON.parse(e)},rd=()=>{try{return OR()||HR()||zR()||JR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},RS=n=>{var e,t;return(t=(e=rd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},KR=n=>{const e=RS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},bS=()=>{var n;return(n=rd())==null?void 0:n.config},NS=n=>{var e;return(e=rd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Df(JSON.stringify(t)),Df(JSON.stringify(u)),""].join(".")}const tu={};function QR(){const n={prod:[],emulator:[]};for(const e of Object.keys(tu))tu[e]?n.emulator.push(e):n.prod.push(e);return n}function XR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let g0=!1;function MS(n,e){if(typeof window>"u"||typeof document>"u"||!ba(window.location.host)||tu[n]===e||tu[n]||g0)return;tu[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=QR().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{g0=!0,u()},S}function v(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=XR(i),w=t("text"),P=document.getElementById(w)||document.createElement("span"),G=t("learnmore"),O=document.getElementById(G)||document.createElement("a"),Y=t("preprendIcon"),Q=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const j=S.element;d(j),v(O,G);const oe=p();g(Q,Y),j.append(Q,P,O,oe),document.body.appendChild(j)}a?(P.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function jR(){var e;const n=(e=rd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function tb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nb(){const n=an();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ib(){return!jR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sb(){try{return typeof indexedDB=="object"}catch{return!1}}function ob(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="FirebaseError";class Es extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=rb,Object.setPrototypeOf(this,Es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Su.prototype.create)}}class Su{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],u=a?ab(a,i):"Error",d=`${this.serviceName}: ${u} (${r}).`;return new Es(r,d,i)}}function ab(n,e){return n.replace(lb,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const lb=/\{\$([^}]+)}/g;function ub(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function rr(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const a=n[r],u=e[r];if(y0(a)&&y0(u)){if(!rr(a,u))return!1}else if(a!==u)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function y0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $l(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,a]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(a)}}),e}function Ql(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function cb(n,e){const t=new fb(n,e);return t.subscribe.bind(t)}class fb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");db(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Pp),r.error===void 0&&(r.error=Pp),r.complete===void 0&&(r.complete=Pp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function db(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Pp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(n){return n&&n._delegate?n._delegate:n}class ar{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new YR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mb(e))try{this.getOrInitializeService({instanceIdentifier:tr})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=tr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=tr){return this.instances.has(e)}getOptions(e=tr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:pb(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=tr){return this.component?this.component.multipleInstances?e:tr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pb(n){return n===tr?void 0:n}function mb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ge||(Ge={}));const yb={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},_b=Ge.INFO,vb={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},Eb=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=vb[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Um{constructor(e){this.name=e,this._logLevel=_b,this._logHandler=Eb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const Tb=(n,e)=>e.some(t=>n instanceof t);let _0,v0;function Sb(){return _0||(_0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ab(){return v0||(v0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DS=new WeakMap,$p=new WeakMap,PS=new WeakMap,Vp=new WeakMap,Lm=new WeakMap;function Cb(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(lo(n.result)),r()},u=()=>{i(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&DS.set(t,n)}).catch(()=>{}),Lm.set(e,n),e}function Ib(n){if($p.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),r()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});$p.set(n,e)}let Qp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return $p.get(n);if(e==="objectStoreNames")return n.objectStoreNames||PS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return lo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function wb(n){Qp=n(Qp)}function Rb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(kp(this),e,...t);return PS.set(i,e.sort?e.sort():[e]),lo(i)}:Ab().includes(n)?function(...e){return n.apply(kp(this),e),lo(DS.get(this))}:function(...e){return lo(n.apply(kp(this),e))}}function bb(n){return typeof n=="function"?Rb(n):(n instanceof IDBTransaction&&Ib(n),Tb(n,Sb())?new Proxy(n,Qp):n)}function lo(n){if(n instanceof IDBRequest)return Cb(n);if(Vp.has(n))return Vp.get(n);const e=bb(n);return e!==n&&(Vp.set(n,e),Lm.set(e,n)),e}const kp=n=>Lm.get(n);function Nb(n,e,{blocked:t,upgrade:i,blocking:r,terminated:a}={}){const u=indexedDB.open(n,e),d=lo(u);return i&&u.addEventListener("upgradeneeded",g=>{i(lo(u.result),g.oldVersion,g.newVersion,lo(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),d.then(g=>{a&&g.addEventListener("close",()=>a()),r&&g.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const xb=["get","getKey","getAll","getAllKeys","count"],Mb=["put","add","delete","clear"],Up=new Map;function E0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Up.get(e))return Up.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=Mb.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||xb.includes(t)))return;const a=async function(u,...d){const g=this.transaction(u,r?"readwrite":"readonly");let p=g.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),r&&g.done]))[0]};return Up.set(e,a),a}wb(n=>({...n,get:(e,t,i)=>E0(e,t)||n.get(e,t,i),has:(e,t)=>!!E0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Pb(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Pb(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xp="@firebase/app",T0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Um("@firebase/app"),Vb="@firebase/app-compat",kb="@firebase/analytics-compat",Ub="@firebase/analytics",Lb="@firebase/app-check-compat",Ob="@firebase/app-check",Fb="@firebase/auth",Gb="@firebase/auth-compat",qb="@firebase/database",Bb="@firebase/data-connect",Hb="@firebase/database-compat",zb="@firebase/functions",Jb="@firebase/functions-compat",Kb="@firebase/installations",Yb="@firebase/installations-compat",$b="@firebase/messaging",Qb="@firebase/messaging-compat",Xb="@firebase/performance",Wb="@firebase/performance-compat",jb="@firebase/remote-config",Zb="@firebase/remote-config-compat",eN="@firebase/storage",tN="@firebase/storage-compat",nN="@firebase/firestore",iN="@firebase/ai",sN="@firebase/firestore-compat",oN="firebase",rN="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="[DEFAULT]",aN={[Xp]:"fire-core",[Vb]:"fire-core-compat",[Ub]:"fire-analytics",[kb]:"fire-analytics-compat",[Ob]:"fire-app-check",[Lb]:"fire-app-check-compat",[Fb]:"fire-auth",[Gb]:"fire-auth-compat",[qb]:"fire-rtdb",[Bb]:"fire-data-connect",[Hb]:"fire-rtdb-compat",[zb]:"fire-fn",[Jb]:"fire-fn-compat",[Kb]:"fire-iid",[Yb]:"fire-iid-compat",[$b]:"fire-fcm",[Qb]:"fire-fcm-compat",[Xb]:"fire-perf",[Wb]:"fire-perf-compat",[jb]:"fire-rc",[Zb]:"fire-rc-compat",[eN]:"fire-gcs",[tN]:"fire-gcs-compat",[nN]:"fire-fst",[sN]:"fire-fst-compat",[iN]:"fire-vertex","fire-js":"fire-js",[oN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=new Map,lN=new Map,jp=new Map;function S0(n,e){try{n.container.addComponent(e)}catch(t){ms.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ta(n){const e=n.name;if(jp.has(e))return ms.debug(`There were multiple attempts to register component ${e}.`),!1;jp.set(e,n);for(const t of Pf.values())S0(t,n);for(const t of lN.values())S0(t,n);return!0}function Om(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Mn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},uo=new Su("app","Firebase",uN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw uo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=rN;function VS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Wp,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw uo.create("bad-app-name",{appName:String(r)});if(t||(t=bS()),!t)throw uo.create("no-options");const a=Pf.get(r);if(a){if(rr(t,a.options)&&rr(i,a.config))return a;throw uo.create("duplicate-app",{appName:r})}const u=new gb(r);for(const g of jp.values())u.addComponent(g);const d=new cN(t,i,u);return Pf.set(r,d),d}function kS(n=Wp){const e=Pf.get(n);if(!e&&n===Wp&&bS())return VS();if(!e)throw uo.create("no-app",{appName:n});return e}function co(n,e,t){let i=aN[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const u=[`Unable to register library "${i}" with version "${e}":`];r&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ms.warn(u.join(" "));return}Ta(new ar(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="firebase-heartbeat-database",dN=1,uu="firebase-heartbeat-store";let Lp=null;function US(){return Lp||(Lp=Nb(fN,dN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(uu)}catch(t){console.warn(t)}}}}).catch(n=>{throw uo.create("idb-open",{originalErrorMessage:n.message})})),Lp}async function hN(n){try{const t=(await US()).transaction(uu),i=await t.objectStore(uu).get(LS(n));return await t.done,i}catch(e){if(e instanceof Es)ms.warn(e.message);else{const t=uo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ms.warn(t.message)}}}async function A0(n,e){try{const i=(await US()).transaction(uu,"readwrite");await i.objectStore(uu).put(e,LS(n)),await i.done}catch(t){if(t instanceof Es)ms.warn(t.message);else{const i=uo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ms.warn(i.message)}}}function LS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=1024,mN=30;class gN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _N(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=C0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>mN){const u=vN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ms.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=C0(),{heartbeatsToSend:i,unsentEntries:r}=yN(this._heartbeatsCache.heartbeats),a=Df(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ms.warn(t),""}}}function C0(){return new Date().toISOString().substring(0,10)}function yN(n,e=pN){const t=[];let i=n.slice();for(const r of n){const a=t.find(u=>u.agent===r.agent);if(a){if(a.dates.push(r.date),I0(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),I0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class _N{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sb()?ob().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await hN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return A0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return A0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function I0(n){return Df(JSON.stringify({version:2,heartbeats:n})).length}function vN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(n){Ta(new ar("platform-logger",e=>new Db(e),"PRIVATE")),Ta(new ar("heartbeat",e=>new gN(e),"PRIVATE")),co(Xp,T0,n),co(Xp,T0,"esm2020"),co("fire-js","")}EN("");function OS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TN=OS,FS=new Su("auth","Firebase",OS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=new Um("@firebase/auth");function SN(n,...e){Vf.logLevel<=Ge.WARN&&Vf.warn(`Auth (${Na}): ${n}`,...e)}function Ef(n,...e){Vf.logLevel<=Ge.ERROR&&Vf.error(`Auth (${Na}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(n,...e){throw Gm(n,...e)}function fi(n,...e){return Gm(n,...e)}function Fm(n,e,t){const i={...TN(),[e]:t};return new Su("auth","Firebase",i).create(e,{appName:n.name})}function hs(n){return Fm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function AN(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Qn(n,"argument-error"),Fm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gm(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return FS.create(n,...e)}function Ce(n,e,...t){if(!n)throw Gm(e,...t)}function fs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ef(e),new Error(e)}function gs(n,e){n||fs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function CN(){return w0()==="http:"||w0()==="https:"}function w0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CN()||eb()||"connection"in navigator)?navigator.onLine:!0}function wN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,t){this.shortDelay=e,this.longDelay=t,gs(t>e,"Short delay should be less than long delay!"),this.isMobile=WR()||tb()}get(){return IN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(n,e){gs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NN=new Cu(3e4,6e4);function Eo(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function To(n,e,t,i,r={}){return qS(n,r,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=Au({key:n.config.apiKey,...u}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:g,...a};return ZR()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&ba(n.emulatorConfig.host)&&(p.credentials="include"),GS.fetch()(await BS(n,n.config.apiHost,t,d),p)})}async function qS(n,e,t){n._canInitEmulator=!1;const i={...RN,...e};try{const r=new MN(n),a=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw uf(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[g,p]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw uf(n,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw uf(n,"email-already-in-use",u);if(g==="USER_DISABLED")throw uf(n,"user-disabled",u);const v=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Fm(n,v,p);Qn(n,v)}}catch(r){if(r instanceof Es)throw r;Qn(n,"network-request-failed",{message:String(r)})}}async function Iu(n,e,t,i,r={}){const a=await To(n,e,t,i,r);return"mfaPendingCredential"in a&&Qn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function BS(n,e,t,i){const r=`${e}${t}?${i}`,a=n,u=a.config.emulator?qm(n.config,r):`${n.config.apiScheme}://${r}`;return bN.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function xN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class MN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(fi(this.auth,"network-request-failed")),NN.get())})}}function uf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=fi(n,e,i);return r.customData._tokenResponse=t,r}function R0(n){return n!==void 0&&n.enterprise!==void 0}class DN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function PN(n,e){return To(n,"GET","/v2/recaptchaConfig",Eo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(n,e){return To(n,"POST","/v1/accounts:delete",e)}async function kf(n,e){return To(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kN(n,e=!1){const t=Dn(n),i=await t.getIdToken(e),r=Bm(i);Ce(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:nu(Op(r.auth_time)),issuedAtTime:nu(Op(r.iat)),expirationTime:nu(Op(r.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Op(n){return Number(n)*1e3}function Bm(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Ef("JWT malformed, contained fewer than 3 sections"),null;try{const r=wS(t);return r?JSON.parse(r):(Ef("Failed to decode base64 JWT payload"),null)}catch(r){return Ef("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function b0(n){const e=Bm(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Es&&UN(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function UN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nu(this.lastLoginAt),this.creationTime=nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uf(n){var E;const e=n.auth,t=await n.getIdToken(),i=await cu(n,kf(e,{idToken:t}));Ce(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const a=(E=r.providerUserInfo)!=null&&E.length?HS(r.providerUserInfo):[],u=FN(n.providerData,a),d=n.isAnonymous,g=!(n.email&&r.passwordHash)&&!(u!=null&&u.length),p=d?g:!1,v={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:u,metadata:new em(r.createdAt,r.lastLoginAt),isAnonymous:p};Object.assign(n,v)}async function ON(n){const e=Dn(n);await Uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FN(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function HS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(n,e){const t=await qS(n,{},async()=>{const i=Au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=n.config,u=await BS(n,r,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:d,body:i};return n.emulatorConfig&&ba(n.emulatorConfig.host)&&(g.credentials="include"),GS.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qN(n,e){return To(n,"POST","/v2/accounts:revokeToken",Eo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):b0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=b0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:a}=await GN(e,t);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:a}=t,u=new pa;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),r&&(Ce(typeof r=="string","internal-error",{appName:e}),u.accessToken=r),a&&(Ce(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pa,this.toJSON())}_performRefresh(){return fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ui{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new LN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new em(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await cu(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return kN(this,e)}reload(){return ON(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ui({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Uf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(hs(this.auth));const e=await this.getIdToken();return await cu(this,VN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:w,providerData:P,stsTokenManager:G}=t;Ce(E&&G,e,"internal-error");const O=pa.fromJSON(this.name,G);Ce(typeof E=="string",e,"internal-error"),no(i,e.name),no(r,e.name),Ce(typeof S=="boolean",e,"internal-error"),Ce(typeof w=="boolean",e,"internal-error"),no(a,e.name),no(u,e.name),no(d,e.name),no(g,e.name),no(p,e.name),no(v,e.name);const Y=new ui({uid:E,auth:e,email:r,emailVerified:S,displayName:i,isAnonymous:w,photoURL:u,phoneNumber:a,tenantId:d,stsTokenManager:O,createdAt:p,lastLoginAt:v});return P&&Array.isArray(P)&&(Y.providerData=P.map(Q=>({...Q}))),g&&(Y._redirectEventId=g),Y}static async _fromIdTokenResponse(e,t,i=!1){const r=new pa;r.updateFromServerResponse(t);const a=new ui({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Uf(a),a}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Ce(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?HS(r.providerUserInfo):[],u=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),d=new pa;d.updateFromIdToken(i);const g=new ui({uid:r.localId,auth:e,stsTokenManager:d,isAnonymous:u}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new em(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=new Map;function ds(n){gs(n instanceof Function,"Expected a class definition");let e=N0.get(n);return e?(gs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,N0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zS.type="NONE";const x0=zS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(n,e,t){return`firebase:${n}:${e}:${t}`}class ma{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=Tf(this.userKey,r.apiKey,a),this.fullPersistenceKey=Tf("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await kf(this.auth,{idToken:e}).catch(()=>{});return t?ui._fromGetAccountInfoResponse(this.auth,t,e):null}return ui._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ma(ds(x0),e,i);const r=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=r[0]||ds(x0);const u=Tf(i,e.config.apiKey,e.name);let d=null;for(const p of t)try{const v=await p._get(u);if(v){let E;if(typeof v=="string"){const S=await kf(e,{idToken:v}).catch(()=>{});if(!S)break;E=await ui._fromGetAccountInfoResponse(e,S,v)}else E=ui._fromJSON(e,v);p!==a&&(d=E),a=p;break}}catch{}const g=r.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!g.length?new ma(a,e,i):(a=g[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(u)}catch{}})),new ma(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($S(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XS(e))return"Blackberry";if(WS(e))return"Webos";if(KS(e))return"Safari";if((e.includes("chrome/")||YS(e))&&!e.includes("edge/"))return"Chrome";if(QS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function JS(n=an()){return/firefox\//i.test(n)}function KS(n=an()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YS(n=an()){return/crios\//i.test(n)}function $S(n=an()){return/iemobile/i.test(n)}function QS(n=an()){return/android/i.test(n)}function XS(n=an()){return/blackberry/i.test(n)}function WS(n=an()){return/webos/i.test(n)}function Hm(n=an()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function BN(n=an()){var e;return Hm(n)&&!!((e=window.navigator)!=null&&e.standalone)}function HN(){return nb()&&document.documentMode===10}function jS(n=an()){return Hm(n)||QS(n)||WS(n)||XS(n)||/windows phone/i.test(n)||$S(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(n,e=[]){let t;switch(n){case"Browser":t=M0(an());break;case"Worker":t=`${M0(an())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Na}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const g=e(a);u(g)}catch(g){d(g)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(n,e={}){return To(n,"GET","/v2/passwordPolicy",Eo(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=6;class YN{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??KN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new D0(this),this.idTokenSubscription=new D0(this),this.beforeStateQueue=new zN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ds(t)),this._initializationPromise=this.queue(async()=>{var i,r,a;if(!this._deleted&&(this.persistenceManager=await ma.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await kf(this,{idToken:e}),i=await ui._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Mn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,d=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===d)&&(g!=null&&g.user)&&(i=g.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Uf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mn(this.app))return Promise.reject(hs(this));const t=e?Dn(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mn(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JN(this),t=new YN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Su("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await qN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ds(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await ma.create(this,[ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,r);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&SN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function So(n){return Dn(n)}class D0{constructor(e){this.auth=e,this.observer=null,this.addObserver=cb(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QN(n){ad=n}function eA(n){return ad.loadJS(n)}function XN(){return ad.recaptchaEnterpriseScript}function WN(){return ad.gapiScript}function jN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class ZN{constructor(){this.enterprise=new ex}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ex{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const tx="recaptcha-enterprise",tA="NO_RECAPTCHA";class nx{constructor(e){this.type=tx,this.auth=So(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{PN(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new DN(g);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,u(p.siteKey)}}).catch(g=>{d(g)})})}function r(a,u,d){const g=window.grecaptcha;R0(g)?g.enterprise.ready(()=>{g.enterprise.execute(a,{action:e}).then(p=>{u(p)}).catch(()=>{u(tA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZN().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&R0(window.grecaptcha))r(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let g=XN();g.length!==0&&(g+=d),eA(g).then(()=>{r(d,a,u)}).catch(p=>{u(p)})}}).catch(d=>{u(d)})})}}async function P0(n,e,t,i=!1,r=!1){const a=new nx(n);let u;if(r)u=tA;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const g=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const g=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function tm(n,e,t,i,r){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await P0(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await P0(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(n,e){const t=Om(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),a=t.getOptions();if(rr(a,e??{}))return r;Qn(r,"already-initialized")}return t.initialize({options:e})}function sx(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ds);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function ox(n,e,t){const i=So(n);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=nA(e),{host:u,port:d}=rx(e),g=d===null?"":`:${d}`,p={url:`${a}//${u}${g}/`},v=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(rr(p,i.config.emulator)&&rr(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,ba(u)?(xS(`${a}//${u}${g}`),MS("Auth",!0)):ax()}function nA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function rx(n){const e=nA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:V0(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:V0(u)}}}function V0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ax(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fs("not implemented")}_getIdTokenResponse(e){return fs("not implemented")}_linkToIdToken(e,t){return fs("not implemented")}_getReauthenticationResolver(e){return fs("not implemented")}}async function lx(n,e){return To(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ux(n,e){return Iu(n,"POST","/v1/accounts:signInWithPassword",Eo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(n,e){return Iu(n,"POST","/v1/accounts:signInWithEmailLink",Eo(n,e))}async function fx(n,e){return Iu(n,"POST","/v1/accounts:signInWithEmailLink",Eo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends zm{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new fu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new fu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tm(e,t,"signInWithPassword",ux);case"emailLink":return cx(e,{email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tm(e,i,"signUpPassword",lx);case"emailLink":return fx(e,{idToken:t,email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ga(n,e){return Iu(n,"POST","/v1/accounts:signInWithIdp",Eo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="http://localhost";class lr extends zm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new lr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...a}=t;if(!i||!r)return null;const u=new lr(i,r);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return ga(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ga(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ga(e,t)}buildRequest(){const e={requestUri:dx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Au(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function px(n){const e=$l(Ql(n)).link,t=e?$l(Ql(e)).deep_link_id:null,i=$l(Ql(n)).deep_link_id;return(i?$l(Ql(i)).link:null)||i||t||e||n}class Jm{constructor(e){const t=$l(Ql(e)),i=t.apiKey??null,r=t.oobCode??null,a=hx(t.mode??null);Ce(i&&r&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=px(e);try{return new Jm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.providerId=xa.PROVIDER_ID}static credential(e,t){return fu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Jm.parseLink(t);return Ce(i,"argument-error"),fu._fromEmailAndCode(e,i.code,i.tenantId)}}xa.PROVIDER_ID="password";xa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends Km{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends wu{constructor(){super("facebook.com")}static credential(e){return lr._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return so.credential(e.oauthAccessToken)}catch{return null}}}so.FACEBOOK_SIGN_IN_METHOD="facebook.com";so.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return lr._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return cs.credential(t,i)}catch{return null}}}cs.GOOGLE_SIGN_IN_METHOD="google.com";cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends wu{constructor(){super("github.com")}static credential(e){return lr._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oo.credential(e.oauthAccessToken)}catch{return null}}}oo.GITHUB_SIGN_IN_METHOD="github.com";oo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends wu{constructor(){super("twitter.com")}static credential(e,t){return lr._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ro.credential(t,i)}catch{return null}}}ro.TWITTER_SIGN_IN_METHOD="twitter.com";ro.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mx(n,e){return Iu(n,"POST","/v1/accounts:signUp",Eo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const a=await ui._fromIdTokenResponse(e,i,r),u=k0(i);return new ur({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=k0(i);return new ur({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function k0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf extends Es{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Lf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Lf(e,t,i,r)}}function iA(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Lf._fromErrorAndOperation(n,a,e,i):a})}async function gx(n,e,t=!1){const i=await cu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ur._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(n,e,t=!1){const{auth:i}=n;if(Mn(i.app))return Promise.reject(hs(i));const r="reauthenticate";try{const a=await cu(n,iA(i,r,e,n),t);Ce(a.idToken,i,"internal-error");const u=Bm(a.idToken);Ce(u,i,"internal-error");const{sub:d}=u;return Ce(n.uid===d,i,"user-mismatch"),ur._forOperation(n,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Qn(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sA(n,e,t=!1){if(Mn(n.app))return Promise.reject(hs(n));const i="signIn",r=await iA(n,i,e),a=await ur._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(a.user),a}async function _x(n,e){return sA(So(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oA(n){const e=So(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vx(n,e,t){if(Mn(n.app))return Promise.reject(hs(n));const i=So(n),u=await tm(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mx).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&oA(n),g}),d=await ur._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function Ex(n,e,t){return Mn(n.app)?Promise.reject(hs(n)):_x(Dn(n),xa.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&oA(n),i})}function Tx(n,e,t,i){return Dn(n).onIdTokenChanged(e,t,i)}function Sx(n,e,t){return Dn(n).beforeAuthStateChanged(e,t)}function Ax(n,e,t,i){return Dn(n).onAuthStateChanged(e,t,i)}function Cx(n){return Dn(n).signOut()}const Of="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Of,"1"),this.storage.removeItem(Of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=1e3,wx=10;class aA extends rA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,g)=>{this.notifyListeners(u,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);HN()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,wx):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Ix)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aA.type="LOCAL";const Rx=aA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA extends rA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lA.type="SESSION";const uA=lA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new ld(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:a}=t.data,u=this.handlersMap[r];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const d=Array.from(u).map(async p=>p(t.origin,a)),g=await bx(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ld.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,u;return new Promise((d,g)=>{const p=Ym("",20);r.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},i);u={messageChannel:r,onMessage(E){const S=E;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(v),clearTimeout(a),g(new Error("invalid_response"));break}}},this.handlers.add(u),r.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[r.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(){return window}function xx(n){Fi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(){return typeof Fi().WorkerGlobalScope<"u"&&typeof Fi().importScripts=="function"}async function Mx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Dx(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Px(){return cA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="firebaseLocalStorageDb",Vx=1,Ff="firebaseLocalStorage",dA="fbase_key";class Ru{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ud(n,e){return n.transaction([Ff],e?"readwrite":"readonly").objectStore(Ff)}function kx(){const n=indexedDB.deleteDatabase(fA);return new Ru(n).toPromise()}function nm(){const n=indexedDB.open(fA,Vx);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Ff,{keyPath:dA})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Ff)?e(i):(i.close(),await kx(),e(await nm()))})})}async function U0(n,e,t){const i=ud(n,!0).put({[dA]:e,value:t});return new Ru(i).toPromise()}async function Ux(n,e){const t=ud(n,!1).get(e),i=await new Ru(t).toPromise();return i===void 0?null:i.value}function L0(n,e){const t=ud(n,!0).delete(e);return new Ru(t).toPromise()}const Lx=800,Ox=3;class hA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Ox)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ld._getInstance(Px()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await Mx(),!this.activeServiceWorker)return;this.sender=new Nx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Dx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nm();return await U0(e,Of,"1"),await L0(e,Of),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>U0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Ux(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>L0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=ud(r,!1).getAll();return new Ru(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Lx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hA.type="LOCAL";const Fx=hA;new Cu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(n,e){return e?ds(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m extends zm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ga(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ga(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ga(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Gx(n){return sA(n.auth,new $m(n),n.bypassAuthState)}function qx(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),yx(t,new $m(n),n.bypassAuthState)}async function Bx(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),gx(t,new $m(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gx;case"linkViaPopup":case"linkViaRedirect":return Bx;case"reauthViaPopup":case"reauthViaRedirect":return qx;default:Qn(this.auth,"internal-error")}}resolve(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=new Cu(2e3,1e4);async function zx(n,e,t){if(Mn(n.app))return Promise.reject(fi(n,"operation-not-supported-in-this-environment"));const i=So(n);AN(n,e,Km);const r=pA(i,t);return new ir(i,"signInViaPopup",e,r).executeNotNull()}class ir extends mA{constructor(e,t,i,r,a){super(e,t,r,a),this.provider=i,this.authWindow=null,this.pollId=null,ir.currentPopupAction&&ir.currentPopupAction.cancel(),ir.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){gs(this.filter.length===1,"Popup operations only handle one event");const e=Ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ir.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Hx.get())};e()}}ir.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="pendingRedirect",Sf=new Map;class Kx extends mA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Sf.get(this.auth._key());if(!e){try{const i=await Yx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Sf.set(this.auth._key(),e)}return this.bypassAuthState||Sf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Yx(n,e){const t=Xx(e),i=Qx(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function $x(n,e){Sf.set(n._key(),e)}function Qx(n){return ds(n._redirectPersistence)}function Xx(n){return Tf(Jx,n.config.apiKey,n.name)}async function Wx(n,e,t=!1){if(Mn(n.app))return Promise.reject(hs(n));const i=So(n),r=pA(i,e),u=await new Kx(i,r,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=600*1e3;class Zx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!e1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!gA(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(fi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jx&&this.cachedEventUids.clear(),this.cachedEventUids.has(O0(e))}saveEventToCache(e){this.cachedEventUids.add(O0(e)),this.lastProcessedEventTime=Date.now()}}function O0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function gA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function e1(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t1(n,e={}){return To(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i1=/^https?/;async function s1(n){if(n.config.emulator)return;const{authorizedDomains:e}=await t1(n);for(const t of e)try{if(o1(t))return}catch{}Qn(n,"unauthorized-domain")}function o1(n){const e=Zp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!i1.test(t))return!1;if(n1.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=new Cu(3e4,6e4);function F0(){const n=Fi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function a1(n){return new Promise((e,t)=>{var r,a,u;function i(){F0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{F0(),t(fi(n,"network-request-failed"))},timeout:r1.get()})}if((a=(r=Fi().gapi)==null?void 0:r.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=Fi().gapi)!=null&&u.load)i();else{const d=jN("iframefcb");return Fi()[d]=()=>{gapi.load?i():t(fi(n,"network-request-failed"))},eA(`${WN()}?onload=${d}`).catch(g=>t(g))}}).catch(e=>{throw Af=null,e})}let Af=null;function l1(n){return Af=Af||a1(n),Af}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=new Cu(5e3,15e3),c1="__/auth/iframe",f1="emulator/auth/iframe",d1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},h1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function p1(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?qm(e,f1):`https://${n.config.authDomain}/${c1}`,i={apiKey:e.apiKey,appName:n.name,v:Na},r=h1.get(n.config.apiHost);r&&(i.eid=r);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Au(i).slice(1)}`}async function m1(n){const e=await l1(n),t=Fi().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:p1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d1,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const u=fi(n,"network-request-failed"),d=Fi().setTimeout(()=>{a(u)},u1.get());function g(){Fi().clearTimeout(d),r(i)}i.ping(g).then(g,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y1=500,_1=600,v1="_blank",E1="http://localhost";class G0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function T1(n,e,t,i=y1,r=_1){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const g={...g1,width:i.toString(),height:r.toString(),top:a,left:u},p=an().toLowerCase();t&&(d=YS(p)?v1:t),JS(p)&&(e=e||E1,g.scrollbars="yes");const v=Object.entries(g).reduce((S,[w,P])=>`${S}${w}=${P},`,"");if(BN(p)&&d!=="_self")return S1(e||"",d),new G0(null);const E=window.open(e||"",d,v);Ce(E,n,"popup-blocked");try{E.focus()}catch{}return new G0(E)}function S1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="__/auth/handler",C1="emulator/auth/handler",I1=encodeURIComponent("fac");async function q0(n,e,t,i,r,a){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Na,eventId:r};if(e instanceof Km){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",ub(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof wu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const g=await n._getAppCheckToken(),p=g?`#${I1}=${encodeURIComponent(g)}`:"";return`${w1(n)}?${Au(d).slice(1)}${p}`}function w1({config:n}){return n.emulator?qm(n,C1):`https://${n.authDomain}/${A1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="webStorageSupport";class R1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uA,this._completeRedirectFn=Wx,this._overrideRedirectResult=$x}async _openPopup(e,t,i,r){var u;gs((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await q0(e,t,i,Zp(),r);return T1(e,a,Ym())}async _openRedirect(e,t,i,r){await this._originValidation(e);const a=await q0(e,t,i,Zp(),r);return xx(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:a}=this.eventManagers[t];return r?Promise.resolve(r):(gs(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await m1(e),i=new Zx(e);return t.register("authEvent",r=>(Ce(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fp,{type:Fp},r=>{var u;const a=(u=r==null?void 0:r[0])==null?void 0:u[Fp];a!==void 0&&t(!!a),Qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=s1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jS()||KS()||Hm()}}const b1=R1;var B0="@firebase/auth",H0="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function M1(n){Ta(new ar("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ce(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZS(n)},p=new $N(i,r,a,g);return sx(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ta(new ar("auth-internal",e=>{const t=So(e.getProvider("auth").getImmediate());return(i=>new N1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),co(B0,H0,x1(n)),co(B0,H0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=300,P1=NS("authIdTokenMaxAge")||D1;let z0=null;const V1=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>P1)return;const r=t==null?void 0:t.token;z0!==r&&(z0=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function k1(n=kS()){const e=Om(n,"auth");if(e.isInitialized())return e.getImmediate();const t=ix(n,{popupRedirectResolver:b1,persistence:[Fx,Rx,uA]}),i=NS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=V1(a.toString());Sx(t,u,()=>u(t.currentUser)),Tx(t,d=>u(d))}}const r=RS("auth");return r&&ox(t,`http://${r}`),t}function U1(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}QN({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const a=fi("internal-error");a.customData=r,t(a)},i.type="text/javascript",i.charset="UTF-8",U1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});M1("Browser");var L1="firebase",O1="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */co(L1,O1,"app");var J0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fo,yA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,x){function M(){}M.prototype=x.prototype,N.F=x.prototype,N.prototype=new M,N.prototype.constructor=N,N.D=function(L,U,q){for(var D=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)D[xe-2]=arguments[xe];return x.prototype[U].apply(L,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,x,M){M||(M=0);const L=Array(16);if(typeof x=="string")for(var U=0;U<16;++U)L[U]=x.charCodeAt(M++)|x.charCodeAt(M++)<<8|x.charCodeAt(M++)<<16|x.charCodeAt(M++)<<24;else for(U=0;U<16;++U)L[U]=x[M++]|x[M++]<<8|x[M++]<<16|x[M++]<<24;x=N.g[0],M=N.g[1],U=N.g[2];let q=N.g[3],D;D=x+(q^M&(U^q))+L[0]+3614090360&4294967295,x=M+(D<<7&4294967295|D>>>25),D=q+(U^x&(M^U))+L[1]+3905402710&4294967295,q=x+(D<<12&4294967295|D>>>20),D=U+(M^q&(x^M))+L[2]+606105819&4294967295,U=q+(D<<17&4294967295|D>>>15),D=M+(x^U&(q^x))+L[3]+3250441966&4294967295,M=U+(D<<22&4294967295|D>>>10),D=x+(q^M&(U^q))+L[4]+4118548399&4294967295,x=M+(D<<7&4294967295|D>>>25),D=q+(U^x&(M^U))+L[5]+1200080426&4294967295,q=x+(D<<12&4294967295|D>>>20),D=U+(M^q&(x^M))+L[6]+2821735955&4294967295,U=q+(D<<17&4294967295|D>>>15),D=M+(x^U&(q^x))+L[7]+4249261313&4294967295,M=U+(D<<22&4294967295|D>>>10),D=x+(q^M&(U^q))+L[8]+1770035416&4294967295,x=M+(D<<7&4294967295|D>>>25),D=q+(U^x&(M^U))+L[9]+2336552879&4294967295,q=x+(D<<12&4294967295|D>>>20),D=U+(M^q&(x^M))+L[10]+4294925233&4294967295,U=q+(D<<17&4294967295|D>>>15),D=M+(x^U&(q^x))+L[11]+2304563134&4294967295,M=U+(D<<22&4294967295|D>>>10),D=x+(q^M&(U^q))+L[12]+1804603682&4294967295,x=M+(D<<7&4294967295|D>>>25),D=q+(U^x&(M^U))+L[13]+4254626195&4294967295,q=x+(D<<12&4294967295|D>>>20),D=U+(M^q&(x^M))+L[14]+2792965006&4294967295,U=q+(D<<17&4294967295|D>>>15),D=M+(x^U&(q^x))+L[15]+1236535329&4294967295,M=U+(D<<22&4294967295|D>>>10),D=x+(U^q&(M^U))+L[1]+4129170786&4294967295,x=M+(D<<5&4294967295|D>>>27),D=q+(M^U&(x^M))+L[6]+3225465664&4294967295,q=x+(D<<9&4294967295|D>>>23),D=U+(x^M&(q^x))+L[11]+643717713&4294967295,U=q+(D<<14&4294967295|D>>>18),D=M+(q^x&(U^q))+L[0]+3921069994&4294967295,M=U+(D<<20&4294967295|D>>>12),D=x+(U^q&(M^U))+L[5]+3593408605&4294967295,x=M+(D<<5&4294967295|D>>>27),D=q+(M^U&(x^M))+L[10]+38016083&4294967295,q=x+(D<<9&4294967295|D>>>23),D=U+(x^M&(q^x))+L[15]+3634488961&4294967295,U=q+(D<<14&4294967295|D>>>18),D=M+(q^x&(U^q))+L[4]+3889429448&4294967295,M=U+(D<<20&4294967295|D>>>12),D=x+(U^q&(M^U))+L[9]+568446438&4294967295,x=M+(D<<5&4294967295|D>>>27),D=q+(M^U&(x^M))+L[14]+3275163606&4294967295,q=x+(D<<9&4294967295|D>>>23),D=U+(x^M&(q^x))+L[3]+4107603335&4294967295,U=q+(D<<14&4294967295|D>>>18),D=M+(q^x&(U^q))+L[8]+1163531501&4294967295,M=U+(D<<20&4294967295|D>>>12),D=x+(U^q&(M^U))+L[13]+2850285829&4294967295,x=M+(D<<5&4294967295|D>>>27),D=q+(M^U&(x^M))+L[2]+4243563512&4294967295,q=x+(D<<9&4294967295|D>>>23),D=U+(x^M&(q^x))+L[7]+1735328473&4294967295,U=q+(D<<14&4294967295|D>>>18),D=M+(q^x&(U^q))+L[12]+2368359562&4294967295,M=U+(D<<20&4294967295|D>>>12),D=x+(M^U^q)+L[5]+4294588738&4294967295,x=M+(D<<4&4294967295|D>>>28),D=q+(x^M^U)+L[8]+2272392833&4294967295,q=x+(D<<11&4294967295|D>>>21),D=U+(q^x^M)+L[11]+1839030562&4294967295,U=q+(D<<16&4294967295|D>>>16),D=M+(U^q^x)+L[14]+4259657740&4294967295,M=U+(D<<23&4294967295|D>>>9),D=x+(M^U^q)+L[1]+2763975236&4294967295,x=M+(D<<4&4294967295|D>>>28),D=q+(x^M^U)+L[4]+1272893353&4294967295,q=x+(D<<11&4294967295|D>>>21),D=U+(q^x^M)+L[7]+4139469664&4294967295,U=q+(D<<16&4294967295|D>>>16),D=M+(U^q^x)+L[10]+3200236656&4294967295,M=U+(D<<23&4294967295|D>>>9),D=x+(M^U^q)+L[13]+681279174&4294967295,x=M+(D<<4&4294967295|D>>>28),D=q+(x^M^U)+L[0]+3936430074&4294967295,q=x+(D<<11&4294967295|D>>>21),D=U+(q^x^M)+L[3]+3572445317&4294967295,U=q+(D<<16&4294967295|D>>>16),D=M+(U^q^x)+L[6]+76029189&4294967295,M=U+(D<<23&4294967295|D>>>9),D=x+(M^U^q)+L[9]+3654602809&4294967295,x=M+(D<<4&4294967295|D>>>28),D=q+(x^M^U)+L[12]+3873151461&4294967295,q=x+(D<<11&4294967295|D>>>21),D=U+(q^x^M)+L[15]+530742520&4294967295,U=q+(D<<16&4294967295|D>>>16),D=M+(U^q^x)+L[2]+3299628645&4294967295,M=U+(D<<23&4294967295|D>>>9),D=x+(U^(M|~q))+L[0]+4096336452&4294967295,x=M+(D<<6&4294967295|D>>>26),D=q+(M^(x|~U))+L[7]+1126891415&4294967295,q=x+(D<<10&4294967295|D>>>22),D=U+(x^(q|~M))+L[14]+2878612391&4294967295,U=q+(D<<15&4294967295|D>>>17),D=M+(q^(U|~x))+L[5]+4237533241&4294967295,M=U+(D<<21&4294967295|D>>>11),D=x+(U^(M|~q))+L[12]+1700485571&4294967295,x=M+(D<<6&4294967295|D>>>26),D=q+(M^(x|~U))+L[3]+2399980690&4294967295,q=x+(D<<10&4294967295|D>>>22),D=U+(x^(q|~M))+L[10]+4293915773&4294967295,U=q+(D<<15&4294967295|D>>>17),D=M+(q^(U|~x))+L[1]+2240044497&4294967295,M=U+(D<<21&4294967295|D>>>11),D=x+(U^(M|~q))+L[8]+1873313359&4294967295,x=M+(D<<6&4294967295|D>>>26),D=q+(M^(x|~U))+L[15]+4264355552&4294967295,q=x+(D<<10&4294967295|D>>>22),D=U+(x^(q|~M))+L[6]+2734768916&4294967295,U=q+(D<<15&4294967295|D>>>17),D=M+(q^(U|~x))+L[13]+1309151649&4294967295,M=U+(D<<21&4294967295|D>>>11),D=x+(U^(M|~q))+L[4]+4149444226&4294967295,x=M+(D<<6&4294967295|D>>>26),D=q+(M^(x|~U))+L[11]+3174756917&4294967295,q=x+(D<<10&4294967295|D>>>22),D=U+(x^(q|~M))+L[2]+718787259&4294967295,U=q+(D<<15&4294967295|D>>>17),D=M+(q^(U|~x))+L[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(U+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+U&4294967295,N.g[3]=N.g[3]+q&4294967295}i.prototype.v=function(N,x){x===void 0&&(x=N.length);const M=x-this.blockSize,L=this.C;let U=this.h,q=0;for(;q<x;){if(U==0)for(;q<=M;)r(this,N,q),q+=this.blockSize;if(typeof N=="string"){for(;q<x;)if(L[U++]=N.charCodeAt(q++),U==this.blockSize){r(this,L),U=0;break}}else for(;q<x;)if(L[U++]=N[q++],U==this.blockSize){r(this,L),U=0;break}}this.h=U,this.o+=x},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;x=this.o*8;for(var M=N.length-8;M<N.length;++M)N[M]=x&255,x/=256;for(this.v(N),N=Array(16),x=0,M=0;M<4;++M)for(let L=0;L<32;L+=8)N[x++]=this.g[M]>>>L&255;return N};function a(N,x){var M=d;return Object.prototype.hasOwnProperty.call(M,N)?M[N]:M[N]=x(N)}function u(N,x){this.h=x;const M=[];let L=!0;for(let U=N.length-1;U>=0;U--){const q=N[U]|0;L&&q==x||(M[U]=q,L=!1)}this.g=M}var d={};function g(N){return-128<=N&&N<128?a(N,function(x){return new u([x|0],x<0?-1:0)}):new u([N|0],N<0?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return E;if(N<0)return O(p(-N));const x=[];let M=1;for(let L=0;N>=M;L++)x[L]=N/M|0,M*=4294967296;return new u(x,0)}function v(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return O(v(N.substring(1),x));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=p(Math.pow(x,8));let L=E;for(let q=0;q<N.length;q+=8){var U=Math.min(8,N.length-q);const D=parseInt(N.substring(q,q+U),x);U<8?(U=p(Math.pow(x,U)),L=L.j(U).add(p(D))):(L=L.j(M),L=L.add(p(D)))}return L}var E=g(0),S=g(1),w=g(16777216);n=u.prototype,n.m=function(){if(G(this))return-O(this).m();let N=0,x=1;for(let M=0;M<this.g.length;M++){const L=this.i(M);N+=(L>=0?L:4294967296+L)*x,x*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(P(this))return"0";if(G(this))return"-"+O(this).toString(N);const x=p(Math.pow(N,6));var M=this;let L="";for(;;){const U=oe(M,x).g;M=Y(M,U.j(x));let q=((M.g.length>0?M.g[0]:M.h)>>>0).toString(N);if(M=U,P(M))return q+L;for(;q.length<6;)q="0"+q;L=q+L}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function P(N){if(N.h!=0)return!1;for(let x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function G(N){return N.h==-1}n.l=function(N){return N=Y(this,N),G(N)?-1:P(N)?0:1};function O(N){const x=N.g.length,M=[];for(let L=0;L<x;L++)M[L]=~N.g[L];return new u(M,~N.h).add(S)}n.abs=function(){return G(this)?O(this):this},n.add=function(N){const x=Math.max(this.g.length,N.g.length),M=[];let L=0;for(let U=0;U<=x;U++){let q=L+(this.i(U)&65535)+(N.i(U)&65535),D=(q>>>16)+(this.i(U)>>>16)+(N.i(U)>>>16);L=D>>>16,q&=65535,D&=65535,M[U]=D<<16|q}return new u(M,M[M.length-1]&-2147483648?-1:0)};function Y(N,x){return N.add(O(x))}n.j=function(N){if(P(this)||P(N))return E;if(G(this))return G(N)?O(this).j(O(N)):O(O(this).j(N));if(G(N))return O(this.j(O(N)));if(this.l(w)<0&&N.l(w)<0)return p(this.m()*N.m());const x=this.g.length+N.g.length,M=[];for(var L=0;L<2*x;L++)M[L]=0;for(L=0;L<this.g.length;L++)for(let U=0;U<N.g.length;U++){const q=this.i(L)>>>16,D=this.i(L)&65535,xe=N.i(U)>>>16,nt=N.i(U)&65535;M[2*L+2*U]+=D*nt,Q(M,2*L+2*U),M[2*L+2*U+1]+=q*nt,Q(M,2*L+2*U+1),M[2*L+2*U+1]+=D*xe,Q(M,2*L+2*U+1),M[2*L+2*U+2]+=q*xe,Q(M,2*L+2*U+2)}for(N=0;N<x;N++)M[N]=M[2*N+1]<<16|M[2*N];for(N=x;N<2*x;N++)M[N]=0;return new u(M,0)};function Q(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function j(N,x){this.g=N,this.h=x}function oe(N,x){if(P(x))throw Error("division by zero");if(P(N))return new j(E,E);if(G(N))return x=oe(O(N),x),new j(O(x.g),O(x.h));if(G(x))return x=oe(N,O(x)),new j(O(x.g),x.h);if(N.g.length>30){if(G(N)||G(x))throw Error("slowDivide_ only works with positive integers.");for(var M=S,L=x;L.l(N)<=0;)M=W(M),L=W(L);var U=he(M,1),q=he(L,1);for(L=he(L,2),M=he(M,2);!P(L);){var D=q.add(L);D.l(N)<=0&&(U=U.add(M),q=D),L=he(L,1),M=he(M,1)}return x=Y(N,U.j(x)),new j(U,x)}for(U=E;N.l(x)>=0;){for(M=Math.max(1,Math.floor(N.m()/x.m())),L=Math.ceil(Math.log(M)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),q=p(M),D=q.j(x);G(D)||D.l(N)>0;)M-=L,q=p(M),D=q.j(x);P(q)&&(q=S),U=U.add(q),N=Y(N,D)}return new j(U,N)}n.B=function(N){return oe(this,N).h},n.and=function(N){const x=Math.max(this.g.length,N.g.length),M=[];for(let L=0;L<x;L++)M[L]=this.i(L)&N.i(L);return new u(M,this.h&N.h)},n.or=function(N){const x=Math.max(this.g.length,N.g.length),M=[];for(let L=0;L<x;L++)M[L]=this.i(L)|N.i(L);return new u(M,this.h|N.h)},n.xor=function(N){const x=Math.max(this.g.length,N.g.length),M=[];for(let L=0;L<x;L++)M[L]=this.i(L)^N.i(L);return new u(M,this.h^N.h)};function W(N){const x=N.g.length+1,M=[];for(let L=0;L<x;L++)M[L]=N.i(L)<<1|N.i(L-1)>>>31;return new u(M,N.h)}function he(N,x){const M=x>>5;x%=32;const L=N.g.length-M,U=[];for(let q=0;q<L;q++)U[q]=x>0?N.i(q+M)>>>x|N.i(q+M+1)<<32-x:N.i(q+M);return new u(U,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,yA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=v,fo=u}).apply(typeof J0<"u"?J0:typeof self<"u"?self:typeof window<"u"?window:{});var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _A,Xl,vA,Cf,im,EA,TA,SA;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof cf=="object"&&cf];for(var T=0;T<m.length;++T){var C=m[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function r(m,T){if(T)e:{var C=i;m=m.split(".");for(var b=0;b<m.length-1;b++){var H=m[b];if(!(H in C))break e;C=C[H]}m=m[m.length-1],b=C[m],T=T(b),T!=b&&T!=null&&e(C,m,{configurable:!0,writable:!0,value:T})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(T){var C=[],b;for(b in T)Object.prototype.hasOwnProperty.call(T,b)&&C.push([b,T[b]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(m){var T=typeof m;return T=="object"&&m!=null||T=="function"}function g(m,T,C){return m.call.apply(m.bind,arguments)}function p(m,T,C){return p=g,p.apply(null,arguments)}function v(m,T){var C=Array.prototype.slice.call(arguments,1);return function(){var b=C.slice();return b.push.apply(b,arguments),m.apply(this,b)}}function E(m,T){function C(){}C.prototype=T.prototype,m.Z=T.prototype,m.prototype=new C,m.prototype.constructor=m,m.Ob=function(b,H,$){for(var le=Array(arguments.length-2),De=2;De<arguments.length;De++)le[De-2]=arguments[De];return T.prototype[H].apply(b,le)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const T=m.length;if(T>0){const C=Array(T);for(let b=0;b<T;b++)C[b]=m[b];return C}return[]}function P(m,T){for(let b=1;b<arguments.length;b++){const H=arguments[b];var C=typeof H;if(C=C!="object"?C:H?Array.isArray(H)?"array":C:"null",C=="array"||C=="object"&&typeof H.length=="number"){C=m.length||0;const $=H.length||0;m.length=C+$;for(let le=0;le<$;le++)m[C+le]=H[le]}else m.push(H)}}class G{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function O(m){u.setTimeout(()=>{throw m},0)}function Y(){var m=N;let T=null;return m.g&&(T=m.g,m.g=m.g.next,m.g||(m.h=null),T.next=null),T}class Q{constructor(){this.h=this.g=null}add(T,C){const b=j.get();b.set(T,C),this.h?this.h.next=b:this.g=b,this.h=b}}var j=new G(()=>new oe,m=>m.reset());class oe{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let W,he=!1,N=new Q,x=()=>{const m=Promise.resolve(void 0);W=()=>{m.then(M)}};function M(){for(var m;m=Y();){try{m.h.call(m.g)}catch(C){O(C)}var T=j;T.j(m),T.h<100&&(T.h++,m.next=T.g,T.g=m)}he=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(m,T){this.type=m,this.g=this.target=T,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,T=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};u.addEventListener("test",C,T),u.removeEventListener("test",C,T)}catch{}return m})();function D(m){return/^[\s\xa0]*$/.test(m)}function xe(m,T){U.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,T)}E(xe,U),xe.prototype.init=function(m,T){const C=this.type=m.type,b=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=T,T=m.relatedTarget,T||(C=="mouseover"?T=m.fromElement:C=="mouseout"&&(T=m.toElement)),this.relatedTarget=T,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var nt="closure_listenable_"+(Math.random()*1e6|0),Z=0;function ce(m,T,C,b,H){this.listener=m,this.proxy=null,this.src=T,this.type=C,this.capture=!!b,this.ha=H,this.key=++Z,this.da=this.fa=!1}function me(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ke(m,T,C){for(const b in m)T.call(C,m[b],b,m)}function fe(m,T){for(const C in m)T.call(void 0,m[C],C,m)}function V(m){const T={};for(const C in m)T[C]=m[C];return T}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(m,T){let C,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(C in b)m[C]=b[C];for(let $=0;$<ee.length;$++)C=ee[$],Object.prototype.hasOwnProperty.call(b,C)&&(m[C]=b[C])}}function ue(m){this.src=m,this.g={},this.h=0}ue.prototype.add=function(m,T,C,b,H){const $=m.toString();m=this.g[$],m||(m=this.g[$]=[],this.h++);const le=Me(m,T,b,H);return le>-1?(T=m[le],C||(T.fa=!1)):(T=new ce(T,this.src,$,!!b,H),T.fa=C,m.push(T)),T};function Te(m,T){const C=T.type;if(C in m.g){var b=m.g[C],H=Array.prototype.indexOf.call(b,T,void 0),$;($=H>=0)&&Array.prototype.splice.call(b,H,1),$&&(me(T),m.g[C].length==0&&(delete m.g[C],m.h--))}}function Me(m,T,C,b){for(let H=0;H<m.length;++H){const $=m[H];if(!$.da&&$.listener==T&&$.capture==!!C&&$.ha==b)return H}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Vt={};function ft(m,T,C,b,H){if(Array.isArray(T)){for(let $=0;$<T.length;$++)ft(m,T[$],C,b,H);return null}return C=Ga(C),m&&m[nt]?m.J(T,C,d(b)?!!b.capture:!1,H):Co(m,T,C,!1,b,H)}function Co(m,T,C,b,H,$){if(!T)throw Error("Invalid event type");const le=d(H)?!!H.capture:!!H;let De=Io(m);if(De||(m[ze]=De=new ue(m)),C=De.add(T,C,b,le,$),C.proxy)return C;if(b=yr(),C.proxy=b,b.src=m,b.listener=C,m.addEventListener)q||(H=le),H===void 0&&(H=!1),m.addEventListener(T.toString(),b,H);else if(m.attachEvent)m.attachEvent(gi(T.toString()),b);else if(m.addListener&&m.removeListener)m.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return C}function yr(){function m(C){return T.call(m.src,m.listener,C)}const T=Oa;return m}function _r(m,T,C,b,H){if(Array.isArray(T))for(var $=0;$<T.length;$++)_r(m,T[$],C,b,H);else b=d(b)?!!b.capture:!!b,C=Ga(C),m&&m[nt]?(m=m.i,$=String(T).toString(),$ in m.g&&(T=m.g[$],C=Me(T,C,b,H),C>-1&&(me(T[C]),Array.prototype.splice.call(T,C,1),T.length==0&&(delete m.g[$],m.h--)))):m&&(m=Io(m))&&(T=m.g[T.toString()],m=-1,T&&(m=Me(T,C,b,H)),(C=m>-1?T[m]:null)&&vr(C))}function vr(m){if(typeof m!="number"&&m&&!m.da){var T=m.src;if(T&&T[nt])Te(T.i,m);else{var C=m.type,b=m.proxy;T.removeEventListener?T.removeEventListener(C,b,m.capture):T.detachEvent?T.detachEvent(gi(C),b):T.addListener&&T.removeListener&&T.removeListener(b),(C=Io(T))?(Te(C,m),C.h==0&&(C.src=null,T[ze]=null)):me(m)}}}function gi(m){return m in Vt?Vt[m]:Vt[m]="on"+m}function Oa(m,T){if(m.da)m=!0;else{T=new xe(T,this);const C=m.listener,b=m.ha||m.src;m.fa&&vr(m),m=C.call(b,T)}return m}function Io(m){return m=m[ze],m instanceof ue?m:null}var Fa="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ga(m){return typeof m=="function"?m:(m[Fa]||(m[Fa]=function(T){return m.handleEvent(T)}),m[Fa])}function At(){L.call(this),this.i=new ue(this),this.M=this,this.G=null}E(At,L),At.prototype[nt]=!0,At.prototype.removeEventListener=function(m,T,C,b){_r(this,m,T,C,b)};function kt(m,T){var C,b=m.G;if(b)for(C=[];b;b=b.G)C.push(b);if(m=m.M,b=T.type||T,typeof T=="string")T=new U(T,m);else if(T instanceof U)T.target=T.target||m;else{var H=T;T=new U(b,m),ae(T,H)}H=!0;let $,le;if(C)for(le=C.length-1;le>=0;le--)$=T.g=C[le],H=As($,b,!0,T)&&H;if($=T.g=m,H=As($,b,!0,T)&&H,H=As($,b,!1,T)&&H,C)for(le=0;le<C.length;le++)$=T.g=C[le],H=As($,b,!1,T)&&H}At.prototype.N=function(){if(At.Z.N.call(this),this.i){var m=this.i;for(const T in m.g){const C=m.g[T];for(let b=0;b<C.length;b++)me(C[b]);delete m.g[T],m.h--}}this.G=null},At.prototype.J=function(m,T,C,b){return this.i.add(String(m),T,!1,C,b)},At.prototype.K=function(m,T,C,b){return this.i.add(String(m),T,!0,C,b)};function As(m,T,C,b){if(T=m.i.g[String(T)],!T)return!0;T=T.concat();let H=!0;for(let $=0;$<T.length;++$){const le=T[$];if(le&&!le.da&&le.capture==C){const De=le.listener,vt=le.ha||le.src;le.fa&&Te(m.i,le),H=De.call(vt,b)!==!1&&H}}return H&&!b.defaultPrevented}function Nd(m,T){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=p(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:u.setTimeout(m,T||0)}function Pu(m){m.g=Nd(()=>{m.g=null,m.i&&(m.i=!1,Pu(m))},m.l);const T=m.h;m.h=null,m.m.apply(null,T)}class ln extends L{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Pu(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wo(m){L.call(this),this.h=m,this.g={}}E(wo,L);var qa=[];function Ba(m){ke(m.g,function(T,C){this.g.hasOwnProperty(C)&&vr(T)},m),m.g={}}wo.prototype.N=function(){wo.Z.N.call(this),Ba(this)},wo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cs=u.JSON.stringify,xd=u.JSON.parse,Vu=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function ku(){}function Uu(){}var Wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){U.call(this,"d")}E(Jt,U);function Pn(){U.call(this,"c")}E(Pn,U);var _t={},Lu=null;function Er(){return Lu=Lu||new At}_t.Ia="serverreachability";function Ou(m){U.call(this,_t.Ia,m)}E(Ou,U);function yi(m){const T=Er();kt(T,new Ou(T))}_t.STAT_EVENT="statevent";function Ro(m,T){U.call(this,_t.STAT_EVENT,m),this.stat=T}E(Ro,U);function Ct(m){const T=Er();kt(T,new Ro(T,m))}_t.Ja="timingevent";function _i(m,T){U.call(this,_t.Ja,m),this.size=T}E(_i,U);function vi(m,T){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},T)}function jn(){this.g=!0}jn.prototype.ua=function(){this.g=!1};function Md(m,T,C,b,H,$){m.info(function(){if(m.g)if($){var le="",De=$.split("&");for(let Qe=0;Qe<De.length;Qe++){var vt=De[Qe].split("=");if(vt.length>1){const dt=vt[0];vt=vt[1];const Ln=dt.split("_");le=Ln.length>=2&&Ln[1]=="type"?le+(dt+"="+vt+"&"):le+(dt+"=redacted&")}}}else le=null;else le=$;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+T+`
`+C+`
`+le})}function Fu(m,T,C,b,H,$,le){m.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+T+`
`+C+`
`+$+" "+le})}function Ei(m,T,C,b){m.info(function(){return"XMLHTTP TEXT ("+T+"): "+Dd(m,C)+(b?" "+b:"")})}function bo(m,T){m.info(function(){return"TIMEOUT: "+T})}jn.prototype.info=function(){};function Dd(m,T){if(!m.g)return T;if(!T)return null;try{const $=JSON.parse(T);if($){for(m=0;m<$.length;m++)if(Array.isArray($[m])){var C=$[m];if(!(C.length<2)){var b=C[1];if(Array.isArray(b)&&!(b.length<1)){var H=b[0];if(H!="noop"&&H!="stop"&&H!="close")for(let le=1;le<b.length;le++)b[le]=""}}}}return Cs($)}catch{return T}}var No={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ha={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},za;function xo(){}E(xo,ku),xo.prototype.g=function(){return new XMLHttpRequest},za=new xo;function Ji(m){return encodeURIComponent(String(m))}function Gu(m){var T=1;m=m.split(":");const C=[];for(;T>0&&m.length;)C.push(m.shift()),T--;return m.length&&C.push(m.join(":")),C}function Zn(m,T,C,b){this.j=m,this.i=T,this.l=C,this.S=b||1,this.V=new wo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ei}function ei(){this.i=null,this.g="",this.h=!1}var It={},Ft={};function Ti(m,T,C){m.M=1,m.A=Mo(Rt(T)),m.u=C,m.R=!0,Tr(m,null)}function Tr(m,T){m.F=Date.now(),Si(m),m.B=Rt(m.A);var C=m.B,b=m.S;Array.isArray(b)||(b=[String(b)]),Ir(C.i,"t",b),m.C=0,C=m.j.L,m.h=new ei,m.g=tc(m.j,C?T:null,!m.u),m.P>0&&(m.O=new ln(p(m.Y,m,m.g),m.P)),T=m.V,C=m.g,b=m.ba;var H="readystatechange";Array.isArray(H)||(H&&(qa[0]=H.toString()),H=qa);for(let $=0;$<H.length;$++){const le=ft(C,H[$],b||T.handleEvent,!1,T.h||T);if(!le)break;T.g[le.key]=le}T=m.J?V(m.J):{},m.u?(m.v||(m.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,T)):(m.v="GET",m.g.ea(m.B,m.v,null,T)),yi(),Md(m.i,m.v,m.B,m.l,m.S,m.u)}Zn.prototype.ba=function(m){m=m.target;const T=this.O;T&&ii(m)==3?T.j():this.Y(m)},Zn.prototype.Y=function(m){try{if(m==this.g)e:{const De=ii(this.g),vt=this.g.ya(),Qe=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||Kt(this.g)))){this.K||De!=4||vt==7||(vt==8||Qe<=0?yi(3):yi(2)),Ai(this);var T=this.g.ca();this.X=T;var C=Pd(this);if(this.o=T==200,Fu(this.i,this.v,this.B,this.l,this.S,De,T),this.o){if(this.U&&!this.L){t:{if(this.g){var b,H=this.g;if((b=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(b)){var $=b;break t}}$=null}if(m=$)Ei(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ci(this,m);else{this.o=!1,this.m=3,Ct(12),Sn(this),Vn(this);break e}}if(this.R){m=!0;let dt;for(;!this.K&&this.C<C.length;)if(dt=Bu(this,C),dt==Ft){De==4&&(this.m=4,Ct(14),m=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==It){this.m=4,Ct(15),Ei(this.i,this.l,C,"[Invalid Chunk]"),m=!1;break}else Ei(this.i,this.l,dt,null),Ci(this,dt);if(qu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||C.length!=0||this.h.h||(this.m=1,Ct(16),m=!1),this.o=this.o&&m,!m)Ei(this.i,this.l,C,"[Invalid Chunked Response]"),Sn(this),Vn(this);else if(C.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),ol(le),le.P=!0,Ct(11))}}else Ei(this.i,this.l,C,null),Ci(this,C);De==4&&Sn(this),this.o&&!this.K&&(De==4?Wu(this.j,this):(this.o=!1,Si(this)))}else Yi(this.g),T==400&&C.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),Sn(this),Vn(this)}}}catch{}finally{}};function Pd(m){if(!qu(m))return m.g.la();const T=Kt(m.g);if(T==="")return"";let C="";const b=T.length,H=ii(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Sn(m),Vn(m),"";m.h.i=new u.TextDecoder}for(let $=0;$<b;$++)m.h.h=!0,C+=m.h.i.decode(T[$],{stream:!(H&&$==b-1)});return T.length=0,m.h.g+=C,m.C=0,m.h.g}function qu(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Bu(m,T){var C=m.C,b=T.indexOf(`
`,C);return b==-1?Ft:(C=Number(T.substring(C,b)),isNaN(C)?It:(b+=1,b+C>T.length?Ft:(T=T.slice(b,b+C),m.C=b+C,T)))}Zn.prototype.cancel=function(){this.K=!0,Sn(this)};function Si(m){m.T=Date.now()+m.H,Sr(m,m.H)}function Sr(m,T){if(m.D!=null)throw Error("WatchDog timer not null");m.D=vi(p(m.aa,m),T)}function Ai(m){m.D&&(u.clearTimeout(m.D),m.D=null)}Zn.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(bo(this.i,this.B),this.M!=2&&(yi(),Ct(17)),Sn(this),this.m=2,Vn(this)):Sr(this,this.T-m)};function Vn(m){m.j.I==0||m.K||Wu(m.j,m)}function Sn(m){Ai(m);var T=m.O;T&&typeof T.dispose=="function"&&T.dispose(),m.O=null,Ba(m.V),m.g&&(T=m.g,m.g=null,T.abort(),T.dispose())}function Ci(m,T){try{var C=m.j;if(C.I!=0&&(C.g==m||wi(C.h,m))){if(!m.L&&wi(C.h,m)&&C.I==3){try{var b=C.Ba.g.parse(T)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<m.F)xr(C),Ds(C);else break e;Oo(C),Ct(18)}}else C.xa=H[1],0<C.xa-C.K&&H[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=vi(p(C.Va,C),6e3));Ii(C.h)<=1&&C.ta&&(C.ta=void 0)}else Di(C,11)}else if((m.L||C.g==m)&&xr(C),!D(T))for(H=C.Ba.g.parse(T),T=0;T<H.length;T++){let Qe=H[T];const dt=Qe[0];if(!(dt<=C.K))if(C.K=dt,Qe=Qe[1],C.I==2)if(Qe[0]=="c"){C.M=Qe[1],C.ba=Qe[2];const Ln=Qe[3];Ln!=null&&(C.ka=Ln,C.j.info("VER="+C.ka));const Pi=Qe[4];Pi!=null&&(C.za=Pi,C.j.info("SVER="+C.za));const si=Qe[5];si!=null&&typeof si=="number"&&si>0&&(b=1.5*si,C.O=b,C.j.info("backChannelRequestTimeoutMs_="+b)),b=C;const oi=m.g;if(oi){const Fo=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fo){var $=b.h;$.g||Fo.indexOf("spdy")==-1&&Fo.indexOf("quic")==-1&&Fo.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Ya($,$.h),$.h=null))}if(b.G){const Mr=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;Mr&&(b.wa=Mr,Ze(b.J,b.G,Mr))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-m.F,C.j.info("Handshake RTT: "+C.T+"ms")),b=C;var le=m;if(b.na=ec(b,b.L?b.ba:null,b.W),le.L){$a(b.h,le);var De=le,vt=b.O;vt&&(De.H=vt),De.D&&(Ai(De),Si(De)),b.g=le}else Qu(b);C.i.length>0&&Mi(C)}else Qe[0]!="stop"&&Qe[0]!="close"||Di(C,7);else C.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Di(C,7):il(C):Qe[0]!="noop"&&C.l&&C.l.qa(Qe),C.A=0)}}yi(4)}catch{}}var wt=class{constructor(m,T){this.g=m,this.map=T}};function Ja(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ka(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ii(m){return m.h?1:m.g?m.g.size:0}function wi(m,T){return m.h?m.h==T:m.g?m.g.has(T):!1}function Ya(m,T){m.g?m.g.add(T):m.h=T}function $a(m,T){m.h&&m.h==T?m.h=null:m.g&&m.g.has(T)&&m.g.delete(T)}Ja.prototype.cancel=function(){if(this.i=Qa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Qa(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let T=m.i;for(const C of m.g.values())T=T.concat(C.G);return T}return w(m.i)}var Hu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ar(m,T){if(m){m=m.split("&");for(let C=0;C<m.length;C++){const b=m[C].indexOf("=");let H,$=null;b>=0?(H=m[C].substring(0,b),$=m[C].substring(b+1)):H=m[C],T(H,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function An(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;m instanceof An?(this.l=m.l,Gt(this,m.j),this.o=m.o,this.g=m.g,Is(this,m.u),this.h=m.h,Xa(this,Yu(m.i)),this.m=m.m):m&&(T=String(m).match(Hu))?(this.l=!1,Gt(this,T[1]||"",!0),this.o=Ri(T[2]||""),this.g=Ri(T[3]||"",!0),Is(this,T[4]),this.h=Ri(T[5]||"",!0),Xa(this,T[6]||"",!0),this.m=Ri(T[7]||"")):(this.l=!1,this.i=new Rs(null,this.l))}An.prototype.toString=function(){const m=[];var T=this.j;T&&m.push(Do(T,Cr,!0),":");var C=this.g;return(C||T=="file")&&(m.push("//"),(T=this.o)&&m.push(Do(T,Cr,!0),"@"),m.push(Ji(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&m.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(Do(C,C.charAt(0)=="/"?Wa:zu,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",Do(C,Ju)),m.join("")},An.prototype.resolve=function(m){const T=Rt(this);let C=!!m.j;C?Gt(T,m.j):C=!!m.o,C?T.o=m.o:C=!!m.g,C?T.g=m.g:C=m.u!=null;var b=m.h;if(C)Is(T,m.u);else if(C=!!m.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var H=T.h.lastIndexOf("/");H!=-1&&(b=T.h.slice(0,H+1)+b)}if(H=b,H==".."||H==".")b="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){b=H.lastIndexOf("/",0)==0,H=H.split("/");const $=[];for(let le=0;le<H.length;){const De=H[le++];De=="."?b&&le==H.length&&$.push(""):De==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),b&&le==H.length&&$.push("")):($.push(De),b=!0)}b=$.join("/")}else b=H}return C?T.h=b:C=m.i.toString()!=="",C?Xa(T,Yu(m.i)):C=!!m.m,C&&(T.m=m.m),T};function Rt(m){return new An(m)}function Gt(m,T,C){m.j=C?Ri(T,!0):T,m.j&&(m.j=m.j.replace(/:$/,""))}function Is(m,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);m.u=T}else m.u=null}function Xa(m,T,C){T instanceof Rs?(m.i=T,wr(m.i,m.l)):(C||(T=Do(T,ws)),m.i=new Rs(T,m.l))}function Ze(m,T,C){m.i.set(T,C)}function Mo(m){return Ze(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Ri(m,T){return m?T?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Do(m,T,C){return typeof m=="string"?(m=encodeURI(m).replace(T,hn),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function hn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Cr=/[#\/\?@]/g,zu=/[#\?:]/g,Wa=/[#\?]/g,ws=/[#\?@]/g,Ju=/#/g;function Rs(m,T){this.h=this.g=null,this.i=m||null,this.j=!!T}function pn(m){m.g||(m.g=new Map,m.h=0,m.i&&Ar(m.i,function(T,C){m.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=Rs.prototype,n.add=function(m,T){pn(this),this.i=null,m=bs(this,m);let C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(T),this.h+=1,this};function Ku(m,T){pn(m),T=bs(m,T),m.g.has(T)&&(m.i=null,m.h-=m.g.get(T).length,m.g.delete(T))}function ja(m,T){return pn(m),T=bs(m,T),m.g.has(T)}n.forEach=function(m,T){pn(this),this.g.forEach(function(C,b){C.forEach(function(H){m.call(T,H,b,this)},this)},this)};function Za(m,T){pn(m);let C=[];if(typeof T=="string")ja(m,T)&&(C=C.concat(m.g.get(bs(m,T))));else for(m=Array.from(m.g.values()),T=0;T<m.length;T++)C=C.concat(m[T]);return C}n.set=function(m,T){return pn(this),this.i=null,m=bs(this,m),ja(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[T]),this.h+=1,this},n.get=function(m,T){return m?(m=Za(this,m),m.length>0?String(m[0]):T):T};function Ir(m,T,C){Ku(m,T),C.length>0&&(m.i=null,m.g.set(bs(m,T),w(C)),m.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],T=Array.from(this.g.keys());for(let b=0;b<T.length;b++){var C=T[b];const H=Ji(C);C=Za(this,C);for(let $=0;$<C.length;$++){let le=H;C[$]!==""&&(le+="="+Ji(C[$])),m.push(le)}}return this.i=m.join("&")};function Yu(m){const T=new Rs;return T.i=m.i,m.g&&(T.g=new Map(m.g),T.h=m.h),T}function bs(m,T){return T=String(T),m.j&&(T=T.toLowerCase()),T}function wr(m,T){T&&!m.j&&(pn(m),m.i=null,m.g.forEach(function(C,b){const H=b.toLowerCase();b!=H&&(Ku(this,b),Ir(this,H,C))},m)),m.j=T}function ti(m,T){const C=new jn;if(u.Image){const b=new Image;b.onload=v(kn,C,"TestLoadImage: loaded",!0,T,b),b.onerror=v(kn,C,"TestLoadImage: error",!1,T,b),b.onabort=v(kn,C,"TestLoadImage: abort",!1,T,b),b.ontimeout=v(kn,C,"TestLoadImage: timeout",!1,T,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=m}else T(!1)}function el(m,T){const C=new jn,b=new AbortController,H=setTimeout(()=>{b.abort(),kn(C,"TestPingServer: timeout",!1,T)},1e4);fetch(m,{signal:b.signal}).then($=>{clearTimeout(H),$.ok?kn(C,"TestPingServer: ok",!0,T):kn(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(H),kn(C,"TestPingServer: error",!1,T)})}function kn(m,T,C,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(C)}catch{}}function Ns(){this.g=new Vu}function bi(m){this.i=m.Sb||null,this.h=m.ab||!1}E(bi,ku),bi.prototype.g=function(){return new Po(this.i,this.h)};function Po(m,T){At.call(this),this.H=m,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Po,At),n=Po.prototype,n.open=function(m,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=T,this.readyState=1,ni(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(T.body=m),(this.H||u).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xs(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Rr(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Rr(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var T=m.value?m.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!m.done}))&&(this.response=this.responseText+=T)}m.done?xs(this):ni(this),this.readyState==3&&Rr(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,xs(this))},n.Na=function(m){this.g&&(this.response=m,xs(this))},n.ga=function(){this.g&&xs(this)};function xs(m){m.readyState=4,m.l=null,m.j=null,m.B=null,ni(m)}n.setRequestHeader=function(m,T){this.A.append(m,T)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=T.next();return m.join(`\r
`)};function ni(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Un(m){let T="";return ke(m,function(C,b){T+=b,T+=":",T+=C,T+=`\r
`}),T}function Vo(m,T,C){e:{for(b in C){var b=!1;break e}b=!0}b||(C=Un(C),typeof m=="string"?C!=null&&Ji(C):Ze(m,T,C))}function it(m){At.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(it,At);var Ni=/^https?$/i,tl=["POST","PUT"];n=it.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,T,C,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);T=T?T.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():za.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(T,String(m),!0),this.B=!1}catch($){ko(this,$);return}if(m=C||"",C=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)C.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const $ of b.keys())C.set($,b.get($));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(C.keys()).find($=>$.toLowerCase()=="content-type"),H=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(tl,T,void 0)>=0)||b||H||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,le]of C)this.g.setRequestHeader($,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch($){ko(this,$)}};function ko(m,T){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=T,m.o=5,nl(m),Ki(m)}function nl(m){m.A||(m.A=!0,kt(m,"complete"),kt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,kt(this,"complete"),kt(this,"abort"),Ki(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ki(this,!0)),it.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Uo(this):this.Xa())},n.Xa=function(){Uo(this)};function Uo(m){if(m.h&&typeof a<"u"){if(m.v&&ii(m)==4)setTimeout(m.Ca.bind(m),0);else if(kt(m,"readystatechange"),ii(m)==4){m.h=!1;try{const $=m.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var b;if(b=$===0){let le=String(m.D).match(Hu)[1]||null;!le&&u.self&&u.self.location&&(le=u.self.location.protocol.slice(0,-1)),b=!Ni.test(le?le.toLowerCase():"")}C=b}if(C)kt(m,"complete"),kt(m,"success");else{m.o=6;try{var H=ii(m)>2?m.g.statusText:""}catch{H=""}m.l=H+" ["+m.ca()+"]",nl(m)}}finally{Ki(m)}}}}function Ki(m,T){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const C=m.g;m.g=null,T||kt(m,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ii(m){return m.g?m.g.readyState:0}n.ca=function(){try{return ii(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var T=this.g.responseText;return m&&T.indexOf(m)==0&&(T=T.substring(m.length)),xd(T)}};function Kt(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Yi(m){const T={};m=(m.g&&ii(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<m.length;b++){if(D(m[b]))continue;var C=Gu(m[b]);const H=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const $=T[H]||[];T[H]=$,$.push(C)}fe(T,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xi(m,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||T}function Ms(m){this.za=0,this.i=[],this.j=new jn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xi("baseRetryDelayMs",5e3,m),this.Za=xi("retryDelaySeedMs",1e4,m),this.Ta=xi("forwardChannelMaxRetries",2,m),this.va=xi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Ja(m&&m.concurrentRequestLimit),this.Ba=new Ns,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ms.prototype,n.ka=8,n.I=1,n.connect=function(m,T,C,b){Ct(0),this.W=m,this.H=T||{},C&&b!==void 0&&(this.H.OSID=C,this.H.OAID=b),this.F=this.X,this.J=ec(this,null,this.W),Mi(this)};function il(m){if(br(m),m.I==3){var T=m.V++,C=Rt(m.J);if(Ze(C,"SID",m.M),Ze(C,"RID",T),Ze(C,"TYPE","terminate"),Lo(m,C),T=new Zn(m,m.j,T),T.M=2,T.A=Mo(Rt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(T.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=T.A,C=!0),C||(T.g=tc(T.j,null),T.g.ea(T.A)),T.F=Date.now(),Si(T)}Zu(m)}function Ds(m){m.g&&(ol(m),m.g.cancel(),m.g=null)}function br(m){Ds(m),m.v&&(u.clearTimeout(m.v),m.v=null),xr(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function Mi(m){if(!Ka(m.h)&&!m.m){m.m=!0;var T=m.Ea;W||x(),he||(W(),he=!0),N.add(T,m),m.D=0}}function Nr(m,T){return Ii(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=T.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=vi(p(m.Ea,m,T),ju(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const H=new Zn(this,this.j,m);let $=this.o;if(this.U&&($?($=V($),ae($,this.U)):$=this.U),this.u!==null||this.R||(H.J=$,$=null),this.S)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var b=this.i[C];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(T+=b,T>4096){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=$u(this,H,T),C=Rt(this.J),Ze(C,"RID",m),Ze(C,"CVER",22),this.G&&Ze(C,"X-HTTP-Session-Id",this.G),Lo(this,C),$&&(this.R?T="headers="+Ji(Un($))+"&"+T:this.u&&Vo(C,this.u,$)),Ya(this.h,H),this.Ra&&Ze(C,"TYPE","init"),this.S?(Ze(C,"$req",T),Ze(C,"SID","null"),H.U=!0,Ti(H,C,null)):Ti(H,C,T),this.I=2}}else this.I==3&&(m?sl(this,m):this.i.length==0||Ka(this.h)||sl(this))};function sl(m,T){var C;T?C=T.l:C=m.V++;const b=Rt(m.J);Ze(b,"SID",m.M),Ze(b,"RID",C),Ze(b,"AID",m.K),Lo(m,b),m.u&&m.o&&Vo(b,m.u,m.o),C=new Zn(m,m.j,C,m.D+1),m.u===null&&(C.J=m.o),T&&(m.i=T.G.concat(m.i)),T=$u(m,C,1e3),C.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Ya(m.h,C),Ti(C,b,T)}function Lo(m,T){m.H&&ke(m.H,function(C,b){Ze(T,b,C)}),m.l&&ke({},function(C,b){Ze(T,b,C)})}function $u(m,T,C){C=Math.min(m.i.length,C);const b=m.l?p(m.l.Ka,m.l,m):null;e:{var H=m.i;let De=-1;for(;;){const vt=["count="+C];De==-1?C>0?(De=H[0].g,vt.push("ofs="+De)):De=0:vt.push("ofs="+De);let Qe=!0;for(let dt=0;dt<C;dt++){var $=H[dt].g;const Ln=H[dt].map;if($-=De,$<0)De=Math.max(0,H[dt].g-100),Qe=!1;else try{$="req"+$+"_"||"";try{var le=Ln instanceof Map?Ln:Object.entries(Ln);for(const[Pi,si]of le){let oi=si;d(si)&&(oi=Cs(si)),vt.push($+Pi+"="+encodeURIComponent(oi))}}catch(Pi){throw vt.push($+"type="+encodeURIComponent("_badmap")),Pi}}catch{b&&b(Ln)}}if(Qe){le=vt.join("&");break e}}le=void 0}return m=m.i.splice(0,C),T.G=m,le}function Qu(m){if(!m.g&&!m.v){m.Y=1;var T=m.Da;W||x(),he||(W(),he=!0),N.add(T,m),m.A=0}}function Oo(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=vi(p(m.Da,m),ju(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Xu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=vi(p(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Ds(this),Xu(this))};function ol(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function Xu(m){m.g=new Zn(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var T=Rt(m.na);Ze(T,"RID","rpc"),Ze(T,"SID",m.M),Ze(T,"AID",m.K),Ze(T,"CI",m.F?"0":"1"),!m.F&&m.ia&&Ze(T,"TO",m.ia),Ze(T,"TYPE","xmlhttp"),Lo(m,T),m.u&&m.o&&Vo(T,m.u,m.o),m.O&&(m.g.H=m.O);var C=m.g;m=m.ba,C.M=1,C.A=Mo(Rt(T)),C.u=null,C.R=!0,Tr(C,m)}n.Va=function(){this.C!=null&&(this.C=null,Ds(this),Oo(this),Ct(19))};function xr(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Wu(m,T){var C=null;if(m.g==T){xr(m),ol(m),m.g=null;var b=2}else if(wi(m.h,T))C=T.G,$a(m.h,T),b=1;else return;if(m.I!=0){if(T.o)if(b==1){C=T.u?T.u.length:0,T=Date.now()-T.F;var H=m.D;b=Er(),kt(b,new _i(b,C)),Mi(m)}else Qu(m);else if(H=T.m,H==3||H==0&&T.X>0||!(b==1&&Nr(m,T)||b==2&&Oo(m)))switch(C&&C.length>0&&(T=m.h,T.i=T.i.concat(C)),H){case 1:Di(m,5);break;case 4:Di(m,10);break;case 3:Di(m,6);break;default:Di(m,2)}}}function ju(m,T){let C=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(C*=2),C*T}function Di(m,T){if(m.j.info("Error code "+T),T==2){var C=p(m.bb,m),b=m.Ua;const H=!b;b=new An(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Gt(b,"https"),Mo(b),H?ti(b.toString(),C):el(b.toString(),C)}else Ct(2);m.I=0,m.l&&m.l.pa(T),Zu(m),br(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Zu(m){if(m.I=0,m.ja=[],m.l){const T=Qa(m.h);(T.length!=0||m.i.length!=0)&&(P(m.ja,T),P(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function ec(m,T,C){var b=C instanceof An?Rt(C):new An(C);if(b.g!="")T&&(b.g=T+"."+b.g),Is(b,b.u);else{var H=u.location;b=H.protocol,T=T?T+"."+H.hostname:H.hostname,H=+H.port;const $=new An(null);b&&Gt($,b),T&&($.g=T),H&&Is($,H),C&&($.h=C),b=$}return C=m.G,T=m.wa,C&&T&&Ze(b,C,T),Ze(b,"VER",m.ka),Lo(m,b),b}function tc(m,T,C){if(T&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=m.Aa&&!m.ma?new it(new bi({ab:C})):new it(m.ma),T.Fa(m.L),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function nc(){}n=nc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ps(){}Ps.prototype.g=function(m,T){return new un(m,T)};function un(m,T){At.call(this),this.g=new Ms(T),this.l=m,this.h=T&&T.messageUrlParams||null,m=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(m?m["X-WebChannel-Content-Type"]=T.messageContentType:m={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(m?m["X-WebChannel-Client-Profile"]=T.sa:m={"X-WebChannel-Client-Profile":T.sa}),this.g.U=m,(m=T&&T.Qb)&&!D(m)&&(this.g.u=m),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!D(T)&&(this.g.G=T,m=this.h,m!==null&&T in m&&(m=this.h,T in m&&delete m[T])),this.j=new $i(this)}E(un,At),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){il(this.g)},un.prototype.o=function(m){var T=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.v&&(C={},C.__data__=Cs(m),m=C);T.i.push(new wt(T.Ya++,m)),T.I==3&&Mi(T)},un.prototype.N=function(){this.g.l=null,delete this.j,il(this.g),delete this.g,un.Z.N.call(this)};function ic(m){Jt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var T=m.__sm__;if(T){e:{for(const C in T){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,T=T!==null&&m in T?T[m]:void 0),this.data=T}else this.data=m}E(ic,Jt);function sc(){Pn.call(this),this.status=1}E(sc,Pn);function $i(m){this.g=m}E($i,nc),$i.prototype.ra=function(){kt(this.g,"a")},$i.prototype.qa=function(m){kt(this.g,new ic(m))},$i.prototype.pa=function(m){kt(this.g,new sc)},$i.prototype.oa=function(){kt(this.g,"b")},Ps.prototype.createWebChannel=Ps.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,SA=function(){return new Ps},TA=function(){return Er()},EA=_t,im={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},No.NO_ERROR=0,No.TIMEOUT=8,No.HTTP_ERROR=6,Cf=No,Ha.COMPLETE="complete",vA=Ha,Uu.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",At.prototype.listen=At.prototype.J,Xl=Uu,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,_A=it}).apply(typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ma="12.8.0";function F1(n){Ma=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr=new Um("@firebase/firestore");function aa(){return cr.logLevel}function pe(n,...e){if(cr.logLevel<=Ge.DEBUG){const t=e.map(Qm);cr.debug(`Firestore (${Ma}): ${n}`,...t)}}function ys(n,...e){if(cr.logLevel<=Ge.ERROR){const t=e.map(Qm);cr.error(`Firestore (${Ma}): ${n}`,...t)}}function Sa(n,...e){if(cr.logLevel<=Ge.WARN){const t=e.map(Qm);cr.warn(`Firestore (${Ma}): ${n}`,...t)}}function Qm(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,AA(n,i,t)}function AA(n,e,t){let i=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ys(i),new Error(i)}function je(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||AA(e,r,i)}function Ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Es{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class G1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class q1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class B1{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){je(this.o===void 0,42304);let i=this.i;const r=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let a=new ho;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ho,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const g=a;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},d=g=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ho)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(je(typeof i.accessToken=="string",31837,{l:i}),new CA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class H1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class z1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new H1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class K0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class J1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){je(this.o===void 0,3512);const i=a=>{a.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new K0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new K0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=K1(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%62))}return i}}function qe(n,e){return n<e?-1:n>e?1:0}function sm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),a=e.charAt(i);if(r!==a)return Gp(r)===Gp(a)?qe(r,a):Gp(r)?1:-1}return qe(n.length,e.length)}const Y1=55296,$1=57343;function Gp(n){const e=n.charCodeAt(0);return e>=Y1&&e<=$1}function Aa(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="__name__";class Oi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ie(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Oi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Oi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=Oi.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return qe(e.length,t.length)}static compareSegments(e,t){const i=Oi.isNumericId(e),r=Oi.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Oi.extractNumericId(e).compare(Oi.extractNumericId(t)):sm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fo.fromString(e.substring(4,e.length-2))}}class pt extends Oi{construct(e,t,i){return new pt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new _e(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new pt(t)}static emptyPath(){return new pt([])}}const Q1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends Oi{construct(e,t,i){return new jt(e,t,i)}static isValidIdentifier(e){return Q1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Y0}static keyField(){return new jt([Y0])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(i.length===0)throw new _e(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new _e(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new _e(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,r+=2}else d==="`"?(u=!u,r++):d!=="."||u?(i+=d,r++):(a(),r++)}if(a(),u)throw new _e(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(t)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(pt.fromString(e))}static fromName(e){return new Se(pt.fromString(e).popFirst(5))}static empty(){return new Se(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(n,e,t){if(!t)throw new _e(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function W1(n,e,t,i){if(e===!0&&i===!0)throw new _e(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $0(n){if(!Se.isDocumentKey(n))throw new _e(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function IA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Wm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function du(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wm(n);throw new _e(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(n,e){const t={typeString:n};return e&&(t.value=e),t}function bu(n,e){if(!IA(n))throw new _e(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(r&&typeof u!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new _e(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=-62135596800,X0=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*X0);return new ct(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Q0)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/X0}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bu(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Q0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Pt("string",ct._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ct(0,0))}static max(){return new Re(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=-1;function j1(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Re.fromTimestamp(i===1e9?new ct(t+1,0):new ct(t,i));return new po(r,Se.empty(),e)}function Z1(n){return new po(n.readTime,n.key,hu)}class po{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new po(Re.min(),Se.empty(),hu)}static max(){return new po(Re.max(),Se.empty(),hu)}}function eM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==tM)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let r=0,a=0,u=!1;e.forEach((d=>{++r,d.next((()=>{++a,u&&a===r&&t()}),(g=>i(g)))})),u=!0,a===r&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((r=>r?se.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,a)=>{i.push(t.call(this,r,a))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,r)=>{const a=e.length,u=new Array(a);let d=0;for(let g=0;g<a;g++){const p=g;t(e[p]).next((v=>{u[p]=v,++d,d===a&&i(u)}),(v=>r(v)))}}))}static doWhile(e,t){return new se(((i,r)=>{const a=()=>{e()===!0?t().next((()=>{a()}),r):i()};a()}))}}function iM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Pa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}cd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm=-1;function fd(n){return n==null}function Gf(n){return n===0&&1/n==-1/0}function sM(n){return typeof n=="number"&&Number.isInteger(n)&&!Gf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="";function oM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=W0(e)),e=rM(n.get(t),e);return W0(e)}function rM(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="";break;case wA:t+="";break;default:t+=a}}return t}function W0(n){return n+wA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function dr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function RA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ff(this.root,e,this.comparator,!0)}}class ff{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??Wt.RED,this.left=r??Wt.EMPTY,this.right=a??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new Wt(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Wt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,i,r,a){return this}insert(e,t,i){return new Wt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Z0(this.data.getIterator())}getIteratorFrom(e){return new Z0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class Z0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new ci([])}unionWith(e){let t=new Ot(jt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ci(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Aa(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new bA("Invalid base64 string: "+a):a}})(e);return new Zt(t)}static fromUint8Array(e){const t=(function(r){let a="";for(let u=0;u<r.length;++u)a+=String.fromCharCode(r[u]);return a})(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const aM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mo(n){if(je(!!n,39018),typeof n=="string"){let e=0;const t=aM.exec(n);if(je(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function go(n){return typeof n=="string"?Zt.fromBase64String(n):Zt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="server_timestamp",xA="__type__",MA="__previous_value__",DA="__local_write_time__";function Zm(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[xA])==null?void 0:i.stringValue)===NA}function dd(n){const e=n.mapValue.fields[MA];return Zm(e)?dd(e):e}function pu(n){const e=mo(n.mapValue.fields[DA].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,t,i,r,a,u,d,g,p,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=v,this.apiKey=E}}const qf="(default)";class mu{constructor(e,t){this.projectId=e,this.database=t||qf}static empty(){return new mu("","")}get isDefaultDatabase(){return this.database===qf}isEqual(e){return e instanceof mu&&e.projectId===this.projectId&&e.database===this.database}}function uM(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new _e(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="__type__",cM="__max__",df={mapValue:{}},VA="__vector__",Bf="value";function yo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Zm(n)?4:dM(n)?9007199254740991:fM(n)?10:11:Ie(28295,{value:n})}function Hi(n,e){if(n===e)return!0;const t=yo(n);if(t!==yo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pu(n).isEqual(pu(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const u=mo(r.timestampValue),d=mo(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,a){return go(r.bytesValue).isEqual(go(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,a){return St(r.geoPointValue.latitude)===St(a.geoPointValue.latitude)&&St(r.geoPointValue.longitude)===St(a.geoPointValue.longitude)})(n,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return St(r.integerValue)===St(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const u=St(r.doubleValue),d=St(a.doubleValue);return u===d?Gf(u)===Gf(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Aa(n.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return(function(r,a){const u=r.mapValue.fields||{},d=a.mapValue.fields||{};if(j0(u)!==j0(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(d[g]===void 0||!Hi(u[g],d[g])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function gu(n,e){return(n.values||[]).find((t=>Hi(t,e)))!==void 0}function Ca(n,e){if(n===e)return 0;const t=yo(n),i=yo(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=St(a.integerValue||a.doubleValue),g=St(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(n,e);case 3:return eE(n.timestampValue,e.timestampValue);case 4:return eE(pu(n),pu(e));case 5:return sm(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=go(a),g=go(u);return d.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),g=u.split("/");for(let p=0;p<d.length&&p<g.length;p++){const v=qe(d[p],g[p]);if(v!==0)return v}return qe(d.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=qe(St(a.latitude),St(u.latitude));return d!==0?d:qe(St(a.longitude),St(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return tE(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var S,w,P,G;const d=a.fields||{},g=u.fields||{},p=(S=d[Bf])==null?void 0:S.arrayValue,v=(w=g[Bf])==null?void 0:w.arrayValue,E=qe(((P=p==null?void 0:p.values)==null?void 0:P.length)||0,((G=v==null?void 0:v.values)==null?void 0:G.length)||0);return E!==0?E:tE(p,v)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===df.mapValue&&u===df.mapValue)return 0;if(a===df.mapValue)return 1;if(u===df.mapValue)return-1;const d=a.fields||{},g=Object.keys(d),p=u.fields||{},v=Object.keys(p);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const S=sm(g[E],v[E]);if(S!==0)return S;const w=Ca(d[g[E]],p[v[E]]);if(w!==0)return w}return qe(g.length,v.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function eE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);const t=mo(n),i=mo(e),r=qe(t.seconds,i.seconds);return r!==0?r:qe(t.nanos,i.nanos)}function tE(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const a=Ca(t[r],i[r]);if(a)return a}return qe(t.length,i.length)}function Ia(n){return om(n)}function om(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=mo(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return go(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Se.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const a of t.values||[])r?r=!1:i+=",",i+=om(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const u of i)a?a=!1:r+=",",r+=`${u}:${om(t.fields[u])}`;return r+"}"})(n.mapValue):Ie(61005,{value:n})}function If(n){switch(yo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=dd(n);return e?16+If(e):16;case 5:return 2*n.stringValue.length;case 6:return go(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+If(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return dr(i.fields,((a,u)=>{r+=a.length+If(u)})),r})(n.mapValue);default:throw Ie(13486,{value:n})}}function rm(n){return!!n&&"integerValue"in n}function eg(n){return!!n&&"arrayValue"in n}function nE(n){return!!n&&"nullValue"in n}function iE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wf(n){return!!n&&"mapValue"in n}function fM(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[PA])==null?void 0:i.stringValue)===VA}function iu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return dr(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=iu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=iu(n.arrayValue.values[t]);return e}return{...n}}function dM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===cM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!wf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=iu(t)}setAll(e){let t=jt.emptyPath(),i={},r=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,i,r),i={},r=[],t=d.popLast()}u?i[d.lastSegment()]=iu(u):r.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());wf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];wf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){dr(t,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new Kn(iu(this.value))}}function kA(n){const e=[];return dr(n.fields,((t,i)=>{const r=new jt([t]);if(wf(i)){const a=kA(i.mapValue).fields;if(a.length===0)e.push(r);else for(const u of a)e.push(r.child(u))}else e.push(r)})),new ci(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,i,r,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new on(e,0,Re.min(),Re.min(),Re.min(),Kn.empty(),0)}static newFoundDocument(e,t,i,r){return new on(e,1,t,Re.min(),i,r,0)}static newNoDocument(e,t){return new on(e,2,t,Re.min(),Re.min(),Kn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Re.min(),Re.min(),Kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t){this.position=e,this.inclusive=t}}function sE(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],u=n.position[r];if(a.field.isKeyField()?i=Se.comparator(Se.fromName(u.referenceValue),t.key):i=Ca(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function oE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t="asc"){this.field=e,this.dir=t}}function hM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{}class Lt extends UA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new mM(e,t,i):t==="array-contains"?new _M(e,i):t==="in"?new vM(e,i):t==="not-in"?new EM(e,i):t==="array-contains-any"?new TM(e,i):new Lt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new gM(e,i):new yM(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ca(t,this.value)):t!==null&&yo(this.value)===yo(t)&&this.matchesComparison(Ca(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zi extends UA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new zi(e,t)}matches(e){return LA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function LA(n){return n.op==="and"}function OA(n){return pM(n)&&LA(n)}function pM(n){for(const e of n.filters)if(e instanceof zi)return!1;return!0}function am(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+Ia(n.value);if(OA(n))return n.filters.map((e=>am(e))).join(",");{const e=n.filters.map((t=>am(t))).join(",");return`${n.op}(${e})`}}function FA(n,e){return n instanceof Lt?(function(i,r){return r instanceof Lt&&i.op===r.op&&i.field.isEqual(r.field)&&Hi(i.value,r.value)})(n,e):n instanceof zi?(function(i,r){return r instanceof zi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,u,d)=>a&&FA(u,r.filters[d])),!0):!1})(n,e):void Ie(19439)}function GA(n){return n instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ia(t.value)}`})(n):n instanceof zi?(function(t){return t.op.toString()+" {"+t.getFilters().map(GA).join(" ,")+"}"})(n):"Filter"}class mM extends Lt{constructor(e,t,i){super(e,t,i),this.key=Se.fromName(i.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class gM extends Lt{constructor(e,t){super(e,"in",t),this.keys=qA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class yM extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=qA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function qA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Se.fromName(i.referenceValue)))}class _M extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return eg(t)&&gu(t.arrayValue,this.value)}}class vM extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gu(this.value.arrayValue,t)}}class EM extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gu(this.value.arrayValue,t)}}class TM extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!eg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>gu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,t=null,i=[],r=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function rE(n,e=null,t=[],i=[],r=null,a=null,u=null){return new SM(n,e,t,i,r,a,u)}function tg(n){const e=Ne(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>am(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),fd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ia(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ia(i))).join(",")),e.Te=t}return e.Te}function ng(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!hM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!FA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!oE(n.startAt,e.startAt)&&oE(n.endAt,e.endAt)}function lm(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t=null,i=[],r=[],a=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function AM(n,e,t,i,r,a,u,d){return new hd(n,e,t,i,r,a,u,d)}function ig(n){return new hd(n)}function aE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function CM(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function IM(n){return n.collectionGroup!==null}function su(n){const e=Ne(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ot(jt.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new zf(a,i))})),t.has(jt.keyField().canonicalString())||e.Ie.push(new zf(jt.keyField(),i))}return e.Ie}function Gi(n){const e=Ne(n);return e.Ee||(e.Ee=wM(e,su(n))),e.Ee}function wM(n,e){if(n.limitType==="F")return rE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new zf(r.field,a)}));const t=n.endAt?new Hf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Hf(n.startAt.position,n.startAt.inclusive):null;return rE(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function um(n,e,t){return new hd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pd(n,e){return ng(Gi(n),Gi(e))&&n.limitType===e.limitType}function BA(n){return`${tg(Gi(n))}|lt:${n.limitType}`}function la(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>GA(r))).join(", ")}]`),fd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Ia(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Ia(r))).join(",")),`Target(${i})`})(Gi(n))}; limitType=${n.limitType})`}function md(n,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Se.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,r){for(const a of su(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(u,d,g){const p=sE(u,d,g);return u.inclusive?p<=0:p<0})(i.startAt,su(i),r)||i.endAt&&!(function(u,d,g){const p=sE(u,d,g);return u.inclusive?p>=0:p>0})(i.endAt,su(i),r))})(n,e)}function RM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function HA(n){return(e,t)=>{let i=!1;for(const r of su(n)){const a=bM(r,e,t);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function bM(n,e,t){const i=n.field.isKeyField()?Se.comparator(e.key,t.key):(function(a,u,d){const g=u.data.field(a),p=d.data.field(a);return g!==null&&p!==null?Ca(g,p):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){dr(this.inner,((t,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return RA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=new mt(Se.comparator);function _s(){return NM}const zA=new mt(Se.comparator);function Wl(...n){let e=zA;for(const t of n)e=e.insert(t.key,t);return e}function JA(n){let e=zA;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function sr(){return ou()}function KA(){return ou()}function ou(){return new hr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const xM=new mt(Se.comparator),MM=new Ot(Se.comparator);function Be(...n){let e=MM;for(const t of n)e=e.add(t);return e}const DM=new Ot(qe);function PM(){return DM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gf(e)?"-0":e}}function YA(n){return{integerValue:""+n}}function VM(n,e){return sM(e)?YA(e):sg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this._=void 0}}function kM(n,e,t){return n instanceof Jf?(function(r,a){const u={fields:{[xA]:{stringValue:NA},[DA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&Zm(a)&&(a=dd(a)),a&&(u.fields[MA]=a),{mapValue:u}})(t,e):n instanceof yu?QA(n,e):n instanceof _u?XA(n,e):(function(r,a){const u=$A(r,a),d=lE(u)+lE(r.Ae);return rm(u)&&rm(r.Ae)?YA(d):sg(r.serializer,d)})(n,e)}function UM(n,e,t){return n instanceof yu?QA(n,e):n instanceof _u?XA(n,e):t}function $A(n,e){return n instanceof Kf?(function(i){return rm(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Jf extends gd{}class yu extends gd{constructor(e){super(),this.elements=e}}function QA(n,e){const t=WA(e);for(const i of n.elements)t.some((r=>Hi(r,i)))||t.push(i);return{arrayValue:{values:t}}}class _u extends gd{constructor(e){super(),this.elements=e}}function XA(n,e){let t=WA(e);for(const i of n.elements)t=t.filter((r=>!Hi(r,i)));return{arrayValue:{values:t}}}class Kf extends gd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function lE(n){return St(n.integerValue||n.doubleValue)}function WA(n){return eg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function LM(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof yu&&r instanceof yu||i instanceof _u&&r instanceof _u?Aa(i.elements,r.elements,Hi):i instanceof Kf&&r instanceof Kf?Hi(i.Ae,r.Ae):i instanceof Jf&&r instanceof Jf})(n.transform,e.transform)}class OM{constructor(e,t){this.version=e,this.transformResults=t}}class ps{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ps}static exists(e){return new ps(void 0,e)}static updateTime(e){return new ps(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class yd{}function jA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new eC(n.key,ps.none()):new Nu(n.key,n.data,ps.none());{const t=n.data,i=Kn.empty();let r=new Ot(jt.comparator);for(let a of e.fields)if(!r.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),r=r.add(a)}return new pr(n.key,i,new ci(r.toArray()),ps.none())}}function FM(n,e,t){n instanceof Nu?(function(r,a,u){const d=r.value.clone(),g=cE(r.fieldTransforms,a,u.transformResults);d.setAll(g),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof pr?(function(r,a,u){if(!Rf(r.precondition,a))return void a.convertToUnknownDocument(u.version);const d=cE(r.fieldTransforms,a,u.transformResults),g=a.data;g.setAll(ZA(r)),g.setAll(d),a.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(n,e,t):(function(r,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function ru(n,e,t,i){return n instanceof Nu?(function(a,u,d,g){if(!Rf(a.precondition,u))return d;const p=a.value.clone(),v=fE(a.fieldTransforms,g,u);return p.setAll(v),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(n,e,t,i):n instanceof pr?(function(a,u,d,g){if(!Rf(a.precondition,u))return d;const p=fE(a.fieldTransforms,g,u),v=u.data;return v.setAll(ZA(a)),v.setAll(p),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,u,d){return Rf(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function GM(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=$A(i.transform,r||null);a!=null&&(t===null&&(t=Kn.empty()),t.set(i.field,a))}return t||null}function uE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Aa(i,r,((a,u)=>LM(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Nu extends yd{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class pr extends yd{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function ZA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function cE(n,e,t){const i=new Map;je(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let r=0;r<t.length;r++){const a=n[r],u=a.transform,d=e.data.field(a.field);i.set(a.field,UM(u,d,t[r]))}return i}function fE(n,e,t){const i=new Map;for(const r of n){const a=r.transform,u=t.data.field(r.field);i.set(r.field,kM(a,u,e))}return i}class eC extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qM extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&FM(a,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ru(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ru(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=KA();return this.mutations.forEach((r=>{const a=e.get(r.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(r.key)?null:d;const g=jA(u,d);g!==null&&i.set(r.key,g),u.isValidDocument()||u.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Aa(this.mutations,e.mutations,((t,i)=>uE(t,i)))&&Aa(this.baseMutations,e.baseMutations,((t,i)=>uE(t,i)))}}class og{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){je(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return xM})();const a=e.mutations;for(let u=0;u<a.length;u++)r=r.insert(a[u].key,i[u].version);return new og(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Je;function JM(n){switch(n){case re.OK:return Ie(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function tC(n){if(n===void 0)return ys("GRPC error has no .code"),re.UNKNOWN;switch(n){case Dt.OK:return re.OK;case Dt.CANCELLED:return re.CANCELLED;case Dt.UNKNOWN:return re.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return re.INTERNAL;case Dt.UNAVAILABLE:return re.UNAVAILABLE;case Dt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Dt.NOT_FOUND:return re.NOT_FOUND;case Dt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Dt.ABORTED:return re.ABORTED;case Dt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Dt.DATA_LOSS:return re.DATA_LOSS;default:return Ie(39323,{code:n})}}(Je=Dt||(Dt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=new fo([4294967295,4294967295],0);function dE(n){const e=KM().encode(n),t=new yA;return t.update(e),new Uint8Array(t.digest())}function hE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new fo([t,i],0),new fo([r,a],0)]}class rg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new jl(`Invalid padding: ${t}`);if(i<0)throw new jl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new jl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new jl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=fo.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(fo.fromNumber(i)));return r.compare(YM)===1&&(r=new fo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=dE(e),[i,r]=hE(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,r,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new rg(a,r,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=dE(e),[i,r]=hE(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,r,a);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,xu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new _d(Re.min(),r,new mt(qe),_s(),Be())}}class xu{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new xu(i,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=r}}class nC{constructor(e,t){this.targetId=e,this.Ce=t}}class iC{constructor(e,t,i=Zt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class pE{constructor(){this.ve=0,this.Fe=mE(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),i=Be();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Ie(38017,{changeType:a})}})),new xu(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=mE()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class $M{constructor(e){this.Ge=e,this.ze=new Map,this.je=_s(),this.He=hf(),this.Je=hf(),this.Ze=new mt(qe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(lm(a))if(i===0){const u=new Se(a.path);this.et(t,u,on.newNoDocument(u,Re.min()))}else je(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),g=d?this.ct(d,e,u):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=t;let u,d;try{u=go(i).toUint8Array()}catch(g){if(g instanceof bA)return Sa("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new rg(u,r,a)}catch(g){return Sa(g instanceof jl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&lm(d.target)){const g=new Se(d.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,on.newNoDocument(g,e))}a.Be&&(t.set(u,a.ke()),a.Ke())}}));let i=Be();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const r=new _d(e,t,this.Ze,this.je,i);return this.je=_s(),this.He=hf(),this.Je=hf(),this.Ze=new mt(qe),r}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new pE,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Ot(qe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Ot(qe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new pE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function hf(){return new mt(Se.comparator)}function mE(){return new mt(Se.comparator)}const QM={asc:"ASCENDING",desc:"DESCENDING"},XM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WM={and:"AND",or:"OR"};class jM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cm(n,e){return n.useProto3Json||fd(e)?e:{value:e}}function Yf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ZM(n,e){return Yf(n,e.toTimestamp())}function qi(n){return je(!!n,49232),Re.fromTimestamp((function(t){const i=mo(t);return new ct(i.seconds,i.nanos)})(n))}function ag(n,e){return fm(n,e).canonicalString()}function fm(n,e){const t=(function(r){return new pt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function oC(n){const e=pt.fromString(n);return je(cC(e),10190,{key:e.toString()}),e}function dm(n,e){return ag(n.databaseId,e.path)}function qp(n,e){const t=oC(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(aC(t))}function rC(n,e){return ag(n.databaseId,e)}function eD(n){const e=oC(n);return e.length===4?pt.emptyPath():aC(e)}function hm(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aC(n){return je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function gE(n,e,t){return{name:dm(n,e),fields:t.value.mapValue.fields}}function tD(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ie(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(p,v){return p.useProto3Json?(je(v===void 0||typeof v=="string",58123),Zt.fromBase64String(v||"")):(je(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Zt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(p){const v=p.code===void 0?re.UNKNOWN:tC(p.code);return new _e(v,p.message||"")})(u);t=new iC(i,r,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=qp(n,i.document.name),a=qi(i.document.updateTime),u=i.document.createTime?qi(i.document.createTime):Re.min(),d=new Kn({mapValue:{fields:i.document.fields}}),g=on.newFoundDocument(r,a,u,d),p=i.targetIds||[],v=i.removedTargetIds||[];t=new bf(p,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=qp(n,i.document),a=i.readTime?qi(i.readTime):Re.min(),u=on.newNoDocument(r,a),d=i.removedTargetIds||[];t=new bf([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=qp(n,i.document),a=i.removedTargetIds||[];t=new bf([],a,r,null)}else{if(!("filter"in e))return Ie(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,u=new zM(r,a),d=i.targetId;t=new nC(d,u)}}return t}function nD(n,e){let t;if(e instanceof Nu)t={update:gE(n,e.key,e.value)};else if(e instanceof eC)t={delete:dm(n,e.key)};else if(e instanceof pr)t={update:gE(n,e.key,e.data),updateMask:fD(e.fieldMask)};else{if(!(e instanceof qM))return Ie(16599,{dt:e.type});t={verify:dm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Jf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof yu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof _u)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Kf)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Ie(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:ZM(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ie(27497)})(n,e.precondition)),t}function iD(n,e){return n&&n.length>0?(je(e!==void 0,14353),n.map((t=>(function(r,a){let u=r.updateTime?qi(r.updateTime):qi(a);return u.isEqual(Re.min())&&(u=qi(a)),new OM(u,r.transformResults||[])})(t,e)))):[]}function sD(n,e){return{documents:[rC(n,e.path)]}}function oD(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=rC(n,r);const a=(function(p){if(p.length!==0)return uC(zi.create(p,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(p){if(p.length!==0)return p.map((v=>(function(S){return{field:ua(S.field),direction:lD(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=cm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:r}}function rD(n){let e=eD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){je(i===1,65062);const v=t.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(E){const S=lC(E);return S instanceof zi&&OA(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((S=>(function(P){return new zf(ca(P.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,fd(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(E){const S=!!E.before,w=E.values||[];return new Hf(w,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const S=!E.before,w=E.values||[];return new Hf(w,S)})(t.endAt)),AM(e,r,u,a,d,"F",g,p)}function aD(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ca(t.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ca(t.unaryFilter.field);return Lt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ca(t.unaryFilter.field);return Lt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ca(t.unaryFilter.field);return Lt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Lt.create(ca(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return zi.create(t.compositeFilter.filters.map((i=>lC(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function lD(n){return QM[n]}function uD(n){return XM[n]}function cD(n){return WM[n]}function ua(n){return{fieldPath:n.canonicalString()}}function ca(n){return jt.fromServerFormat(n.fieldPath)}function uC(n){return n instanceof Lt?(function(t){if(t.op==="=="){if(iE(t.value))return{unaryFilter:{field:ua(t.field),op:"IS_NAN"}};if(nE(t.value))return{unaryFilter:{field:ua(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(iE(t.value))return{unaryFilter:{field:ua(t.field),op:"IS_NOT_NAN"}};if(nE(t.value))return{unaryFilter:{field:ua(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ua(t.field),op:uD(t.op),value:t.value}}})(n):n instanceof zi?(function(t){const i=t.getFilters().map((r=>uC(r)));return i.length===1?i[0]:{compositeFilter:{op:cD(t.op),filters:i}}})(n):Ie(54877,{filter:n})}function fD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function cC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function fC(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,t,i,r,a=Re.min(),u=Re.min(),d=Zt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new ao(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this.yt=e}}function hD(n){const e=rD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?um(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(){this.Sn=new mD}addToCollectionParentIndex(e,t){return this.Sn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(po.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(po.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class mD{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Ot(pt.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ot(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dC=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(dC,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new wa(0)}static ar(){return new wa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="LruGarbageCollector",gD=1048576;function vE([n,e],[t,i]){const r=qe(n,t);return r===0?qe(e,i):r}class yD{constructor(e){this.Pr=e,this.buffer=new Ot(vE),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();vE(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _D{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){pe(_E,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Pa(t)?pe(_E,"Ignoring IndexedDB error during garbage collection: ",t):await Da(t)}await this.Ar(3e5)}))}}class vD{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(cd.ce);const i=new yD(t);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(yE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yE):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,r,a,u,d,g,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,u=Date.now(),this.nthSequenceNumber(e,r)))).next((E=>(i=E,d=Date.now(),this.removeTargets(e,i,t)))).next((E=>(a=E,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(p=Date.now(),aa()<=Ge.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${r} in `+(d-u)+`ms
	Removed ${a} targets in `+(g-d)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:E}))))}}function ED(n,e){return new vD(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(){this.changes=new hr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&ru(i.mutation,r,ci.empty(),ct.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Be()){const r=sr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((a=>{let u=Wl();return a.forEach(((d,g)=>{u=u.insert(d,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=sr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Be())))}populateOverlays(e,t,i){const r=[];return i.forEach((a=>{t.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,r){let a=_s();const u=ou(),d=(function(){return ou()})();return t.forEach(((g,p)=>{const v=i.get(p.key);r.has(p.key)&&(v===void 0||v.mutation instanceof pr)?a=a.insert(p.key,p):v!==void 0?(u.set(p.key,v.mutation.getFieldMask()),ru(v.mutation,p,v.mutation.getFieldMask(),ct.now())):u.set(p.key,ci.empty())})),this.recalculateAndSaveOverlays(e,a).next((g=>(g.forEach(((p,v)=>u.set(p,v))),t.forEach(((p,v)=>d.set(p,new SD(v,u.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=ou();let r=new mt(((u,d)=>u-d)),a=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let v=i.get(g)||ci.empty();v=d.applyToLocalView(p,v),i.set(g,v);const E=(r.get(d.batchId)||Be()).add(g);r=r.insert(d.batchId,E)}))})).next((()=>{const u=[],d=r.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),p=g.key,v=g.value,E=KA();v.forEach((S=>{if(!a.has(S)){const w=jA(t.get(S),i.get(S));w!==null&&E.set(S,w),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,E))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return CM(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):IM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((a=>{const u=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-a.size):se.resolve(sr());let d=hu,g=a;return u.next((p=>se.forEach(p,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{g=g.insert(v,S)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,g,p,Be()))).next((v=>({batchId:d,changes:JA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next((i=>{let r=Wl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const a=t.collectionGroup;let u=Wl();return this.indexManager.getCollectionParents(e,a).next((d=>se.forEach(d,(g=>{const p=(function(E,S){return new hd(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,i,r).next((v=>{v.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,r)))).next((u=>{a.forEach(((g,p)=>{const v=p.getKey();u.get(v)===null&&(u=u.insert(v,on.newInvalidDocument(v)))}));let d=Wl();return u.forEach(((g,p)=>{const v=a.get(g);v!==void 0&&ru(v.mutation,p,ci.empty(),ct.now()),md(t,p)&&(d=d.insert(g,p))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return se.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:qi(r.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:hD(r.bundledQuery),readTime:qi(r.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(){this.overlays=new mt(Se.comparator),this.Lr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=sr();return se.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,a)=>{this.bt(e,t,a)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Lr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const r=sr(),a=t.length+1,u=new Se(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&g.largestBatchId>i&&r.set(g.getKey(),g)}return se.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new mt(((p,v)=>p-v));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let v=a.get(p.largestBatchId);v===null&&(v=sr(),a=a.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=sr(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,v)=>d.set(p,v))),!(d.size()>=r)););return se.resolve(d)}bt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const u=this.Lr.get(r.largestBatchId).delete(i.key);this.Lr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new HM(t,i));let a=this.Lr.get(t);a===void 0&&(a=Be(),this.Lr.set(t,a)),this.Lr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(){this.kr=new Ot(Bt.Kr),this.qr=new Ot(Bt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Bt(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Bt(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Se(new pt([])),i=new Bt(t,e),r=new Bt(t,e+1),a=[];return this.qr.forEachInRange([i,r],(u=>{this.Wr(u),a.push(u.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Se(new pt([])),i=new Bt(t,e),r=new Bt(t,e+1);let a=Be();return this.qr.forEachInRange([i,r],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Bt(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Bt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Se.comparator(e.key,t.key)||qe(e.Hr,t.Hr)}static Ur(e,t){return qe(e.Hr,t.Hr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Ot(Bt.Kr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new BM(a,t,i,r);this.mutationQueue.push(u);for(const d of r)this.Jr=this.Jr.add(new Bt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Xr(i),a=r<0?0:r;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?jm:this.Yn-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Bt(t,0),r=new Bt(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,r],(u=>{const d=this.Zr(u.Hr);a.push(d)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ot(qe);return t.forEach((r=>{const a=new Bt(r,0),u=new Bt(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,u],(d=>{i=i.add(d.Hr)}))})),se.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;Se.isDocumentKey(a)||(a=a.child(""));const u=new Bt(new Se(a),0);let d=new Ot(qe);return this.Jr.forEachWhile((g=>{const p=g.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(d=d.add(g.Hr)),!0)}),u),se.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){je(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return se.forEach(t.mutations,(r=>{const a=new Bt(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Bt(t,0),r=this.Jr.firstAfterOrEqual(i);return se.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e){this.ti=e,this.docs=(function(){return new mt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let i=_s();return t.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():on.newInvalidDocument(r))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let a=_s();const u=t.path,d=new Se(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:p,value:{document:v}}=g.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||eM(Z1(v),i)<=0||(r.has(v.key)||md(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,i,r){Ie(9500)}ni(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new ND(this)}getSize(e){return se.resolve(this.size)}}class ND extends TD{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.persistence=e,this.ri=new hr((t=>tg(t)),ng),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.ii=0,this.si=new lg,this.targetCount=0,this.oi=wa._r()}forEachTarget(e,t){return this.ri.forEach(((i,r)=>t(r))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),se.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new wa(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.lr(t),se.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.ri.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ri.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),se.waitFor(a).next((()=>r))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),se.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((u=>{a.push(r.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t){this._i={},this.overlays={},this.ai=new cd(0),this.ui=!1,this.ui=!0,this.ci=new wD,this.referenceDelegate=e(this),this.li=new xD(this),this.indexManager=new pD,this.remoteDocumentCache=(function(r){return new bD(r)})((i=>this.referenceDelegate.hi(i))),this.serializer=new dD(t),this.Pi=new CD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ID,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new RD(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const r=new MD(this.ai.next());return this.referenceDelegate.Ti(),i(r).next((a=>this.referenceDelegate.Ii(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ei(e,t){return se.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class MD extends nM{constructor(e){super(),this.currentSequenceNumber=e}}class ug{constructor(e){this.persistence=e,this.Ri=new lg,this.Ai=null}static Vi(e){return new ug(e)}get di(){if(this.Ai)return this.Ai;throw Ie(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.di,(i=>{const r=Se.fromPath(i);return this.mi(e,r).next((a=>{a||t.removeEntry(r,Re.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class $f{constructor(e,t){this.persistence=e,this.fi=new hr((i=>oM(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=ED(this,t)}static Vi(e,t){return new $f(e,t)}Ti(){}Ii(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return se.forEach(this.fi,((i,r)=>this.wr(e,i,r).next((a=>a?se.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ni(e,(u=>this.wr(e,u,t).next((d=>{d||(i++,a.removeEntry(u,Re.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=If(e.data.value)),t}wr(e,t,i){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return se.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=r}static Es(e,t){let i=Be(),r=Be();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new cg(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return ib()?8:iM(an())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const a={result:null};return this.gs(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ps(e,t,r,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new DD;return this.ys(e,t,u).next((d=>{if(a.result=d,this.As)return this.ws(e,t,u,d.size)}))})).next((()=>a.result))}ws(e,t,i,r){return i.documentReadCount<this.Vs?(aa()<=Ge.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",la(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(aa()<=Ge.DEBUG&&pe("QueryEngine","Query:",la(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ds*r?(aa()<=Ge.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",la(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gi(t))):se.resolve())}gs(e,t){if(aE(t))return se.resolve(null);let i=Gi(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=um(t,null,"F"),i=Gi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Be(...a);return this.fs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((g=>{const p=this.bs(t,d);return this.Ss(t,p,u,g.readTime)?this.gs(e,um(t,null,"F")):this.Ds(e,p,t,g)}))))})))))}ps(e,t,i,r){return aE(t)||r.isEqual(Re.min())?se.resolve(null):this.fs.getDocuments(e,i).next((a=>{const u=this.bs(t,a);return this.Ss(t,u,i,r)?se.resolve(null):(aa()<=Ge.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),la(t)),this.Ds(e,u,t,j1(r,hu)).next((d=>d)))}))}bs(e,t){let i=new Ot(HA(e));return t.forEach(((r,a)=>{md(e,a)&&(i=i.add(a))})),i}Ss(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}ys(e,t,i){return aa()<=Ge.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",la(t)),this.fs.getDocumentsMatchingQuery(e,t,po.min(),i)}Ds(e,t,i,r){return this.fs.getDocumentsMatchingQuery(e,i,r).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="LocalStore",VD=3e8;class kD{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new mt(qe),this.Fs=new hr((a=>tg(a)),ng),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AD(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function UD(n,e,t,i){return new kD(n,e,t,i)}async function pC(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let g=Be();for(const p of r){u.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}for(const p of a){d.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(i,g).next((p=>({Ns:p,removedBatchIds:u,addedBatchIds:d})))}))}))}function LD(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,g,p,v){const E=p.batch,S=E.keys();let w=se.resolve();return S.forEach((P=>{w=w.next((()=>v.getEntry(g,P))).next((G=>{const O=p.docVersions.get(P);je(O!==null,48541),G.version.compareTo(O)<0&&(E.applyToRemoteDocument(G,p),G.isValidDocument()&&(G.setReadTime(p.commitVersion),v.addEntry(G)))}))})),w.next((()=>d.mutationQueue.removeMutationBatch(g,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let g=Be();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(g=g.add(d.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function mC(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function OD(n,e){const t=Ne(n),i=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const d=[];e.targetChanges.forEach(((v,E)=>{const S=r.get(E);if(!S)return;d.push(t.li.removeMatchingKeys(a,v.removedDocuments,E).next((()=>t.li.addMatchingKeys(a,v.addedDocuments,E))));let w=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(Zt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(v.resumeToken,i)),r=r.insert(E,w),(function(G,O,Y){return G.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=VD?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(S,w,v)&&d.push(t.li.updateTargetData(a,w))}));let g=_s(),p=Be();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(FD(a,u,e.documentUpdates).next((v=>{g=v.Bs,p=v.Ls}))),!i.isEqual(Re.min())){const v=t.li.getLastRemoteSnapshotVersion(a).next((E=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return se.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,g,p))).next((()=>g))})).then((a=>(t.vs=r,a)))}function FD(n,e,t){let i=Be(),r=Be();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=_s();return t.forEach(((d,g)=>{const p=a.get(d);g.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(d)),g.isNoDocument()&&g.version.isEqual(Re.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):pe(fg,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",g.version)})),{Bs:u,Ls:r}}))}function GD(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=jm),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function qD(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.li.getTargetData(i,e).next((a=>a?(r=a,se.resolve(r)):t.li.allocateTargetId(i).next((u=>(r=new ao(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.vs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function pm(n,e,t){const i=Ne(n),r=i.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!Pa(u))throw u;pe(fg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(r.target)}function EE(n,e,t){const i=Ne(n);let r=Re.min(),a=Be();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,p,v){const E=Ne(g),S=E.Fs.get(v);return S!==void 0?se.resolve(E.vs.get(S)):E.li.getTargetData(p,v)})(i,u,Gi(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,d.targetId).next((g=>{a=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?r:Re.min(),t?a:Be()))).next((d=>(BD(i,RM(e),d),{documents:d,ks:a})))))}function BD(n,e,t){let i=n.Ms.get(e)||Re.min();t.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Ms.set(e,i)}class TE{constructor(){this.activeTargetIds=PM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HD{constructor(){this.vo=new TE,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new TE,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="ConnectivityMonitor";class AE{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){pe(SE,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){pe(SE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pf=null;function mm(){return pf===null?pf=(function(){return 268435456+Math.round(2147483648*Math.random())})():pf++,"0x"+pf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="RestConnection",JD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class KD{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.$o=this.databaseId.database===qf?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,a){const u=mm(),d=this.Qo(e,t.toUriEncodedString());pe(Bp,`Sending RPC '${e}' ${u}:`,d,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,r,a);const{host:p}=new URL(d),v=ba(p);return this.zo(e,d,g,i,v).then((E=>(pe(Bp,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw Sa(Bp,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",i),E}))}jo(e,t,i,r,a,u){return this.Wo(e,t,i,r,a)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ma})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}Qo(e,t){const i=JD[e];let r=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection",zl=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(r){setTimeout((()=>{throw r}),0)}}))};class ya extends KD{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ya.c_){const e=TA();zl(e,EA.STAT_EVENT,(t=>{t.stat===im.PROXY?pe(tn,"STAT_EVENT: detected buffering proxy"):t.stat===im.NOPROXY&&pe(tn,"STAT_EVENT: detected no buffering proxy")})),ya.c_=!0}}zo(e,t,i,r,a){const u=mm();return new Promise(((d,g)=>{const p=new _A;p.setWithCredentials(!0),p.listenOnce(vA.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Cf.NO_ERROR:const E=p.getResponseJson();pe(tn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case Cf.TIMEOUT:pe(tn,`RPC '${e}' ${u} timed out`),g(new _e(re.DEADLINE_EXCEEDED,"Request time out"));break;case Cf.HTTP_ERROR:const S=p.getStatus();if(pe(tn,`RPC '${e}' ${u} failed with status:`,S,"response text:",p.getResponseText()),S>0){let w=p.getResponseJson();Array.isArray(w)&&(w=w[0]);const P=w==null?void 0:w.error;if(P&&P.status&&P.message){const G=(function(Y){const Q=Y.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(Q)>=0?Q:re.UNKNOWN})(P.status);g(new _e(G,P.message))}else g(new _e(re.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new _e(re.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{pe(tn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(r);pe(tn,`RPC '${e}' ${u} sending request:`,r),p.send(t,"POST",v,i,15)}))}T_(e,t,i){const r=mm(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(d.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const p=a.join("");pe(tn,`Creating RPC '${e}' stream ${r}: ${p}`,d);const v=u.createWebChannel(p,d);this.I_(v);let E=!1,S=!1;const w=new YD({Ho:P=>{S?pe(tn,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(E||(pe(tn,`Opening RPC '${e}' stream ${r} transport.`),v.open(),E=!0),pe(tn,`RPC '${e}' stream ${r} sending:`,P),v.send(P))},Jo:()=>v.close()});return zl(v,Xl.EventType.OPEN,(()=>{S||(pe(tn,`RPC '${e}' stream ${r} transport opened.`),w.i_())})),zl(v,Xl.EventType.CLOSE,(()=>{S||(S=!0,pe(tn,`RPC '${e}' stream ${r} transport closed`),w.o_(),this.E_(v))})),zl(v,Xl.EventType.ERROR,(P=>{S||(S=!0,Sa(tn,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),w.o_(new _e(re.UNAVAILABLE,"The operation could not be completed")))})),zl(v,Xl.EventType.MESSAGE,(P=>{var G;if(!S){const O=P.data[0];je(!!O,16349);const Y=O,Q=(Y==null?void 0:Y.error)||((G=Y[0])==null?void 0:G.error);if(Q){pe(tn,`RPC '${e}' stream ${r} received error:`,Q);const j=Q.status;let oe=(function(N){const x=Dt[N];if(x!==void 0)return tC(x)})(j),W=Q.message;oe===void 0&&(oe=re.INTERNAL,W="Unknown error status: "+j+" with message "+Q.message),S=!0,w.o_(new _e(oe,W)),v.close()}else pe(tn,`RPC '${e}' stream ${r} received:`,O),w.__(O)}})),ya.u_(),setTimeout((()=>{w.s_()}),0),w}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return SA()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(n){return new ya(n)}function Hp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(n){return new jM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ya.c_=!1;class gC{constructor(e,t,i=1e3,r=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=r,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&pe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="PersistentStream";class yC{constructor(e,t,i,r,a,u,d,g){this.Ci=e,this.b_=i,this.S_=r,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new gC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(ys(t.toString()),ys("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new _e(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(CE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(pe(CE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class QD extends yC{constructor(e,t,i,r,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=tD(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Re.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?qi(u.readTime):Re.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=hm(this.serializer),t.addTarget=(function(a,u){let d;const g=u.target;if(d=lm(g)?{documents:sD(a,g)}:{query:oD(a,g).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=sC(a,u.resumeToken);const p=cm(a,u.expectedCount);p!==null&&(d.expectedCount=p)}else if(u.snapshotVersion.compareTo(Re.min())>0){d.readTime=Yf(a,u.snapshotVersion.toTimestamp());const p=cm(a,u.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const i=aD(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=hm(this.serializer),t.removeTarget=e,this.K_(t)}}class XD extends yC{constructor(e,t,i,r,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,u),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=iD(e.writeResults,e.commitTime),i=qi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=hm(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>nD(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{}class jD extends WD{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,fm(t,i),r,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new _e(re.UNKNOWN,a.toString())}))}jo(e,t,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.jo(e,fm(t,i),r,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new _e(re.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function ZD(n,e,t,i){return new jD(n,e,t,i)}class eP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ys(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="RemoteStore";class tP{constructor(e,t,i,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{mr(this)&&(pe(fr,"Restarting streams for network reachability change."),await(async function(g){const p=Ne(g);p.Ea.add(4),await Mu(p),p.Va.set("Unknown"),p.Ea.delete(4),await Ed(p)})(this))}))})),this.Va=new eP(i,r)}}async function Ed(n){if(mr(n))for(const e of n.Ra)await e(!0)}async function Mu(n){for(const e of n.Ra)await e(!1)}function _C(n,e){const t=Ne(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),mg(t)?pg(t):Va(t).O_()&&hg(t,e))}function dg(n,e){const t=Ne(n),i=Va(t);t.Ia.delete(e),i.O_()&&vC(t,e),t.Ia.size===0&&(i.O_()?i.L_():mr(t)&&t.Va.set("Unknown"))}function hg(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Va(n).Z_(e)}function vC(n,e){n.da.$e(e),Va(n).X_(e)}function pg(n){n.da=new $M({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Va(n).start(),n.Va.ua()}function mg(n){return mr(n)&&!Va(n).x_()&&n.Ia.size>0}function mr(n){return Ne(n).Ea.size===0}function EC(n){n.da=void 0}async function nP(n){n.Va.set("Online")}async function iP(n){n.Ia.forEach(((e,t)=>{hg(n,e)}))}async function sP(n,e){EC(n),mg(n)?(n.Va.ha(e),pg(n)):n.Va.set("Unknown")}async function oP(n,e,t){if(n.Va.set("Online"),e instanceof iC&&e.state===2&&e.cause)try{await(async function(r,a){const u=a.cause;for(const d of a.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,u),r.Ia.delete(d),r.da.removeTarget(d))})(n,e)}catch(i){pe(fr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Qf(n,i)}else if(e instanceof bf?n.da.Xe(e):e instanceof nC?n.da.st(e):n.da.tt(e),!t.isEqual(Re.min()))try{const i=await mC(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.da.Tt(u);return d.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const v=a.Ia.get(p);v&&a.Ia.set(p,v.withResumeToken(g.resumeToken,u))}})),d.targetMismatches.forEach(((g,p)=>{const v=a.Ia.get(g);if(!v)return;a.Ia.set(g,v.withResumeToken(Zt.EMPTY_BYTE_STRING,v.snapshotVersion)),vC(a,g);const E=new ao(v.target,g,p,v.sequenceNumber);hg(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){pe(fr,"Failed to raise snapshot:",i),await Qf(n,i)}}async function Qf(n,e,t){if(!Pa(e))throw e;n.Ea.add(1),await Mu(n),n.Va.set("Offline"),t||(t=()=>mC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(fr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ed(n)}))}function TC(n,e){return e().catch((t=>Qf(n,t,e)))}async function Td(n){const e=Ne(n),t=_o(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jm;for(;rP(e);)try{const r=await GD(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,aP(e,r)}catch(r){await Qf(e,r)}SC(e)&&AC(e)}function rP(n){return mr(n)&&n.Ta.length<10}function aP(n,e){n.Ta.push(e);const t=_o(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function SC(n){return mr(n)&&!_o(n).x_()&&n.Ta.length>0}function AC(n){_o(n).start()}async function lP(n){_o(n).ra()}async function uP(n){const e=_o(n);for(const t of n.Ta)e.ea(t.mutations)}async function cP(n,e,t){const i=n.Ta.shift(),r=og.from(i,e,t);await TC(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Td(n)}async function fP(n,e){e&&_o(n).Y_&&await(async function(i,r){if((function(u){return JM(u)&&u!==re.ABORTED})(r.code)){const a=i.Ta.shift();_o(i).B_(),await TC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await Td(i)}})(n,e),SC(n)&&AC(n)}async function IE(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),pe(fr,"RemoteStore received new credentials");const i=mr(t);t.Ea.add(3),await Mu(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ed(t)}async function dP(n,e){const t=Ne(n);e?(t.Ea.delete(2),await Ed(t)):e||(t.Ea.add(2),await Mu(t),t.Va.set("Unknown"))}function Va(n){return n.ma||(n.ma=(function(t,i,r){const a=Ne(t);return a.sa(),new QD(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:nP.bind(null,n),Yo:iP.bind(null,n),t_:sP.bind(null,n),J_:oP.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),mg(n)?pg(n):n.Va.set("Unknown")):(await n.ma.stop(),EC(n))}))),n.ma}function _o(n){return n.fa||(n.fa=(function(t,i,r){const a=Ne(t);return a.sa(),new XD(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:lP.bind(null,n),t_:fP.bind(null,n),ta:uP.bind(null,n),na:cP.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Td(n)):(await n.fa.stop(),n.Ta.length>0&&(pe(fr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new ho,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,a){const u=Date.now()+i,d=new gg(e,t,u,r,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yg(n,e){if(ys("AsyncQueue",`${e}: ${n}`),Pa(n))return new _e(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{static emptySet(e){return new _a(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Se.comparator(t.key,i.key):(t,i)=>Se.comparator(t.key,i.key),this.keyedMap=Wl(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _a)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new _a;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(){this.ga=new mt(Se.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ra{constructor(e,t,i,r,a,u,d,g,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,r,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ra(e,t,_a.emptySet(t),u,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class pP{constructor(){this.queries=RE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=Ne(t),a=r.queries;r.queries=RE(),a.forEach(((u,d)=>{for(const g of d.ba)g.onError(i)}))})(this,new _e(re.ABORTED,"Firestore shutting down"))}}function RE(){return new hr((n=>BA(n)),pd)}async function mP(n,e){const t=Ne(n);let i=3;const r=e.query;let a=t.queries.get(r);a?!a.Sa()&&e.Da()&&(i=2):(a=new hP,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(r,!0);break;case 1:a.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const d=yg(u,`Initialization of query '${la(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&_g(t)}async function gP(n,e){const t=Ne(n),i=e.query;let r=3;const a=t.queries.get(i);if(a){const u=a.ba.indexOf(e);u>=0&&(a.ba.splice(u,1),a.ba.length===0?r=e.Da()?0:1:!a.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function yP(n,e){const t=Ne(n);let i=!1;for(const r of e){const a=r.query,u=t.queries.get(a);if(u){for(const d of u.ba)d.Fa(r)&&(i=!0);u.wa=r}}i&&_g(t)}function _P(n,e,t){const i=Ne(n),r=i.queries.get(e);if(r)for(const a of r.ba)a.onError(t);i.queries.delete(e)}function _g(n){n.Ca.forEach((e=>{e.next()}))}var gm,bE;(bE=gm||(gm={})).Ma="default",bE.Cache="cache";class vP{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ra(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.key=e}}class IC{constructor(e){this.key=e}}class EP{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Be(),this.mutatedKeys=Be(),this.eu=HA(e),this.tu=new _a(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new wE,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=r,d=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((v,E)=>{const S=r.get(v),w=md(this.query,E)?E:null,P=!!S&&this.mutatedKeys.has(S.key),G=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let O=!1;S&&w?S.data.isEqual(w.data)?P!==G&&(i.track({type:3,doc:w}),O=!0):this.su(S,w)||(i.track({type:2,doc:w}),O=!0,(g&&this.eu(w,g)>0||p&&this.eu(w,p)<0)&&(d=!0)):!S&&w?(i.track({type:0,doc:w}),O=!0):S&&!w&&(i.track({type:1,doc:S}),O=!0,(g||p)&&(d=!0)),O&&(w?(u=u.add(w),a=G?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Ss:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,E)=>(function(w,P){const G=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Vt:O})}};return G(w)-G(P)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(i),r=r??!1;const d=t&&!r?this._u():[],g=this.Ya.size===0&&this.current&&!r?1:0,p=g!==this.Xa;return this.Xa=g,u.length!==0||p?{snapshot:new Ra(this.query,e.tu,a,u,e.mutatedKeys,g===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new wE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Be(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new IC(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new CC(i))})),t}cu(e){this.Za=e.ks,this.Ya=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ra.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const vg="SyncEngine";class TP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class SP{constructor(e){this.key=e,this.hu=!1}}class AP{constructor(e,t,i,r,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new hr((d=>BA(d)),pd),this.Iu=new Map,this.Eu=new Set,this.Ru=new mt(Se.comparator),this.Au=new Map,this.Vu=new lg,this.du={},this.mu=new Map,this.fu=wa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function CP(n,e,t=!0){const i=MC(n);let r;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await wC(i,e,t,!0),r}async function IP(n,e){const t=MC(n);await wC(t,e,!0,!1)}async function wC(n,e,t,i){const r=await qD(n.localStore,Gi(e)),a=r.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await wP(n,e,a,u==="current",r.resumeToken)),n.isPrimaryClient&&t&&_C(n.remoteStore,r),d}async function wP(n,e,t,i,r){n.pu=(E,S,w)=>(async function(G,O,Y,Q){let j=O.view.ru(Y);j.Ss&&(j=await EE(G.localStore,O.query,!1).then((({documents:N})=>O.view.ru(N,j))));const oe=Q&&Q.targetChanges.get(O.targetId),W=Q&&Q.targetMismatches.get(O.targetId)!=null,he=O.view.applyChanges(j,G.isPrimaryClient,oe,W);return xE(G,O.targetId,he.au),he.snapshot})(n,E,S,w);const a=await EE(n.localStore,e,!0),u=new EP(e,a.ks),d=u.ru(a.documents),g=xu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),p=u.applyChanges(d,n.isPrimaryClient,g);xE(n,t,p.au);const v=new TP(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function RP(n,e,t){const i=Ne(n),r=i.Tu.get(e),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((u=>!pd(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await pm(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&dg(i.remoteStore,r.targetId),ym(i,r.targetId)})).catch(Da)):(ym(i,r.targetId),await pm(i.localStore,r.targetId,!0))}async function bP(n,e){const t=Ne(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),dg(t.remoteStore,i.targetId))}async function NP(n,e,t){const i=UP(n);try{const r=await(function(u,d){const g=Ne(u),p=ct.now(),v=d.reduce(((w,P)=>w.add(P.key)),Be());let E,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let P=_s(),G=Be();return g.xs.getEntries(w,v).next((O=>{P=O,P.forEach(((Y,Q)=>{Q.isValidDocument()||(G=G.add(Y))}))})).next((()=>g.localDocuments.getOverlayedDocuments(w,P))).next((O=>{E=O;const Y=[];for(const Q of d){const j=GM(Q,E.get(Q.key).overlayedDocument);j!=null&&Y.push(new pr(Q.key,j,kA(j.value.mapValue),ps.exists(!0)))}return g.mutationQueue.addMutationBatch(w,p,Y,d)})).next((O=>{S=O;const Y=O.applyToLocalDocumentSet(E,G);return g.documentOverlayCache.saveOverlays(w,O.batchId,Y)}))})).then((()=>({batchId:S.batchId,changes:JA(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(u,d,g){let p=u.du[u.currentUser.toKey()];p||(p=new mt(qe)),p=p.insert(d,g),u.du[u.currentUser.toKey()]=p})(i,r.batchId,t),await Du(i,r.changes),await Td(i.remoteStore)}catch(r){const a=yg(r,"Failed to persist write");t.reject(a)}}async function RC(n,e){const t=Ne(n);try{const i=await OD(t.localStore,e);e.targetChanges.forEach(((r,a)=>{const u=t.Au.get(a);u&&(je(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?je(u.hu,14607):r.removedDocuments.size>0&&(je(u.hu,42227),u.hu=!1))})),await Du(t,i,e)}catch(i){await Da(i)}}function NE(n,e,t){const i=Ne(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(u,d){const g=Ne(u);g.onlineState=d;let p=!1;g.queries.forEach(((v,E)=>{for(const S of E.ba)S.va(d)&&(p=!0)})),p&&_g(g)})(i.eventManager,e),r.length&&i.Pu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function xP(n,e,t){const i=Ne(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),a=r&&r.key;if(a){let u=new mt(Se.comparator);u=u.insert(a,on.newNoDocument(a,Re.min()));const d=Be().add(a),g=new _d(Re.min(),new Map,new mt(qe),u,d);await RC(i,g),i.Ru=i.Ru.remove(a),i.Au.delete(e),Eg(i)}else await pm(i.localStore,e,!1).then((()=>ym(i,e,t))).catch(Da)}async function MP(n,e){const t=Ne(n),i=e.batch.batchId;try{const r=await LD(t.localStore,e);NC(t,i,null),bC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Du(t,r)}catch(r){await Da(r)}}async function DP(n,e,t){const i=Ne(n);try{const r=await(function(u,d){const g=Ne(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return g.mutationQueue.lookupMutationBatch(p,d).next((E=>(je(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(p,E)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,v,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>g.localDocuments.getDocuments(p,v)))}))})(i.localStore,e);NC(i,e,t),bC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Du(i,r)}catch(r){await Da(r)}}function bC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function NC(n,e,t){const i=Ne(n);let r=i.du[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.du[i.currentUser.toKey()]=r}}function ym(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||xC(n,i)}))}function xC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(dg(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Eg(n))}function xE(n,e,t){for(const i of t)i instanceof CC?(n.Vu.addReference(i.key,e),PP(n,i)):i instanceof IC?(pe(vg,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||xC(n,i.key)):Ie(19791,{wu:i})}function PP(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(pe(vg,"New document in limbo: "+t),n.Eu.add(i),Eg(n))}function Eg(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Se(pt.fromString(e)),i=n.fu.next();n.Au.set(i,new SP(t)),n.Ru=n.Ru.insert(t,i),_C(n.remoteStore,new ao(Gi(ig(t.path)),i,"TargetPurposeLimboResolution",cd.ce))}}async function Du(n,e,t){const i=Ne(n),r=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,g)=>{u.push(i.pu(g,e,t).then((p=>{var v;if((p||t)&&i.isPrimaryClient){const E=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){r.push(p);const E=cg.Es(g.targetId,p);a.push(E)}})))})),await Promise.all(u),i.Pu.J_(r),await(async function(g,p){const v=Ne(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(p,(S=>se.forEach(S.Ts,(w=>v.persistence.referenceDelegate.addReference(E,S.targetId,w))).next((()=>se.forEach(S.Is,(w=>v.persistence.referenceDelegate.removeReference(E,S.targetId,w)))))))))}catch(E){if(!Pa(E))throw E;pe(fg,"Failed to update sequence numbers: "+E)}for(const E of p){const S=E.targetId;if(!E.fromCache){const w=v.vs.get(S),P=w.snapshotVersion,G=w.withLastLimboFreeSnapshotVersion(P);v.vs=v.vs.insert(S,G)}}})(i.localStore,a))}async function VP(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){pe(vg,"User change. New user:",e.toKey());const i=await pC(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((g=>{g.reject(new _e(re.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Du(t,i.Ns)}}function kP(n,e){const t=Ne(n),i=t.Au.get(e);if(i&&i.hu)return Be().add(i.key);{let r=Be();const a=t.Iu.get(e);if(!a)return r;for(const u of a){const d=t.Tu.get(u);r=r.unionWith(d.view.nu)}return r}}function MC(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=RC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xP.bind(null,e),e.Pu.J_=yP.bind(null,e.eventManager),e.Pu.yu=_P.bind(null,e.eventManager),e}function UP(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DP.bind(null,e),e}class Xf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return UD(this.persistence,new PD,e.initialUser,this.serializer)}Cu(e){return new hC(ug.Vi,this.serializer)}Du(e){return new HD}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xf.provider={build:()=>new Xf};class LP extends Xf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){je(this.persistence.referenceDelegate instanceof $f,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new _D(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new hC((i=>$f.Vi(i,t)),this.serializer)}}class _m{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>NE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=VP.bind(null,this.syncEngine),await dP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new pP})()}createDatastore(e){const t=vd(e.databaseInfo.databaseId),i=$D(e.databaseInfo);return ZD(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,a,u,d){return new tP(i,r,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>NE(this.syncEngine,t,0)),(function(){return AE.v()?new AE:new zD})())}createSyncEngine(e,t){return(function(r,a,u,d,g,p,v){const E=new AP(r,a,u,d,g,p);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const a=Ne(r);pe(fr,"RemoteStore shutting down."),a.Ea.add(5),await Mu(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}_m.provider={build:()=>new _m};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ys("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="FirestoreClient";class FP{constructor(e,t,i,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=r,this.user=nn.UNAUTHENTICATED,this.clientId=Xm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{pe(vo,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(pe(vo,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ho;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=yg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function zp(n,e){n.asyncQueue.verifyOperationInProgress(),pe(vo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await pC(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function ME(n,e){n.asyncQueue.verifyOperationInProgress();const t=await GP(n);pe(vo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>IE(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>IE(e.remoteStore,r))),n._onlineComponents=e}async function GP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(vo,"Using user provided OfflineComponentProvider");try{await zp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===re.FAILED_PRECONDITION||r.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Sa("Error using user provided cache. Falling back to memory cache: "+t),await zp(n,new Xf)}}else pe(vo,"Using default OfflineComponentProvider"),await zp(n,new LP(void 0));return n._offlineComponents}async function DC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(vo,"Using user provided OnlineComponentProvider"),await ME(n,n._uninitializedComponentsProvider._online)):(pe(vo,"Using default OnlineComponentProvider"),await ME(n,new _m))),n._onlineComponents}function qP(n){return DC(n).then((e=>e.syncEngine))}async function BP(n){const e=await DC(n),t=e.eventManager;return t.onListen=CP.bind(null,e.syncEngine),t.onUnlisten=RP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=IP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bP.bind(null,e.syncEngine),t}function HP(n,e,t={}){const i=new ho;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,g,p){const v=new OP({next:S=>{v.Nu(),u.enqueueAndForget((()=>gP(a,E)));const w=S.docs.has(d);!w&&S.fromCache?p.reject(new _e(re.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&g&&g.source==="server"?p.reject(new _e(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new vP(ig(d.path),v,{includeMetadataChanges:!0,Ka:!0});return mP(a,E)})(await BP(n),n.asyncQueue,e,t,i))),i.promise}function zP(n,e){const t=new ho;return n.asyncQueue.enqueueAndForget((async()=>NP(await qP(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="ComponentProvider",DE=new Map;function KP(n,e,t,i,r){return new lM(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,PC(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="firestore.googleapis.com",PE=!0;class VE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VC,this.ssl=PE}else this.host=e.host,this.ssl=e.ssl??PE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gD)throw new _e(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tg{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new G1;switch(i.type){case"firstParty":return new z1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=DE.get(t);i&&(pe(JP,"Removing Datastore"),DE.delete(t),i.terminate())})(this),Promise.resolve()}}function YP(n,e,t,i={}){var p;n=du(n,Tg);const r=ba(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;r&&(xS(`https://${d}`),MS("Firestore",!0)),a.host!==VC&&a.host!==d&&Sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...a,host:d,ssl:r,emulatorOptions:i};if(!rr(g,u)&&(n._setSettings(g),i.mockUserToken)){let v,E;if(typeof i.mockUserToken=="string")v=i.mockUserToken,E=nn.MOCK_USER;else{v=$R(i.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new _e(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new nn(S)}n._authCredentials=new q1(new CA(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Sg(this.firestore,e,this._query)}}class Ht{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}toJSON(){return{type:Ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(bu(t,Ht._jsonSchema))return new Ht(e,i||null,new Se(pt.fromString(t.referencePath)))}}Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:Pt("string",Ht._jsonSchemaVersion),referencePath:Pt("string")};class vu extends Sg{constructor(e,t,i){super(e,t,ig(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Se(e))}withConverter(e){return new vu(this.firestore,e,this._path)}}function kC(n,e,...t){if(n=Dn(n),arguments.length===1&&(e=Xm.newId()),X1("doc","path",e),n instanceof Tg){const i=pt.fromString(e,...t);return $0(i),new Ht(n,null,new Se(i))}{if(!(n instanceof Ht||n instanceof vu))throw new _e(re.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pt.fromString(e,...t));return $0(i),new Ht(n.firestore,n instanceof vu?n.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="AsyncQueue";class UE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new gC(this,"async_queue_retry"),this._c=()=>{const i=Hp();i&&pe(kE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Hp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Hp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ho;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Pa(e))throw e;pe(kE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ys("INTERNAL UNHANDLED ERROR: ",LE(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=gg.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&Ie(47125,{Pc:LE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function LE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ag extends Tg{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new UE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new UE(e),this._firestoreClient=void 0,await e}}}function $P(n,e){const t=typeof n=="object"?n:kS(),i=typeof n=="string"?n:qf,r=Om(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=KR("firestore");a&&YP(r,...a)}return r}function UC(n){if(n._terminated)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||QP(n),n._firestoreClient}function QP(n){var i,r,a,u;const e=n._freezeSettings(),t=KP(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(r=n._app)==null?void 0:r.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new FP(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(Zt.fromBase64String(e))}catch(t){throw new _e(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yn(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bu(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Pt("string",Yn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bi._jsonSchemaVersion}}static fromJSON(e){if(bu(e,Bi._jsonSchema))return new Bi(e.latitude,e.longitude)}}Bi._jsonSchemaVersion="firestore/geoPoint/1.0",Bi._jsonSchema={type:Pt("string",Bi._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:di._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bu(e,di._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new di(e.vectorValues);throw new _e(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}di._jsonSchemaVersion="firestore/vectorValue/1.0",di._jsonSchema={type:Pt("string",di._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=/^__.*__$/;class WP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new pr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nu(e,this.data,t,this.fieldTransforms)}}function FC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{dataSource:n})}}class Cg{constructor(e,t,i,r,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Cg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Wf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(FC(this.dataSource)&&XP.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class jP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||vd(e)}createContext(e,t,i,r=!1){return new Cg({dataSource:e,methodName:t,targetDoc:i,path:jt.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ZP(n){const e=n._freezeSettings(),t=vd(n._databaseId);return new jP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function e2(n,e,t,i,r,a={}){const u=n.createContext(a.merge||a.mergeFields?2:0,e,t,r);HC("Data must be an object, but it was:",u,i);const d=qC(i,u);let g,p;if(a.merge)g=new ci(u.fieldMask),p=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const S=Ig(e,E,t);if(!u.contains(S))throw new _e(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);i2(v,S)||v.push(S)}g=new ci(v),p=u.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,p=u.fieldTransforms;return new WP(new Kn(d),g,p)}function GC(n,e){if(BC(n=Dn(n)))return HC("Unsupported field value:",e,n),qC(n,e);if(n instanceof OC)return(function(i,r){if(!FC(r.dataSource))throw r.createError(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,r){const a=[];let u=0;for(const d of i){let g=GC(d,r.childContextForArray(u));g==null&&(g={nullValue:"NULL_VALUE"}),a.push(g),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,r){if((i=Dn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return VM(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=ct.fromDate(i);return{timestampValue:Yf(r.serializer,a)}}if(i instanceof ct){const a=new ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Yf(r.serializer,a)}}if(i instanceof Bi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Yn)return{bytesValue:sC(r.serializer,i._byteString)};if(i instanceof Ht){const a=r.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw r.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ag(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof di)return(function(u,d){const g=u instanceof di?u.toArray():u;return{mapValue:{fields:{[PA]:{stringValue:VA},[Bf]:{arrayValue:{values:g.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return sg(d.serializer,v)}))}}}}}})(i,r);if(fC(i))return i._toProto(r.serializer);throw r.createError(`Unsupported field value: ${Wm(i)}`)})(n,e)}function qC(n,e){const t={};return RA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):dr(n,((i,r)=>{const a=GC(r,e.childContextForField(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function BC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof Bi||n instanceof Yn||n instanceof Ht||n instanceof OC||n instanceof di||fC(n))}function HC(n,e,t){if(!BC(t)||!IA(t)){const i=Wm(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function Ig(n,e,t){if((e=Dn(e))instanceof LC)return e._internalPath;if(typeof e=="string")return n2(n,e);throw Wf("Field path arguments must be of type string or ",n,!1,void 0,t)}const t2=new RegExp("[~\\*/\\[\\]]");function n2(n,e,t){if(e.search(t2)>=0)throw Wf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new LC(...e.split("."))._internalPath}catch{throw Wf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Wf(n,e,t,i,r){const a=i&&!i.isEmpty(),u=r!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(a||u)&&(g+=" (found",a&&(g+=` in field ${i}`),u&&(g+=` in document ${r}`),g+=")"),new _e(re.INVALID_ARGUMENT,d+n+g)}function i2(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{convertValue(e,t="none"){switch(yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return dr(e,((r,a)=>{i[r]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,r,a;const t=(a=(r=(i=e.fields)==null?void 0:i[Bf].arrayValue)==null?void 0:r.values)==null?void 0:a.map((u=>St(u.doubleValue)));return new di(t)}convertGeoPoint(e){return new Bi(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=dd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(pu(e));default:return null}}convertTimestamp(e){const t=mo(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=pt.fromString(e);je(cC(i),9688,{name:e});const r=new mu(i.get(1),i.get(3)),a=new Se(i.popFirst(5));return r.isEqual(t)||ys(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2 extends s2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}const OE="@firebase/firestore",FE="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Ig("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class r2 extends zC{data(){return super.data()}}function a2(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Zl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class or extends zC{constructor(e,t,i,r,a,u){super(e,t,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Ig("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=or._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}or._jsonSchemaVersion="firestore/documentSnapshot/1.0",or._jsonSchema={type:Pt("string",or._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Nf extends or{data(e={}){return super.data(e)}}class au{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Zl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Nf(this._firestore,this._userDataWriter,i.key,i,new Zl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((d=>{const g=new Nf(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Zl(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const g=new Nf(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Zl(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return d.type!==0&&(p=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:l2(d.type),doc:g,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=au._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function l2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */au._jsonSchemaVersion="firestore/querySnapshot/1.0",au._jsonSchema={type:Pt("string",au._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(n){n=du(n,Ht);const e=du(n.firestore,Ag),t=UC(e);return HP(t,n._key).then((i=>d2(e,n,i)))}function c2(n,e,t){n=du(n,Ht);const i=du(n.firestore,Ag),r=a2(n.converter,e,t),a=ZP(i);return f2(i,[e2(a,"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,ps.none())])}function f2(n,e){const t=UC(n);return zP(t,e)}function d2(n,e,t){const i=t.docs.get(e._key),r=new o2(n);return new or(n,r,e._key,i,new Zl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){F1(Na),Ta(new ar("firestore",((i,{instanceIdentifier:r,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Ag(new B1(i.getProvider("auth-internal")),new J1(u,i.getProvider("app-check-internal")),uM(u,r),u);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),co(OE,FE,e),co(OE,FE,"esm2020")})();const JC={apiKey:"AIzaSyAkzofEaby0xfOxYFRwitmLm0o1SlirQZk",authDomain:"flutter-apply.firebaseapp.com",databaseURL:"https://flutter-apply-default-rtdb.firebaseio.com",projectId:"flutter-apply",storageBucket:"flutter-apply.firebasestorage.app",messagingSenderId:"226410919520",appId:"1:226410919520:web:b9c26cf5a94d8ea7347505",measurementId:"G-RQ8V3DNTES"},h2=!JC.apiKey.includes("YOUR_API_KEY"),KC=VS(JC),Jl=k1(KC),YC=$P(KC),$C=Ee.createContext(void 0),wg=()=>{const n=Ee.useContext($C);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},p2=({children:n})=>{const[e,t]=Ee.useState(null),[i,r]=Ee.useState(!0);Ee.useEffect(()=>Ax(Jl,E=>{t(E),r(!1)}),[]);const p={currentUser:e,loading:i,signInWithGoogle:async()=>{const v=new cs;try{await zx(Jl,v)}catch(E){throw console.error("Error signing in with Google",E),E}},loginWithEmail:async(v,E)=>{try{await Ex(Jl,v,E)}catch(S){throw console.error("Error signing in with Email",S),S}},registerWithEmail:async(v,E)=>{try{await vx(Jl,v,E)}catch(S){throw console.error("Error registering with Email",S),S}},logout:async()=>{try{await Cx(Jl)}catch(v){throw console.error("Error signing out",v),v}}};return I.jsx($C.Provider,{value:p,children:!i&&n})};var io=(n=>(n.GENERATOR="GENERATOR",n.PROFILE="PROFILE",n.EMAIL_FINDER="EMAIL_FINDER",n))(io||{});const QC="users",XC="flutter_apply_profile_",m2=async n=>{let e=null;try{const t=kC(YC,QC,n),i=await u2(t);i.exists()&&(e=i.data())}catch(t){console.warn("Firestore fetch warning (using local fallback):",t.message)}if(!e)try{const t=localStorage.getItem(`${XC}${n}`);t&&(e=JSON.parse(t),console.log("Loaded profile from local storage."))}catch(t){console.error("Failed to parse local profile",t)}return e},g2=async(n,e)=>{try{localStorage.setItem(`${XC}${n}`,JSON.stringify(e))}catch(t){console.error("Failed to save to local storage",t)}try{const t=kC(YC,QC,n);await c2(t,e,{merge:!0})}catch(t){throw t.code==="permission-denied"||t.message.includes("Missing or insufficient permissions")?(console.warn("Cloud sync skipped: Firestore Security Rules blocked the write."),new Error("Firestore Rules blocked write. Update rules in Console.")):(console.warn("Firestore save failed:",t.message),new Error("Cloud Sync Failed: "+t.message))}};var y2={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _2,v2;function E2(){return{geminiUrl:_2,vertexUrl:v2}}function T2(n,e,t,i){var r,a;if(!(n!=null&&n.baseUrl)){const u=E2();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ts{}function de(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const g=n[d];if(Array.isArray(t))for(let p=0;p<g.length;p++){const v=g[p];h(v,e.slice(a+1),t[p])}else for(const p of g)h(p,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const g=n[d];h(g[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const r=e[i];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function S2(n,e){for(const[t,i]of Object.entries(e)){const r=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){d=g;break}if(d!==-1&&a.length>d)for(let g=d;g<a.length;g++){const p=a[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&u.add(p)}vm(n,r,a,0,u)}}function vm(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const g of d[u])vm(g,e,t,i+1,r)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(p=>!p.startsWith("_")&&!r.has(p)),g={};for(const p of d)g[p]=u[p];for(const[p,v]of Object.entries(g)){const E=[];for(const S of t.slice(i))S==="*"?E.push(p):E.push(S);h(u,E,v)}for(const p of d)delete u[p]}}else{const u=n;a in u&&vm(u[a],e,t,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A2(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&h(e,["_url","resourceName"],i),e}function C2(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata"]);i!=null&&h(e,["metadata"],i);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const a=f(n,["error"]);a!=null&&h(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],w2(u)),e}function I2(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata"]);i!=null&&h(e,["metadata"],i);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const a=f(n,["error"]);a!=null&&h(e,["error"],a);const u=f(n,["response"]);return u!=null&&h(e,["response"],R2(u)),e}function w2(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>b2(u))),h(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function R2(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>N2(u))),h(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function b2(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],k2(t)),e}function N2(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],U2(t)),e}function x2(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function M2(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function D2(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata"]);i!=null&&h(e,["metadata"],i);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const a=f(n,["error"]);a!=null&&h(e,["error"],a);const u=f(n,["response"]);return u!=null&&h(e,["response"],P2(u)),e}function P2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&h(e,["parent"],i);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function WC(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata"]);i!=null&&h(e,["metadata"],i);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const a=f(n,["error"]);a!=null&&h(e,["error"],a);const u=f(n,["response"]);return u!=null&&h(e,["response"],V2(u)),e}function V2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&h(e,["parent"],i);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function k2(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&h(e,["videoBytes"],Rg(i));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function U2(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&h(e,["videoBytes"],Rg(i));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var GE;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(GE||(GE={}));var qE;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(qE||(qE={}));var BE;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(BE||(BE={}));var Tn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Tn||(Tn={}));var HE;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(HE||(HE={}));var zE;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(zE||(zE={}));var JE;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(JE||(JE={}));var KE;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(KE||(KE={}));var YE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(YE||(YE={}));var $E;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})($E||($E={}));var QE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(QE||(QE={}));var XE;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(XE||(XE={}));var WE;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(WE||(WE={}));var jE;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(jE||(jE={}));var ZE;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(ZE||(ZE={}));var eT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(eT||(eT={}));var tT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(tT||(tT={}));var nT;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(nT||(nT={}));var iT;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(iT||(iT={}));var sT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(sT||(sT={}));var oT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(oT||(oT={}));var jf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(jf||(jf={}));var rT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(rT||(rT={}));var aT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(aT||(aT={}));var lT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(lT||(lT={}));var Em;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Em||(Em={}));var uT;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(uT||(uT={}));var cT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(cT||(cT={}));var Tm;(function(n){n.COLLECTION="COLLECTION"})(Tm||(Tm={}));var fT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(fT||(fT={}));var dT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(dT||(dT={}));var hT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(hT||(hT={}));var pT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(pT||(pT={}));var mT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(mT||(mT={}));var gT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(gT||(gT={}));var yT;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(yT||(yT={}));var _T;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(_T||(_T={}));var vT;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(vT||(vT={}));var ET;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(ET||(ET={}));var TT;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(TT||(TT={}));var ST;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(ST||(ST={}));var AT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(AT||(AT={}));var CT;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(CT||(CT={}));var IT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(IT||(IT={}));var wT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(wT||(wT={}));var RT;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(RT||(RT={}));var bT;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(bT||(bT={}));var NT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(NT||(NT={}));var xT;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(xT||(xT={}));var MT;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(MT||(MT={}));var DT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(DT||(DT={}));var PT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(PT||(PT={}));var VT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(VT||(VT={}));var kT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(kT||(kT={}));var UT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(UT||(UT={}));var LT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(LT||(LT={}));var da;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(da||(da={}));class Sm{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Kl{get text(){var e,t,i,r,a,u,d,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const E=[];for(const S of(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[w,P]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(P!==null||P!==void 0)&&E.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,t,i,r,a,u,d,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const E of(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[S,w]of Object.entries(E))S!=="inlineData"&&(w!==null||w!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,i,r,a,u,d,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,i,r,a,u,d,g,p;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,i,r,a,u,d,g,p;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class OT{}class FT{}class L2{}class O2{}class F2{}class G2{}class GT{}class qT{}class BT{}class q2{}class Zf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Zf;let r;const a=e;return t?r=I2(a):r=C2(a),Object.assign(i,r),i}}class HT{}class zT{}class JT{}class KT{}class B2{}class H2{}class z2{}class bg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new bg,a=D2(e);return Object.assign(i,a),i}}class J2{}class K2{}class Y2{}class $2{}class YT{}class Q2{get text(){var e,t,i;let r="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[g,p]of Object.entries(d))g!=="text"&&g!=="thought"&&p!==null&&u.push(g);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,r+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,t,i;let r="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,g]of Object.entries(u))d!=="inlineData"&&g!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class X2{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ng{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Ng,a=WC(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $e(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function jC(n,e){const t=$e(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function ZC(n){return Array.isArray(n)?n.map(e=>ed(e)):[ed(n)]}function ed(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function eI(n){const e=ed(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function tI(n){const e=ed(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $T(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function nI(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>$T(e)):[$T(n)]}function Am(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function QT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function XT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function rn(n){if(n==null)throw new Error("ContentUnion is required");return Am(n)?n:{role:"user",parts:nI(n)}}function xg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=rn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=rn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>rn(t)):[rn(e)]}function $n(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(QT(n)||XT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[rn(n)]}const e=[],t=[],i=Am(n[0]);for(const r of n){const a=Am(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(QT(r)||XT(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:nI(t)}),e}function W2(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Tn).includes(t[0].toUpperCase())?t[0].toUpperCase():Tn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Tn).includes(i.toUpperCase())?i.toUpperCase():Tn.TYPE_UNSPECIFIED})}}function va(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&W2(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Tn).includes(d.toUpperCase())?d.toUpperCase():Tn.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=va(d);else if(i.includes(u)){const g=[];for(const p of d){if(p.type=="null"){e.nullable=!0;continue}g.push(va(p))}e[u]=g}else if(r.includes(u)){const g={};for(const[p,v]of Object.entries(d))g[p]=va(v);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Mg(n){return va(n)}function Dg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Pg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ka(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=va(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=va(e.response));return n}function Ua(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function j2(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Ss(n,e){if(typeof e!="string")throw new Error("name must be a string");return j2(n,e,"cachedContents")}function iI(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Ao(n){return Rg(n)}function Z2(n){return n!=null&&typeof n=="object"&&"name"in n}function eV(n){return n!=null&&typeof n=="object"&&"video"in n}function tV(n){return n!=null&&typeof n=="object"&&"uri"in n}function sI(n){var e;let t;if(Z2(n)&&(t=n.name),!(tV(n)&&(t=n.uri,t===void 0))&&!(eV(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function oI(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function rI(n){for(const e of["models","tunedModels","publisherModels"])if(nV(n,e))return n[e];return[]}function nV(n,e){return n!==null&&typeof n=="object"&&e in n}function iV(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function sV(n,e={}){const t=[],i=new Set;for(const r of n){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=iV(r,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function aI(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function oV(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function lI(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let a=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function La(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function uI(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rV(n){const e={},t=f(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>GV(u))),h(e,["inlinedResponses"],a)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),h(e,["inlinedEmbedContentResponses"],a)}return e}function aV(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&h(e,["gcsUri"],i);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function lV(n){const e={},t=f(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&h(e,["gcsDestination","outputUriPrefix"],i);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function xf(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&h(e,["displayName"],i);const r=f(n,["metadata","state"]);r!=null&&h(e,["state"],uI(r));const a=f(n,["metadata","createTime"]);a!=null&&h(e,["createTime"],a);const u=f(n,["metadata","endTime"]);u!=null&&h(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const g=f(n,["metadata","model"]);g!=null&&h(e,["model"],g);const p=f(n,["metadata","output"]);return p!=null&&h(e,["dest"],rV(lI(p))),e}function Cm(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["displayName"]);i!=null&&h(e,["displayName"],i);const r=f(n,["state"]);r!=null&&h(e,["state"],uI(r));const a=f(n,["error"]);a!=null&&h(e,["error"],a);const u=f(n,["createTime"]);u!=null&&h(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(e,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(e,["endTime"],g);const p=f(n,["updateTime"]);p!=null&&h(e,["updateTime"],p);const v=f(n,["model"]);v!=null&&h(e,["model"],v);const E=f(n,["inputConfig"]);E!=null&&h(e,["src"],uV(E));const S=f(n,["outputConfig"]);S!=null&&h(e,["dest"],aV(lI(S)));const w=f(n,["completionStats"]);return w!=null&&h(e,["completionStats"],w),e}function uV(n){const e={},t=f(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&h(e,["gcsUri"],i);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function cV(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&h(t,["fileName"],i);const r=f(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>FV(n,u))),h(t,["requests","requests"],a)}return t}function fV(n){const e={},t=f(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&h(e,["gcsSource","uris"],i);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function dV(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function hV(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],La(n,i)),t}function pV(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],La(n,i)),t}function mV(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],gV(i));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const a=f(n,["finishReason"]);a!=null&&h(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const p=f(n,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(w=>w)),h(e,["safetyRatings"],S)}const E=f(n,["urlContextMetadata"]);return E!=null&&h(e,["urlContextMetadata"],E),e}function gV(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),h(e,["citations"],i)}return e}function cI(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>YV(a))),h(e,["parts"],r)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function yV(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&h(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function _V(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const r=f(n,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],lV(oV(r))),t}function WT(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],$e(n,i));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],cV(n,aI(n,r)));const a=f(e,["config"]);return a!=null&&yV(a,t),t}function vV(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["model"],$e(n,i));const r=f(e,["src"]);r!=null&&h(t,["inputConfig"],fV(aI(n,r)));const a=f(e,["config"]);return a!=null&&_V(a,t),t}function EV(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&h(e,["batch","displayName"],i),t}function TV(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],$e(n,i));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],bV(n,r));const a=f(e,["config"]);return a!=null&&EV(a,t),t}function SV(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],La(n,i)),t}function AV(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],La(n,i)),t}function CV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&h(e,["name"],i);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const a=f(n,["error"]);return a!=null&&h(e,["error"],a),e}function IV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&h(e,["name"],i);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const a=f(n,["error"]);return a!=null&&h(e,["error"],a),e}function wV(n,e){const t={},i=f(e,["contents"]);if(i!=null){let a=xg(n,i);Array.isArray(a)&&(a=a.map(u=>u)),h(t,["requests[]","request","content"],a)}const r=f(e,["config"]);return r!=null&&(h(t,["_self"],RV(r,t)),S2(t,{"requests[].*":"requests[].request.*"})),t}function RV(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&h(e,["requests[]","taskType"],i);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&h(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function bV(n,e){const t={},i=f(e,["fileName"]);i!=null&&h(t,["file_name"],i);const r=f(e,["inlinedRequests"]);return r!=null&&h(t,["requests"],wV(n,r)),t}function NV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function xV(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const i=f(n,["args"]);i!=null&&h(e,["args"],i);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function MV(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);const i=f(n,["mode"]);if(i!=null&&h(e,["mode"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function DV(n,e,t){const i={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],cI(rn(r)));const a=f(e,["temperature"]);a!=null&&h(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&h(i,["topP"],u);const d=f(e,["topK"]);d!=null&&h(i,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(i,["candidateCount"],g);const p=f(e,["maxOutputTokens"]);p!=null&&h(i,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&h(i,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&h(i,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&h(i,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&h(i,["presencePenalty"],w);const P=f(e,["frequencyPenalty"]);P!=null&&h(i,["frequencyPenalty"],P);const G=f(e,["seed"]);G!=null&&h(i,["seed"],G);const O=f(e,["responseMimeType"]);O!=null&&h(i,["responseMimeType"],O);const Y=f(e,["responseSchema"]);Y!=null&&h(i,["responseSchema"],Mg(Y));const Q=f(e,["responseJsonSchema"]);if(Q!=null&&h(i,["responseJsonSchema"],Q),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=f(e,["safetySettings"]);if(t!==void 0&&j!=null){let D=j;Array.isArray(D)&&(D=D.map(xe=>$V(xe))),h(t,["safetySettings"],D)}const oe=f(e,["tools"]);if(t!==void 0&&oe!=null){let D=Ua(oe);Array.isArray(D)&&(D=D.map(xe=>XV(ka(xe)))),h(t,["tools"],D)}const W=f(e,["toolConfig"]);if(t!==void 0&&W!=null&&h(t,["toolConfig"],QV(W)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const he=f(e,["cachedContent"]);t!==void 0&&he!=null&&h(t,["cachedContent"],Ss(n,he));const N=f(e,["responseModalities"]);N!=null&&h(i,["responseModalities"],N);const x=f(e,["mediaResolution"]);x!=null&&h(i,["mediaResolution"],x);const M=f(e,["speechConfig"]);if(M!=null&&h(i,["speechConfig"],Dg(M)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&h(i,["thinkingConfig"],L);const U=f(e,["imageConfig"]);U!=null&&h(i,["imageConfig"],OV(U));const q=f(e,["enableEnhancedCivicAnswers"]);if(q!=null&&h(i,["enableEnhancedCivicAnswers"],q),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function PV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(p=>mV(p))),h(e,["candidates"],g)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const a=f(n,["promptFeedback"]);a!=null&&h(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&h(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function VV(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],La(n,i)),t}function kV(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],La(n,i)),t}function UV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function LV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function OV(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&h(e,["imageSize"],i),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function FV(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["request","model"],$e(n,i));const r=f(e,["contents"]);if(r!=null){let d=$n(r);Array.isArray(d)&&(d=d.map(g=>cI(g))),h(t,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&h(t,["metadata"],a);const u=f(e,["config"]);return u!=null&&h(t,["request","generationConfig"],DV(n,u,f(t,["request"],{}))),t}function GV(n){const e={},t=f(n,["response"]);t!=null&&h(e,["response"],PV(t));const i=f(n,["metadata"]);i!=null&&h(e,["metadata"],i);const r=f(n,["error"]);return r!=null&&h(e,["error"],r),e}function qV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function BV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const a=f(n,["filter"]);return e!==void 0&&a!=null&&h(e,["_query","filter"],a),t}function HV(n){const e={},t=f(n,["config"]);return t!=null&&qV(t,e),e}function zV(n){const e={},t=f(n,["config"]);return t!=null&&BV(t,e),e}function JV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=f(n,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>xf(u))),h(e,["batchJobs"],a)}return e}function KV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=f(n,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Cm(u))),h(e,["batchJobs"],a)}return e}function YV(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&h(e,["fileData"],NV(a));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],xV(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],dV(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function $V(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&h(e,["threshold"],i),e}function QV(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);const i=f(n,["functionCallingConfig"]);return i!=null&&h(e,["functionCallingConfig"],MV(i)),e}function XV(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],UV(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],LV(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vs;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(vs||(vs={}));class gr{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WV extends Ts{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gr(vs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=WT(this.apiClient,e),i=t._url,r=de("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,g=d.requests,p=[];for(const v of g){const E=Object.assign({},v);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=S,E.request=w}p.push(E)}return d.requests=p,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${r}`;else if(u)i.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=vV(this.apiClient,e);return d=de("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Cm(v))}else{const p=WT(this.apiClient,e);return d=de("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>xf(v))}}async createEmbeddingsInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=TV(this.apiClient,e);return a=de("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>xf(g))}}async get(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=kV(this.apiClient,e);return d=de("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Cm(v))}else{const p=VV(this.apiClient,e);return d=de("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>xf(v))}}async cancel(e){var t,i,r,a;let u="",d={};if(this.apiClient.isVertexAI()){const g=pV(this.apiClient,e);u=de("batchPredictionJobs/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const g=hV(this.apiClient,e);u=de("batches/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=zV(e);return d=de("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=KV(v),S=new YT;return Object.assign(S,E),S})}else{const p=HV(e);return d=de("batches",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=JV(v),S=new YT;return Object.assign(S,E),S})}}async delete(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=AV(this.apiClient,e);return d=de("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>IV(v))}else{const p=SV(this.apiClient,e);return d=de("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>CV(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jV(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function jT(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>Tk(a))),h(e,["parts"],r)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function ZV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const a=f(n,["displayName"]);e!==void 0&&a!=null&&h(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=$n(u);Array.isArray(v)&&(v=v.map(E=>jT(E))),h(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],jT(rn(d)));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(E=>Ak(E))),h(e,["tools"],v)}const p=f(n,["toolConfig"]);if(e!==void 0&&p!=null&&h(e,["toolConfig"],Sk(p)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function ek(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const a=f(n,["displayName"]);e!==void 0&&a!=null&&h(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let E=$n(u);Array.isArray(E)&&(E=E.map(S=>S)),h(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],rn(d));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let E=g;Array.isArray(E)&&(E=E.map(S=>Ck(S))),h(e,["tools"],E)}const p=f(n,["toolConfig"]);e!==void 0&&p!=null&&h(e,["toolConfig"],p);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&h(e,["encryption_spec","kmsKeyName"],v),t}function tk(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["model"],jC(n,i));const r=f(e,["config"]);return r!=null&&ZV(r,t),t}function nk(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["model"],jC(n,i));const r=f(e,["config"]);return r!=null&&ek(r,t),t}function ik(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],Ss(n,i)),t}function sk(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],Ss(n,i)),t}function ok(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function rk(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function ak(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function lk(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const i=f(n,["args"]);i!=null&&h(e,["args"],i);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uk(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);const i=f(n,["mode"]);if(i!=null&&h(e,["mode"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ck(n){const e={},t=f(n,["description"]);t!=null&&h(e,["description"],t);const i=f(n,["name"]);i!=null&&h(e,["name"],i);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const a=f(n,["parametersJsonSchema"]);a!=null&&h(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function fk(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],Ss(n,i)),t}function dk(n,e){const t={},i=f(e,["name"]);return i!=null&&h(t,["_url","name"],Ss(n,i)),t}function hk(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function pk(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function mk(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function gk(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function yk(n){const e={},t=f(n,["config"]);return t!=null&&mk(t,e),e}function _k(n){const e={},t=f(n,["config"]);return t!=null&&gk(t,e),e}function vk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=f(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),h(e,["cachedContents"],a)}return e}function Ek(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=f(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),h(e,["cachedContents"],a)}return e}function Tk(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&h(e,["fileData"],ak(a));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],lk(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],jV(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function Sk(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);const i=f(n,["functionCallingConfig"]);return i!=null&&h(e,["functionCallingConfig"],uk(i)),e}function Ak(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],hk(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],pk(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function Ck(n){const e={},t=f(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);const i=f(n,["computerUse"]);if(i!=null&&h(e,["computerUse"],i),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const a=f(n,["enterpriseWebSearch"]);a!=null&&h(e,["enterpriseWebSearch"],a);const u=f(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>ck(S))),h(e,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const p=f(n,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function Ik(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function wk(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function Rk(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Ss(n,i));const r=f(e,["config"]);return r!=null&&Ik(r,t),t}function bk(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Ss(n,i));const r=f(e,["config"]);return r!=null&&wk(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nk extends Ts{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gr(vs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=nk(this.apiClient,e);return d=de("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=tk(this.apiClient,e);return d=de("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=dk(this.apiClient,e);return d=de("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=fk(this.apiClient,e);return d=de("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=sk(this.apiClient,e);return d=de("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=rk(v),S=new JT;return Object.assign(S,E),S})}else{const p=ik(this.apiClient,e);return d=de("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=ok(v),S=new JT;return Object.assign(S,E),S})}}async update(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=bk(this.apiClient,e);return d=de("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=Rk(this.apiClient,e);return d=de("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=_k(e);return d=de("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Ek(v),S=new KT;return Object.assign(S,E),S})}else{const p=yk(e);return d=de("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=vk(v),S=new KT;return Object.assign(S,E),S})}}}function td(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function ZT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(n){return this instanceof we?(this.v=n,this):new we(n)}function hi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(w){return function(P){return Promise.resolve(P).then(w,E)}}function d(w,P){i[w]&&(r[w]=function(G){return new Promise(function(O,Y){a.push([w,G,O,Y])>1||g(w,G)})},P&&(r[w]=P(r[w])))}function g(w,P){try{p(i[w](P))}catch(G){S(a[0][3],G)}}function p(w){w.value instanceof we?Promise.resolve(w.value.v).then(v,E):S(a[0][2],w)}function v(w){g("next",w)}function E(w){g("throw",w)}function S(w,P){w(P),a.shift(),a.length&&g(a[0][0],a[0][1])}}function pi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ZT=="function"?ZT(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,g){u=n[a](u),r(d,g,u.done,u.value)})}}function r(a,u,d,g){Promise.resolve(g).then(function(p){a({value:p,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xk(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:fI(t)}function fI(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Mk(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function eS(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let a=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),a&&!fI(n[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class Dk{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Pk(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Pk{constructor(e,t,i,r={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),Mk(a)}async sendMessage(e){var t;await this.sendPromise;const i=rn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const g=await r,p=(u=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=g.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(E))!==null&&d!==void 0?d:[]);const w=p?[p]:[];this.recordHistory(i,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=rn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?eS(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return hi(this,arguments,function*(){var r,a,u,d,g,p;const v=[];try{for(var E=!0,S=pi(e),w;w=yield we(S.next()),r=w.done,!r;E=!0){d=w.value,E=!1;const P=d;if(xk(P)){const G=(p=(g=P.candidates)===null||g===void 0?void 0:g[0])===null||p===void 0?void 0:p.content;G!==void 0&&v.push(G)}yield yield we(P)}}catch(P){a={error:P}}finally{try{!E&&!r&&(u=S.return)&&(yield we(u.call(S)))}finally{if(a)throw a.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(a=>a.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...eS(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Eu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Eu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vk(n){const e={},t=f(n,["file"]);return t!=null&&h(e,["file"],t),e}function kk(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function Uk(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],sI(t)),e}function Lk(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function Ok(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],sI(t)),e}function Fk(n){const e={},t=f(n,["uris"]);return t!=null&&h(e,["uris"],t),e}function Gk(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function qk(n){const e={},t=f(n,["config"]);return t!=null&&Gk(t,e),e}function Bk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=f(n,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),h(e,["files"],a)}return e}function Hk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),h(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zk extends Ts{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gr(vs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=qk(e);return a=de("files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=Bk(g),v=new J2;return Object.assign(v,p),v})}}async createInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Vk(e);return a=de("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const p=kk(g),v=new K2;return Object.assign(v,p),v})}}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ok(e);return a=de("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Uk(e);return a=de("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=Lk(g),v=new Y2;return Object.assign(v,p),v})}}async registerFilesInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Fk(e);return a=de("files:register",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const p=Hk(g),v=new $2;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mf(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function Jk(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>aU(a))),h(e,["parts"],r)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function Kk(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function Yk(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const i=f(n,["args"]);i!=null&&h(e,["args"],i);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $k(n){const e={},t=f(n,["description"]);t!=null&&h(e,["description"],t);const i=f(n,["name"]);i!=null&&h(e,["name"],i);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const a=f(n,["parametersJsonSchema"]);a!=null&&h(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Qk(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&h(e,["responseJsonSchema"],i);const r=f(n,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const a=f(n,["candidateCount"]);a!=null&&h(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&h(e,["logprobs"],g);const p=f(n,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const v=f(n,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const E=f(n,["presencePenalty"]);E!=null&&h(e,["presencePenalty"],E);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const w=f(n,["responseMimeType"]);w!=null&&h(e,["responseMimeType"],w);const P=f(n,["responseModalities"]);P!=null&&h(e,["responseModalities"],P);const G=f(n,["responseSchema"]);G!=null&&h(e,["responseSchema"],G);const O=f(n,["routingConfig"]);O!=null&&h(e,["routingConfig"],O);const Y=f(n,["seed"]);Y!=null&&h(e,["seed"],Y);const Q=f(n,["speechConfig"]);Q!=null&&h(e,["speechConfig"],Q);const j=f(n,["stopSequences"]);j!=null&&h(e,["stopSequences"],j);const oe=f(n,["temperature"]);oe!=null&&h(e,["temperature"],oe);const W=f(n,["thinkingConfig"]);W!=null&&h(e,["thinkingConfig"],W);const he=f(n,["topK"]);he!=null&&h(e,["topK"],he);const N=f(n,["topP"]);if(N!=null&&h(e,["topP"],N),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Xk(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function Wk(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function jk(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const a=f(n,["temperature"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],Pg(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const P=f(n,["systemInstruction"]);e!==void 0&&P!=null&&h(e,["setup","systemInstruction"],Jk(rn(P)));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let he=Ua(G);Array.isArray(he)&&(he=he.map(N=>uU(ka(N)))),h(e,["setup","tools"],he)}const O=f(n,["sessionResumption"]);e!==void 0&&O!=null&&h(e,["setup","sessionResumption"],lU(O));const Y=f(n,["inputAudioTranscription"]);e!==void 0&&Y!=null&&h(e,["setup","inputAudioTranscription"],Y);const Q=f(n,["outputAudioTranscription"]);e!==void 0&&Q!=null&&h(e,["setup","outputAudioTranscription"],Q);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&h(e,["setup","contextWindowCompression"],oe);const W=f(n,["proactivity"]);if(e!==void 0&&W!=null&&h(e,["setup","proactivity"],W),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function Zk(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],Qk(i));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const a=f(n,["temperature"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],Pg(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const P=f(n,["systemInstruction"]);e!==void 0&&P!=null&&h(e,["setup","systemInstruction"],rn(P));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let N=Ua(G);Array.isArray(N)&&(N=N.map(x=>cU(ka(x)))),h(e,["setup","tools"],N)}const O=f(n,["sessionResumption"]);e!==void 0&&O!=null&&h(e,["setup","sessionResumption"],O);const Y=f(n,["inputAudioTranscription"]);e!==void 0&&Y!=null&&h(e,["setup","inputAudioTranscription"],Y);const Q=f(n,["outputAudioTranscription"]);e!==void 0&&Q!=null&&h(e,["setup","outputAudioTranscription"],Q);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&h(e,["setup","contextWindowCompression"],oe);const W=f(n,["proactivity"]);e!==void 0&&W!=null&&h(e,["setup","proactivity"],W);const he=f(n,["explicitVadSignal"]);return e!==void 0&&he!=null&&h(e,["setup","explicitVadSignal"],he),t}function eU(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["setup","model"],$e(n,i));const r=f(e,["config"]);return r!=null&&h(t,["config"],jk(r,t)),t}function tU(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["setup","model"],$e(n,i));const r=f(e,["config"]);return r!=null&&h(t,["config"],Zk(r,t)),t}function nU(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function iU(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),h(e,["weightedPrompts"],i)}return e}function sU(n){const e={},t=f(n,["media"]);if(t!=null){let p=ZC(t);Array.isArray(p)&&(p=p.map(v=>Mf(v))),h(e,["mediaChunks"],p)}const i=f(n,["audio"]);i!=null&&h(e,["audio"],Mf(tI(i)));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const a=f(n,["video"]);a!=null&&h(e,["video"],Mf(eI(a)));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function oU(n){const e={},t=f(n,["media"]);if(t!=null){let p=ZC(t);Array.isArray(p)&&(p=p.map(v=>v)),h(e,["mediaChunks"],p)}const i=f(n,["audio"]);i!=null&&h(e,["audio"],tI(i));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const a=f(n,["video"]);a!=null&&h(e,["video"],eI(a));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function rU(n){const e={},t=f(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&h(e,["serverContent"],i);const r=f(n,["toolCall"]);r!=null&&h(e,["toolCall"],r);const a=f(n,["toolCallCancellation"]);a!=null&&h(e,["toolCallCancellation"],a);const u=f(n,["usageMetadata"]);u!=null&&h(e,["usageMetadata"],fU(u));const d=f(n,["goAway"]);d!=null&&h(e,["goAway"],d);const g=f(n,["sessionResumptionUpdate"]);g!=null&&h(e,["sessionResumptionUpdate"],g);const p=f(n,["voiceActivityDetectionSignal"]);p!=null&&h(e,["voiceActivityDetectionSignal"],p);const v=f(n,["voiceActivity"]);return v!=null&&h(e,["voiceActivity"],dU(v)),e}function aU(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&h(e,["fileData"],Kk(a));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],Yk(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],Mf(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function lU(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function uU(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],Xk(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],Wk(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function cU(n){const e={},t=f(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);const i=f(n,["computerUse"]);if(i!=null&&h(e,["computerUse"],i),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const a=f(n,["enterpriseWebSearch"]);a!=null&&h(e,["enterpriseWebSearch"],a);const u=f(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>$k(S))),h(e,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const p=f(n,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function fU(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&h(e,["cachedContentTokenCount"],i);const r=f(n,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&h(e,["toolUsePromptTokenCount"],a);const u=f(n,["thoughtsTokenCount"]);u!=null&&h(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const g=f(n,["promptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(P=>P)),h(e,["promptTokensDetails"],w)}const p=f(n,["cacheTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(P=>P)),h(e,["cacheTokensDetails"],w)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(P=>P)),h(e,["responseTokensDetails"],w)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(P=>P)),h(e,["toolUsePromptTokensDetails"],w)}const S=f(n,["trafficType"]);return S!=null&&h(e,["trafficType"],S),e}function dU(n){const e={},t=f(n,["type"]);return t!=null&&h(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hU(n,e){const t={},i=f(n,["data"]);if(i!=null&&h(t,["data"],i),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function pU(n,e){const t={},i=f(n,["content"]);i!=null&&h(t,["content"],i);const r=f(n,["citationMetadata"]);r!=null&&h(t,["citationMetadata"],mU(r));const a=f(n,["tokenCount"]);a!=null&&h(t,["tokenCount"],a);const u=f(n,["finishReason"]);u!=null&&h(t,["finishReason"],u);const d=f(n,["avgLogprobs"]);d!=null&&h(t,["avgLogprobs"],d);const g=f(n,["groundingMetadata"]);g!=null&&h(t,["groundingMetadata"],g);const p=f(n,["index"]);p!=null&&h(t,["index"],p);const v=f(n,["logprobsResult"]);v!=null&&h(t,["logprobsResult"],v);const E=f(n,["safetyRatings"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(P=>P)),h(t,["safetyRatings"],w)}const S=f(n,["urlContextMetadata"]);return S!=null&&h(t,["urlContextMetadata"],S),t}function mU(n,e){const t={},i=f(n,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),h(t,["citations"],r)}return t}function gU(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],$e(n,r));const a=f(e,["contents"]);if(a!=null){let u=$n(a);Array.isArray(u)&&(u=u.map(d=>d)),h(i,["contents"],u)}return i}function yU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["tokensInfo"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),h(t,["tokensInfo"],a)}return t}function _U(n,e){const t={},i=f(n,["values"]);i!=null&&h(t,["values"],i);const r=f(n,["statistics"]);return r!=null&&h(t,["statistics"],vU(r)),t}function vU(n,e){const t={},i=f(n,["truncated"]);i!=null&&h(t,["truncated"],i);const r=f(n,["token_count"]);return r!=null&&h(t,["tokenCount"],r),t}function Sd(n,e){const t={},i=f(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>bL(u))),h(t,["parts"],a)}const r=f(n,["role"]);return r!=null&&h(t,["role"],r),t}function EU(n,e){const t={},i=f(n,["controlType"]);i!=null&&h(t,["controlType"],i);const r=f(n,["enableControlImageComputation"]);return r!=null&&h(t,["computeControl"],r),t}function TU(n,e){const t={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function SU(n,e,t){const i={},r=f(n,["systemInstruction"]);e!==void 0&&r!=null&&h(e,["systemInstruction"],rn(r));const a=f(n,["tools"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(g=>mI(g))),h(e,["tools"],d)}const u=f(n,["generationConfig"]);return e!==void 0&&u!=null&&h(e,["generationConfig"],hL(u)),i}function AU(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],$e(n,r));const a=f(e,["contents"]);if(a!=null){let d=$n(a);Array.isArray(d)&&(d=d.map(g=>Sd(g))),h(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&TU(u),i}function CU(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],$e(n,r));const a=f(e,["contents"]);if(a!=null){let d=$n(a);Array.isArray(d)&&(d=d.map(g=>g)),h(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&SU(u,i),i}function IU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["totalTokens"]);r!=null&&h(t,["totalTokens"],r);const a=f(n,["cachedContentTokenCount"]);return a!=null&&h(t,["cachedContentTokenCount"],a),t}function wU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["totalTokens"]);return r!=null&&h(t,["totalTokens"],r),t}function RU(n,e,t){const i={},r=f(e,["model"]);return r!=null&&h(i,["_url","name"],$e(n,r)),i}function bU(n,e,t){const i={},r=f(e,["model"]);return r!=null&&h(i,["_url","name"],$e(n,r)),i}function NU(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&h(t,["sdkHttpResponse"],i),t}function xU(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&h(t,["sdkHttpResponse"],i),t}function MU(n,e,t){const i={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&h(e,["parameters","negativePrompt"],a);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&h(e,["parameters","aspectRatio"],d);const g=f(n,["guidanceScale"]);e!==void 0&&g!=null&&h(e,["parameters","guidanceScale"],g);const p=f(n,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const v=f(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const E=f(n,["personGeneration"]);e!==void 0&&E!=null&&h(e,["parameters","personGeneration"],E);const S=f(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&h(e,["parameters","includeSafetyAttributes"],S);const w=f(n,["includeRaiReason"]);e!==void 0&&w!=null&&h(e,["parameters","includeRaiReason"],w);const P=f(n,["language"]);e!==void 0&&P!=null&&h(e,["parameters","language"],P);const G=f(n,["outputMimeType"]);e!==void 0&&G!=null&&h(e,["parameters","outputOptions","mimeType"],G);const O=f(n,["outputCompressionQuality"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","compressionQuality"],O);const Y=f(n,["addWatermark"]);e!==void 0&&Y!=null&&h(e,["parameters","addWatermark"],Y);const Q=f(n,["labels"]);e!==void 0&&Q!=null&&h(e,["labels"],Q);const j=f(n,["editMode"]);e!==void 0&&j!=null&&h(e,["parameters","editMode"],j);const oe=f(n,["baseSteps"]);return e!==void 0&&oe!=null&&h(e,["parameters","editConfig","baseSteps"],oe),i}function DU(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],$e(n,r));const a=f(e,["prompt"]);a!=null&&h(i,["instances[0]","prompt"],a);const u=f(e,["referenceImages"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(p=>VL(p))),h(i,["instances[0]","referenceImages"],g)}const d=f(e,["config"]);return d!=null&&MU(d,i),i}function PU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Ad(u))),h(t,["generatedImages"],a)}return t}function VU(n,e,t){const i={},r=f(n,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const a=f(n,["title"]);e!==void 0&&a!=null&&h(e,["requests[]","title"],a);const u=f(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&h(e,["requests[]","outputDimensionality"],u),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function kU(n,e,t){const i={},r=f(n,["taskType"]);e!==void 0&&r!=null&&h(e,["instances[]","task_type"],r);const a=f(n,["title"]);e!==void 0&&a!=null&&h(e,["instances[]","title"],a);const u=f(n,["outputDimensionality"]);e!==void 0&&u!=null&&h(e,["parameters","outputDimensionality"],u);const d=f(n,["mimeType"]);e!==void 0&&d!=null&&h(e,["instances[]","mimeType"],d);const g=f(n,["autoTruncate"]);return e!==void 0&&g!=null&&h(e,["parameters","autoTruncate"],g),i}function UU(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],$e(n,r));const a=f(e,["contents"]);if(a!=null){let g=xg(n,a);Array.isArray(g)&&(g=g.map(p=>p)),h(i,["requests[]","content"],g)}const u=f(e,["config"]);u!=null&&VU(u,i);const d=f(e,["model"]);return d!==void 0&&h(i,["requests[]","model"],$e(n,d)),i}function LU(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],$e(n,r));const a=f(e,["contents"]);if(a!=null){let d=xg(n,a);Array.isArray(d)&&(d=d.map(g=>g)),h(i,["instances[]","content"],d)}const u=f(e,["config"]);return u!=null&&kU(u,i),i}function OU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),h(t,["embeddings"],u)}const a=f(n,["metadata"]);return a!=null&&h(t,["metadata"],a),t}function FU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["predictions[]","embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>_U(d))),h(t,["embeddings"],u)}const a=f(n,["metadata"]);return a!=null&&h(t,["metadata"],a),t}function GU(n,e){const t={},i=f(n,["endpoint"]);i!=null&&h(t,["name"],i);const r=f(n,["deployedModelId"]);return r!=null&&h(t,["deployedModelId"],r),t}function qU(n,e){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["fileUri"]);i!=null&&h(t,["fileUri"],i);const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function BU(n,e){const t={},i=f(n,["id"]);i!=null&&h(t,["id"],i);const r=f(n,["args"]);r!=null&&h(t,["args"],r);const a=f(n,["name"]);if(a!=null&&h(t,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function HU(n,e){const t={},i=f(n,["allowedFunctionNames"]);i!=null&&h(t,["allowedFunctionNames"],i);const r=f(n,["mode"]);if(r!=null&&h(t,["mode"],r),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function zU(n,e){const t={},i=f(n,["description"]);i!=null&&h(t,["description"],i);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const a=f(n,["parameters"]);a!=null&&h(t,["parameters"],a);const u=f(n,["parametersJsonSchema"]);u!=null&&h(t,["parametersJsonSchema"],u);const d=f(n,["response"]);d!=null&&h(t,["response"],d);const g=f(n,["responseJsonSchema"]);if(g!=null&&h(t,["responseJsonSchema"],g),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function JU(n,e,t,i){const r={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&h(t,["systemInstruction"],Sd(rn(a)));const u=f(e,["temperature"]);u!=null&&h(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&h(r,["topP"],d);const g=f(e,["topK"]);g!=null&&h(r,["topK"],g);const p=f(e,["candidateCount"]);p!=null&&h(r,["candidateCount"],p);const v=f(e,["maxOutputTokens"]);v!=null&&h(r,["maxOutputTokens"],v);const E=f(e,["stopSequences"]);E!=null&&h(r,["stopSequences"],E);const S=f(e,["responseLogprobs"]);S!=null&&h(r,["responseLogprobs"],S);const w=f(e,["logprobs"]);w!=null&&h(r,["logprobs"],w);const P=f(e,["presencePenalty"]);P!=null&&h(r,["presencePenalty"],P);const G=f(e,["frequencyPenalty"]);G!=null&&h(r,["frequencyPenalty"],G);const O=f(e,["seed"]);O!=null&&h(r,["seed"],O);const Y=f(e,["responseMimeType"]);Y!=null&&h(r,["responseMimeType"],Y);const Q=f(e,["responseSchema"]);Q!=null&&h(r,["responseSchema"],Mg(Q));const j=f(e,["responseJsonSchema"]);if(j!=null&&h(r,["responseJsonSchema"],j),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const oe=f(e,["safetySettings"]);if(t!==void 0&&oe!=null){let xe=oe;Array.isArray(xe)&&(xe=xe.map(nt=>kL(nt))),h(t,["safetySettings"],xe)}const W=f(e,["tools"]);if(t!==void 0&&W!=null){let xe=Ua(W);Array.isArray(xe)&&(xe=xe.map(nt=>BL(ka(nt)))),h(t,["tools"],xe)}const he=f(e,["toolConfig"]);if(t!==void 0&&he!=null&&h(t,["toolConfig"],qL(he)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=f(e,["cachedContent"]);t!==void 0&&N!=null&&h(t,["cachedContent"],Ss(n,N));const x=f(e,["responseModalities"]);x!=null&&h(r,["responseModalities"],x);const M=f(e,["mediaResolution"]);M!=null&&h(r,["mediaResolution"],M);const L=f(e,["speechConfig"]);if(L!=null&&h(r,["speechConfig"],Dg(L)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&h(r,["thinkingConfig"],U);const q=f(e,["imageConfig"]);q!=null&&h(r,["imageConfig"],_L(q));const D=f(e,["enableEnhancedCivicAnswers"]);if(D!=null&&h(r,["enableEnhancedCivicAnswers"],D),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function KU(n,e,t,i){const r={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&h(t,["systemInstruction"],rn(a));const u=f(e,["temperature"]);u!=null&&h(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&h(r,["topP"],d);const g=f(e,["topK"]);g!=null&&h(r,["topK"],g);const p=f(e,["candidateCount"]);p!=null&&h(r,["candidateCount"],p);const v=f(e,["maxOutputTokens"]);v!=null&&h(r,["maxOutputTokens"],v);const E=f(e,["stopSequences"]);E!=null&&h(r,["stopSequences"],E);const S=f(e,["responseLogprobs"]);S!=null&&h(r,["responseLogprobs"],S);const w=f(e,["logprobs"]);w!=null&&h(r,["logprobs"],w);const P=f(e,["presencePenalty"]);P!=null&&h(r,["presencePenalty"],P);const G=f(e,["frequencyPenalty"]);G!=null&&h(r,["frequencyPenalty"],G);const O=f(e,["seed"]);O!=null&&h(r,["seed"],O);const Y=f(e,["responseMimeType"]);Y!=null&&h(r,["responseMimeType"],Y);const Q=f(e,["responseSchema"]);Q!=null&&h(r,["responseSchema"],Mg(Q));const j=f(e,["responseJsonSchema"]);j!=null&&h(r,["responseJsonSchema"],j);const oe=f(e,["routingConfig"]);oe!=null&&h(r,["routingConfig"],oe);const W=f(e,["modelSelectionConfig"]);W!=null&&h(r,["modelConfig"],W);const he=f(e,["safetySettings"]);if(t!==void 0&&he!=null){let me=he;Array.isArray(me)&&(me=me.map(ke=>ke)),h(t,["safetySettings"],me)}const N=f(e,["tools"]);if(t!==void 0&&N!=null){let me=Ua(N);Array.isArray(me)&&(me=me.map(ke=>mI(ka(ke)))),h(t,["tools"],me)}const x=f(e,["toolConfig"]);t!==void 0&&x!=null&&h(t,["toolConfig"],x);const M=f(e,["labels"]);t!==void 0&&M!=null&&h(t,["labels"],M);const L=f(e,["cachedContent"]);t!==void 0&&L!=null&&h(t,["cachedContent"],Ss(n,L));const U=f(e,["responseModalities"]);U!=null&&h(r,["responseModalities"],U);const q=f(e,["mediaResolution"]);q!=null&&h(r,["mediaResolution"],q);const D=f(e,["speechConfig"]);D!=null&&h(r,["speechConfig"],Dg(D));const xe=f(e,["audioTimestamp"]);xe!=null&&h(r,["audioTimestamp"],xe);const nt=f(e,["thinkingConfig"]);nt!=null&&h(r,["thinkingConfig"],nt);const Z=f(e,["imageConfig"]);if(Z!=null&&h(r,["imageConfig"],vL(Z)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const ce=f(e,["modelArmorConfig"]);return t!==void 0&&ce!=null&&h(t,["modelArmorConfig"],ce),r}function tS(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],$e(n,r));const a=f(e,["contents"]);if(a!=null){let d=$n(a);Array.isArray(d)&&(d=d.map(g=>Sd(g))),h(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&h(i,["generationConfig"],JU(n,u,i)),i}function nS(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],$e(n,r));const a=f(e,["contents"]);if(a!=null){let d=$n(a);Array.isArray(d)&&(d=d.map(g=>g)),h(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&h(i,["generationConfig"],KU(n,u,i)),i}function iS(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(v=>pU(v))),h(t,["candidates"],p)}const a=f(n,["modelVersion"]);a!=null&&h(t,["modelVersion"],a);const u=f(n,["promptFeedback"]);u!=null&&h(t,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&h(t,["responseId"],d);const g=f(n,["usageMetadata"]);return g!=null&&h(t,["usageMetadata"],g),t}function sS(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["candidates"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(E=>E)),h(t,["candidates"],v)}const a=f(n,["createTime"]);a!=null&&h(t,["createTime"],a);const u=f(n,["modelVersion"]);u!=null&&h(t,["modelVersion"],u);const d=f(n,["promptFeedback"]);d!=null&&h(t,["promptFeedback"],d);const g=f(n,["responseId"]);g!=null&&h(t,["responseId"],g);const p=f(n,["usageMetadata"]);return p!=null&&h(t,["usageMetadata"],p),t}function YU(n,e,t){const i={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&h(e,["parameters","aspectRatio"],a);const u=f(n,["guidanceScale"]);if(e!==void 0&&u!=null&&h(e,["parameters","guidanceScale"],u),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const g=f(n,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const v=f(n,["includeRaiReason"]);e!==void 0&&v!=null&&h(e,["parameters","includeRaiReason"],v);const E=f(n,["language"]);e!==void 0&&E!=null&&h(e,["parameters","language"],E);const S=f(n,["outputMimeType"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","mimeType"],S);const w=f(n,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&h(e,["parameters","outputOptions","compressionQuality"],w),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=f(n,["imageSize"]);if(e!==void 0&&P!=null&&h(e,["parameters","sampleImageSize"],P),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function $U(n,e,t){const i={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&h(e,["parameters","negativePrompt"],a);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&h(e,["parameters","aspectRatio"],d);const g=f(n,["guidanceScale"]);e!==void 0&&g!=null&&h(e,["parameters","guidanceScale"],g);const p=f(n,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const v=f(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const E=f(n,["personGeneration"]);e!==void 0&&E!=null&&h(e,["parameters","personGeneration"],E);const S=f(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&h(e,["parameters","includeSafetyAttributes"],S);const w=f(n,["includeRaiReason"]);e!==void 0&&w!=null&&h(e,["parameters","includeRaiReason"],w);const P=f(n,["language"]);e!==void 0&&P!=null&&h(e,["parameters","language"],P);const G=f(n,["outputMimeType"]);e!==void 0&&G!=null&&h(e,["parameters","outputOptions","mimeType"],G);const O=f(n,["outputCompressionQuality"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","compressionQuality"],O);const Y=f(n,["addWatermark"]);e!==void 0&&Y!=null&&h(e,["parameters","addWatermark"],Y);const Q=f(n,["labels"]);e!==void 0&&Q!=null&&h(e,["labels"],Q);const j=f(n,["imageSize"]);e!==void 0&&j!=null&&h(e,["parameters","sampleImageSize"],j);const oe=f(n,["enhancePrompt"]);return e!==void 0&&oe!=null&&h(e,["parameters","enhancePrompt"],oe),i}function QU(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],$e(n,r));const a=f(e,["prompt"]);a!=null&&h(i,["instances[0]","prompt"],a);const u=f(e,["config"]);return u!=null&&YU(u,i),i}function XU(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],$e(n,r));const a=f(e,["prompt"]);a!=null&&h(i,["instances[0]","prompt"],a);const u=f(e,["config"]);return u!=null&&$U(u,i),i}function WU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>uL(d))),h(t,["generatedImages"],u)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&h(t,["positivePromptSafetyAttributes"],hI(a)),t}function jU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>Ad(d))),h(t,["generatedImages"],u)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&h(t,["positivePromptSafetyAttributes"],pI(a)),t}function ZU(n,e,t){const i={},r=f(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=f(n,["durationSeconds"]);if(e!==void 0&&a!=null&&h(e,["parameters","durationSeconds"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const d=f(n,["resolution"]);e!==void 0&&d!=null&&h(e,["parameters","resolution"],d);const g=f(n,["personGeneration"]);if(e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&h(e,["parameters","negativePrompt"],p);const v=f(n,["enhancePrompt"]);if(e!==void 0&&v!=null&&h(e,["parameters","enhancePrompt"],v),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const E=f(n,["lastFrame"]);e!==void 0&&E!=null&&h(e,["instances[0]","lastFrame"],Cd(E));const S=f(n,["referenceImages"]);if(e!==void 0&&S!=null){let w=S;Array.isArray(w)&&(w=w.map(P=>t4(P))),h(e,["instances[0]","referenceImages"],w)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function eL(n,e,t){const i={},r=f(n,["numberOfVideos"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&h(e,["parameters","storageUri"],a);const u=f(n,["fps"]);e!==void 0&&u!=null&&h(e,["parameters","fps"],u);const d=f(n,["durationSeconds"]);e!==void 0&&d!=null&&h(e,["parameters","durationSeconds"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&h(e,["parameters","aspectRatio"],p);const v=f(n,["resolution"]);e!==void 0&&v!=null&&h(e,["parameters","resolution"],v);const E=f(n,["personGeneration"]);e!==void 0&&E!=null&&h(e,["parameters","personGeneration"],E);const S=f(n,["pubsubTopic"]);e!==void 0&&S!=null&&h(e,["parameters","pubsubTopic"],S);const w=f(n,["negativePrompt"]);e!==void 0&&w!=null&&h(e,["parameters","negativePrompt"],w);const P=f(n,["enhancePrompt"]);e!==void 0&&P!=null&&h(e,["parameters","enhancePrompt"],P);const G=f(n,["generateAudio"]);e!==void 0&&G!=null&&h(e,["parameters","generateAudio"],G);const O=f(n,["lastFrame"]);e!==void 0&&O!=null&&h(e,["instances[0]","lastFrame"],mi(O));const Y=f(n,["referenceImages"]);if(e!==void 0&&Y!=null){let oe=Y;Array.isArray(oe)&&(oe=oe.map(W=>n4(W))),h(e,["instances[0]","referenceImages"],oe)}const Q=f(n,["mask"]);e!==void 0&&Q!=null&&h(e,["instances[0]","mask"],e4(Q));const j=f(n,["compressionQuality"]);return e!==void 0&&j!=null&&h(e,["parameters","compressionQuality"],j),i}function tL(n,e){const t={},i=f(n,["name"]);i!=null&&h(t,["name"],i);const r=f(n,["metadata"]);r!=null&&h(t,["metadata"],r);const a=f(n,["done"]);a!=null&&h(t,["done"],a);const u=f(n,["error"]);u!=null&&h(t,["error"],u);const d=f(n,["response","generateVideoResponse"]);return d!=null&&h(t,["response"],oL(d)),t}function nL(n,e){const t={},i=f(n,["name"]);i!=null&&h(t,["name"],i);const r=f(n,["metadata"]);r!=null&&h(t,["metadata"],r);const a=f(n,["done"]);a!=null&&h(t,["done"],a);const u=f(n,["error"]);u!=null&&h(t,["error"],u);const d=f(n,["response"]);return d!=null&&h(t,["response"],rL(d)),t}function iL(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],$e(n,r));const a=f(e,["prompt"]);a!=null&&h(i,["instances[0]","prompt"],a);const u=f(e,["image"]);u!=null&&h(i,["instances[0]","image"],Cd(u));const d=f(e,["video"]);d!=null&&h(i,["instances[0]","video"],gI(d));const g=f(e,["source"]);g!=null&&aL(g,i);const p=f(e,["config"]);return p!=null&&ZU(p,i),i}function sL(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],$e(n,r));const a=f(e,["prompt"]);a!=null&&h(i,["instances[0]","prompt"],a);const u=f(e,["image"]);u!=null&&h(i,["instances[0]","image"],mi(u));const d=f(e,["video"]);d!=null&&h(i,["instances[0]","video"],yI(d));const g=f(e,["source"]);g!=null&&lL(g,i);const p=f(e,["config"]);return p!=null&&eL(p,i),i}function oL(n,e){const t={},i=f(n,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>fL(d))),h(t,["generatedVideos"],u)}const r=f(n,["raiMediaFilteredCount"]);r!=null&&h(t,["raiMediaFilteredCount"],r);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&h(t,["raiMediaFilteredReasons"],a),t}function rL(n,e){const t={},i=f(n,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>dL(d))),h(t,["generatedVideos"],u)}const r=f(n,["raiMediaFilteredCount"]);r!=null&&h(t,["raiMediaFilteredCount"],r);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&h(t,["raiMediaFilteredReasons"],a),t}function aL(n,e,t){const i={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const a=f(n,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],Cd(a));const u=f(n,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],gI(u)),i}function lL(n,e,t){const i={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const a=f(n,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],mi(a));const u=f(n,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],yI(u)),i}function uL(n,e){const t={},i=f(n,["_self"]);i!=null&&h(t,["image"],EL(i));const r=f(n,["raiFilteredReason"]);r!=null&&h(t,["raiFilteredReason"],r);const a=f(n,["_self"]);return a!=null&&h(t,["safetyAttributes"],hI(a)),t}function Ad(n,e){const t={},i=f(n,["_self"]);i!=null&&h(t,["image"],dI(i));const r=f(n,["raiFilteredReason"]);r!=null&&h(t,["raiFilteredReason"],r);const a=f(n,["_self"]);a!=null&&h(t,["safetyAttributes"],pI(a));const u=f(n,["prompt"]);return u!=null&&h(t,["enhancedPrompt"],u),t}function cL(n,e){const t={},i=f(n,["_self"]);i!=null&&h(t,["mask"],dI(i));const r=f(n,["labels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),h(t,["labels"],a)}return t}function fL(n,e){const t={},i=f(n,["video"]);return i!=null&&h(t,["video"],jL(i)),t}function dL(n,e){const t={},i=f(n,["_self"]);return i!=null&&h(t,["video"],ZL(i)),t}function hL(n,e){const t={},i=f(n,["modelSelectionConfig"]);i!=null&&h(t,["modelConfig"],i);const r=f(n,["responseJsonSchema"]);r!=null&&h(t,["responseJsonSchema"],r);const a=f(n,["audioTimestamp"]);a!=null&&h(t,["audioTimestamp"],a);const u=f(n,["candidateCount"]);u!=null&&h(t,["candidateCount"],u);const d=f(n,["enableAffectiveDialog"]);d!=null&&h(t,["enableAffectiveDialog"],d);const g=f(n,["frequencyPenalty"]);g!=null&&h(t,["frequencyPenalty"],g);const p=f(n,["logprobs"]);p!=null&&h(t,["logprobs"],p);const v=f(n,["maxOutputTokens"]);v!=null&&h(t,["maxOutputTokens"],v);const E=f(n,["mediaResolution"]);E!=null&&h(t,["mediaResolution"],E);const S=f(n,["presencePenalty"]);S!=null&&h(t,["presencePenalty"],S);const w=f(n,["responseLogprobs"]);w!=null&&h(t,["responseLogprobs"],w);const P=f(n,["responseMimeType"]);P!=null&&h(t,["responseMimeType"],P);const G=f(n,["responseModalities"]);G!=null&&h(t,["responseModalities"],G);const O=f(n,["responseSchema"]);O!=null&&h(t,["responseSchema"],O);const Y=f(n,["routingConfig"]);Y!=null&&h(t,["routingConfig"],Y);const Q=f(n,["seed"]);Q!=null&&h(t,["seed"],Q);const j=f(n,["speechConfig"]);j!=null&&h(t,["speechConfig"],j);const oe=f(n,["stopSequences"]);oe!=null&&h(t,["stopSequences"],oe);const W=f(n,["temperature"]);W!=null&&h(t,["temperature"],W);const he=f(n,["thinkingConfig"]);he!=null&&h(t,["thinkingConfig"],he);const N=f(n,["topK"]);N!=null&&h(t,["topK"],N);const x=f(n,["topP"]);if(x!=null&&h(t,["topP"],x),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function pL(n,e,t){const i={},r=f(e,["model"]);return r!=null&&h(i,["_url","name"],$e(n,r)),i}function mL(n,e,t){const i={},r=f(e,["model"]);return r!=null&&h(i,["_url","name"],$e(n,r)),i}function gL(n,e){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(n,["enableWidget"]);return i!=null&&h(t,["enableWidget"],i),t}function yL(n,e){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(n,["timeRangeFilter"]);return i!=null&&h(t,["timeRangeFilter"],i),t}function _L(n,e){const t={},i=f(n,["aspectRatio"]);i!=null&&h(t,["aspectRatio"],i);const r=f(n,["imageSize"]);if(r!=null&&h(t,["imageSize"],r),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function vL(n,e){const t={},i=f(n,["aspectRatio"]);i!=null&&h(t,["aspectRatio"],i);const r=f(n,["imageSize"]);r!=null&&h(t,["imageSize"],r);const a=f(n,["personGeneration"]);a!=null&&h(t,["personGeneration"],a);const u=f(n,["outputMimeType"]);u!=null&&h(t,["imageOutputOptions","mimeType"],u);const d=f(n,["outputCompressionQuality"]);return d!=null&&h(t,["imageOutputOptions","compressionQuality"],d),t}function EL(n,e){const t={},i=f(n,["bytesBase64Encoded"]);i!=null&&h(t,["imageBytes"],Ao(i));const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function dI(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&h(t,["gcsUri"],i);const r=f(n,["bytesBase64Encoded"]);r!=null&&h(t,["imageBytes"],Ao(r));const a=f(n,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function Cd(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=f(n,["imageBytes"]);i!=null&&h(t,["bytesBase64Encoded"],Ao(i));const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function mi(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&h(t,["gcsUri"],i);const r=f(n,["imageBytes"]);r!=null&&h(t,["bytesBase64Encoded"],Ao(r));const a=f(n,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function TL(n,e,t,i){const r={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&h(t,["_query","pageSize"],a);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&h(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&h(t,["_query","filter"],d);const g=f(e,["queryBase"]);return t!==void 0&&g!=null&&h(t,["_url","models_url"],oI(n,g)),r}function SL(n,e,t,i){const r={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&h(t,["_query","pageSize"],a);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&h(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&h(t,["_query","filter"],d);const g=f(e,["queryBase"]);return t!==void 0&&g!=null&&h(t,["_url","models_url"],oI(n,g)),r}function AL(n,e,t){const i={},r=f(e,["config"]);return r!=null&&TL(n,r,i),i}function CL(n,e,t){const i={},r=f(e,["config"]);return r!=null&&SL(n,r,i),i}function IL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const a=f(n,["_self"]);if(a!=null){let u=rI(a);Array.isArray(u)&&(u=u.map(d=>Im(d))),h(t,["models"],u)}return t}function wL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const a=f(n,["_self"]);if(a!=null){let u=rI(a);Array.isArray(u)&&(u=u.map(d=>wm(d))),h(t,["models"],u)}return t}function RL(n,e){const t={},i=f(n,["maskMode"]);i!=null&&h(t,["maskMode"],i);const r=f(n,["segmentationClasses"]);r!=null&&h(t,["maskClasses"],r);const a=f(n,["maskDilation"]);return a!=null&&h(t,["dilation"],a),t}function Im(n,e){const t={},i=f(n,["name"]);i!=null&&h(t,["name"],i);const r=f(n,["displayName"]);r!=null&&h(t,["displayName"],r);const a=f(n,["description"]);a!=null&&h(t,["description"],a);const u=f(n,["version"]);u!=null&&h(t,["version"],u);const d=f(n,["_self"]);d!=null&&h(t,["tunedModelInfo"],HL(d));const g=f(n,["inputTokenLimit"]);g!=null&&h(t,["inputTokenLimit"],g);const p=f(n,["outputTokenLimit"]);p!=null&&h(t,["outputTokenLimit"],p);const v=f(n,["supportedGenerationMethods"]);v!=null&&h(t,["supportedActions"],v);const E=f(n,["temperature"]);E!=null&&h(t,["temperature"],E);const S=f(n,["maxTemperature"]);S!=null&&h(t,["maxTemperature"],S);const w=f(n,["topP"]);w!=null&&h(t,["topP"],w);const P=f(n,["topK"]);P!=null&&h(t,["topK"],P);const G=f(n,["thinking"]);return G!=null&&h(t,["thinking"],G),t}function wm(n,e){const t={},i=f(n,["name"]);i!=null&&h(t,["name"],i);const r=f(n,["displayName"]);r!=null&&h(t,["displayName"],r);const a=f(n,["description"]);a!=null&&h(t,["description"],a);const u=f(n,["versionId"]);u!=null&&h(t,["version"],u);const d=f(n,["deployedModels"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(w=>GU(w))),h(t,["endpoints"],S)}const g=f(n,["labels"]);g!=null&&h(t,["labels"],g);const p=f(n,["_self"]);p!=null&&h(t,["tunedModelInfo"],zL(p));const v=f(n,["defaultCheckpointId"]);v!=null&&h(t,["defaultCheckpointId"],v);const E=f(n,["checkpoints"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(w=>w)),h(t,["checkpoints"],S)}return t}function bL(n,e){const t={},i=f(n,["mediaResolution"]);i!=null&&h(t,["mediaResolution"],i);const r=f(n,["codeExecutionResult"]);r!=null&&h(t,["codeExecutionResult"],r);const a=f(n,["executableCode"]);a!=null&&h(t,["executableCode"],a);const u=f(n,["fileData"]);u!=null&&h(t,["fileData"],qU(u));const d=f(n,["functionCall"]);d!=null&&h(t,["functionCall"],BU(d));const g=f(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const p=f(n,["inlineData"]);p!=null&&h(t,["inlineData"],hU(p));const v=f(n,["text"]);v!=null&&h(t,["text"],v);const E=f(n,["thought"]);E!=null&&h(t,["thought"],E);const S=f(n,["thoughtSignature"]);S!=null&&h(t,["thoughtSignature"],S);const w=f(n,["videoMetadata"]);return w!=null&&h(t,["videoMetadata"],w),t}function NL(n,e){const t={},i=f(n,["productImage"]);return i!=null&&h(t,["image"],mi(i)),t}function xL(n,e,t){const i={},r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const a=f(n,["baseSteps"]);e!==void 0&&a!=null&&h(e,["parameters","baseSteps"],a);const u=f(n,["outputGcsUri"]);e!==void 0&&u!=null&&h(e,["parameters","storageUri"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const g=f(n,["safetyFilterLevel"]);e!==void 0&&g!=null&&h(e,["parameters","safetySetting"],g);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&h(e,["parameters","personGeneration"],p);const v=f(n,["addWatermark"]);e!==void 0&&v!=null&&h(e,["parameters","addWatermark"],v);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","mimeType"],E);const S=f(n,["outputCompressionQuality"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S);const w=f(n,["enhancePrompt"]);e!==void 0&&w!=null&&h(e,["parameters","enhancePrompt"],w);const P=f(n,["labels"]);return e!==void 0&&P!=null&&h(e,["labels"],P),i}function ML(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],$e(n,r));const a=f(e,["source"]);a!=null&&PL(a,i);const u=f(e,["config"]);return u!=null&&xL(u,i),i}function DL(n,e){const t={},i=f(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Ad(a))),h(t,["generatedImages"],r)}return t}function PL(n,e,t){const i={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const a=f(n,["personImage"]);e!==void 0&&a!=null&&h(e,["instances[0]","personImage","image"],mi(a));const u=f(n,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(g=>NL(g))),h(e,["instances[0]","productImages"],d)}return i}function VL(n,e){const t={},i=f(n,["referenceImage"]);i!=null&&h(t,["referenceImage"],mi(i));const r=f(n,["referenceId"]);r!=null&&h(t,["referenceId"],r);const a=f(n,["referenceType"]);a!=null&&h(t,["referenceType"],a);const u=f(n,["maskImageConfig"]);u!=null&&h(t,["maskImageConfig"],RL(u));const d=f(n,["controlImageConfig"]);d!=null&&h(t,["controlImageConfig"],EU(d));const g=f(n,["styleImageConfig"]);g!=null&&h(t,["styleImageConfig"],g);const p=f(n,["subjectImageConfig"]);return p!=null&&h(t,["subjectImageConfig"],p),t}function hI(n,e){const t={},i=f(n,["safetyAttributes","categories"]);i!=null&&h(t,["categories"],i);const r=f(n,["safetyAttributes","scores"]);r!=null&&h(t,["scores"],r);const a=f(n,["contentType"]);return a!=null&&h(t,["contentType"],a),t}function pI(n,e){const t={},i=f(n,["safetyAttributes","categories"]);i!=null&&h(t,["categories"],i);const r=f(n,["safetyAttributes","scores"]);r!=null&&h(t,["scores"],r);const a=f(n,["contentType"]);return a!=null&&h(t,["contentType"],a),t}function kL(n,e){const t={},i=f(n,["category"]);if(i!=null&&h(t,["category"],i),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(n,["threshold"]);return r!=null&&h(t,["threshold"],r),t}function UL(n,e){const t={},i=f(n,["image"]);return i!=null&&h(t,["image"],mi(i)),t}function LL(n,e,t){const i={},r=f(n,["mode"]);e!==void 0&&r!=null&&h(e,["parameters","mode"],r);const a=f(n,["maxPredictions"]);e!==void 0&&a!=null&&h(e,["parameters","maxPredictions"],a);const u=f(n,["confidenceThreshold"]);e!==void 0&&u!=null&&h(e,["parameters","confidenceThreshold"],u);const d=f(n,["maskDilation"]);e!==void 0&&d!=null&&h(e,["parameters","maskDilation"],d);const g=f(n,["binaryColorThreshold"]);e!==void 0&&g!=null&&h(e,["parameters","binaryColorThreshold"],g);const p=f(n,["labels"]);return e!==void 0&&p!=null&&h(e,["labels"],p),i}function OL(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],$e(n,r));const a=f(e,["source"]);a!=null&&GL(a,i);const u=f(e,["config"]);return u!=null&&LL(u,i),i}function FL(n,e){const t={},i=f(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>cL(a))),h(t,["generatedMasks"],r)}return t}function GL(n,e,t){const i={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const a=f(n,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],mi(a));const u=f(n,["scribbleImage"]);return e!==void 0&&u!=null&&h(e,["instances[0]","scribble"],UL(u)),i}function qL(n,e){const t={},i=f(n,["retrievalConfig"]);i!=null&&h(t,["retrievalConfig"],i);const r=f(n,["functionCallingConfig"]);return r!=null&&h(t,["functionCallingConfig"],HU(r)),t}function BL(n,e){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["computerUse"]);i!=null&&h(t,["computerUse"],i);const r=f(n,["fileSearch"]);r!=null&&h(t,["fileSearch"],r);const a=f(n,["codeExecution"]);if(a!=null&&h(t,["codeExecution"],a),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=f(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>S)),h(t,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&h(t,["googleMaps"],gL(d));const g=f(n,["googleSearch"]);g!=null&&h(t,["googleSearch"],yL(g));const p=f(n,["googleSearchRetrieval"]);p!=null&&h(t,["googleSearchRetrieval"],p);const v=f(n,["urlContext"]);return v!=null&&h(t,["urlContext"],v),t}function mI(n,e){const t={},i=f(n,["retrieval"]);i!=null&&h(t,["retrieval"],i);const r=f(n,["computerUse"]);if(r!=null&&h(t,["computerUse"],r),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=f(n,["codeExecution"]);a!=null&&h(t,["codeExecution"],a);const u=f(n,["enterpriseWebSearch"]);u!=null&&h(t,["enterpriseWebSearch"],u);const d=f(n,["functionDeclarations"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(w=>zU(w))),h(t,["functionDeclarations"],S)}const g=f(n,["googleMaps"]);g!=null&&h(t,["googleMaps"],g);const p=f(n,["googleSearch"]);p!=null&&h(t,["googleSearch"],p);const v=f(n,["googleSearchRetrieval"]);v!=null&&h(t,["googleSearchRetrieval"],v);const E=f(n,["urlContext"]);return E!=null&&h(t,["urlContext"],E),t}function HL(n,e){const t={},i=f(n,["baseModel"]);i!=null&&h(t,["baseModel"],i);const r=f(n,["createTime"]);r!=null&&h(t,["createTime"],r);const a=f(n,["updateTime"]);return a!=null&&h(t,["updateTime"],a),t}function zL(n,e){const t={},i=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&h(t,["baseModel"],i);const r=f(n,["createTime"]);r!=null&&h(t,["createTime"],r);const a=f(n,["updateTime"]);return a!=null&&h(t,["updateTime"],a),t}function JL(n,e,t){const i={},r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const a=f(n,["description"]);e!==void 0&&a!=null&&h(e,["description"],a);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),i}function KL(n,e,t){const i={},r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const a=f(n,["description"]);e!==void 0&&a!=null&&h(e,["description"],a);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),i}function YL(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","name"],$e(n,r));const a=f(e,["config"]);return a!=null&&JL(a,i),i}function $L(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],$e(n,r));const a=f(e,["config"]);return a!=null&&KL(a,i),i}function QL(n,e,t){const i={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const a=f(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&h(e,["parameters","safetySetting"],a);const u=f(n,["personGeneration"]);e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u);const d=f(n,["includeRaiReason"]);e!==void 0&&d!=null&&h(e,["parameters","includeRaiReason"],d);const g=f(n,["outputMimeType"]);e!==void 0&&g!=null&&h(e,["parameters","outputOptions","mimeType"],g);const p=f(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","compressionQuality"],p);const v=f(n,["enhanceInputImage"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],v);const E=f(n,["imagePreservationFactor"]);e!==void 0&&E!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],E);const S=f(n,["labels"]);e!==void 0&&S!=null&&h(e,["labels"],S);const w=f(n,["numberOfImages"]);e!==void 0&&w!=null&&h(e,["parameters","sampleCount"],w);const P=f(n,["mode"]);return e!==void 0&&P!=null&&h(e,["parameters","mode"],P),i}function XL(n,e,t){const i={},r=f(e,["model"]);r!=null&&h(i,["_url","model"],$e(n,r));const a=f(e,["image"]);a!=null&&h(i,["instances[0]","image"],mi(a));const u=f(e,["upscaleFactor"]);u!=null&&h(i,["parameters","upscaleConfig","upscaleFactor"],u);const d=f(e,["config"]);return d!=null&&QL(d,i),i}function WL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Ad(u))),h(t,["generatedImages"],a)}return t}function jL(n,e){const t={},i=f(n,["uri"]);i!=null&&h(t,["uri"],i);const r=f(n,["encodedVideo"]);r!=null&&h(t,["videoBytes"],Ao(r));const a=f(n,["encoding"]);return a!=null&&h(t,["mimeType"],a),t}function ZL(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&h(t,["uri"],i);const r=f(n,["bytesBase64Encoded"]);r!=null&&h(t,["videoBytes"],Ao(r));const a=f(n,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}function e4(n,e){const t={},i=f(n,["image"]);i!=null&&h(t,["_self"],mi(i));const r=f(n,["maskMode"]);return r!=null&&h(t,["maskMode"],r),t}function t4(n,e){const t={},i=f(n,["image"]);i!=null&&h(t,["image"],Cd(i));const r=f(n,["referenceType"]);return r!=null&&h(t,["referenceType"],r),t}function n4(n,e){const t={},i=f(n,["image"]);i!=null&&h(t,["image"],mi(i));const r=f(n,["referenceType"]);return r!=null&&h(t,["referenceType"],r),t}function gI(n,e){const t={},i=f(n,["uri"]);i!=null&&h(t,["uri"],i);const r=f(n,["videoBytes"]);r!=null&&h(t,["encodedVideo"],Ao(r));const a=f(n,["mimeType"]);return a!=null&&h(t,["encoding"],a),t}function yI(n,e){const t={},i=f(n,["uri"]);i!=null&&h(t,["gcsUri"],i);const r=f(n,["videoBytes"]);r!=null&&h(t,["bytesBase64Encoded"],Ao(r));const a=f(n,["mimeType"]);return a!=null&&h(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i4(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&h(e,["displayName"],i),t}function s4(n){const e={},t=f(n,["config"]);return t!=null&&i4(t,e),e}function o4(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&h(e,["_query","force"],i),t}function r4(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&o4(i,e),e}function a4(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function l4(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),h(e,["customMetadata"],a)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&h(e,["chunkingConfig"],r),t}function u4(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const i=f(n,["metadata"]);i!=null&&h(e,["metadata"],i);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const a=f(n,["error"]);a!=null&&h(e,["error"],a);const u=f(n,["response"]);return u!=null&&h(e,["response"],f4(u)),e}function c4(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&h(e,["fileName"],i);const r=f(n,["config"]);return r!=null&&l4(r,e),e}function f4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&h(e,["parent"],i);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function d4(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function h4(n){const e={},t=f(n,["config"]);return t!=null&&d4(t,e),e}function p4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=f(n,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),h(e,["fileSearchStores"],a)}return e}function _I(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&h(e,["mimeType"],i);const r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(g=>g)),h(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&h(e,["chunkingConfig"],u),t}function m4(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&_I(i,e),e}function g4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y4="Content-Type",_4="X-Server-Timeout",v4="User-Agent",Rm="x-goog-api-client",E4="1.39.0",T4=`google-genai-sdk/${E4}`,S4="v1beta1",A4="v1beta";class C4{constructor(e){var t,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:S4}else{if(!this.clientOptions.apiKey)throw new Eu({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:A4,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===Tm.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))r.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(t))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&I4(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await oS(r),new Sm(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await oS(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return hi(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const d="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:v}=yield we(r.read());if(p){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=a.decode(v,{stream:!0});try{const P=JSON.parse(E);if("error"in P){const G=JSON.parse(JSON.stringify(P.error)),O=G.status,Y=G.code,Q=`got status: ${O}. ${JSON.stringify(P)}`;if(Y>=400&&Y<600)throw new Eu({message:Q,status:Y})}}catch(P){if(P.name==="ApiError")throw P}u+=E;let S=-1,w=0;for(;;){S=-1,w=0;for(const O of g){const Y=u.indexOf(O);Y!==-1&&(S===-1||Y<S)&&(S=Y,w=O.length)}if(S===-1)break;const P=u.substring(0,S);u=u.substring(S+w);const G=P.trim();if(G.startsWith(d)){const O=G.substring(d.length).trim();try{const Y=new Response(O,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield we(new Sm(Y))}catch(Y){throw new Error(`exception parsing stream chunk ${O}. ${Y}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=T4+" "+this.clientOptions.userAgentExtra;return e[v4]=t,e[Rm]=t,e[y4]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))i.append(r,a);e.timeout&&e.timeout>0&&i.append(_4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);r.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const g={file:r},p=this.getFileName(e),v=de("upload/v1beta/files",g._url),E=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,p,g,t==null?void 0:t.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,i){var r;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),g=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),E={};i!=null&&_I(i,E);const S=await this.fetchUploadUrl(p,d,g,v,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,r,a,u){var d;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:g});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=p==null?void 0:p.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function oS(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new Eu({message:r,status:t}):new Error(r)}}function I4(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const p=u[g],v=d[g];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?d[g]=i(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),d[g]=p)}return d}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w4="mcp_used/unknown";let R4=!1;function vI(n){for(const e of n)if(b4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return R4}function EI(n){var e;const t=(e=n[Rm])!==null&&e!==void 0?e:"";n[Rm]=(t+` ${w4}`).trimStart()}function b4(n){return n!==null&&typeof n=="object"&&n instanceof Vg}function N4(n){return hi(this,arguments,function*(t,i=100){let r,a=0;for(;a<i;){const u=yield we(t.listTools({cursor:r}));for(const d of u.tools)yield yield we(d),a++;if(!u.nextCursor)break;r=u.nextCursor}})}class Vg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Vg(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var d=!0,g=(t=void 0,pi(N4(v))),p;p=await g.next(),e=p.done,!e;d=!0){r=p.value,d=!1;const E=r;u.push(E);const S=E.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(E){t={error:E}}finally{try{!d&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),sV(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await r.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function x4(n,e,t){const i=new X2;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}class M4{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=V4(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let p=()=>{};const v=new Promise(j=>{p=j}),E=e.callbacks,S=function(){p({})},w=this.apiClient,P={onopen:S,onmessage:j=>{x4(w,E.onmessage,j)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(j){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(j){}},G=this.webSocketFactory.create(g,P4(u),P);G.connect(),await v;const Q={setup:{model:$e(this.apiClient,e.model)}};return G.send(JSON.stringify(Q)),new D4(G,this.apiClient)}}class D4{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=iU(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=nU(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(da.PLAY)}pause(){this.sendPlaybackControl(da.PAUSE)}stop(){this.sendPlaybackControl(da.STOP)}resetContext(){this.sendPlaybackControl(da.RESET_CONTEXT)}close(){this.conn.close()}}function P4(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function V4(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const k4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function U4(n,e,t){const i=new Q2;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const a=JSON.parse(r);if(n.isVertexAI()){const u=rU(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class L4{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new M4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&vI(e.config.tools)&&EI(E);const S=q4(E);if(this.apiClient.isVertexAI()){const M=this.apiClient.getProject(),L=this.apiClient.getLocation(),U=this.apiClient.getApiKey(),q=!!M&&!!L||!!U;this.apiClient.getCustomBaseUrl()&&!q?v=g:(v=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v))}else{const M=this.apiClient.getApiKey();let L="BidiGenerateContent",U="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",U="access_token"),v=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${L}?${U}=${M}`}let w=()=>{};const P=new Promise(M=>{w=M}),G=e.callbacks,O=function(){var M;(M=G==null?void 0:G.onopen)===null||M===void 0||M.call(G),w({})},Y=this.apiClient,Q={onopen:O,onmessage:M=>{U4(Y,G.onmessage,M)},onerror:(t=G==null?void 0:G.onerror)!==null&&t!==void 0?t:function(M){},onclose:(i=G==null?void 0:G.onclose)!==null&&i!==void 0?i:function(M){}},j=this.webSocketFactory.create(v,G4(S),Q);j.connect(),await P;let oe=$e(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&oe.startsWith("publishers/")){const M=this.apiClient.getProject(),L=this.apiClient.getLocation();M&&L&&(oe=`projects/${M}/locations/${L}/`+oe)}let W={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[jf.AUDIO]}:e.config.responseModalities=[jf.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const he=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],N=[];for(const M of he)if(this.isCallableTool(M)){const L=M;N.push(await L.tool())}else N.push(M);N.length>0&&(e.config.tools=N);const x={model:oe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?W=tU(this.apiClient,x):W=eU(this.apiClient,x),delete W.config,j.send(JSON.stringify(W)),new F4(j,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const O4={turnComplete:!0};class F4{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=$n(t.turns),e.isVertexAI()||(i=i.map(r=>Sd(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(k4)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},O4),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:oU(e)}:t={realtimeInput:sU(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function G4(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function q4(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rS=10;function aS(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Ea(u)){r=!0;break}if(!r)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ea(n){return"callTool"in n&&typeof n.callTool=="function"}function B4(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Ea(r)))!==null&&i!==void 0?i:!1}function lS(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,r)=>{if(Ea(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(r)}),t}function uS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H4 extends Ts{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,a,u,d;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!B4(t)||aS(t.config))return await this.generateContentInternal(g);const p=lS(t);if(p.length>0){const G=p.map(O=>`tools[${O}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${G}.`)}let v,E;const S=$n(g.contents),w=(a=(r=(i=g.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:rS;let P=0;for(;P<w&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const G=v.candidates[0].content,O=[];for(const Y of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Ea(Y)){const j=await Y.callTool(v.functionCalls);O.push(...j)}P++,E={role:"user",parts:O},g.contents=$n(g.contents),g.contents.push(G),g.contents.push(E),uS(g.config)&&(S.push(G),S.push(E))}return uS(g.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{var i,r,a,u,d;if(this.maybeMoveToResponseJsonSchem(t),aS(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const g=lS(t);if(g.length>0){const E=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(a=(r=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,v=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let a;const u=[];if(i!=null&&i.generatedImages)for(const g of i.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:u.push(g);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new gr(vs.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,a,u,d,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((g=(d=t.source)===null||d===void 0?void 0:d.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async g=>Ea(g)?await g.tool():g)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&vI(e.config.tools)){const g=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),EI(p),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return d}async initAfcToolsMap(e){var t,i,r;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Ea(u)){const d=u,g=await d.tool();for(const p of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,d)}}return a}async processAfcStream(e){var t,i,r;const a=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:rS;let u=!1,d=0;const g=await this.initAfcToolsMap(e);return(function(p,v,E){return hi(this,arguments,function*(){for(var S,w,P,G,O,Y;d<a;){u&&(d++,u=!1);const W=yield we(p.processParamsMaybeAddMcpUsage(E)),he=yield we(p.generateContentStreamInternal(W)),N=[],x=[];try{for(var Q=!0,j=(w=void 0,pi(he)),oe;oe=yield we(j.next()),S=oe.done,!S;Q=!0){G=oe.value,Q=!1;const M=G;if(yield yield we(M),M.candidates&&(!((O=M.candidates[0])===null||O===void 0)&&O.content)){x.push(M.candidates[0].content);for(const L of(Y=M.candidates[0].content.parts)!==null&&Y!==void 0?Y:[])if(d<a&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(L.functionCall.name)){const U=yield we(v.get(L.functionCall.name).callTool([L.functionCall]));N.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(M){w={error:M}}finally{try{!Q&&!S&&(P=j.return)&&(yield we(P.call(j)))}finally{if(w)throw w.error}}if(N.length>0){u=!0;const M=new Kl;M.candidates=[{content:{role:"user",parts:N}}],yield yield we(M);const L=[];L.push(...x),L.push({role:"user",parts:N});const U=$n(E.contents).concat(L);E.contents=U}else break}})})(this,g,e)}async generateContentInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=nS(this.apiClient,e);return d=de("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=sS(v),S=new Kl;return Object.assign(S,E),S})}else{const p=tS(this.apiClient,e);return d=de("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=iS(v),S=new Kl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=nS(this.apiClient,e);return d=de("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return hi(this,arguments,function*(){var S,w,P,G;try{for(var O=!0,Y=pi(E),Q;Q=yield we(Y.next()),S=Q.done,!S;O=!0){G=Q.value,O=!1;const j=G,oe=sS(yield we(j.json()),e);oe.sdkHttpResponse={headers:j.headers};const W=new Kl;Object.assign(W,oe),yield yield we(W)}}catch(j){w={error:j}}finally{try{!O&&!S&&(P=Y.return)&&(yield we(P.call(Y)))}finally{if(w)throw w.error}}})})}else{const p=tS(this.apiClient,e);return d=de("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return hi(this,arguments,function*(){var S,w,P,G;try{for(var O=!0,Y=pi(E),Q;Q=yield we(Y.next()),S=Q.done,!S;O=!0){G=Q.value,O=!1;const j=G,oe=iS(yield we(j.json()),e);oe.sdkHttpResponse={headers:j.headers};const W=new Kl;Object.assign(W,oe),yield yield we(W)}}catch(j){w={error:j}}finally{try{!O&&!S&&(P=Y.return)&&(yield we(P.call(Y)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=LU(this.apiClient,e);return d=de("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=FU(v),S=new OT;return Object.assign(S,E),S})}else{const p=UU(this.apiClient,e);return d=de("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=OU(v),S=new OT;return Object.assign(S,E),S})}}async generateImagesInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=XU(this.apiClient,e);return d=de("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=jU(v),S=new FT;return Object.assign(S,E),S})}else{const p=QU(this.apiClient,e);return d=de("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=WU(v),S=new FT;return Object.assign(S,E),S})}}async editImageInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=DU(this.apiClient,e);return a=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=PU(g),v=new L2;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=XL(this.apiClient,e);return a=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=WL(g),v=new O2;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=ML(this.apiClient,e);return a=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const p=DL(g),v=new F2;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=OL(this.apiClient,e);return a=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const p=FL(g),v=new G2;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=mL(this.apiClient,e);return d=de("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>wm(v))}else{const p=pL(this.apiClient,e);return d=de("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Im(v))}}async listInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=CL(this.apiClient,e);return d=de("{models_url}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=wL(v),S=new GT;return Object.assign(S,E),S})}else{const p=AL(this.apiClient,e);return d=de("{models_url}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=IL(v),S=new GT;return Object.assign(S,E),S})}}async update(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=$L(this.apiClient,e);return d=de("{model}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>wm(v))}else{const p=YL(this.apiClient,e);return d=de("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Im(v))}}async delete(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=bU(this.apiClient,e);return d=de("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=xU(v),S=new qT;return Object.assign(S,E),S})}else{const p=RU(this.apiClient,e);return d=de("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=NU(v),S=new qT;return Object.assign(S,E),S})}}async countTokens(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=CU(this.apiClient,e);return d=de("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=wU(v),S=new BT;return Object.assign(S,E),S})}else{const p=AU(this.apiClient,e);return d=de("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=IU(v),S=new BT;return Object.assign(S,E),S})}}async computeTokens(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=gU(this.apiClient,e);return a=de("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const p=yU(g),v=new q2;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=sL(this.apiClient,e);return d=de("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const E=nL(v),S=new Zf;return Object.assign(S,E),S})}else{const p=iL(this.apiClient,e);return d=de("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const E=tL(v),S=new Zf;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z4 extends Ts{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=M2(e);return d=de("{operationName}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const p=x2(e);return d=de("{operationName}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=A2(e);return a=de("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J4(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function K4(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>tO(a))),h(e,["parts"],r)}const i=f(n,["role"]);return i!=null&&h(e,["role"],i),e}function Y4(n,e,t){const i={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&h(t,["expireTime"],r);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&h(t,["newSessionExpireTime"],a);const u=f(e,["uses"]);t!==void 0&&u!=null&&h(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&h(t,["bidiGenerateContentSetup"],eO(n,d));const g=f(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&h(t,["fieldMask"],g),i}function $4(n,e){const t={},i=f(e,["config"]);return i!=null&&h(t,["config"],Y4(n,i,t)),t}function Q4(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function X4(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const i=f(n,["args"]);i!=null&&h(e,["args"],i);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function W4(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function j4(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function Z4(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const a=f(n,["temperature"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],Pg(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const P=f(n,["systemInstruction"]);e!==void 0&&P!=null&&h(e,["setup","systemInstruction"],K4(rn(P)));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let he=Ua(G);Array.isArray(he)&&(he=he.map(N=>iO(ka(N)))),h(e,["setup","tools"],he)}const O=f(n,["sessionResumption"]);e!==void 0&&O!=null&&h(e,["setup","sessionResumption"],nO(O));const Y=f(n,["inputAudioTranscription"]);e!==void 0&&Y!=null&&h(e,["setup","inputAudioTranscription"],Y);const Q=f(n,["outputAudioTranscription"]);e!==void 0&&Q!=null&&h(e,["setup","outputAudioTranscription"],Q);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&h(e,["setup","contextWindowCompression"],oe);const W=f(n,["proactivity"]);if(e!==void 0&&W!=null&&h(e,["setup","proactivity"],W),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function eO(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["setup","model"],$e(n,i));const r=f(e,["config"]);return r!=null&&h(t,["config"],Z4(r,t)),t}function tO(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&h(e,["fileData"],Q4(a));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],X4(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],J4(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function nO(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function iO(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],W4(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],j4(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sO(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${t}.${a}`);e.push(...r)}else e.push(t)}return e.join(",")}function oO(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const a=sO(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(p=>u.includes(p)?`generationConfig.${p}`:p));const g=[];a&&g.push(a),d.length>0&&g.push(...d),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class rO extends Ts{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=$4(this.apiClient,e);a=de("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const g=oO(d,e.config);return r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aO(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&h(e,["_query","force"],i),t}function lO(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&aO(i,e),e}function uO(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function cO(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function fO(n){const e={},t=f(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&cO(i,e),e}function dO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=f(n,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),h(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hO extends Ts{constructor(e){super(),this.apiClient=e,this.list=async t=>new gr(vs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=uO(e);return a=de("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=lO(e);r=de("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=fO(e);return a=de("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const p=dO(g),v=new B2;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pO extends Ts{constructor(e,t=new hO(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new gr(vs.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=s4(e);return a=de("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=a4(e);return a=de("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=r4(e);r=de("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=h4(e);return a=de("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const p=p4(g),v=new H2;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=m4(e);return a=de("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const p=g4(g),v=new z2;return Object.assign(v,p),v})}}async importFile(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=c4(e);return a=de("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const p=u4(g),v=new bg;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let TI=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return TI=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const mO=()=>TI();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Nm=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xn extends Error{}class dn extends Xn{constructor(e,t,i,r){super(`${dn.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,i){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new Id({message:i,cause:Nm(t)});const a=t;return e===400?new AI(e,a,i,r):e===401?new CI(e,a,i,r):e===403?new II(e,a,i,r):e===404?new wI(e,a,i,r):e===409?new RI(e,a,i,r):e===422?new bI(e,a,i,r):e===429?new NI(e,a,i,r):e>=500?new xI(e,a,i,r):new dn(e,a,i,r)}}class xm extends dn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Id extends dn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class SI extends Id{constructor({message:e}={}){super({message:e??"Request timed out."})}}class AI extends dn{}class CI extends dn{}class II extends dn{}class wI extends dn{}class RI extends dn{}class bI extends dn{}class NI extends dn{}class xI extends dn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gO=/^[a-z][a-z0-9+.-]*:/i,yO=n=>gO.test(n);let Mm=n=>(Mm=Array.isArray,Mm(n));const _O=Mm;let vO=_O;const cS=vO;function EO(n){if(!n)return!0;for(const e in n)return!1;return!0}function TO(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const SO=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Xn(`${n} must be an integer`);if(e<0)throw new Xn(`${n} must be a positive integer`);return e},AO=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CO=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fa="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IO(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const wO=()=>{var n,e,t,i,r;const a=IO();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fa,"X-Stainless-OS":dS(Deno.build.os),"X-Stainless-Arch":fS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fa,"X-Stainless-OS":dS((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":fS((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=RO();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function RO(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${r}.${a}.${u}`}}}return null}const fS=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",dS=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let mf;const bO=()=>mf??(mf=wO());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NO(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function MI(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function xO(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return MI({start(){},async pull(t){const{done:i,value:r}=await e.next();i?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function DI(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function MO(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DO=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PI=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Jp(n,e,t){return PI(),new File(n,e??"unknown_file",t)}function PO(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const VO=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VI=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",kO=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&VI(n),UO=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function LO(n,e,t){if(PI(),n=await n,kO(n))return n instanceof File?n:Jp([await n.arrayBuffer()],n.name);if(UO(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Jp(await Dm(r),e,t)}const i=await Dm(n);if(e||(e=PO(n)),!(t!=null&&t.type)){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return Jp(i,e,t)}async function Dm(n){var e,t,i,r,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(VI(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(VO(n))try{for(var d=!0,g=pi(n),p;p=await g.next(),e=p.done,!e;d=!0){r=p.value,d=!1;const v=r;u.push(...await Dm(v))}}catch(v){t={error:v}}finally{try{!d&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}else{const v=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${OO(n)}`)}return u}function OO(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kI{constructor(e){this._client=e}}kI._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UI(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const hS=Object.freeze(Object.create(null)),FO=(n=UI)=>(function(t,...i){if(t.length===1)return t[0];let r=!1;const a=[],u=t.reduce((v,E,S)=>{var w,P,G;/[?#]/.test(E)&&(r=!0);const O=i[S];let Y=(r?encodeURIComponent:n)(""+O);return S!==i.length&&(O==null||typeof O=="object"&&O.toString===((G=Object.getPrototypeOf((P=Object.getPrototypeOf((w=O.hasOwnProperty)!==null&&w!==void 0?w:hS))!==null&&P!==void 0?P:hS))===null||G===void 0?void 0:G.toString))&&(Y=O+"",a.push({start:v.length+E.length,length:Y.length,error:`Value of type ${Object.prototype.toString.call(O).slice(8,-1)} is not a valid path parameter`})),v+E+(S===i.length?"":Y)},""),d=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=g.exec(d))!==null;)a.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(a.sort((v,E)=>v.start-E.start),a.length>0){let v=0;const E=a.reduce((S,w)=>{const P=" ".repeat(w.start-v),G="^".repeat(w.length);return v=w.start+w.length,S+P+G},"");throw new Xn(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${u}
${E}`)}return u}),gf=FO(UI);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LI extends kI{create(e,t){var i;const{api_version:r=this._client.apiVersion}=e,a=td(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Xn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Xn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(gf`/${r}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(gf`/${r}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(gf`/${r}/interactions/${e}/cancel`,i)}get(e,t={},i){var r;const a=t??{},{api_version:u=this._client.apiVersion}=a,d=td(a,["api_version"]);return this._client.get(gf`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},i),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}LI._key=Object.freeze(["interactions"]);class OI extends LI{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GO(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}let yf;function kg(n){let e;return(yf??(e=new globalThis.TextEncoder,yf=e.encode.bind(e)))(n)}let _f;function pS(n){let e;return(_f??(e=new globalThis.TextDecoder,_f=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?kg(e):e;this.buffer=GO([this.buffer,t]);const i=[];let r;for(;(r=qO(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(pS(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=pS(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}wd.NEWLINE_CHARS=new Set([`
`,"\r"]);wd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function qO(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function BO(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nd={off:0,error:200,warn:300,info:400,debug:500},mS=(n,e,t)=>{if(n){if(TO(nd,n))return n;fn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(nd))}`)}};function eu(){}function vf(n,e,t){return!e||nd[n]>nd[t]?eu:e[n].bind(e)}const HO={error:eu,warn:eu,info:eu,debug:eu};let gS=new WeakMap;function fn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return HO;const r=gS.get(t);if(r&&r[0]===i)return r[1];const a={error:vf("error",t,i),warn:vf("warn",t,i),info:vf("info",t,i),debug:vf("debug",t,i)};return gS.set(t,[i,a]),a}const nr=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ha{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let r=!1;const a=i?fn(i):console;function u(){return hi(this,arguments,function*(){var g,p,v,E;if(r)throw new Xn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var w=!0,P=pi(zO(e,t)),G;G=yield we(P.next()),g=G.done,!g;w=!0){E=G.value,w=!1;const O=E;if(!S)if(O.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield we(JSON.parse(O.data))}catch(Y){throw a.error("Could not parse message into JSON:",O.data),a.error("From chunk:",O.raw),Y}}}catch(O){p={error:O}}finally{try{!w&&!g&&(v=P.return)&&(yield we(v.call(P)))}finally{if(p)throw p.error}}S=!0}catch(O){if(bm(O))return yield we(void 0);throw O}finally{S||t.abort()}})}return new ha(u,t,i)}static fromReadableStream(e,t,i){let r=!1;function a(){return hi(this,arguments,function*(){var g,p,v,E;const S=new wd,w=DI(e);try{for(var P=!0,G=pi(w),O;O=yield we(G.next()),g=O.done,!g;P=!0){E=O.value,P=!1;const Y=E;for(const Q of S.decode(Y))yield yield we(Q)}}catch(Y){p={error:Y}}finally{try{!P&&!g&&(v=G.return)&&(yield we(v.call(G)))}finally{if(p)throw p.error}}for(const Y of S.flush())yield yield we(Y)})}function u(){return hi(this,arguments,function*(){var g,p,v,E;if(r)throw new Xn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var w=!0,P=pi(a()),G;G=yield we(P.next()),g=G.done,!g;w=!0){E=G.value,w=!1;const O=E;S||O&&(yield yield we(JSON.parse(O)))}}catch(O){p={error:O}}finally{try{!w&&!g&&(v=P.return)&&(yield we(v.call(P)))}finally{if(p)throw p.error}}S=!0}catch(O){if(bm(O))return yield we(void 0);throw O}finally{S||t.abort()}})}return new ha(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new ha(()=>r(e),this.controller,this.client),new ha(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return MI({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await t.next();if(a)return i.close();const u=kg(JSON.stringify(r)+`
`);i.enqueue(u)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function zO(n,e){return hi(this,arguments,function*(){var i,r,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Xn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Xn("Attempted to iterate over a response with no body");const d=new KO,g=new wd,p=DI(n.body);try{for(var v=!0,E=pi(JO(p)),S;S=yield we(E.next()),i=S.done,!i;v=!0){u=S.value,v=!1;const w=u;for(const P of g.decode(w)){const G=d.decode(P);G&&(yield yield we(G))}}}catch(w){r={error:w}}finally{try{!v&&!i&&(a=E.return)&&(yield we(a.call(E)))}finally{if(r)throw r.error}}for(const w of g.flush()){const P=d.decode(w);P&&(yield yield we(P))}})}function JO(n){return hi(this,arguments,function*(){var t,i,r,a;let u=new Uint8Array;try{for(var d=!0,g=pi(n),p;p=yield we(g.next()),t=p.done,!t;d=!0){a=p.value,d=!1;const v=a;if(v==null)continue;const E=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?kg(v):v;let S=new Uint8Array(u.length+E.length);S.set(u),S.set(E,u.length),u=S;let w;for(;(w=BO(u))!==-1;)yield yield we(u.slice(0,w)),u=u.slice(w)}}catch(v){i={error:v}}finally{try{!d&&!t&&(r=g.return)&&(yield we(r.call(g)))}finally{if(i)throw i.error}}u.length>0&&(yield yield we(u))})}class KO{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=YO(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function YO(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function $O(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,u=await(async()=>{var d;if(e.options.stream)return fn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):ha.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const g=t.headers.get("content-type"),p=(d=g==null?void 0:g.split(";")[0])===null||d===void 0?void 0:d.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await t.json():await t.text()})();return fn(n).debug(`[${i}] response parsed`,nr({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ug extends Promise{constructor(e,t,i=$O){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Ug(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FI=Symbol("brand.privateNullableHeaders");function*QO(n){if(!n)return;if(FI in n){const{values:i,nulls:r}=n;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():cS(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=cS(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,d])}}const Yl=n=>{const e=new Headers,t=new Set;for(const i of n){const r=new Set;for(const[a,u]of QO(i)){const d=a.toLowerCase();r.has(d)||(e.delete(a),r.add(d)),u===null?(e.delete(a),t.add(d)):(e.append(a,u),t.delete(d))}}return{[FI]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kp=n=>{var e,t,i,r,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=y2)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var GI;class Rd{constructor(e){var t,i,r,a,u,d,g,{baseURL:p=Kp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=Kp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:E="v1beta"}=e,S=td(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:v,apiVersion:E},S),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(i=w.timeout)!==null&&i!==void 0?i:Rd.DEFAULT_TIMEOUT,this.logger=(r=w.logger)!==null&&r!==void 0?r:console;const P="warn";this.logLevel=P,this.logLevel=(u=(a=mS(w.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:mS(Kp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:P,this.fetchOptions=w.fetchOptions,this.maxRetries=(d=w.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(g=w.fetch)!==null&&g!==void 0?g:NO(),this.encoder=DO,this._options=w,this.apiKey=v,this.apiVersion=E,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Yl([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Yl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Yl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new Xn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${fa}`}defaultIdempotencyKey(){return`stainless-node-retry-${mO()}`}makeStatusError(e,t,i,r){return dn.generate(e,t,i,r)}buildURL(e,t,i){const r=!this.baseURLOverridden()&&i||this.baseURL,a=yO(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return EO(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new Ug(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var r,a,u;const d=await e,g=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=g),await this.prepareOptions(d);const{req:p,url:v,timeout:E}=await this.buildRequest(d,{retryCount:g-t});await this.prepareRequest(p,{url:v,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=i===void 0?"":`, retryOf: ${i}`,P=Date.now();if(fn(this).debug(`[${S}] sending request`,nr({retryOfRequestLogID:i,method:d.method,url:v,options:d,headers:p.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new xm;const G=new AbortController,O=await this.fetchWithTimeout(v,p,E,G).catch(Nm),Y=Date.now();if(O instanceof globalThis.Error){const j=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new xm;const oe=bm(O)||/timed? ?out/i.test(String(O)+("cause"in O?String(O.cause):""));if(t)return fn(this).info(`[${S}] connection ${oe?"timed out":"failed"} - ${j}`),fn(this).debug(`[${S}] connection ${oe?"timed out":"failed"} (${j})`,nr({retryOfRequestLogID:i,url:v,durationMs:Y-P,message:O.message})),this.retryRequest(d,t,i??S);throw fn(this).info(`[${S}] connection ${oe?"timed out":"failed"} - error; no more retries left`),fn(this).debug(`[${S}] connection ${oe?"timed out":"failed"} (error; no more retries left)`,nr({retryOfRequestLogID:i,url:v,durationMs:Y-P,message:O.message})),oe?new SI:new Id({cause:O})}const Q=`[${S}${w}] ${p.method} ${v} ${O.ok?"succeeded":"failed"} with status ${O.status} in ${Y-P}ms`;if(!O.ok){const j=await this.shouldRetry(O);if(t&&j){const M=`retrying, ${t} attempts remaining`;return await MO(O.body),fn(this).info(`${Q} - ${M}`),fn(this).debug(`[${S}] response error (${M})`,nr({retryOfRequestLogID:i,url:O.url,status:O.status,headers:O.headers,durationMs:Y-P})),this.retryRequest(d,t,i??S,O.headers)}const oe=j?"error; no more retries left":"error; not retryable";fn(this).info(`${Q} - ${oe}`);const W=await O.text().catch(M=>Nm(M).message),he=AO(W),N=he?void 0:W;throw fn(this).debug(`[${S}] response error (${oe})`,nr({retryOfRequestLogID:i,url:O.url,status:O.status,headers:O.headers,message:N,durationMs:Date.now()-P})),this.makeStatusError(O.status,he,N,O.headers)}return fn(this).info(Q),fn(this).debug(`[${S}] response start`,nr({retryOfRequestLogID:i,url:O.url,status:O.status,headers:O.headers,durationMs:Y-P})),{response:O,options:d,controller:G,requestLogID:S,retryOfRequestLogID:i,startTime:P}}async fetchWithTimeout(e,t,i,r){const a=t||{},{signal:u,method:d}=a,g=td(a,["signal","method"]);u&&u.addEventListener("abort",()=>r.abort());const p=setTimeout(()=>r.abort(),i),v=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,E=Object.assign(Object.assign(Object.assign({signal:r.signal},v?{duplex:"half"}:{}),{method:"GET"}),g);d&&(E.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(p)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,r){var a;let u;const d=r==null?void 0:r.get("retry-after-ms");if(d){const p=parseFloat(d);Number.isNaN(p)||(u=p)}const g=r==null?void 0:r.get("retry-after");if(g&&!u){const p=parseFloat(g);Number.isNaN(p)?u=Date.parse(g)-Date.now():u=p*1e3}if(!(u&&0<=u&&u<60*1e3)){const p=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,p)}return await CO(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,r,a;const u=Object.assign({},e),{method:d,path:g,query:p,defaultBaseURL:v}=u,E=this.buildURL(g,p,v);"timeout"in u&&SO("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:w}=this.buildBody({options:u}),P=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:P},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:E,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Yl([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),bO()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Yl([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:xO(e)}:this.encoder({body:e,headers:i})}}Rd.DEFAULT_TIMEOUT=6e4;class zt extends Rd{constructor(){super(...arguments),this.interactions=new OI(this)}}GI=zt;zt.GeminiNextGenAPIClient=GI;zt.GeminiNextGenAPIClientError=Xn;zt.APIError=dn;zt.APIConnectionError=Id;zt.APIConnectionTimeoutError=SI;zt.APIUserAbortError=xm;zt.NotFoundError=wI;zt.ConflictError=RI;zt.RateLimitError=NI;zt.BadRequestError=AI;zt.AuthenticationError=CI;zt.InternalServerError=xI;zt.PermissionDeniedError=II;zt.UnprocessableEntityError=bI;zt.toFile=LO;zt.Interactions=OI;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XO(n,e){const t={},i=f(n,["name"]);return i!=null&&h(t,["_url","name"],i),t}function WO(n,e){const t={},i=f(n,["name"]);return i!=null&&h(t,["_url","name"],i),t}function jO(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&h(t,["sdkHttpResponse"],i),t}function ZO(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&h(t,["sdkHttpResponse"],i),t}function e3(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);e!==void 0&&a!=null&&h(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(n,["learningRateMultiplier"]);if(u!=null&&h(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const g=f(n,["learningRate"]);if(e!==void 0&&g!=null&&h(e,["tuningTask","hyperparameters","learningRate"],g),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return i}function t3(n,e,t){const i={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec"],Yp(W))}else if(r==="PREFERENCE_TUNING"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec"],Yp(W))}else if(r==="DISTILLATION"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&h(e,["distillationSpec"],Yp(W))}const a=f(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&h(e,["tunedModelDisplayName"],a);const u=f(n,["description"]);e!==void 0&&u!=null&&h(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],W)}else if(d==="PREFERENCE_TUNING"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],W)}else if(d==="DISTILLATION"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&h(e,["distillationSpec","hyperParameters","epochCount"],W)}let g=f(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],W)}else if(g==="PREFERENCE_TUNING"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],W)}else if(g==="DISTILLATION"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&h(e,["distillationSpec","hyperParameters","learningRateMultiplier"],W)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],W)}else if(p==="PREFERENCE_TUNING"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],W)}else if(p==="DISTILLATION"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&h(e,["distillationSpec","exportLastCheckpointOnly"],W)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],W)}else if(v==="PREFERENCE_TUNING"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],W)}else if(v==="DISTILLATION"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&h(e,["distillationSpec","hyperParameters","adapterSize"],W)}let E=f(t,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const W=f(n,["tuningMode"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","tuningMode"],W)}const S=f(n,["customBaseModel"]);e!==void 0&&S!=null&&h(e,["customBaseModel"],S);let w=f(t,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){const W=f(n,["batchSize"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","batchSize"],W)}let P=f(t,["config","method"]);if(P===void 0&&(P="SUPERVISED_FINE_TUNING"),P==="SUPERVISED_FINE_TUNING"){const W=f(n,["learningRate"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRate"],W)}const G=f(n,["labels"]);e!==void 0&&G!=null&&h(e,["labels"],G);const O=f(n,["beta"]);e!==void 0&&O!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],O);const Y=f(n,["baseTeacherModel"]);e!==void 0&&Y!=null&&h(e,["distillationSpec","baseTeacherModel"],Y);const Q=f(n,["tunedTeacherModelSource"]);e!==void 0&&Q!=null&&h(e,["distillationSpec","tunedTeacherModelSource"],Q);const j=f(n,["sftLossWeightMultiplier"]);e!==void 0&&j!=null&&h(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],j);const oe=f(n,["outputUri"]);return e!==void 0&&oe!=null&&h(e,["outputUri"],oe),i}function n3(n,e){const t={},i=f(n,["baseModel"]);i!=null&&h(t,["baseModel"],i);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const a=f(n,["trainingDataset"]);a!=null&&h3(a);const u=f(n,["config"]);return u!=null&&e3(u,t),t}function i3(n,e){const t={},i=f(n,["baseModel"]);i!=null&&h(t,["baseModel"],i);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const a=f(n,["trainingDataset"]);a!=null&&p3(a,t,e);const u=f(n,["config"]);return u!=null&&t3(u,t,e),t}function s3(n,e){const t={},i=f(n,["name"]);return i!=null&&h(t,["_url","name"],i),t}function o3(n,e){const t={},i=f(n,["name"]);return i!=null&&h(t,["_url","name"],i),t}function r3(n,e,t){const i={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&h(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),i}function a3(n,e,t){const i={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&h(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),i}function l3(n,e){const t={},i=f(n,["config"]);return i!=null&&r3(i,t),t}function u3(n,e){const t={},i=f(n,["config"]);return i!=null&&a3(i,t),t}function c3(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const a=f(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>qI(d))),h(t,["tuningJobs"],u)}return t}function f3(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const a=f(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>Pm(d))),h(t,["tuningJobs"],u)}return t}function d3(n,e){const t={},i=f(n,["name"]);i!=null&&h(t,["model"],i);const r=f(n,["name"]);return r!=null&&h(t,["endpoint"],r),t}function h3(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),h(t,["examples","examples"],r)}return t}function p3(n,e,t){const i={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(r==="DISTILLATION"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(a==="DISTILLATION"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function qI(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const a=f(n,["state"]);a!=null&&h(t,["state"],iI(a));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["tuningTask","completeTime"]);g!=null&&h(t,["endTime"],g);const p=f(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const v=f(n,["description"]);v!=null&&h(t,["description"],v);const E=f(n,["baseModel"]);E!=null&&h(t,["baseModel"],E);const S=f(n,["_self"]);return S!=null&&h(t,["tunedModel"],d3(S)),t}function Pm(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const a=f(n,["state"]);a!=null&&h(t,["state"],iI(a));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(t,["endTime"],g);const p=f(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const v=f(n,["error"]);v!=null&&h(t,["error"],v);const E=f(n,["description"]);E!=null&&h(t,["description"],E);const S=f(n,["baseModel"]);S!=null&&h(t,["baseModel"],S);const w=f(n,["tunedModel"]);w!=null&&h(t,["tunedModel"],w);const P=f(n,["preTunedModel"]);P!=null&&h(t,["preTunedModel"],P);const G=f(n,["supervisedTuningSpec"]);G!=null&&h(t,["supervisedTuningSpec"],G);const O=f(n,["preferenceOptimizationSpec"]);O!=null&&h(t,["preferenceOptimizationSpec"],O);const Y=f(n,["distillationSpec"]);Y!=null&&h(t,["distillationSpec"],Y);const Q=f(n,["tuningDataStats"]);Q!=null&&h(t,["tuningDataStats"],Q);const j=f(n,["encryptionSpec"]);j!=null&&h(t,["encryptionSpec"],j);const oe=f(n,["partnerModelTuningSpec"]);oe!=null&&h(t,["partnerModelTuningSpec"],oe);const W=f(n,["customBaseModel"]);W!=null&&h(t,["customBaseModel"],W);const he=f(n,["experiment"]);he!=null&&h(t,["experiment"],he);const N=f(n,["labels"]);N!=null&&h(t,["labels"],N);const x=f(n,["outputUri"]);x!=null&&h(t,["outputUri"],x);const M=f(n,["pipelineJob"]);M!=null&&h(t,["pipelineJob"],M);const L=f(n,["serviceAccount"]);L!=null&&h(t,["serviceAccount"],L);const U=f(n,["tunedModelDisplayName"]);U!=null&&h(t,["tunedModelDisplayName"],U);const q=f(n,["veoTuningSpec"]);return q!=null&&h(t,["veoTuningSpec"],q),t}function m3(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const a=f(n,["metadata"]);a!=null&&h(t,["metadata"],a);const u=f(n,["done"]);u!=null&&h(t,["done"],u);const d=f(n,["error"]);return d!=null&&h(t,["error"],d),t}function Yp(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&h(t,["validationDatasetUri"],i);const r=f(n,["vertexDatasetResource"]);return r!=null&&h(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g3 extends Ts{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gr(vs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),a=await this.tuneMldevInternal(r);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:Em.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=o3(e);return d=de("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Pm(v))}else{const p=s3(e);return d=de("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>qI(v))}}async listInternal(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=u3(e);return d=de("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=f3(v),S=new HT;return Object.assign(S,E),S})}else{const p=l3(e);return d=de("tunedModels",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=c3(v),S=new HT;return Object.assign(S,E),S})}}async cancel(e){var t,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=WO(e);return d=de("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=ZO(v),S=new zT;return Object.assign(S,E),S})}else{const p=XO(e);return d=de("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=jO(v),S=new zT;return Object.assign(S,E),S})}}async tuneInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=i3(e,e);return a=de("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>Pm(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=n3(e);return a=de("tunedModels",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>m3(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y3{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const _3=1024*1024*8,v3=3,E3=1e3,T3=2,id="x-goog-upload-status";async function S3(n,e,t){var i;const r=await BI(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[id])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function A3(n,e,t){var i;const r=await BI(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[id])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=WC(a),d=new Ng;return Object.assign(d,u),d}async function BI(n,e,t){var i,r;let a=0,u=0,d=new Sm(new Response),g="upload";for(a=n.size;u<a;){const p=Math.min(_3,a-u),v=n.slice(u,u+p);u+p>=a&&(g+=", finalize");let E=0,S=E3;for(;E<v3&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[id]));)E++,await I3(S),S=S*T3;if(u+=p,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[id])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function C3(n){return{size:n.size,type:n.type}}function I3(n){return new Promise(e=>setTimeout(e,n))}class w3{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await S3(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await A3(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await C3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R3{create(e,t,i){return new b3(e,t,i)}}class b3{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yS="x-goog-api-key";class N3{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(yS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(yS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const x3="gl-node/";class M3{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new zt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=T2(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new N3(this.apiKey);this.apiClient=new C4({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:x3+"web",uploader:new w3,downloader:new y3}),this.models=new H4(this.apiClient),this.live=new L4(this.apiClient,r,new R3),this.batches=new WV(this.apiClient),this.chats=new Dk(this.models,this.apiClient),this.caches=new Nk(this.apiClient),this.files=new zk(this.apiClient),this.operations=new z4(this.apiClient),this.authTokens=new rO(this.apiClient),this.tunings=new g3(this.apiClient),this.fileSearchStores=new pO(this.apiClient)}}const bd=new M3({apiKey:void 0}),D3=async n=>{const e=`
    Find 4-5 active job listings for: "${n}".
    
    Return the output strictly as a raw JSON array.
    Each object in the array must have these fields:
    - "company": (string) Company Name
    - "title": (string) Job Title
    - "location": (string) Location
    - "email": (string or null) Contact email if found
    - "snippet": (string) Short description of the role
    - "url": (string or null) Link to the job
    - "fullDescription": (string) Full, detailed job description
    - "sourceSite": (string) The name of the website where the job listing was found
  `;try{const i=(await bd.models.generateContent({model:"gemini-3-flash-preview",contents:e,config:{tools:[{googleSearch:{}}]}})).text||"[]",r=i.replace(/```json/g,"").replace(/```/g,"").trim();try{return JSON.parse(r)}catch{return console.error("Failed to parse job search JSON",i),[]}}catch(t){throw console.error("Gemini search error:",t),t}};async function*P3(n,e="recruiters",t=10,i="",r=[]){const a=`
    Find ~${t} professional contacts related to: "${n}" in "${i||"Anywhere"}".
    Focus: ${e}.
    Return JSON objects, one per line.
    {
      "email": "string",
      "type": "recruitment" | "personal" | "general",
      "name": "string",
      "role": "string",
      "company": "string",
      "snippet": "string (Context found)",
      "sourceUrl": "string"
    }
  `;try{const u=await bd.models.generateContentStream({model:"gemini-3-flash-preview",contents:a,config:{tools:[{googleSearch:{}}]}});let d="";for await(const g of u){const p=g.text||"";d+=p;let v=d.split(`
`);d=v.pop()||"";for(const E of v){const S=E.trim();if(S&&S.startsWith("{")&&S.endsWith("}"))try{yield{type:"result",data:JSON.parse(S)}}catch{}}}}catch(u){throw u}}const V3=async(n,e)=>{const t=`
    Write a highly tailored and professional cold email application for a Flutter job.
    RECIPIENT: ${e.name} at ${e.company}.
    SENDER: ${n.name}, ${n.yearsExperience} yrs exp, Skills: ${n.skills}. Bio: ${n.bio}.
    Output JSON with "subject" and "body".
  `;try{const i=await bd.models.generateContent({model:"gemini-3-pro-preview",contents:t,config:{responseMimeType:"application/json",responseSchema:{type:Tn.OBJECT,properties:{subject:{type:Tn.STRING},body:{type:Tn.STRING}},required:["subject","body"]}}});return JSON.parse(i.text||"{}")}catch(i){throw i}},k3=async(n,e)=>{const t=`
    Generate a high-converting, personalized application email based on the following details.
    CANDIDATE: ${n.name}, ${n.yearsExperience} yrs exp, Skills: ${n.skills}.
    JOB: ${e.companyName}, ${e.jobTitle}.
    DESCRIPTION: ${e.jobDescription}
    Output JSON with 'subject' and 'body'.
  `;try{const i=await bd.models.generateContent({model:"gemini-3-pro-preview",contents:t,config:{responseMimeType:"application/json",responseSchema:{type:Tn.OBJECT,properties:{subject:{type:Tn.STRING},body:{type:Tn.STRING}},required:["subject","body"]}}});return JSON.parse(i.text||"{}")}catch(i){throw i}},sn=({children:n,variant:e="primary",isLoading:t,className:i="",disabled:r,...a})=>{const u="px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-offset-1",d={primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-md focus:ring-blue-500",secondary:"bg-slate-800 hover:bg-slate-900 text-white shadow-md focus:ring-slate-500",outline:"border border-slate-300 bg-white hover:bg-slate-50 text-slate-700 focus:ring-slate-300"};return I.jsx("button",{disabled:t||r,className:`${u} ${d[e]} ${i} ${t||r?"opacity-60 cursor-not-allowed":""}`,...a,children:t?I.jsxs(I.Fragment,{children:[I.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[I.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),I.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Thinking..."]}):n})};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L3=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),_S=n=>{const e=L3(n);return e.charAt(0).toUpperCase()+e.slice(1)},HI=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),O3=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var F3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=Ee.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:u,...d},g)=>Ee.createElement("svg",{ref:g,...F3,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:HI("lucide",r),...!a&&!O3(d)&&{"aria-hidden":"true"},...d},[...u.map(([p,v])=>Ee.createElement(p,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(n,e)=>{const t=Ee.forwardRef(({className:i,...r},a)=>Ee.createElement(G3,{ref:a,iconNode:e,className:HI(`lucide-${U3(_S(n))}`,`lucide-${n}`,i),...r}));return t.displayName=_S(n),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],B3=We("arrow-down",q3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Lg=We("briefcase",H3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],J3=We("check",z3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],zI=We("chevron-down",K3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],$3=We("chevron-left",Y3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],JI=We("chevron-up",Q3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],W3=We("clipboard-list",X3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],lu=We("copy",j3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],sd=We("external-link",Z3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],t6=We("file-text",e6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],i6=We("globe",n6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8",key:"18ogeb"}]],o6=We("infinity",s6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],vS=We("link",r6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],KI=We("loader-circle",a6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],u6=We("log-in",l6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],f6=We("lock",c6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],h6=We("log-out",d6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],od=We("mail",p6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],g6=We("map-pin",m6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],_6=We("menu",y6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],E6=We("save",v6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Og=We("search",T6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],YI=We("send",S6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Tu=We("sparkles",A6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ES=We("square-check-big",C6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],TS=We("square",I6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],R6=We("terminal",w6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Vm=We("triangle-alert",b6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],x6=We("user-plus",N6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$I=We("user",M6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],P6=We("x",D6),V6=({userProfile:n})=>{const[e,t]=Ee.useState("Flutter Developer Remote"),[i,r]=Ee.useState([]),[a,u]=Ee.useState(!1),[d,g]=Ee.useState(!0),[p,v]=Ee.useState(null),[E,S]=Ee.useState({companyName:"",jobTitle:"Flutter Developer",recruiterEmail:"",jobDescription:"",hiringManagerName:""}),[w,P]=Ee.useState(null),[G,O]=Ee.useState(!1),[Y,Q]=Ee.useState(null),j=N=>{const{name:x,value:M}=N.target;S(L=>({...L,[x]:M}))},oe=async N=>{N.preventDefault(),u(!0),r([]),Q(null);try{const x=await D3(e);r(x)}catch{Q("Failed to search jobs.")}finally{u(!1)}},W=N=>{S({companyName:N.company,jobTitle:N.title,recruiterEmail:N.email||"",jobDescription:N.fullDescription||N.snippet,hiringManagerName:""}),g(!1),P(null)},he=async N=>{if(N.preventDefault(),!n.name){Q("Please complete your profile first.");return}O(!0),P(null);try{const x=await k3(n,E);P(x)}catch{Q("Failed to generate email.")}finally{O(!1)}};return I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 h-full",children:[I.jsxs("div",{className:"flex flex-col gap-6 overflow-y-auto custom-scrollbar",children:[I.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden shrink-0",children:[I.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-100 flex items-center justify-between cursor-pointer hover:bg-slate-100 transition-colors",onClick:()=>g(!d),children:[I.jsxs("h2",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[I.jsx(Og,{className:"w-4 h-4 text-blue-600"}),"Direct Job Search"]}),I.jsx(B3,{className:`w-4 h-4 text-slate-400 transition-transform ${d?"rotate-180":""}`})]}),d&&I.jsxs("div",{className:"p-4 space-y-4",children:[I.jsxs("form",{onSubmit:oe,className:"flex gap-2",children:[I.jsx("input",{type:"text",value:e,onChange:N=>t(N.target.value),className:"flex-1 px-4 py-2.5 bg-white text-slate-900 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. Flutter Engineer"}),I.jsx(sn,{type:"submit",isLoading:a,className:"rounded-xl px-6",children:"Find"})]}),I.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1 custom-scrollbar",children:i.map((N,x)=>{const M=p===x;return I.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 bg-white hover:border-blue-300 transition-all shadow-sm",children:[I.jsxs("div",{className:"flex justify-between items-start mb-2",children:[I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-slate-900 text-sm",children:N.title}),I.jsx("p",{className:"text-xs text-blue-600 font-bold",children:N.company})]}),N.sourceSite&&I.jsx("span",{className:"bg-slate-50 text-slate-400 text-[10px] font-bold px-2 py-0.5 rounded border border-slate-100",children:N.sourceSite})]}),I.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-400 mb-3",children:[I.jsxs("span",{className:"flex items-center gap-1",children:[I.jsx(g6,{className:"w-3 h-3"})," ",N.location||"Remote"]}),N.url&&I.jsxs("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-blue-600 font-bold hover:underline",children:[I.jsx(sd,{className:"w-3 h-3"})," Source"]})]}),I.jsx("div",{className:`text-xs text-slate-600 leading-relaxed mb-4 p-3 bg-slate-50 rounded-lg border border-slate-100 ${M?"":"line-clamp-2"}`,children:M&&N.fullDescription||N.snippet}),I.jsxs("div",{className:"flex gap-2",children:[I.jsx(sn,{variant:"outline",onClick:()=>v(M?null:x),className:"text-[10px] py-1.5 h-auto px-3 rounded-lg flex-1",children:M?I.jsxs(I.Fragment,{children:[I.jsx(JI,{className:"w-3 h-3"})," Hide"]}):I.jsxs(I.Fragment,{children:[I.jsx(zI,{className:"w-3 h-3"})," Full Context"]})}),I.jsx(sn,{variant:"primary",onClick:()=>W(N),className:"flex-1 text-[10px] py-1.5 h-auto rounded-lg",children:"Use this Job"})]})]},x)})})]})]}),I.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 shrink-0",children:[I.jsxs("h2",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[I.jsx(Lg,{className:"w-5 h-5 text-blue-600"}),"Active Application Details"]}),I.jsxs("form",{onSubmit:he,className:"space-y-4",children:[I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{className:"space-y-1",children:[I.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Company"}),I.jsx("input",{required:!0,type:"text",name:"companyName",value:E.companyName,onChange:j,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:bg-white focus:ring-2 focus:ring-blue-100 transition-all"})]}),I.jsxs("div",{className:"space-y-1",children:[I.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),I.jsx("input",{required:!0,type:"text",name:"jobTitle",value:E.jobTitle,onChange:j,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:bg-white focus:ring-2 focus:ring-blue-100 transition-all"})]})]}),I.jsxs("div",{className:"space-y-1",children:[I.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Description"}),I.jsx("textarea",{required:!0,name:"jobDescription",value:E.jobDescription,onChange:j,rows:8,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:bg-white focus:ring-2 focus:ring-blue-100 transition-all",placeholder:"Paste requirements here..."})]}),I.jsxs(sn,{type:"submit",isLoading:G,className:"w-full py-3 rounded-xl shadow-lg shadow-blue-100",children:[I.jsx(Tu,{className:"w-4 h-4"})," Generate AI Draft"]})]})]})]}),I.jsx("div",{className:"flex flex-col gap-6",children:I.jsxs("div",{className:`bg-white rounded-2xl shadow-sm border border-slate-200 p-8 h-full flex flex-col ${w?"":"justify-center items-center"}`,children:[!w&&!G&&I.jsxs("div",{className:"text-center text-slate-400",children:[I.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-6",children:I.jsx(od,{className:"w-8 h-8 opacity-20"})}),I.jsx("h3",{className:"text-slate-800 font-bold",children:"No Draft Ready"}),I.jsx("p",{className:"text-sm mt-2",children:"Select a job or fill the form to start."})]}),G&&I.jsxs("div",{className:"text-center",children:[I.jsx(KI,{className:"w-12 h-12 text-blue-500 animate-spin mx-auto mb-4"}),I.jsx("p",{className:"text-slate-800 font-bold",children:"Analyzing skills match..."}),I.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Crafting a high-converting email"})]}),w&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"mb-8",children:[I.jsxs("div",{className:"flex justify-between items-center mb-2",children:[I.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Subject Line"}),I.jsx("button",{onClick:()=>navigator.clipboard.writeText(w.subject),className:"text-blue-600 hover:text-blue-800 transition-colors",children:I.jsx(lu,{className:"w-4 h-4"})})]}),I.jsx("h3",{className:"text-xl font-bold text-slate-900 bg-slate-50 p-4 rounded-xl border border-slate-200 leading-tight",children:w.subject})]}),I.jsxs("div",{className:"flex-1 flex flex-col",children:[I.jsxs("div",{className:"flex justify-between items-center mb-2",children:[I.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Message Body"}),I.jsx("button",{onClick:()=>navigator.clipboard.writeText(w.body),className:"text-blue-600 hover:text-blue-800 transition-colors",children:I.jsx(lu,{className:"w-4 h-4"})})]}),I.jsx("div",{className:"flex-1 whitespace-pre-wrap text-slate-700 text-sm leading-relaxed p-6 bg-slate-50 rounded-2xl border border-slate-200 overflow-y-auto",children:w.body})]}),I.jsxs("div",{className:"flex gap-3 mt-8",children:[I.jsxs(sn,{variant:"outline",onClick:()=>navigator.clipboard.writeText(w.body),className:"flex-1 py-3 rounded-xl",children:[I.jsx(lu,{className:"w-4 h-4"})," Copy All"]}),I.jsxs(sn,{variant:"primary",className:"flex-1 py-3 rounded-xl",onClick:()=>window.open(`mailto:${E.recruiterEmail}?subject=${encodeURIComponent(w.subject)}&body=${encodeURIComponent(w.body)}`),children:[I.jsx(YI,{className:"w-4 h-4"})," Send Now"]})]})]})]})})]})},k6=({userProfile:n})=>{const[e,t]=Ee.useState("Flutter Developer Hiring"),[i,r]=Ee.useState("active_hiring"),[a,u]=Ee.useState("Remote"),[d,g]=Ee.useState([]),p=Ee.useRef([]),[v,E]=Ee.useState(null),[S,w]=Ee.useState(!1),[P,G]=Ee.useState([]),[O,Y]=Ee.useState(!1),Q=Ee.useRef(!1),j=Ee.useRef(null),[oe,W]=Ee.useState([]),[he,N]=Ee.useState(!1),[x,M]=Ee.useState(null),[L,U]=Ee.useState(!1);Ee.useEffect(()=>{var fe;(fe=j.current)==null||fe.scrollIntoView({behavior:"smooth"})},[P]),Ee.useEffect(()=>{p.current=d},[d]);const q=async(fe,V=!1)=>{if(fe&&fe.preventDefault(),!!e.trim()){w(!0),Q.current=!1,V?G(ee=>[...ee,"--- Starting next Infinity batch ---"]):(g([]),p.current=[],G(["Initializing search agent..."]),W([]));try{const ee=V?p.current.map(ue=>ue.name||ue.company||"").filter(Boolean).slice(-40):[],ae=P3(e,i,10,a,ee);for await(const ue of ae){if(Q.current)break;ue.type==="log"?G(Te=>[...Te.slice(-10),ue.message]):ue.type==="result"&&g(Te=>Te.some(Me=>Me.email===ue.data.email)?Te:[...Te,ue.data])}O&&!Q.current?(G(ue=>[...ue,"Cooldown before next batch..."]),setTimeout(()=>q(void 0,!0),3e3)):w(!1)}catch{G(ae=>[...ae,"Search interrupted."]),w(!1)}}},D=()=>{Q.current=!0,Y(!1),w(!1),G(fe=>[...fe,"Stopping search agent..."])},xe=fe=>{oe.some(V=>V.email===fe.email)?W(V=>V.filter(ee=>ee.email!==fe.email)):W(V=>[...V,fe])},nt=()=>{oe.length===d.length?W([]):W([...d])},Z=()=>{const fe=oe.map(V=>V.email).join(", ");navigator.clipboard.writeText(fe),G(V=>[...V,`Copied ${oe.length} emails to clipboard.`])},ce=()=>{const fe=oe.map(V=>`${V.name||"Unknown"} (${V.role} @ ${V.company}) - ${V.email}`).join(`
`);navigator.clipboard.writeText(fe),G(V=>[...V,`Copied details for ${oe.length} leads.`])},me=async fe=>{if(!(n!=null&&n.name)){G(V=>[...V,"Error: Profile incomplete."]);return}N(!0),U(!0),M(null);try{const V=await V3(n,fe);M(V)}catch{G(ee=>[...ee,"Failed to draft email."])}finally{U(!1)}},ke=fe=>{switch(fe){case"recruitment":return"bg-green-100 text-green-700 border-green-200";case"personal":return"bg-purple-100 text-purple-700 border-purple-200";case"general":return"bg-blue-100 text-blue-700 border-blue-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}};return I.jsxs("div",{className:"max-w-5xl mx-auto h-full flex flex-col relative pb-32",children:[I.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden mb-6",children:[I.jsxs("div",{className:"p-6 border-b bg-slate-50/50 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[I.jsxs("div",{children:[I.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[I.jsx(Og,{className:"w-5 h-5 text-blue-600"}),"Lead Prospector & Infinity Finder"]}),I.jsx("p",{className:"text-sm text-slate-500",children:"Auto-discover contacts and job posts from across the web."})]}),I.jsx("div",{className:"flex items-center gap-2",children:I.jsxs("button",{onClick:()=>Y(!O),className:`flex items-center gap-2 px-4 py-2 rounded-full border transition-all font-bold text-xs ${O?"bg-orange-500 border-orange-600 text-white shadow-lg":"bg-white border-slate-200 text-slate-500"}`,children:[I.jsx(o6,{className:`w-4 h-4 ${O?"animate-pulse":""}`}),"Infinity Mode ",O?"ON":"OFF"]})})]}),I.jsxs("div",{className:"p-6 space-y-6",children:[I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:["active_hiring","recruiters","decision_makers"].map(fe=>I.jsxs("label",{className:`flex items-center gap-3 p-4 rounded-xl border cursor-pointer transition-all ${i===fe?"border-blue-500 bg-blue-50 ring-2 ring-blue-100":"border-slate-200 hover:border-slate-300 bg-white"}`,children:[I.jsx("input",{type:"radio",name:"strategy",checked:i===fe,onChange:()=>r(fe),className:"hidden"}),I.jsxs("div",{className:"flex flex-col",children:[I.jsx("span",{className:"text-sm font-bold text-slate-800 capitalize",children:fe.replace("_"," ")}),I.jsxs("span",{className:"text-[10px] text-slate-400",children:["Targeting ",fe," strategy"]})]})]},fe))}),I.jsx("form",{onSubmit:q,className:"space-y-4",children:I.jsxs("div",{className:"flex gap-2",children:[I.jsx("input",{type:"text",value:e,onChange:fe=>t(fe.target.value),className:"flex-1 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all font-medium",placeholder:"Search query (e.g. Flutter Engineer hiring)"}),I.jsx("input",{type:"text",value:a,onChange:fe=>u(fe.target.value),className:"w-32 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all font-medium",placeholder:"Location"}),S?I.jsx(sn,{onClick:D,variant:"secondary",className:"px-6 rounded-xl",children:"Stop"}):I.jsx(sn,{type:"submit",className:"px-8 rounded-xl shadow-blue-200",children:"Search"})]})}),P.length>0&&I.jsxs("div",{className:"bg-slate-900 rounded-xl p-4 font-mono text-xs shadow-inner",children:[I.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b border-slate-800 text-slate-500",children:[I.jsx(R6,{className:"w-3 h-3"}),I.jsx("span",{children:"Agent Logs"}),S&&I.jsx(KI,{className:"w-3 h-3 animate-spin ml-auto"})]}),I.jsxs("div",{className:"space-y-1 h-24 overflow-y-auto custom-scrollbar",children:[P.map((fe,V)=>I.jsxs("div",{className:"text-slate-300",children:[I.jsx("span",{className:"text-green-500 mr-2 opacity-50",children:"$"}),fe]},V)),I.jsx("div",{ref:j})]})]})]})]}),d.length>0&&I.jsxs("div",{className:"sticky top-0 z-10 bg-slate-50/90 backdrop-blur-md py-3 mb-4 flex flex-wrap items-center justify-between gap-3 border-b border-slate-200",children:[I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsxs("button",{onClick:nt,className:"flex items-center gap-2 text-sm font-bold text-slate-600 hover:text-blue-600 transition-colors",children:[oe.length===d.length?I.jsx(ES,{className:"w-5 h-5 text-blue-600"}):I.jsx(TS,{className:"w-5 h-5"}),"Select All (",d.length,")"]}),oe.length>0&&I.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-bold",children:[oe.length," Selected"]})]}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsxs(sn,{variant:"outline",onClick:Z,disabled:oe.length===0,className:"text-xs h-9 px-3 border-slate-300",children:[I.jsx(od,{className:"w-3.5 h-3.5"})," Copy Emails"]}),I.jsxs(sn,{variant:"outline",onClick:ce,disabled:oe.length===0,className:"text-xs h-9 px-3 border-slate-300",children:[I.jsx(W3,{className:"w-3.5 h-3.5"})," Copy Details"]})]})]}),I.jsx("div",{className:"space-y-4",children:d.map((fe,V)=>{const ee=oe.some(ue=>ue.email===fe.email),ae=v===V;return I.jsx("div",{className:`group rounded-2xl border p-5 transition-all cursor-pointer ${ee?"bg-blue-50 border-blue-400 shadow-md":"bg-white border-slate-200 hover:border-slate-300 hover:shadow-sm"}`,onClick:()=>xe(fe),children:I.jsxs("div",{className:"flex items-start gap-4",children:[I.jsx("div",{className:"pt-1",children:ee?I.jsx(ES,{className:"w-6 h-6 text-blue-600"}):I.jsx(TS,{className:"w-6 h-6 text-slate-200 group-hover:text-slate-300 transition-colors"})}),I.jsxs("div",{className:"flex-1",children:[I.jsxs("div",{className:"flex justify-between items-start",children:[I.jsxs("div",{children:[I.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[I.jsx("h3",{className:"font-bold text-slate-800 text-lg leading-none",children:fe.name||"Professional Prospect"}),I.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full border uppercase font-bold tracking-tight ${ke(fe.type)}`,children:fe.type})]}),I.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[I.jsx("span",{className:"font-semibold text-slate-700",children:fe.role})," at ",I.jsx("span",{className:"font-bold text-blue-600",children:fe.company})]})]}),fe.source&&I.jsxs("span",{className:"text-[10px] font-bold text-slate-400 bg-slate-50 px-2 py-1 rounded border border-slate-100 uppercase",children:["via ",fe.source]})]}),I.jsxs("div",{className:`mt-3 text-xs text-slate-600 bg-slate-50/50 p-3 rounded-xl border border-slate-100 leading-relaxed relative ${ae?"":"line-clamp-2"}`,children:[fe.snippet||"No additional context found for this prospect.",!ae&&fe.snippet&&fe.snippet.length>100&&I.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-6 bg-gradient-to-t from-slate-50/80 to-transparent pointer-events-none"})]}),I.jsxs("div",{className:"flex items-center gap-3 mt-4 flex-wrap",onClick:ue=>ue.stopPropagation(),children:[I.jsx("code",{className:"text-[11px] bg-slate-100 border px-3 py-1.5 rounded-lg font-mono text-blue-700 font-bold",children:fe.email}),I.jsxs("div",{className:"flex gap-2 ml-auto",children:[fe.sourceUrl&&I.jsxs("a",{href:fe.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-xs font-bold text-blue-600 hover:bg-blue-50 px-3 py-1.5 rounded-lg transition-colors",children:[I.jsx(sd,{className:"w-4 h-4"})," View Post"]}),I.jsx("button",{onClick:()=>E(ae?null:V),className:"flex items-center gap-1 text-xs font-bold text-slate-500 hover:bg-slate-100 px-3 py-1.5 rounded-lg transition-colors",children:ae?I.jsxs(I.Fragment,{children:[I.jsx(JI,{className:"w-4 h-4"})," Show Less"]}):I.jsxs(I.Fragment,{children:[I.jsx(zI,{className:"w-4 h-4"})," Full Context"]})}),I.jsx(sn,{onClick:()=>me(fe),className:"text-xs h-9 px-4 rounded-lg",children:"Draft"})]})]})]})]})},V)})}),he&&I.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:I.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-3xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300",children:[I.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-slate-50",children:[I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-2xl flex items-center justify-center text-blue-600",children:I.jsx(Tu,{className:"w-5 h-5"})}),I.jsxs("div",{children:[I.jsx("h3",{className:"font-bold text-slate-900 leading-tight",children:"AI Generated Pitch"}),I.jsx("p",{className:"text-xs text-slate-500",children:"Tailored to prospect context"})]})]}),I.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:I.jsx(P6,{className:"w-6 h-6 text-slate-400"})})]}),I.jsx("div",{className:"p-8 flex-1 overflow-y-auto space-y-6",children:L?I.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[I.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),I.jsx("p",{className:"text-slate-500 font-bold animate-pulse text-sm",children:"Synthesizing personalized message..."})]}):x&&I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-2",children:"Subject Line"}),I.jsxs("div",{className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl font-bold text-slate-800 flex justify-between items-center",children:[x.subject,I.jsx("button",{onClick:()=>navigator.clipboard.writeText(x.subject),className:"text-slate-400 hover:text-blue-600 transition-colors",children:I.jsx(lu,{className:"w-4 h-4"})})]})]}),I.jsxs("div",{children:[I.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-2",children:"Email Content"}),I.jsx("textarea",{defaultValue:x.body,className:"w-full h-80 p-5 bg-slate-50 border border-slate-200 rounded-2xl text-sm leading-relaxed text-slate-700 outline-none focus:ring-2 focus:ring-blue-100 transition-all font-sans"})]})]})}),I.jsxs("div",{className:"p-6 border-t bg-slate-50 flex justify-end gap-3",children:[I.jsx(sn,{variant:"outline",className:"px-6 rounded-xl",onClick:()=>N(!1),children:"Close"}),x&&I.jsxs(sn,{className:"px-8 rounded-xl shadow-lg shadow-blue-200",onClick:()=>{var V;const fe=`https://mail.google.com/mail/?view=cm&fs=1&to=${(V=d.find(ee=>ee.email))==null?void 0:V.email}&su=${encodeURIComponent(x.subject)}&body=${encodeURIComponent(x.body)}`;window.open(fe,"_blank")},children:[I.jsx(YI,{className:"w-4 h-4"})," Open in Gmail"]})]})]})}),d.length===0&&!S&&I.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-20 text-center text-slate-400",children:[I.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center shadow-sm mb-6 border border-slate-100",children:I.jsx(od,{className:"w-10 h-10 opacity-20"})}),I.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"No leads discovered yet"}),I.jsxs("p",{className:"max-w-xs text-sm mt-2",children:["Enter a query and toggle ",I.jsx("strong",{children:"Infinity Mode"})," to start your automated hiring search."]})]})]})},U6=({initialProfile:n,onSave:e})=>{const[t,i]=Ee.useState(n),[r,a]=Ee.useState("idle"),[u,d]=Ee.useState(""),[g,p]=Ee.useState(!1);Ee.useEffect(()=>{i(n)},[n]);const v=S=>{const{name:w,value:P}=S.target;i(G=>({...G,[w]:P})),a("idle")},E=async S=>{S.preventDefault(),p(!0),a("idle"),d("");try{await e(t),a("success"),setTimeout(()=>a("idle"),3e3)}catch(w){console.warn("Profile saved locally only. Cloud error:",w.message),a("offline"),w.message.includes("Rules")?d("Check Firestore Security Rules."):d("Cloud sync failed. Check connection."),setTimeout(()=>a("idle"),5e3)}finally{p(!1)}};return I.jsx("div",{className:"max-w-2xl mx-auto",children:I.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[I.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50",children:[I.jsxs("h2",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[I.jsx($I,{className:"w-5 h-5 text-blue-600"}),"Your Developer Profile"]}),I.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"The AI uses this information to personalize your application emails."})]}),I.jsxs("form",{onSubmit:E,className:"p-6 space-y-6",children:[I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Full Name"}),I.jsx("input",{type:"text",name:"name",required:!0,value:t.name,onChange:v,className:"w-full px-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"e.g. Jane Doe"})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Years of Experience"}),I.jsx("input",{type:"text",name:"yearsExperience",value:t.yearsExperience,onChange:v,className:"w-full px-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"e.g. 4"})]})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Technical Skills (comma separated)"}),I.jsxs("div",{className:"relative",children:[I.jsx(Lg,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),I.jsx("input",{type:"text",name:"skills",value:t.skills,onChange:v,className:"w-full pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Dart, Flutter, Bloc, Riverpod, Firebase, REST APIs, Git"})]})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Portfolio URL"}),I.jsxs("div",{className:"relative",children:[I.jsx(vS,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),I.jsx("input",{type:"url",name:"portfolioUrl",value:t.portfolioUrl,onChange:v,className:"w-full pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"https://github.com/janedoe"})]})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-sm font-medium text-slate-700",children:"LinkedIn URL"}),I.jsxs("div",{className:"relative",children:[I.jsx(vS,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),I.jsx("input",{type:"url",name:"linkedinUrl",value:t.linkedinUrl,onChange:v,className:"w-full pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"https://linkedin.com/in/janedoe"})]})]})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Short Bio / Summary"}),I.jsxs("div",{className:"relative",children:[I.jsx(t6,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),I.jsx("textarea",{name:"bio",value:t.bio,onChange:v,rows:4,className:"w-full pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Briefly describe your background, strengths, and what you are looking for..."})]})]}),I.jsxs("div",{className:"pt-4 flex items-center justify-end gap-3",children:[r==="success"&&I.jsxs("span",{className:"text-green-600 text-sm font-medium animate-pulse flex items-center gap-1",children:[I.jsx(J3,{className:"w-4 h-4"})," Profile Saved!"]}),r==="offline"&&I.jsxs("div",{className:"flex flex-col items-end",children:[I.jsxs("span",{className:"text-amber-600 text-sm font-medium flex items-center gap-1",children:[I.jsx(Vm,{className:"w-4 h-4"})," Saved (Device Only)"]}),I.jsx("span",{className:"text-[10px] text-slate-400",children:u||"Cloud sync failed. Check internet."})]}),I.jsxs(sn,{type:"submit",isLoading:g,children:[I.jsx(E6,{className:"w-4 h-4"}),"Save Profile"]})]})]})]})})},L6=()=>{const{signInWithGoogle:n,loginWithEmail:e,registerWithEmail:t}=wg(),[i,r]=Ee.useState(!1),[a,u]=Ee.useState(null),[d,g]=Ee.useState(""),[p,v]=Ee.useState(""),[E,S]=Ee.useState(""),[w,P]=Ee.useState(!1);Ee.useEffect(()=>{g((()=>{try{return window.location.hostname||window.location.host||new URL(window.location.href).hostname}catch{return"your-preview-domain.com"}})())},[]);const G=async()=>{r(!0),u(null);try{await n()}catch(Q){Y(Q)}finally{r(!1)}},O=async Q=>{if(Q.preventDefault(),!p||!E){u("Please enter both email and password.");return}r(!0),u(null);try{w?await t(p,E):await e(p,E)}catch(j){Y(j)}finally{r(!1)}},Y=Q=>{console.error(Q);let j=Q.message;if(Q.code==="auth/invalid-credential"||Q.code==="auth/wrong-password")j="Invalid email or password.";else if(Q.code==="auth/email-already-in-use")j="This email is already registered.";else if(Q.code==="auth/weak-password")j="Password should be at least 6 characters.";else if(Q.code==="auth/user-not-found")j="No account found with this email.";else if(Q.code==="auth/invalid-email")j="Please enter a valid email address.";else if(Q.code==="auth/popup-closed-by-user")j="Sign in was cancelled.";else if(Q.code==="auth/configuration-not-found"||Q.code==="auth/api-key-not-valid"||Q.code==="auth/internal-error")j="Firebase configuration is missing or invalid. Please check firebaseConfig.ts.";else if(Q.code==="auth/unauthorized-domain"){const oe=d||window.location.hostname||"unknown-domain";u(I.jsxs("div",{className:"flex flex-col items-start w-full text-left bg-red-50 p-4 rounded-lg border border-red-100 animate-in fade-in zoom-in-95 duration-300",children:[I.jsxs("h3",{className:"font-bold text-red-700 mb-2 flex items-center gap-2",children:[I.jsx(Vm,{className:"w-5 h-5"}),"Action Required: Authorize Domain"]}),I.jsx("p",{className:"text-sm text-slate-700 mb-4 leading-relaxed",children:"Google Security blocks sign-ins from unknown websites. You must tell Firebase that this preview URL is safe."}),I.jsxs("div",{className:"w-full bg-white p-4 rounded-lg border-2 border-red-100 mb-4 shadow-sm relative overflow-hidden group",children:[I.jsx("div",{className:"absolute top-0 left-0 bg-red-100 text-red-700 text-[10px] font-bold px-2 py-0.5 rounded-br",children:"STEP 1: COPY THIS"}),I.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[I.jsx("div",{className:"flex-1 bg-slate-50 p-2 rounded border border-dashed border-slate-200 overflow-hidden",children:I.jsx("code",{className:"block font-mono font-bold text-slate-800 text-sm break-all select-all",children:oe})}),I.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(oe);const W=document.getElementById("copy-btn-text");W&&(W.innerText="Copied!"),setTimeout(()=>{W&&(W.innerText="Copy")},2e3)},className:"flex items-center gap-1 text-sm bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-all shadow-sm active:scale-95 shrink-0",children:[I.jsx(lu,{className:"w-4 h-4"}),I.jsx("span",{id:"copy-btn-text",children:"Copy"})]})]})]}),I.jsxs("div",{className:"w-full bg-slate-50 p-4 rounded-lg border border-slate-200",children:[I.jsx("div",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider mb-2",children:"STEP 2: ADD TO FIREBASE"}),I.jsxs("ol",{className:"list-decimal pl-4 space-y-2 text-sm text-slate-600",children:[I.jsxs("li",{children:["Open ",I.jsxs("a",{href:"https://console.firebase.google.com/project/flutter-apply/authentication/settings",target:"_blank",rel:"noreferrer",className:"text-blue-600 underline font-medium hover:text-blue-800 flex items-center gap-1 inline-flex",children:["Firebase Console ",I.jsx(sd,{className:"w-3 h-3"})]})]}),I.jsxs("li",{children:["Go to ",I.jsx("strong",{children:"Authentication"})," > ",I.jsx("strong",{children:"Settings"})," > ",I.jsx("strong",{children:"Authorized Domains"})," tab."]}),I.jsxs("li",{children:["Click the blue ",I.jsx("strong",{children:"Add domain"})," button."]}),I.jsx("li",{children:"Paste the domain from Step 1 and Save."})]})]})]}));return}u(j)};return h2?I.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:I.jsxs("div",{className:"bg-white max-w-md w-full rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:[I.jsxs("div",{className:"bg-blue-600 p-8 text-center",children:[I.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl mx-auto flex items-center justify-center mb-4 backdrop-blur-sm",children:I.jsx(Tu,{className:"w-8 h-8 text-white"})}),I.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"FlutterApply AI"}),I.jsx("p",{className:"text-blue-100",children:"Supercharge your job search with AI."})]}),I.jsxs("div",{className:"p-8",children:[I.jsxs("div",{className:"text-center mb-6",children:[I.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:w?"Create Account":"Welcome Back"}),I.jsx("p",{className:"text-slate-500 mt-1",children:w?"Sign up to start crafting perfect emails.":"Sign in to access your profile."})]}),a&&I.jsx("div",{className:"mb-6 text-center text-red-600 text-sm bg-red-50 p-3 rounded-lg border border-red-100",children:a}),I.jsxs("form",{onSubmit:O,className:"space-y-4 mb-6",children:[I.jsxs("div",{className:"space-y-1",children:[I.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Email"}),I.jsxs("div",{className:"relative",children:[I.jsx(od,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),I.jsx("input",{type:"email",value:p,onChange:Q=>v(Q.target.value),className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm transition-all",placeholder:"you@example.com",required:!0})]})]}),I.jsxs("div",{className:"space-y-1",children:[I.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Password"}),I.jsxs("div",{className:"relative",children:[I.jsx(f6,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),I.jsx("input",{type:"password",value:E,onChange:Q=>S(Q.target.value),className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm transition-all",placeholder:"",required:!0})]})]}),I.jsx(sn,{type:"submit",isLoading:i,className:"w-full py-2.5",children:w?I.jsxs(I.Fragment,{children:[I.jsx(x6,{className:"w-4 h-4"})," Create Account"]}):I.jsxs(I.Fragment,{children:[I.jsx(u6,{className:"w-4 h-4"})," Sign In"]})})]}),I.jsxs("div",{className:"relative mb-6",children:[I.jsx("div",{className:"absolute inset-0 flex items-center",children:I.jsx("div",{className:"w-full border-t border-slate-200"})}),I.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:I.jsx("span",{className:"bg-white px-2 text-slate-400 font-medium",children:"Or continue with"})})]}),I.jsxs(sn,{variant:"outline",onClick:G,isLoading:i,className:"w-full py-2.5 text-slate-700 mb-6",type:"button",children:[I.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[I.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),I.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),I.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z"}),I.jsx("path",{fill:"#EA4335",d:"M12 4.75c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 1.09 14.97 0 12 0 7.7 0 3.99 2.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),I.jsxs("div",{className:"text-center text-sm",children:[I.jsx("span",{className:"text-slate-500",children:w?"Already have an account? ":"Don't have an account? "}),I.jsx("button",{type:"button",onClick:()=>{P(!w),u(null),v(""),S("")},className:"font-medium text-blue-600 hover:text-blue-800 transition-colors",children:w?"Sign In":"Sign Up"})]}),I.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-100",children:[I.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-slate-400",children:[I.jsx(i6,{className:"w-3 h-3"}),I.jsx("span",{children:"Current Preview Domain:"})]}),I.jsx("code",{className:"block mt-1 text-center text-[10px] bg-slate-100 p-2 rounded text-slate-500 font-mono select-all break-all border border-slate-200",children:d||"Detecting..."})]})]})]})}):I.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4 font-sans",children:I.jsxs("div",{className:"bg-white max-w-2xl w-full rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:[I.jsxs("div",{className:"bg-amber-500 p-6 flex items-center gap-4",children:[I.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:I.jsx(Vm,{className:"w-8 h-8 text-white"})}),I.jsxs("div",{children:[I.jsx("h1",{className:"text-xl font-bold text-white",children:"Setup Required"}),I.jsx("p",{className:"text-amber-100 text-sm",children:"You need to connect Firebase to use this app."})]})]}),I.jsxs("div",{className:"p-8 space-y-6",children:[I.jsx("div",{className:"prose prose-slate text-sm",children:I.jsxs("p",{className:"text-slate-600 text-base",children:["The application is running, but it's missing the ",I.jsx("strong",{children:"API Keys"})," needed to talk to Google's servers. Follow these steps to fix it:"]})}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{className:"flex gap-4",children:[I.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold",children:"1"}),I.jsxs("div",{children:[I.jsx("h3",{className:"font-semibold text-slate-800",children:"Create a Firebase Project"}),I.jsxs("p",{className:"text-slate-600 text-sm mt-1",children:["Go to ",I.jsxs("a",{href:"https://console.firebase.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline inline-flex items-center gap-1",children:["console.firebase.google.com ",I.jsx(sd,{className:"w-3 h-3"})]})," and create a new project."]})]})]}),I.jsxs("div",{className:"flex gap-4",children:[I.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold",children:"2"}),I.jsxs("div",{children:[I.jsx("h3",{className:"font-semibold text-slate-800",children:"Enable Authentication & Firestore"}),I.jsxs("p",{className:"text-slate-600 text-sm mt-1",children:["In the console, go to ",I.jsx("strong",{children:"Build"})," menu:",I.jsxs("ul",{className:"list-disc ml-5 mt-1 space-y-1",children:[I.jsxs("li",{children:[I.jsx("strong",{children:"Authentication:"}),' Enable "Google" and "Email/Password" providers.']}),I.jsxs("li",{children:[I.jsx("strong",{children:"Firestore Database:"})," Create database (start in Test Mode)."]})]})]})]})]}),I.jsxs("div",{className:"flex gap-4",children:[I.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold",children:"3"}),I.jsxs("div",{children:[I.jsx("h3",{className:"font-semibold text-slate-800",children:"Copy Config to Code"}),I.jsxs("p",{className:"text-slate-600 text-sm mt-1",children:["Go to ",I.jsx("strong",{children:"Project Settings"})," (gear icon)  ",I.jsx("strong",{children:"General"}),"  ",I.jsx("strong",{children:"Your apps"}),".",I.jsx("br",{}),"Click the ",I.jsx("code",{className:"bg-slate-100 px-1 rounded",children:"</>"})," icon to register a web app.",I.jsx("br",{}),"Copy the ",I.jsx("code",{className:"text-xs bg-slate-100 px-1",children:"firebaseConfig"})," object keys and paste them into the ",I.jsx("code",{className:"text-blue-600 font-mono",children:"firebaseConfig.ts"})," file in this editor."]})]})]})]}),I.jsxs("div",{className:"bg-slate-100 p-4 rounded-lg border border-slate-200 mt-4",children:[I.jsx("h4",{className:"text-xs font-semibold uppercase text-slate-500 mb-2",children:"Example of what to replace in firebaseConfig.ts:"}),I.jsx("pre",{className:"text-xs text-slate-700 font-mono overflow-x-auto",children:`const firebaseConfig = {
  apiKey: "AIzaSyD...", 
  authDomain: "your-project.firebaseapp.com",
  projectId: "your-project",
  // ... other keys
};`})]})]})]})})},SS={name:"",email:"",yearsExperience:"",skills:"Dart, Flutter, Firebase",portfolioUrl:"",bio:"",linkedinUrl:""},O6=()=>{var S;const{currentUser:n,logout:e}=wg(),[t,i]=Ee.useState(io.GENERATOR),[r,a]=Ee.useState(SS),[u,d]=Ee.useState(!0),[g,p]=Ee.useState(!0);Ee.useEffect(()=>{(async()=>{if(n){p(!0);const P=await m2(n.uid);a(P||{...SS,email:n.email||""}),p(!1)}})()},[n]);const v=async w=>{n&&(await g2(n.uid,w),a(w))},E=[{id:io.GENERATOR,label:"Job Generator",icon:Lg},{id:io.EMAIL_FINDER,label:"Email Finder",icon:Og},{id:io.PROFILE,label:"My Profile",icon:$I}];return g?I.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-slate-50",children:I.jsxs("div",{className:"flex flex-col items-center gap-4",children:[I.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),I.jsx("p",{className:"text-slate-500 font-medium",children:"Loading your workspace..."})]})}):I.jsxs("div",{className:"flex h-screen bg-slate-50 text-slate-900 font-sans overflow-hidden",children:[I.jsxs("aside",{className:`${u?"w-64":"w-20"} bg-white border-r border-slate-200 transition-all duration-300 flex flex-col z-20`,children:[I.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between shrink-0",children:[I.jsxs("div",{className:`flex items-center gap-2 overflow-hidden transition-all duration-300 ${u?"opacity-100":"opacity-0 w-0"}`,children:[I.jsx(Tu,{className:"w-6 h-6 text-blue-600 shrink-0"}),I.jsxs("h1",{className:"font-bold text-xl tracking-tight whitespace-nowrap",children:["Flutter",I.jsx("span",{className:"text-blue-600",children:"Apply"})]})]}),!u&&I.jsx(Tu,{className:"w-6 h-6 text-blue-600 mx-auto"})]}),I.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4",children:E.map(w=>I.jsxs("button",{onClick:()=>i(w.id),className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all group ${t===w.id?"bg-blue-600 text-white shadow-lg shadow-blue-200":"text-slate-500 hover:bg-slate-100"}`,title:w.label,children:[I.jsx(w.icon,{className:`w-5 h-5 shrink-0 ${t===w.id?"text-white":"group-hover:text-blue-600"}`}),I.jsx("span",{className:`font-medium whitespace-nowrap transition-all duration-300 ${u?"opacity-100":"opacity-0 w-0"}`,children:w.label})]},w.id))}),I.jsxs("div",{className:"p-4 border-t border-slate-100",children:[I.jsxs("button",{onClick:()=>e(),className:"w-full flex items-center gap-3 p-3 text-slate-500 hover:bg-red-50 hover:text-red-600 rounded-xl transition-all group",children:[I.jsx(h6,{className:"w-5 h-5 shrink-0"}),I.jsx("span",{className:`font-medium transition-all duration-300 ${u?"opacity-100":"opacity-0 w-0"}`,children:"Logout"})]}),I.jsx("button",{onClick:()=>d(!u),className:"mt-4 w-full flex items-center justify-center p-2 text-slate-400 hover:text-slate-600 rounded-lg hover:bg-slate-100 transition-all",children:u?I.jsx($3,{className:"w-5 h-5"}):I.jsx(_6,{className:"w-5 h-5"})})]})]}),I.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[I.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-8 shrink-0",children:[I.jsx("h2",{className:"text-lg font-bold text-slate-800",children:(S=E.find(w=>w.id===t))==null?void 0:S.label}),I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsxs("div",{className:"text-right hidden sm:block",children:[I.jsx("p",{className:"text-xs font-bold text-slate-900",children:r.name||"Set Name"}),I.jsx("p",{className:"text-[10px] text-slate-400",children:n==null?void 0:n.email})]}),I.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 border border-blue-200 flex items-center justify-center text-blue-600 font-bold text-xs",children:(r.name||(n==null?void 0:n.email)||"U").charAt(0).toUpperCase()})]})]}),I.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:I.jsxs("div",{className:"max-w-7xl mx-auto h-full",children:[t===io.GENERATOR&&I.jsx(V6,{userProfile:r}),t===io.EMAIL_FINDER&&I.jsx(k6,{userProfile:r}),t===io.PROFILE&&I.jsx(U6,{initialProfile:r,onSave:v})]})})]})]})},F6=()=>{const{currentUser:n,loading:e}=wg();return e?I.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-slate-50",children:I.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):n?I.jsx(O6,{}):I.jsx(L6,{})},G6=()=>I.jsx(p2,{children:I.jsx(F6,{})}),QI=document.getElementById("root");if(!QI)throw new Error("Could not find root element to mount to");const q6=LR.createRoot(QI);q6.render(I.jsx(NR.StrictMode,{children:I.jsx(G6,{})}));

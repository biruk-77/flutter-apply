(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function wS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var bp={exports:{}},Bl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0;function MR(){if(a0)return Bl;a0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return Bl.Fragment=e,Bl.jsx=t,Bl.jsxs=t,Bl}var l0;function DR(){return l0||(l0=1,bp.exports=MR()),bp.exports}var I=DR(),Np={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function PR(){if(u0)return be;u0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function w(V){return V===null||typeof V!="object"?null:(V=S&&V[S]||V["@@iterator"],typeof V=="function"?V:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,F={};function K(V,ee,le){this.props=V,this.context=ee,this.refs=F,this.updater=le||P}K.prototype.isReactComponent={},K.prototype.setState=function(V,ee){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ee,"setState")},K.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function $(){}$.prototype=K.prototype;function W(V,ee,le){this.props=V,this.context=ee,this.refs=F,this.updater=le||P}var ie=W.prototype=new $;ie.constructor=W,O(ie,K.prototype),ie.isPureReactComponent=!0;var ae=Array.isArray;function j(){}var N={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function M(V,ee,le){var ce=le.ref;return{$$typeof:n,type:V,key:ee,ref:ce!==void 0?ce:null,props:le}}function L(V,ee){return M(V.type,ee,V.props)}function U(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function q(V){var ee={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(le){return ee[le]})}var D=/\/+/g;function xe(V,ee){return typeof V=="object"&&V!==null&&V.key!=null?q(""+V.key):ee.toString(36)}function nt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(j,j):(V.status="pending",V.then(function(ee){V.status==="pending"&&(V.status="fulfilled",V.value=ee)},function(ee){V.status==="pending"&&(V.status="rejected",V.reason=ee)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Z(V,ee,le,ce,Te){var Me=typeof V;(Me==="undefined"||Me==="boolean")&&(V=null);var ze=!1;if(V===null)ze=!0;else switch(Me){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(V.$$typeof){case n:case e:ze=!0;break;case v:return ze=V._init,Z(ze(V._payload),ee,le,ce,Te)}}if(ze)return Te=Te(V),ze=ce===""?"."+xe(V,0):ce,ae(Te)?(le="",ze!=null&&(le=ze.replace(D,"$&/")+"/"),Z(Te,ee,le,"",function(Ar){return Ar})):Te!=null&&(U(Te)&&(Te=L(Te,le+(Te.key==null||V&&V.key===Te.key?"":(""+Te.key).replace(D,"$&/")+"/")+ze)),ee.push(Te)),1;ze=0;var Vt=ce===""?".":ce+":";if(ae(V))for(var ft=0;ft<V.length;ft++)ce=V[ft],Me=Vt+xe(ce,ft),ze+=Z(ce,ee,le,Me,Te);else if(ft=w(V),typeof ft=="function")for(V=ft.call(V),ft=0;!(ce=V.next()).done;)ce=ce.value,Me=Vt+xe(ce,ft++),ze+=Z(ce,ee,le,Me,Te);else if(Me==="object"){if(typeof V.then=="function")return Z(nt(V),ee,le,ce,Te);throw ee=String(V),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return ze}function fe(V,ee,le){if(V==null)return V;var ce=[],Te=0;return Z(V,ce,"","",function(Me){return ee.call(le,Me,Te++)}),ce}function me(V){if(V._status===-1){var ee=V._result;ee=ee(),ee.then(function(le){(V._status===0||V._status===-1)&&(V._status=1,V._result=le)},function(le){(V._status===0||V._status===-1)&&(V._status=2,V._result=le)}),V._status===-1&&(V._status=0,V._result=ee)}if(V._status===1)return V._result.default;throw V._result}var ke=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},de={map:fe,forEach:function(V,ee,le){fe(V,function(){ee.apply(this,arguments)},le)},count:function(V){var ee=0;return fe(V,function(){ee++}),ee},toArray:function(V){return fe(V,function(ee){return ee})||[]},only:function(V){if(!U(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return be.Activity=E,be.Children=de,be.Component=K,be.Fragment=t,be.Profiler=o,be.PureComponent=W,be.StrictMode=i,be.Suspense=m,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,be.__COMPILER_RUNTIME={__proto__:null,c:function(V){return N.H.useMemoCache(V)}},be.cache=function(V){return function(){return V.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(V,ee,le){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ce=O({},V.props),Te=V.key;if(ee!=null)for(Me in ee.key!==void 0&&(Te=""+ee.key),ee)!x.call(ee,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&ee.ref===void 0||(ce[Me]=ee[Me]);var Me=arguments.length-2;if(Me===1)ce.children=le;else if(1<Me){for(var ze=Array(Me),Vt=0;Vt<Me;Vt++)ze[Vt]=arguments[Vt+2];ce.children=ze}return M(V.type,Te,ce)},be.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:a,_context:V},V},be.createElement=function(V,ee,le){var ce,Te={},Me=null;if(ee!=null)for(ce in ee.key!==void 0&&(Me=""+ee.key),ee)x.call(ee,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Te[ce]=ee[ce]);var ze=arguments.length-2;if(ze===1)Te.children=le;else if(1<ze){for(var Vt=Array(ze),ft=0;ft<ze;ft++)Vt[ft]=arguments[ft+2];Te.children=Vt}if(V&&V.defaultProps)for(ce in ze=V.defaultProps,ze)Te[ce]===void 0&&(Te[ce]=ze[ce]);return M(V,Me,Te)},be.createRef=function(){return{current:null}},be.forwardRef=function(V){return{$$typeof:d,render:V}},be.isValidElement=U,be.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:me}},be.memo=function(V,ee){return{$$typeof:h,type:V,compare:ee===void 0?null:ee}},be.startTransition=function(V){var ee=N.T,le={};N.T=le;try{var ce=V(),Te=N.S;Te!==null&&Te(le,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(j,ke)}catch(Me){ke(Me)}finally{ee!==null&&le.types!==null&&(ee.types=le.types),N.T=ee}},be.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},be.use=function(V){return N.H.use(V)},be.useActionState=function(V,ee,le){return N.H.useActionState(V,ee,le)},be.useCallback=function(V,ee){return N.H.useCallback(V,ee)},be.useContext=function(V){return N.H.useContext(V)},be.useDebugValue=function(){},be.useDeferredValue=function(V,ee){return N.H.useDeferredValue(V,ee)},be.useEffect=function(V,ee){return N.H.useEffect(V,ee)},be.useEffectEvent=function(V){return N.H.useEffectEvent(V)},be.useId=function(){return N.H.useId()},be.useImperativeHandle=function(V,ee,le){return N.H.useImperativeHandle(V,ee,le)},be.useInsertionEffect=function(V,ee){return N.H.useInsertionEffect(V,ee)},be.useLayoutEffect=function(V,ee){return N.H.useLayoutEffect(V,ee)},be.useMemo=function(V,ee){return N.H.useMemo(V,ee)},be.useOptimistic=function(V,ee){return N.H.useOptimistic(V,ee)},be.useReducer=function(V,ee,le){return N.H.useReducer(V,ee,le)},be.useRef=function(V){return N.H.useRef(V)},be.useState=function(V){return N.H.useState(V)},be.useSyncExternalStore=function(V,ee,le){return N.H.useSyncExternalStore(V,ee,le)},be.useTransition=function(){return N.H.useTransition()},be.version="19.2.4",be}var c0;function Lm(){return c0||(c0=1,Np.exports=PR()),Np.exports}var Ee=Lm();const VR=wS(Ee);var xp={exports:{}},Hl={},Mp={exports:{}},Dp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function kR(){return f0||(f0=1,(function(n){function e(Z,fe){var me=Z.length;Z.push(fe);e:for(;0<me;){var ke=me-1>>>1,de=Z[ke];if(0<o(de,fe))Z[ke]=fe,Z[me]=de,me=ke;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var fe=Z[0],me=Z.pop();if(me!==fe){Z[0]=me;e:for(var ke=0,de=Z.length,V=de>>>1;ke<V;){var ee=2*(ke+1)-1,le=Z[ee],ce=ee+1,Te=Z[ce];if(0>o(le,me))ce<de&&0>o(Te,le)?(Z[ke]=Te,Z[ce]=me,ke=ce):(Z[ke]=le,Z[ee]=me,ke=ee);else if(ce<de&&0>o(Te,me))Z[ke]=Te,Z[ce]=me,ke=ce;else break e}}return fe}function o(Z,fe){var me=Z.sortIndex-fe.sortIndex;return me!==0?me:Z.id-fe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var m=[],h=[],v=1,E=null,S=3,w=!1,P=!1,O=!1,F=!1,K=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function ie(Z){for(var fe=t(h);fe!==null;){if(fe.callback===null)i(h);else if(fe.startTime<=Z)i(h),fe.sortIndex=fe.expirationTime,e(m,fe);else break;fe=t(h)}}function ae(Z){if(O=!1,ie(Z),!P)if(t(m)!==null)P=!0,j||(j=!0,q());else{var fe=t(h);fe!==null&&nt(ae,fe.startTime-Z)}}var j=!1,N=-1,x=5,M=-1;function L(){return F?!0:!(n.unstable_now()-M<x)}function U(){if(F=!1,j){var Z=n.unstable_now();M=Z;var fe=!0;try{e:{P=!1,O&&(O=!1,$(N),N=-1),w=!0;var me=S;try{t:{for(ie(Z),E=t(m);E!==null&&!(E.expirationTime>Z&&L());){var ke=E.callback;if(typeof ke=="function"){E.callback=null,S=E.priorityLevel;var de=ke(E.expirationTime<=Z);if(Z=n.unstable_now(),typeof de=="function"){E.callback=de,ie(Z),fe=!0;break t}E===t(m)&&i(m),ie(Z)}else i(m);E=t(m)}if(E!==null)fe=!0;else{var V=t(h);V!==null&&nt(ae,V.startTime-Z),fe=!1}}break e}finally{E=null,S=me,w=!1}fe=void 0}}finally{fe?q():j=!1}}}var q;if(typeof W=="function")q=function(){W(U)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,xe=D.port2;D.port1.onmessage=U,q=function(){xe.postMessage(null)}}else q=function(){K(U,0)};function nt(Z,fe){N=K(function(){Z(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(Z){switch(S){case 1:case 2:case 3:var fe=3;break;default:fe=S}var me=S;S=fe;try{return Z()}finally{S=me}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(Z,fe){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var me=S;S=Z;try{return fe()}finally{S=me}},n.unstable_scheduleCallback=function(Z,fe,me){var ke=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?ke+me:ke):me=ke,Z){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=me+de,Z={id:v++,callback:fe,priorityLevel:Z,startTime:me,expirationTime:de,sortIndex:-1},me>ke?(Z.sortIndex=me,e(h,Z),t(m)===null&&Z===t(h)&&(O?($(N),N=-1):O=!0,nt(ae,me-ke))):(Z.sortIndex=de,e(m,Z),P||w||(P=!0,j||(j=!0,q()))),Z},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(Z){var fe=S;return function(){var me=S;S=fe;try{return Z.apply(this,arguments)}finally{S=me}}}})(Dp)),Dp}var d0;function UR(){return d0||(d0=1,Mp.exports=kR()),Mp.exports}var Pp={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function LR(){if(h0)return tn;h0=1;var n=Lm();function e(m){var h="https://react.dev/errors/"+m;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(m,h,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:m,containerInfo:h,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,h){if(m==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,tn.createPortal=function(m,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(m,h,null,v)},tn.flushSync=function(m){var h=u.T,v=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=h,i.p=v,i.d.f()}},tn.preconnect=function(m,h){typeof m=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(m,h))},tn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},tn.preinit=function(m,h){if(typeof m=="string"&&h&&typeof h.as=="string"){var v=h.as,E=d(v,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?i.d.S(m,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:w}):v==="script"&&i.d.X(m,{crossOrigin:E,integrity:S,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},tn.preinitModule=function(m,h){if(typeof m=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=d(h.as,h.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(m)},tn.preload=function(m,h){if(typeof m=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,E=d(v,h.crossOrigin);i.d.L(m,v,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},tn.preloadModule=function(m,h){if(typeof m=="string")if(h){var v=d(h.as,h.crossOrigin);i.d.m(m,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(m)},tn.requestFormReset=function(m){i.d.r(m)},tn.unstable_batchedUpdates=function(m,h){return m(h)},tn.useFormState=function(m,h,v){return u.H.useFormState(m,h,v)},tn.useFormStatus=function(){return u.H.useHostTransitionStatus()},tn.version="19.2.4",tn}var p0;function OR(){if(p0)return Pp.exports;p0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Pp.exports=LR(),Pp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function FR(){if(m0)return Hl;m0=1;var n=UR(),e=Lm(),t=OR();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function m(s){if(a(s)!==s)throw Error(i(188))}function h(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return m(y),s;if(_===c)return m(y),r;_=_.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=_;else{for(var A=!1,R=y.child;R;){if(R===l){A=!0,l=y,c=_;break}if(R===c){A=!0,c=y,l=_;break}R=R.sibling}if(!A){for(R=_.child;R;){if(R===l){A=!0,l=_,c=y;break}if(R===c){A=!0,c=_,l=y;break}R=R.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),W=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function xe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case O:return"Fragment";case K:return"Profiler";case F:return"StrictMode";case ae:return"Suspense";case j:return"SuspenseList";case M:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case P:return"Portal";case W:return s.displayName||"Context";case $:return(s._context.displayName||"Context")+".Consumer";case ie:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case N:return r=s.displayName||null,r!==null?r:xe(s.type)||"Memo";case x:r=s._payload,s=s._init;try{return xe(s(r))}catch{}}return null}var nt=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},ke=[],de=-1;function V(s){return{current:s}}function ee(s){0>de||(s.current=ke[de],ke[de]=null,de--)}function le(s,r){de++,ke[de]=s.current,s.current=r}var ce=V(null),Te=V(null),Me=V(null),ze=V(null);function Vt(s,r){switch(le(Me,r),le(Te,s),le(ce,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?xv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=xv(r),s=Mv(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ee(ce),le(ce,s)}function ft(){ee(ce),ee(Te),ee(Me)}function Ar(s){s.memoizedState!==null&&le(ze,s);var r=ce.current,l=Mv(r,s.type);r!==l&&(le(Te,s),le(ce,l))}function _o(s){Te.current===s&&(ee(ce),ee(Te)),ze.current===s&&(ee(ze),Ol._currentValue=me)}var vo,Eo;function gi(s){if(vo===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);vo=r&&r[1]||"",Eo=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vo+s+Eo}var Oa=!1;function Cr(s,r){if(!s||Oa)return"";Oa=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(X){var Y=X}Reflect.construct(s,[],se)}else{try{se.call()}catch(X){Y=X}s.call(se.prototype)}}else{try{throw Error()}catch(X){Y=X}(se=s())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(X){if(X&&Y&&typeof X.stack=="string")return[X.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),A=_[0],R=_[1];if(A&&R){var k=A.split(`
`),J=R.split(`
`);for(y=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(c===k.length||y===J.length)for(c=k.length-1,y=J.length-1;1<=c&&0<=y&&k[c]!==J[y];)y--;for(;1<=c&&0<=y;c--,y--)if(k[c]!==J[y]){if(c!==1||y!==1)do if(c--,y--,0>y||k[c]!==J[y]){var te=`
`+k[c].replace(" at new "," at ");return s.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",s.displayName)),te}while(1<=c&&0<=y);break}}}finally{Oa=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?gi(l):""}function Fa(s,r){switch(s.tag){case 26:case 27:case 5:return gi(s.type);case 16:return gi("Lazy");case 13:return s.child!==r&&r!==null?gi("Suspense Fallback"):gi("Suspense");case 19:return gi("SuspenseList");case 0:case 15:return Cr(s.type,!1);case 11:return Cr(s.type.render,!1);case 1:return Cr(s.type,!0);case 31:return gi("Activity");default:return""}}function Ga(s){try{var r="",l=null;do r+=Fa(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var At=Object.prototype.hasOwnProperty,kt=n.unstable_scheduleCallback,As=n.unstable_cancelCallback,xd=n.unstable_shouldYield,Pu=n.unstable_requestPaint,ln=n.unstable_now,Ir=n.unstable_getCurrentPriorityLevel,qa=n.unstable_ImmediatePriority,Ba=n.unstable_UserBlockingPriority,Cs=n.unstable_NormalPriority,Md=n.unstable_LowPriority,Vu=n.unstable_IdlePriority,ku=n.log,Uu=n.unstable_setDisableYieldValue,Wn=null,Jt=null;function Pn(s){if(typeof ku=="function"&&Uu(s),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(Wn,s)}catch{}}var _t=Math.clz32?Math.clz32:Ou,Lu=Math.log,To=Math.LN2;function Ou(s){return s>>>=0,s===0?32:31-(Lu(s)/To|0)|0}var yi=256,wr=262144,Ct=4194304;function _i(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function vi(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,_=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var R=c&134217727;return R!==0?(c=R&~_,c!==0?y=_i(c):(A&=R,A!==0?y=_i(A):l||(l=R&~s,l!==0&&(y=_i(l))))):(R=c&~_,R!==0?y=_i(R):A!==0?y=_i(A):l||(l=c&~s,l!==0&&(y=_i(l)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,l=r&-r,_>=l||_===32&&(l&4194048)!==0)?r:y}function jn(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Dd(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fu(){var s=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),s}function Ei(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function Rr(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Pd(s,r,l,c,y,_){var A=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var R=s.entanglements,k=s.expirationTimes,J=s.hiddenUpdates;for(l=A&~l;0<l;){var te=31-_t(l),se=1<<te;R[te]=0,k[te]=-1;var Y=J[te];if(Y!==null)for(J[te]=null,te=0;te<Y.length;te++){var X=Y[te];X!==null&&(X.lane&=-536870913)}l&=~se}c!==0&&br(s,c,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(A&~r))}function br(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-_t(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function Ha(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-_t(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function za(s,r){var l=r&-r;return l=(l&42)!==0?1:Nr(l),(l&(s.suspendedLanes|r))!==0?0:l}function Nr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ji(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Gu(){var s=fe.p;return s!==0?s:(s=window.event,s===void 0?32:e0(s.type))}function Zn(s,r){var l=fe.p;try{return fe.p=s,r()}finally{fe.p=l}}var ei=Math.random().toString(36).slice(2),It="__reactFiber$"+ei,Ft="__reactProps$"+ei,Ti="__reactContainer$"+ei,So="__reactEvents$"+ei,Vd="__reactListeners$"+ei,qu="__reactHandles$"+ei,Bu="__reactResources$"+ei,Si="__reactMarker$"+ei;function Ao(s){delete s[It],delete s[Ft],delete s[So],delete s[Vd],delete s[qu]}function Ai(s){var r=s[It];if(r)return r;for(var l=s.parentNode;l;){if(r=l[Ti]||l[It]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=Ov(s);s!==null;){if(l=s[It])return l;s=Ov(s)}return r}s=l,l=s.parentNode}return null}function Vn(s){if(s=s[It]||s[Ti]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function Sn(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function Ci(s){var r=s[Bu];return r||(r=s[Bu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function wt(s){s[Si]=!0}var Ja=new Set,Ya={};function Ii(s,r){wi(s,r),wi(s+"Capture",r)}function wi(s,r){for(Ya[s]=r,s=0;s<r.length;s++)Ja.add(r[s])}var Ka=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$a={},Qa={};function Hu(s){return At.call(Qa,s)?!0:At.call($a,s)?!1:Ka.test(s)?Qa[s]=!0:($a[s]=!0,!1)}function Co(s,r,l){if(Hu(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function An(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function Rt(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function Gt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Is(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Xa(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,_.call(this,A)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Ze(s){if(!s._valueTracker){var r=Is(s)?"checked":"value";s._valueTracker=Xa(s,r,""+s[r])}}function xr(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=Is(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function Ri(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Mr=/[\n"\\]/g;function hn(s){return s.replace(Mr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Io(s,r,l,c,y,_,A,R){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),r!=null?A==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+Gt(r)):s.value!==""+Gt(r)&&(s.value=""+Gt(r)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),r!=null?Wa(s,A,Gt(r)):l!=null?Wa(s,A,Gt(l)):c!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+Gt(R):s.removeAttribute("name")}function zu(s,r,l,c,y,_,A,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),r!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){Ze(s);return}l=l!=null?""+Gt(l):"",r=r!=null?""+Gt(r):l,R||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=R?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),Ze(s)}function Wa(s,r,l){r==="number"&&Ri(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function ws(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+Gt(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function Ju(s,r,l){if(r!=null&&(r=""+Gt(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+Gt(l):""}function Rs(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(nt(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=Gt(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),Ze(s)}function pn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Yu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ja(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||Yu.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function Za(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&ja(s,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&ja(s,_,r[_])}function wo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ku=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ro(s){return bs.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ti(){}var el=null;function kn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ns=null,bi=null;function Dr(s){var r=Vn(s);if(r&&(s=r.stateNode)){var l=s[Ft]||null;e:switch(s=r.stateNode,r.type){case"input":if(Io(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+hn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[Ft]||null;if(!y)throw Error(i(90));Io(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&xr(c)}break e;case"textarea":Ju(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&ws(s,!!l.multiple,r,!1)}}}var bo=!1;function xs(s,r,l){if(bo)return s(r,l);bo=!0;try{var c=s(r);return c}finally{if(bo=!1,(Ns!==null||bi!==null)&&(Gc(),Ns&&(r=Ns,s=bi,bi=Ns=null,Dr(r),s)))for(r=0;r<s.length;r++)Dr(s[r])}}function ni(s,r){var l=s.stateNode;if(l===null)return null;var c=l[Ft]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pr=!1;if(Un)try{var it={};Object.defineProperty(it,"passive",{get:function(){Pr=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{Pr=!1}var Ni=null,tl=null,Vr=null;function nl(){if(Vr)return Vr;var s,r=tl,l=r.length,c,y="value"in Ni?Ni.value:Ni.textContent,_=y.length;for(s=0;s<l&&r[s]===y[s];s++);var A=l-s;for(c=1;c<=A&&r[l-c]===y[_-c];c++);return Vr=y.slice(s,1<c?1-c:void 0)}function kr(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Yi(){return!0}function ii(){return!1}function Yt(s){function r(l,c,y,_,A){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(l=s[R],this[R]=l?l(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Yi:ii,this.isPropagationStopped=ii,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),r}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xi=Yt(Ki),Ms=E({},Ki,{view:0,detail:0}),il=Yt(Ms),Ds,No,Mi,xo=E({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ps,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Mi&&(Mi&&s.type==="mousemove"?(Ds=s.screenX-Mi.screenX,No=s.screenY-Mi.screenY):No=Ds=0,Mi=s),Ds)},movementY:function(s){return"movementY"in s?s.movementY:No}}),sl=Yt(xo),Ur=E({},xo,{dataTransfer:0}),$u=Yt(Ur),Qu=E({},Ms,{relatedTarget:0}),Lr=Yt(Qu),rl=E({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),Xu=Yt(rl),Mo=E({},Ki,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Wu=Yt(Mo),ju=E({},Ki,{data:0}),Di=Yt(ju),Zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nc(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=tc[s])?!!r[s]:!1}function Ps(){return nc}var un=E({},Ms,{key:function(s){if(s.key){var r=Zu[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=kr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ec[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ps,charCode:function(s){return s.type==="keypress"?kr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?kr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ic=Yt(un),sc=E({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$i=Yt(sc),g=E({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ps}),T=Yt(g),C=E({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Yt(C),H=E({},xo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Yt(H),ue=E({},Ki,{newState:0,oldState:0}),De=Yt(ue),vt=[9,13,27,32],Qe=Un&&"CompositionEvent"in window,dt=null;Un&&"documentMode"in document&&(dt=document.documentMode);var Ln=Un&&"TextEvent"in window&&!dt,Pi=Un&&(!Qe||dt&&8<dt&&11>=dt),si=" ",ri=!1;function Or(s,r){switch(s){case"keyup":return vt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Do(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Po=!1;function tw(s,r){switch(s){case"compositionend":return Do(r);case"keypress":return r.which!==32?null:(ri=!0,si);case"textInput":return s=r.data,s===si&&ri?null:s;default:return null}}function nw(s,r){if(Po)return s==="compositionend"||!Qe&&Or(s,r)?(s=nl(),Vr=tl=Ni=null,Po=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Pi&&r.locale!=="ko"?null:r.data;default:return null}}var iw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qg(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!iw[s.type]:r==="textarea"}function Bg(s,r,l,c){Ns?bi?bi.push(c):bi=[c]:Ns=c,r=Kc(r,"onChange"),0<r.length&&(l=new xi("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var ol=null,al=null;function sw(s){Cv(s,0)}function rc(s){var r=Sn(s);if(xr(r))return s}function Hg(s,r){if(s==="change")return r}var zg=!1;if(Un){var kd;if(Un){var Ud="oninput"in document;if(!Ud){var Jg=document.createElement("div");Jg.setAttribute("oninput","return;"),Ud=typeof Jg.oninput=="function"}kd=Ud}else kd=!1;zg=kd&&(!document.documentMode||9<document.documentMode)}function Yg(){ol&&(ol.detachEvent("onpropertychange",Kg),al=ol=null)}function Kg(s){if(s.propertyName==="value"&&rc(al)){var r=[];Bg(r,al,s,kn(s)),xs(sw,r)}}function rw(s,r,l){s==="focusin"?(Yg(),ol=r,al=l,ol.attachEvent("onpropertychange",Kg)):s==="focusout"&&Yg()}function ow(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return rc(al)}function aw(s,r){if(s==="click")return rc(r)}function lw(s,r){if(s==="input"||s==="change")return rc(r)}function uw(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Cn=typeof Object.is=="function"?Object.is:uw;function ll(s,r){if(Cn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!At.call(r,y)||!Cn(s[y],r[y]))return!1}return!0}function $g(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Qg(s,r){var l=$g(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=$g(l)}}function Xg(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Xg(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Wg(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Ri(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Ri(s.document)}return r}function Ld(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var cw=Un&&"documentMode"in document&&11>=document.documentMode,Vo=null,Od=null,ul=null,Fd=!1;function jg(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Fd||Vo==null||Vo!==Ri(c)||(c=Vo,"selectionStart"in c&&Ld(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ul&&ll(ul,c)||(ul=c,c=Kc(Od,"onSelect"),0<c.length&&(r=new xi("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=Vo)))}function Fr(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var ko={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionrun:Fr("Transition","TransitionRun"),transitionstart:Fr("Transition","TransitionStart"),transitioncancel:Fr("Transition","TransitionCancel"),transitionend:Fr("Transition","TransitionEnd")},Gd={},Zg={};Un&&(Zg=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function Gr(s){if(Gd[s])return Gd[s];if(!ko[s])return s;var r=ko[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in Zg)return Gd[s]=r[l];return s}var ey=Gr("animationend"),ty=Gr("animationiteration"),ny=Gr("animationstart"),fw=Gr("transitionrun"),dw=Gr("transitionstart"),hw=Gr("transitioncancel"),iy=Gr("transitionend"),sy=new Map,qd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qd.push("scrollEnd");function oi(s,r){sy.set(s,r),Ii(r,[s])}var oc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},On=[],Uo=0,Bd=0;function ac(){for(var s=Uo,r=Bd=Uo=0;r<s;){var l=On[r];On[r++]=null;var c=On[r];On[r++]=null;var y=On[r];On[r++]=null;var _=On[r];if(On[r++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}_!==0&&ry(l,y,_)}}function lc(s,r,l,c){On[Uo++]=s,On[Uo++]=r,On[Uo++]=l,On[Uo++]=c,Bd|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Hd(s,r,l,c){return lc(s,r,l,c),uc(s)}function qr(s,r){return lc(s,null,null,r),uc(s)}function ry(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,_=s.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&r!==null&&(y=31-_t(l),s=_.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),_):null}function uc(s){if(50<Ml)throw Ml=0,jh=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Lo={};function pw(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(s,r,l,c){return new pw(s,r,l,c)}function zd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Qi(s,r){var l=s.alternate;return l===null?(l=In(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function oy(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function cc(s,r,l,c,y,_){var A=0;if(c=s,typeof s=="function")zd(s)&&(A=1);else if(typeof s=="string")A=vR(s,l,ce.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case M:return s=In(31,l,r,y),s.elementType=M,s.lanes=_,s;case O:return Br(l.children,y,_,r);case F:A=8,y|=24;break;case K:return s=In(12,l,r,y|2),s.elementType=K,s.lanes=_,s;case ae:return s=In(13,l,r,y),s.elementType=ae,s.lanes=_,s;case j:return s=In(19,l,r,y),s.elementType=j,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case W:A=10;break e;case $:A=9;break e;case ie:A=11;break e;case N:A=14;break e;case x:A=16,c=null;break e}A=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=In(A,l,r,y),r.elementType=s,r.type=c,r.lanes=_,r}function Br(s,r,l,c){return s=In(7,s,c,r),s.lanes=l,s}function Jd(s,r,l){return s=In(6,s,null,r),s.lanes=l,s}function ay(s){var r=In(18,null,null,0);return r.stateNode=s,r}function Yd(s,r,l){return r=In(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var ly=new WeakMap;function Fn(s,r){if(typeof s=="object"&&s!==null){var l=ly.get(s);return l!==void 0?l:(r={value:s,source:r,stack:Ga(r)},ly.set(s,r),r)}return{value:s,source:r,stack:Ga(r)}}var Oo=[],Fo=0,fc=null,cl=0,Gn=[],qn=0,Vs=null,Vi=1,ki="";function Xi(s,r){Oo[Fo++]=cl,Oo[Fo++]=fc,fc=s,cl=r}function uy(s,r,l){Gn[qn++]=Vi,Gn[qn++]=ki,Gn[qn++]=Vs,Vs=s;var c=Vi;s=ki;var y=32-_t(c)-1;c&=~(1<<y),l+=1;var _=32-_t(r)+y;if(30<_){var A=y-y%5;_=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Vi=1<<32-_t(r)+y|l<<y|c,ki=_+s}else Vi=1<<_|l<<y|c,ki=s}function Kd(s){s.return!==null&&(Xi(s,1),uy(s,1,0))}function $d(s){for(;s===fc;)fc=Oo[--Fo],Oo[Fo]=null,cl=Oo[--Fo],Oo[Fo]=null;for(;s===Vs;)Vs=Gn[--qn],Gn[qn]=null,ki=Gn[--qn],Gn[qn]=null,Vi=Gn[--qn],Gn[qn]=null}function cy(s,r){Gn[qn++]=Vi,Gn[qn++]=ki,Gn[qn++]=Vs,Vi=r.id,ki=r.overflow,Vs=s}var Kt=null,lt=null,He=!1,ks=null,Bn=!1,Qd=Error(i(519));function Us(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fl(Fn(r,s)),Qd}function fy(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[It]=s,r[Ft]=c,l){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(l=0;l<Pl.length;l++)Le(Pl[l],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),zu(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),Rs(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||bv(r.textContent,l)?(c.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),c.onScroll!=null&&Le("scroll",r),c.onScrollEnd!=null&&Le("scrollend",r),c.onClick!=null&&(r.onclick=ti),r=!0):r=!1,r||Us(s,!0)}function dy(s){for(Kt=s.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:Bn=!1;return;case 27:case 3:Bn=!0;return;default:Kt=Kt.return}}function Go(s){if(s!==Kt)return!1;if(!He)return dy(s),He=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||hp(s.type,s.memoizedProps)),l=!l),l&&lt&&Us(s),dy(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));lt=Lv(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));lt=Lv(s)}else r===27?(r=lt,Xs(s.type)?(s=_p,_p=null,lt=s):lt=r):lt=Kt?zn(s.stateNode.nextSibling):null;return!0}function Hr(){lt=Kt=null,He=!1}function Xd(){var s=ks;return s!==null&&(_n===null?_n=s:_n.push.apply(_n,s),ks=null),s}function fl(s){ks===null?ks=[s]:ks.push(s)}var Wd=V(null),zr=null,Wi=null;function Ls(s,r,l){le(Wd,r._currentValue),r._currentValue=l}function ji(s){s._currentValue=Wd.current,ee(Wd)}function jd(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function Zd(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var A=y.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=y;for(var k=0;k<r.length;k++)if(R.context===r[k]){_.lanes|=l,R=_.alternate,R!==null&&(R.lanes|=l),jd(_.return,l,s),c||(A=null);break e}_=R.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,_=A.alternate,_!==null&&(_.lanes|=l),jd(A,l,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function qo(s,r,l,c){s=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var R=y.type;Cn(y.pendingProps.value,A.value)||(s!==null?s.push(R):s=[R])}}else if(y===ze.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Ol):s=[Ol])}y=y.return}s!==null&&Zd(r,s,l,c),r.flags|=262144}function dc(s){for(s=s.firstContext;s!==null;){if(!Cn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Jr(s){zr=s,Wi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function $t(s){return hy(zr,s)}function hc(s,r){return zr===null&&Jr(s),hy(s,r)}function hy(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Wi===null){if(s===null)throw Error(i(308));Wi=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Wi=Wi.next=r;return l}var mw=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},gw=n.unstable_scheduleCallback,yw=n.unstable_NormalPriority,bt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function eh(){return{controller:new mw,data:new Map,refCount:0}}function dl(s){s.refCount--,s.refCount===0&&gw(yw,function(){s.controller.abort()})}var hl=null,th=0,Bo=0,Ho=null;function _w(s,r){if(hl===null){var l=hl=[];th=0,Bo=sp(),Ho={status:"pending",value:void 0,then:function(c){l.push(c)}}}return th++,r.then(py,py),r}function py(){if(--th===0&&hl!==null){Ho!==null&&(Ho.status="fulfilled");var s=hl;hl=null,Bo=0,Ho=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function vw(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var my=Z.S;Z.S=function(s,r){j_=ln(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&_w(s,r),my!==null&&my(s,r)};var Yr=V(null);function nh(){var s=Yr.current;return s!==null?s:at.pooledCache}function pc(s,r){r===null?le(Yr,Yr.current):le(Yr,r.pool)}function gy(){var s=nh();return s===null?null:{parent:bt._currentValue,pool:s}}var zo=Error(i(460)),ih=Error(i(474)),mc=Error(i(542)),gc={then:function(){}};function yy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function _y(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(ti,ti),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Ey(s),s;default:if(typeof r.status=="string")r.then(ti,ti);else{if(s=at,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Ey(s),s}throw $r=r,zo}}function Kr(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?($r=l,zo):l}}var $r=null;function vy(){if($r===null)throw Error(i(459));var s=$r;return $r=null,s}function Ey(s){if(s===zo||s===mc)throw Error(i(483))}var Jo=null,pl=0;function yc(s){var r=pl;return pl+=1,Jo===null&&(Jo=[]),_y(Jo,s,r)}function ml(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function _c(s,r){throw r.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function Ty(s){function r(B,G){if(s){var z=B.deletions;z===null?(B.deletions=[G],B.flags|=16):z.push(G)}}function l(B,G){if(!s)return null;for(;G!==null;)r(B,G),G=G.sibling;return null}function c(B){for(var G=new Map;B!==null;)B.key!==null?G.set(B.key,B):G.set(B.index,B),B=B.sibling;return G}function y(B,G){return B=Qi(B,G),B.index=0,B.sibling=null,B}function _(B,G,z){return B.index=z,s?(z=B.alternate,z!==null?(z=z.index,z<G?(B.flags|=67108866,G):z):(B.flags|=67108866,G)):(B.flags|=1048576,G)}function A(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function R(B,G,z,ne){return G===null||G.tag!==6?(G=Jd(z,B.mode,ne),G.return=B,G):(G=y(G,z),G.return=B,G)}function k(B,G,z,ne){var ve=z.type;return ve===O?te(B,G,z.props.children,ne,z.key):G!==null&&(G.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===x&&Kr(ve)===G.type)?(G=y(G,z.props),ml(G,z),G.return=B,G):(G=cc(z.type,z.key,z.props,null,B.mode,ne),ml(G,z),G.return=B,G)}function J(B,G,z,ne){return G===null||G.tag!==4||G.stateNode.containerInfo!==z.containerInfo||G.stateNode.implementation!==z.implementation?(G=Yd(z,B.mode,ne),G.return=B,G):(G=y(G,z.children||[]),G.return=B,G)}function te(B,G,z,ne,ve){return G===null||G.tag!==7?(G=Br(z,B.mode,ne,ve),G.return=B,G):(G=y(G,z),G.return=B,G)}function se(B,G,z){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Jd(""+G,B.mode,z),G.return=B,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return z=cc(G.type,G.key,G.props,null,B.mode,z),ml(z,G),z.return=B,z;case P:return G=Yd(G,B.mode,z),G.return=B,G;case x:return G=Kr(G),se(B,G,z)}if(nt(G)||q(G))return G=Br(G,B.mode,z,null),G.return=B,G;if(typeof G.then=="function")return se(B,yc(G),z);if(G.$$typeof===W)return se(B,hc(B,G),z);_c(B,G)}return null}function Y(B,G,z,ne){var ve=G!==null?G.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return ve!==null?null:R(B,G,""+z,ne);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case w:return z.key===ve?k(B,G,z,ne):null;case P:return z.key===ve?J(B,G,z,ne):null;case x:return z=Kr(z),Y(B,G,z,ne)}if(nt(z)||q(z))return ve!==null?null:te(B,G,z,ne,null);if(typeof z.then=="function")return Y(B,G,yc(z),ne);if(z.$$typeof===W)return Y(B,G,hc(B,z),ne);_c(B,z)}return null}function X(B,G,z,ne,ve){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return B=B.get(z)||null,R(G,B,""+ne,ve);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case w:return B=B.get(ne.key===null?z:ne.key)||null,k(G,B,ne,ve);case P:return B=B.get(ne.key===null?z:ne.key)||null,J(G,B,ne,ve);case x:return ne=Kr(ne),X(B,G,z,ne,ve)}if(nt(ne)||q(ne))return B=B.get(z)||null,te(G,B,ne,ve,null);if(typeof ne.then=="function")return X(B,G,z,yc(ne),ve);if(ne.$$typeof===W)return X(B,G,z,hc(G,ne),ve);_c(G,ne)}return null}function ge(B,G,z,ne){for(var ve=null,Ye=null,ye=G,Ve=G=0,Fe=null;ye!==null&&Ve<z.length;Ve++){ye.index>Ve?(Fe=ye,ye=null):Fe=ye.sibling;var Ke=Y(B,ye,z[Ve],ne);if(Ke===null){ye===null&&(ye=Fe);break}s&&ye&&Ke.alternate===null&&r(B,ye),G=_(Ke,G,Ve),Ye===null?ve=Ke:Ye.sibling=Ke,Ye=Ke,ye=Fe}if(Ve===z.length)return l(B,ye),He&&Xi(B,Ve),ve;if(ye===null){for(;Ve<z.length;Ve++)ye=se(B,z[Ve],ne),ye!==null&&(G=_(ye,G,Ve),Ye===null?ve=ye:Ye.sibling=ye,Ye=ye);return He&&Xi(B,Ve),ve}for(ye=c(ye);Ve<z.length;Ve++)Fe=X(ye,B,Ve,z[Ve],ne),Fe!==null&&(s&&Fe.alternate!==null&&ye.delete(Fe.key===null?Ve:Fe.key),G=_(Fe,G,Ve),Ye===null?ve=Fe:Ye.sibling=Fe,Ye=Fe);return s&&ye.forEach(function(tr){return r(B,tr)}),He&&Xi(B,Ve),ve}function Ae(B,G,z,ne){if(z==null)throw Error(i(151));for(var ve=null,Ye=null,ye=G,Ve=G=0,Fe=null,Ke=z.next();ye!==null&&!Ke.done;Ve++,Ke=z.next()){ye.index>Ve?(Fe=ye,ye=null):Fe=ye.sibling;var tr=Y(B,ye,Ke.value,ne);if(tr===null){ye===null&&(ye=Fe);break}s&&ye&&tr.alternate===null&&r(B,ye),G=_(tr,G,Ve),Ye===null?ve=tr:Ye.sibling=tr,Ye=tr,ye=Fe}if(Ke.done)return l(B,ye),He&&Xi(B,Ve),ve;if(ye===null){for(;!Ke.done;Ve++,Ke=z.next())Ke=se(B,Ke.value,ne),Ke!==null&&(G=_(Ke,G,Ve),Ye===null?ve=Ke:Ye.sibling=Ke,Ye=Ke);return He&&Xi(B,Ve),ve}for(ye=c(ye);!Ke.done;Ve++,Ke=z.next())Ke=X(ye,B,Ve,Ke.value,ne),Ke!==null&&(s&&Ke.alternate!==null&&ye.delete(Ke.key===null?Ve:Ke.key),G=_(Ke,G,Ve),Ye===null?ve=Ke:Ye.sibling=Ke,Ye=Ke);return s&&ye.forEach(function(xR){return r(B,xR)}),He&&Xi(B,Ve),ve}function ot(B,G,z,ne){if(typeof z=="object"&&z!==null&&z.type===O&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case w:e:{for(var ve=z.key;G!==null;){if(G.key===ve){if(ve=z.type,ve===O){if(G.tag===7){l(B,G.sibling),ne=y(G,z.props.children),ne.return=B,B=ne;break e}}else if(G.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===x&&Kr(ve)===G.type){l(B,G.sibling),ne=y(G,z.props),ml(ne,z),ne.return=B,B=ne;break e}l(B,G);break}else r(B,G);G=G.sibling}z.type===O?(ne=Br(z.props.children,B.mode,ne,z.key),ne.return=B,B=ne):(ne=cc(z.type,z.key,z.props,null,B.mode,ne),ml(ne,z),ne.return=B,B=ne)}return A(B);case P:e:{for(ve=z.key;G!==null;){if(G.key===ve)if(G.tag===4&&G.stateNode.containerInfo===z.containerInfo&&G.stateNode.implementation===z.implementation){l(B,G.sibling),ne=y(G,z.children||[]),ne.return=B,B=ne;break e}else{l(B,G);break}else r(B,G);G=G.sibling}ne=Yd(z,B.mode,ne),ne.return=B,B=ne}return A(B);case x:return z=Kr(z),ot(B,G,z,ne)}if(nt(z))return ge(B,G,z,ne);if(q(z)){if(ve=q(z),typeof ve!="function")throw Error(i(150));return z=ve.call(z),Ae(B,G,z,ne)}if(typeof z.then=="function")return ot(B,G,yc(z),ne);if(z.$$typeof===W)return ot(B,G,hc(B,z),ne);_c(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,G!==null&&G.tag===6?(l(B,G.sibling),ne=y(G,z),ne.return=B,B=ne):(l(B,G),ne=Jd(z,B.mode,ne),ne.return=B,B=ne),A(B)):l(B,G)}return function(B,G,z,ne){try{pl=0;var ve=ot(B,G,z,ne);return Jo=null,ve}catch(ye){if(ye===zo||ye===mc)throw ye;var Ye=In(29,ye,null,B.mode);return Ye.lanes=ne,Ye.return=B,Ye}finally{}}}var Qr=Ty(!0),Sy=Ty(!1),Os=!1;function sh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Fs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Gs(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Xe&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=uc(s),ry(s,null,l),r}return lc(s,c,r,l),uc(s)}function gl(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Ha(s,l)}}function oh(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=A:_=_.next=A,l=l.next}while(l!==null);_===null?y=_=r:_=_.next=r}else y=_=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var ah=!1;function yl(){if(ah){var s=Ho;if(s!==null)throw s}}function _l(s,r,l,c){ah=!1;var y=s.updateQueue;Os=!1;var _=y.firstBaseUpdate,A=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var k=R,J=k.next;k.next=null,A===null?_=J:A.next=J,A=k;var te=s.alternate;te!==null&&(te=te.updateQueue,R=te.lastBaseUpdate,R!==A&&(R===null?te.firstBaseUpdate=J:R.next=J,te.lastBaseUpdate=k))}if(_!==null){var se=y.baseState;A=0,te=J=k=null,R=_;do{var Y=R.lane&-536870913,X=Y!==R.lane;if(X?(Oe&Y)===Y:(c&Y)===Y){Y!==0&&Y===Bo&&(ah=!0),te!==null&&(te=te.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ge=s,Ae=R;Y=r;var ot=l;switch(Ae.tag){case 1:if(ge=Ae.payload,typeof ge=="function"){se=ge.call(ot,se,Y);break e}se=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ae.payload,Y=typeof ge=="function"?ge.call(ot,se,Y):ge,Y==null)break e;se=E({},se,Y);break e;case 2:Os=!0}}Y=R.callback,Y!==null&&(s.flags|=64,X&&(s.flags|=8192),X=y.callbacks,X===null?y.callbacks=[Y]:X.push(Y))}else X={lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},te===null?(J=te=X,k=se):te=te.next=X,A|=Y;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;X=R,R=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);te===null&&(k=se),y.baseState=k,y.firstBaseUpdate=J,y.lastBaseUpdate=te,_===null&&(y.shared.lanes=0),Js|=A,s.lanes=A,s.memoizedState=se}}function Ay(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function Cy(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Ay(l[s],r)}var Yo=V(null),vc=V(0);function Iy(s,r){s=as,le(vc,s),le(Yo,r),as=s|r.baseLanes}function lh(){le(vc,as),le(Yo,Yo.current)}function uh(){as=vc.current,ee(Yo),ee(vc)}var wn=V(null),Hn=null;function qs(s){var r=s.alternate;le(Et,Et.current&1),le(wn,s),Hn===null&&(r===null||Yo.current!==null||r.memoizedState!==null)&&(Hn=s)}function ch(s){le(Et,Et.current),le(wn,s),Hn===null&&(Hn=s)}function wy(s){s.tag===22?(le(Et,Et.current),le(wn,s),Hn===null&&(Hn=s)):Bs()}function Bs(){le(Et,Et.current),le(wn,wn.current)}function Rn(s){ee(wn),Hn===s&&(Hn=null),ee(Et)}var Et=V(0);function Ec(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||gp(l)||yp(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Zi=0,Pe=null,st=null,Nt=null,Tc=!1,Ko=!1,Xr=!1,Sc=0,vl=0,$o=null,Ew=0;function gt(){throw Error(i(321))}function fh(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!Cn(s[l],r[l]))return!1;return!0}function dh(s,r,l,c,y,_){return Zi=_,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Z.H=s===null||s.memoizedState===null?u_:Rh,Xr=!1,_=l(c,y),Xr=!1,Ko&&(_=by(r,l,c,y)),Ry(s),_}function Ry(s){Z.H=Sl;var r=st!==null&&st.next!==null;if(Zi=0,Nt=st=Pe=null,Tc=!1,vl=0,$o=null,r)throw Error(i(300));s===null||xt||(s=s.dependencies,s!==null&&dc(s)&&(xt=!0))}function by(s,r,l,c){Pe=s;var y=0;do{if(Ko&&($o=null),vl=0,Ko=!1,25<=y)throw Error(i(301));if(y+=1,Nt=st=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Z.H=c_,_=r(l,c)}while(Ko);return _}function Tw(){var s=Z.H,r=s.useState()[0];return r=typeof r.then=="function"?El(r):r,s=s.useState()[0],(st!==null?st.memoizedState:null)!==s&&(Pe.flags|=1024),r}function hh(){var s=Sc!==0;return Sc=0,s}function ph(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function mh(s){if(Tc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Tc=!1}Zi=0,Nt=st=Pe=null,Ko=!1,vl=Sc=0,$o=null}function cn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Pe.memoizedState=Nt=s:Nt=Nt.next=s,Nt}function Tt(){if(st===null){var s=Pe.alternate;s=s!==null?s.memoizedState:null}else s=st.next;var r=Nt===null?Pe.memoizedState:Nt.next;if(r!==null)Nt=r,st=s;else{if(s===null)throw Pe.alternate===null?Error(i(467)):Error(i(310));st=s,s={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Nt===null?Pe.memoizedState=Nt=s:Nt=Nt.next=s}return Nt}function Ac(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function El(s){var r=vl;return vl+=1,$o===null&&($o=[]),s=_y($o,s,r),r=Pe,(Nt===null?r.memoizedState:Nt.next)===null&&(r=r.alternate,Z.H=r===null||r.memoizedState===null?u_:Rh),s}function Cc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return El(s);if(s.$$typeof===W)return $t(s)}throw Error(i(438,String(s)))}function gh(s){var r=null,l=Pe.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=Pe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Ac(),Pe.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=L;return r.index++,l}function es(s,r){return typeof r=="function"?r(s):r}function Ic(s){var r=Tt();return yh(r,st,s)}function yh(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,_=c.pending;if(_!==null){if(y!==null){var A=y.next;y.next=_.next,_.next=A}r.baseQueue=y=_,c.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{r=y.next;var R=A=null,k=null,J=r,te=!1;do{var se=J.lane&-536870913;if(se!==J.lane?(Oe&se)===se:(Zi&se)===se){var Y=J.revertLane;if(Y===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),se===Bo&&(te=!0);else if((Zi&Y)===Y){J=J.next,Y===Bo&&(te=!0);continue}else se={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(R=k=se,A=_):k=k.next=se,Pe.lanes|=Y,Js|=Y;se=J.action,Xr&&l(_,se),_=J.hasEagerState?J.eagerState:l(_,se)}else Y={lane:se,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(R=k=Y,A=_):k=k.next=Y,Pe.lanes|=se,Js|=se;J=J.next}while(J!==null&&J!==r);if(k===null?A=_:k.next=R,!Cn(_,s.memoizedState)&&(xt=!0,te&&(l=Ho,l!==null)))throw l;s.memoizedState=_,s.baseState=A,s.baseQueue=k,c.lastRenderedState=_}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function _h(s){var r=Tt(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,_=r.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do _=s(_,A.action),A=A.next;while(A!==y);Cn(_,r.memoizedState)||(xt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),l.lastRenderedState=_}return[_,c]}function Ny(s,r,l){var c=Pe,y=Tt(),_=He;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=r();var A=!Cn((st||y).memoizedState,l);if(A&&(y.memoizedState=l,xt=!0),y=y.queue,Th(Dy.bind(null,c,y,s),[s]),y.getSnapshot!==r||A||Nt!==null&&Nt.memoizedState.tag&1){if(c.flags|=2048,Qo(9,{destroy:void 0},My.bind(null,c,y,l,r),null),at===null)throw Error(i(349));_||(Zi&127)!==0||xy(c,r,l)}return l}function xy(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=Pe.updateQueue,r===null?(r=Ac(),Pe.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function My(s,r,l,c){r.value=l,r.getSnapshot=c,Py(r)&&Vy(s)}function Dy(s,r,l){return l(function(){Py(r)&&Vy(s)})}function Py(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!Cn(s,l)}catch{return!0}}function Vy(s){var r=qr(s,2);r!==null&&vn(r,s,2)}function vh(s){var r=cn();if(typeof s=="function"){var l=s;if(s=l(),Xr){Pn(!0);try{l()}finally{Pn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:s},r}function ky(s,r,l,c){return s.baseState=l,yh(s,st,typeof c=="function"?c:es)}function Sw(s,r,l,c,y){if(bc(s))throw Error(i(485));if(s=r.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};Z.T!==null?l(!0):_.isTransition=!1,c(_),l=r.pending,l===null?(_.next=r.pending=_,Uy(r,_)):(_.next=l.next,r.pending=l.next=_)}}function Uy(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var _=Z.T,A={};Z.T=A;try{var R=l(y,c),k=Z.S;k!==null&&k(A,R),Ly(s,r,R)}catch(J){Eh(s,r,J)}finally{_!==null&&A.types!==null&&(_.types=A.types),Z.T=_}}else try{_=l(y,c),Ly(s,r,_)}catch(J){Eh(s,r,J)}}function Ly(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Oy(s,r,c)},function(c){return Eh(s,r,c)}):Oy(s,r,l)}function Oy(s,r,l){r.status="fulfilled",r.value=l,Fy(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,Uy(s,l)))}function Eh(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,Fy(r),r=r.next;while(r!==c)}s.action=null}function Fy(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Gy(s,r){return r}function qy(s,r){if(He){var l=at.formState;if(l!==null){e:{var c=Pe;if(He){if(lt){t:{for(var y=lt,_=Bn;y.nodeType!==8;){if(!_){y=null;break t}if(y=zn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){lt=zn(y.nextSibling),c=y.data==="F!";break e}}Us(c)}c=!1}c&&(r=l[0])}}return l=cn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gy,lastRenderedState:r},l.queue=c,l=o_.bind(null,Pe,c),c.dispatch=l,c=vh(!1),_=wh.bind(null,Pe,!1,c.queue),c=cn(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=Sw.bind(null,Pe,y,_,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function By(s){var r=Tt();return Hy(r,st,s)}function Hy(s,r,l){if(r=yh(s,r,Gy)[0],s=Ic(es)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=El(r)}catch(A){throw A===zo?mc:A}else c=r;r=Tt();var y=r.queue,_=y.dispatch;return l!==r.memoizedState&&(Pe.flags|=2048,Qo(9,{destroy:void 0},Aw.bind(null,y,l),null)),[c,_,s]}function Aw(s,r){s.action=r}function zy(s){var r=Tt(),l=st;if(l!==null)return Hy(r,l,s);Tt(),r=r.memoizedState,l=Tt();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function Qo(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=Pe.updateQueue,r===null&&(r=Ac(),Pe.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function Jy(){return Tt().memoizedState}function wc(s,r,l,c){var y=cn();Pe.flags|=s,y.memoizedState=Qo(1|r,{destroy:void 0},l,c===void 0?null:c)}function Rc(s,r,l,c){var y=Tt();c=c===void 0?null:c;var _=y.memoizedState.inst;st!==null&&c!==null&&fh(c,st.memoizedState.deps)?y.memoizedState=Qo(r,_,l,c):(Pe.flags|=s,y.memoizedState=Qo(1|r,_,l,c))}function Yy(s,r){wc(8390656,8,s,r)}function Th(s,r){Rc(2048,8,s,r)}function Cw(s){Pe.flags|=4;var r=Pe.updateQueue;if(r===null)r=Ac(),Pe.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function Ky(s){var r=Tt().memoizedState;return Cw({ref:r,nextImpl:s}),function(){if((Xe&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function $y(s,r){return Rc(4,2,s,r)}function Qy(s,r){return Rc(4,4,s,r)}function Xy(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Wy(s,r,l){l=l!=null?l.concat([s]):null,Rc(4,4,Xy.bind(null,r,s),l)}function Sh(){}function jy(s,r){var l=Tt();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&fh(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function Zy(s,r){var l=Tt();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&fh(r,c[1]))return c[0];if(c=s(),Xr){Pn(!0);try{s()}finally{Pn(!1)}}return l.memoizedState=[c,r],c}function Ah(s,r,l){return l===void 0||(Zi&1073741824)!==0&&(Oe&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=ev(),Pe.lanes|=s,Js|=s,l)}function e_(s,r,l,c){return Cn(l,r)?l:Yo.current!==null?(s=Ah(s,l,c),Cn(s,r)||(xt=!0),s):(Zi&42)===0||(Zi&1073741824)!==0&&(Oe&261930)===0?(xt=!0,s.memoizedState=l):(s=ev(),Pe.lanes|=s,Js|=s,r)}function t_(s,r,l,c,y){var _=fe.p;fe.p=_!==0&&8>_?_:8;var A=Z.T,R={};Z.T=R,wh(s,!1,r,l);try{var k=y(),J=Z.S;if(J!==null&&J(R,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var te=vw(k,c);Tl(s,r,te,xn(s))}else Tl(s,r,c,xn(s))}catch(se){Tl(s,r,{then:function(){},status:"rejected",reason:se},xn())}finally{fe.p=_,A!==null&&R.types!==null&&(A.types=R.types),Z.T=A}}function Iw(){}function Ch(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=n_(s).queue;t_(s,y,r,me,l===null?Iw:function(){return i_(s),l(c)})}function n_(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:me},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function i_(s){var r=n_(s);r.next===null&&(r=s.alternate.memoizedState),Tl(s,r.next.queue,{},xn())}function Ih(){return $t(Ol)}function s_(){return Tt().memoizedState}function r_(){return Tt().memoizedState}function ww(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=xn();s=Fs(l);var c=Gs(r,s,l);c!==null&&(vn(c,r,l),gl(c,r,l)),r={cache:eh()},s.payload=r;return}r=r.return}}function Rw(s,r,l){var c=xn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},bc(s)?a_(r,l):(l=Hd(s,r,l,c),l!==null&&(vn(l,s,c),l_(l,r,c)))}function o_(s,r,l){var c=xn();Tl(s,r,l,c)}function Tl(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(bc(s))a_(r,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var A=r.lastRenderedState,R=_(A,l);if(y.hasEagerState=!0,y.eagerState=R,Cn(R,A))return lc(s,r,y,0),at===null&&ac(),!1}catch{}finally{}if(l=Hd(s,r,y,c),l!==null)return vn(l,s,c),l_(l,r,c),!0}return!1}function wh(s,r,l,c){if(c={lane:2,revertLane:sp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},bc(s)){if(r)throw Error(i(479))}else r=Hd(s,l,c,2),r!==null&&vn(r,s,2)}function bc(s){var r=s.alternate;return s===Pe||r!==null&&r===Pe}function a_(s,r){Ko=Tc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function l_(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Ha(s,l)}}var Sl={readContext:$t,use:Cc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};Sl.useEffectEvent=gt;var u_={readContext:$t,use:Cc,useCallback:function(s,r){return cn().memoizedState=[s,r===void 0?null:r],s},useContext:$t,useEffect:Yy,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,wc(4194308,4,Xy.bind(null,r,s),l)},useLayoutEffect:function(s,r){return wc(4194308,4,s,r)},useInsertionEffect:function(s,r){wc(4,2,s,r)},useMemo:function(s,r){var l=cn();r=r===void 0?null:r;var c=s();if(Xr){Pn(!0);try{s()}finally{Pn(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=cn();if(l!==void 0){var y=l(r);if(Xr){Pn(!0);try{l(r)}finally{Pn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=Rw.bind(null,Pe,s),[c.memoizedState,s]},useRef:function(s){var r=cn();return s={current:s},r.memoizedState=s},useState:function(s){s=vh(s);var r=s.queue,l=o_.bind(null,Pe,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:Sh,useDeferredValue:function(s,r){var l=cn();return Ah(l,s,r)},useTransition:function(){var s=vh(!1);return s=t_.bind(null,Pe,s.queue,!0,!1),cn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=Pe,y=cn();if(He){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),at===null)throw Error(i(349));(Oe&127)!==0||xy(c,r,l)}y.memoizedState=l;var _={value:l,getSnapshot:r};return y.queue=_,Yy(Dy.bind(null,c,_,s),[s]),c.flags|=2048,Qo(9,{destroy:void 0},My.bind(null,c,_,l,r),null),l},useId:function(){var s=cn(),r=at.identifierPrefix;if(He){var l=ki,c=Vi;l=(c&~(1<<32-_t(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Sc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=Ew++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:Ih,useFormState:qy,useActionState:qy,useOptimistic:function(s){var r=cn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=wh.bind(null,Pe,!0,l),l.dispatch=r,[s,r]},useMemoCache:gh,useCacheRefresh:function(){return cn().memoizedState=ww.bind(null,Pe)},useEffectEvent:function(s){var r=cn(),l={impl:s};return r.memoizedState=l,function(){if((Xe&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Rh={readContext:$t,use:Cc,useCallback:jy,useContext:$t,useEffect:Th,useImperativeHandle:Wy,useInsertionEffect:$y,useLayoutEffect:Qy,useMemo:Zy,useReducer:Ic,useRef:Jy,useState:function(){return Ic(es)},useDebugValue:Sh,useDeferredValue:function(s,r){var l=Tt();return e_(l,st.memoizedState,s,r)},useTransition:function(){var s=Ic(es)[0],r=Tt().memoizedState;return[typeof s=="boolean"?s:El(s),r]},useSyncExternalStore:Ny,useId:s_,useHostTransitionStatus:Ih,useFormState:By,useActionState:By,useOptimistic:function(s,r){var l=Tt();return ky(l,st,s,r)},useMemoCache:gh,useCacheRefresh:r_};Rh.useEffectEvent=Ky;var c_={readContext:$t,use:Cc,useCallback:jy,useContext:$t,useEffect:Th,useImperativeHandle:Wy,useInsertionEffect:$y,useLayoutEffect:Qy,useMemo:Zy,useReducer:_h,useRef:Jy,useState:function(){return _h(es)},useDebugValue:Sh,useDeferredValue:function(s,r){var l=Tt();return st===null?Ah(l,s,r):e_(l,st.memoizedState,s,r)},useTransition:function(){var s=_h(es)[0],r=Tt().memoizedState;return[typeof s=="boolean"?s:El(s),r]},useSyncExternalStore:Ny,useId:s_,useHostTransitionStatus:Ih,useFormState:zy,useActionState:zy,useOptimistic:function(s,r){var l=Tt();return st!==null?ky(l,st,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:gh,useCacheRefresh:r_};c_.useEffectEvent=Ky;function bh(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:E({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Nh={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=xn(),y=Fs(c);y.payload=r,l!=null&&(y.callback=l),r=Gs(s,y,c),r!==null&&(vn(r,s,c),gl(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=xn(),y=Fs(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=Gs(s,y,c),r!==null&&(vn(r,s,c),gl(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=xn(),c=Fs(l);c.tag=2,r!=null&&(c.callback=r),r=Gs(s,c,l),r!==null&&(vn(r,s,l),gl(r,s,l))}};function f_(s,r,l,c,y,_,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,_,A):r.prototype&&r.prototype.isPureReactComponent?!ll(l,c)||!ll(y,_):!0}function d_(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&Nh.enqueueReplaceState(r,r.state,null)}function Wr(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=E({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function h_(s){oc(s)}function p_(s){console.error(s)}function m_(s){oc(s)}function Nc(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function g_(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function xh(s,r,l){return l=Fs(l),l.tag=3,l.payload={element:null},l.callback=function(){Nc(s,r)},l}function y_(s){return s=Fs(s),s.tag=3,s}function __(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;s.payload=function(){return y(_)},s.callback=function(){g_(r,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){g_(r,l,c),typeof y!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function bw(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&qo(r,l,y,!0),l=wn.current,l!==null){switch(l.tag){case 31:case 13:return Hn===null?qc():l.alternate===null&&yt===0&&(yt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===gc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),tp(s,c,y)),!1;case 22:return l.flags|=65536,c===gc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),tp(s,c,y)),!1}throw Error(i(435,l.tag))}return tp(s,c,y),qc(),!1}if(He)return r=wn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==Qd&&(s=Error(i(422),{cause:c}),fl(Fn(s,l)))):(c!==Qd&&(r=Error(i(423),{cause:c}),fl(Fn(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=Fn(c,l),y=xh(s.stateNode,c,y),oh(s,y),yt!==4&&(yt=2)),!1;var _=Error(i(520),{cause:c});if(_=Fn(_,l),xl===null?xl=[_]:xl.push(_),yt!==4&&(yt=2),r===null)return!0;c=Fn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=xh(l.stateNode,c,s),oh(l,s),!1;case 1:if(r=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ys===null||!Ys.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=y_(y),__(y,s,l,c),oh(l,y),!1}l=l.return}while(l!==null);return!1}var Mh=Error(i(461)),xt=!1;function Qt(s,r,l,c){r.child=s===null?Sy(r,null,l,c):Qr(r,s.child,l,c)}function v_(s,r,l,c,y){l=l.render;var _=r.ref;if("ref"in c){var A={};for(var R in c)R!=="ref"&&(A[R]=c[R])}else A=c;return Jr(r),c=dh(s,r,l,A,_,y),R=hh(),s!==null&&!xt?(ph(s,r,y),ts(s,r,y)):(He&&R&&Kd(r),r.flags|=1,Qt(s,r,c,y),r.child)}function E_(s,r,l,c,y){if(s===null){var _=l.type;return typeof _=="function"&&!zd(_)&&_.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=_,T_(s,r,_,c,y)):(s=cc(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(_=s.child,!Fh(s,y)){var A=_.memoizedProps;if(l=l.compare,l=l!==null?l:ll,l(A,c)&&s.ref===r.ref)return ts(s,r,y)}return r.flags|=1,s=Qi(_,c),s.ref=r.ref,s.return=r,r.child=s}function T_(s,r,l,c,y){if(s!==null){var _=s.memoizedProps;if(ll(_,c)&&s.ref===r.ref)if(xt=!1,r.pendingProps=c=_,Fh(s,y))(s.flags&131072)!==0&&(xt=!0);else return r.lanes=s.lanes,ts(s,r,y)}return Dh(s,r,l,c,y)}function S_(s,r,l,c){var y=c.children,_=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return A_(s,r,_,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&pc(r,_!==null?_.cachePool:null),_!==null?Iy(r,_):lh(),wy(r);else return c=r.lanes=536870912,A_(s,r,_!==null?_.baseLanes|l:l,l,c)}else _!==null?(pc(r,_.cachePool),Iy(r,_),Bs(),r.memoizedState=null):(s!==null&&pc(r,null),lh(),Bs());return Qt(s,r,y,l),r.child}function Al(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function A_(s,r,l,c,y){var _=nh();return _=_===null?null:{parent:bt._currentValue,pool:_},r.memoizedState={baseLanes:l,cachePool:_},s!==null&&pc(r,null),lh(),wy(r),s!==null&&qo(s,r,c,!0),r.childLanes=y,null}function xc(s,r){return r=Dc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function C_(s,r,l){return Qr(r,s.child,null,l),s=xc(r,r.pendingProps),s.flags|=2,Rn(r),r.memoizedState=null,s}function Nw(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(He){if(c.mode==="hidden")return s=xc(r,c),r.lanes=536870912,Al(null,s);if(ch(r),(s=lt)?(s=Uv(s,Bn),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Vs!==null?{id:Vi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},l=ay(s),l.return=r,r.child=l,Kt=r,lt=null)):s=null,s===null)throw Us(r);return r.lanes=536870912,null}return xc(r,c)}var _=s.memoizedState;if(_!==null){var A=_.dehydrated;if(ch(r),y)if(r.flags&256)r.flags&=-257,r=C_(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(xt||qo(s,r,l,!1),y=(l&s.childLanes)!==0,xt||y){if(c=at,c!==null&&(A=za(c,l),A!==0&&A!==_.retryLane))throw _.retryLane=A,qr(s,A),vn(c,s,A),Mh;qc(),r=C_(s,r,l)}else s=_.treeContext,lt=zn(A.nextSibling),Kt=r,He=!0,ks=null,Bn=!1,s!==null&&cy(r,s),r=xc(r,c),r.flags|=4096;return r}return s=Qi(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Mc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function Dh(s,r,l,c,y){return Jr(r),l=dh(s,r,l,c,void 0,y),c=hh(),s!==null&&!xt?(ph(s,r,y),ts(s,r,y)):(He&&c&&Kd(r),r.flags|=1,Qt(s,r,l,y),r.child)}function I_(s,r,l,c,y,_){return Jr(r),r.updateQueue=null,l=by(r,c,l,y),Ry(s),c=hh(),s!==null&&!xt?(ph(s,r,_),ts(s,r,_)):(He&&c&&Kd(r),r.flags|=1,Qt(s,r,l,_),r.child)}function w_(s,r,l,c,y){if(Jr(r),r.stateNode===null){var _=Lo,A=l.contextType;typeof A=="object"&&A!==null&&(_=$t(A)),_=new l(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Nh,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},sh(r),A=l.contextType,_.context=typeof A=="object"&&A!==null?$t(A):Lo,_.state=r.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(bh(r,l,A,c),_.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Nh.enqueueReplaceState(_,_.state,null),_l(r,c,_,y),yl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){_=r.stateNode;var R=r.memoizedProps,k=Wr(l,R);_.props=k;var J=_.context,te=l.contextType;A=Lo,typeof te=="object"&&te!==null&&(A=$t(te));var se=l.getDerivedStateFromProps;te=typeof se=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,te||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||J!==A)&&d_(r,_,c,A),Os=!1;var Y=r.memoizedState;_.state=Y,_l(r,c,_,y),yl(),J=r.memoizedState,R||Y!==J||Os?(typeof se=="function"&&(bh(r,l,se,c),J=r.memoizedState),(k=Os||f_(r,l,k,c,Y,J,A))?(te||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=J),_.props=c,_.state=J,_.context=A,c=k):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,rh(s,r),A=r.memoizedProps,te=Wr(l,A),_.props=te,se=r.pendingProps,Y=_.context,J=l.contextType,k=Lo,typeof J=="object"&&J!==null&&(k=$t(J)),R=l.getDerivedStateFromProps,(J=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==se||Y!==k)&&d_(r,_,c,k),Os=!1,Y=r.memoizedState,_.state=Y,_l(r,c,_,y),yl();var X=r.memoizedState;A!==se||Y!==X||Os||s!==null&&s.dependencies!==null&&dc(s.dependencies)?(typeof R=="function"&&(bh(r,l,R,c),X=r.memoizedState),(te=Os||f_(r,l,te,c,Y,X,k)||s!==null&&s.dependencies!==null&&dc(s.dependencies))?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,X,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,X,k)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=X),_.props=c,_.state=X,_.context=k,c=te):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),c=!1)}return _=c,Mc(s,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,s!==null&&c?(r.child=Qr(r,s.child,null,y),r.child=Qr(r,null,l,y)):Qt(s,r,l,y),r.memoizedState=_.state,s=r.child):s=ts(s,r,y),s}function R_(s,r,l,c){return Hr(),r.flags|=256,Qt(s,r,l,c),r.child}var Ph={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vh(s){return{baseLanes:s,cachePool:gy()}}function kh(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Nn),s}function b_(s,r,l){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,A;if((A=_)||(A=s!==null&&s.memoizedState===null?!1:(Et.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,s===null){if(He){if(y?qs(r):Bs(),(s=lt)?(s=Uv(s,Bn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Vs!==null?{id:Vi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},l=ay(s),l.return=r,r.child=l,Kt=r,lt=null)):s=null,s===null)throw Us(r);return yp(s)?r.lanes=32:r.lanes=536870912,null}var R=c.children;return c=c.fallback,y?(Bs(),y=r.mode,R=Dc({mode:"hidden",children:R},y),c=Br(c,y,l,null),R.return=r,c.return=r,R.sibling=c,r.child=R,c=r.child,c.memoizedState=Vh(l),c.childLanes=kh(s,A,l),r.memoizedState=Ph,Al(null,c)):(qs(r),Uh(r,R))}var k=s.memoizedState;if(k!==null&&(R=k.dehydrated,R!==null)){if(_)r.flags&256?(qs(r),r.flags&=-257,r=Lh(s,r,l)):r.memoizedState!==null?(Bs(),r.child=s.child,r.flags|=128,r=null):(Bs(),R=c.fallback,y=r.mode,c=Dc({mode:"visible",children:c.children},y),R=Br(R,y,l,null),R.flags|=2,c.return=r,R.return=r,c.sibling=R,r.child=c,Qr(r,s.child,null,l),c=r.child,c.memoizedState=Vh(l),c.childLanes=kh(s,A,l),r.memoizedState=Ph,r=Al(null,c));else if(qs(r),yp(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var J=A.dgst;A=J,c=Error(i(419)),c.stack="",c.digest=A,fl({value:c,source:null,stack:null}),r=Lh(s,r,l)}else if(xt||qo(s,r,l,!1),A=(l&s.childLanes)!==0,xt||A){if(A=at,A!==null&&(c=za(A,l),c!==0&&c!==k.retryLane))throw k.retryLane=c,qr(s,c),vn(A,s,c),Mh;gp(R)||qc(),r=Lh(s,r,l)}else gp(R)?(r.flags|=192,r.child=s.child,r=null):(s=k.treeContext,lt=zn(R.nextSibling),Kt=r,He=!0,ks=null,Bn=!1,s!==null&&cy(r,s),r=Uh(r,c.children),r.flags|=4096);return r}return y?(Bs(),R=c.fallback,y=r.mode,k=s.child,J=k.sibling,c=Qi(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,J!==null?R=Qi(J,R):(R=Br(R,y,l,null),R.flags|=2),R.return=r,c.return=r,c.sibling=R,r.child=c,Al(null,c),c=r.child,R=s.child.memoizedState,R===null?R=Vh(l):(y=R.cachePool,y!==null?(k=bt._currentValue,y=y.parent!==k?{parent:k,pool:k}:y):y=gy(),R={baseLanes:R.baseLanes|l,cachePool:y}),c.memoizedState=R,c.childLanes=kh(s,A,l),r.memoizedState=Ph,Al(s.child,c)):(qs(r),l=s.child,s=l.sibling,l=Qi(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(A=r.deletions,A===null?(r.deletions=[s],r.flags|=16):A.push(s)),r.child=l,r.memoizedState=null,l)}function Uh(s,r){return r=Dc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Dc(s,r){return s=In(22,s,null,r),s.lanes=0,s}function Lh(s,r,l){return Qr(r,s.child,null,l),s=Uh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function N_(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),jd(s.return,r,l)}function Oh(s,r,l,c,y,_){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:_}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=y,A.treeForkCount=_)}function x_(s,r,l){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var A=Et.current,R=(A&2)!==0;if(R?(A=A&1|2,r.flags|=128):A&=1,le(Et,A),Qt(s,r,c,l),c=He?cl:0,!R&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&N_(s,l,r);else if(s.tag===19)N_(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&Ec(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),Oh(r,!1,y,l,_,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&Ec(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}Oh(r,!0,l,null,_,c);break;case"together":Oh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function ts(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),Js|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(qo(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=Qi(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Qi(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function Fh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&dc(s)))}function xw(s,r,l){switch(r.tag){case 3:Vt(r,r.stateNode.containerInfo),Ls(r,bt,s.memoizedState.cache),Hr();break;case 27:case 5:Ar(r);break;case 4:Vt(r,r.stateNode.containerInfo);break;case 10:Ls(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,ch(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(qs(r),r.flags|=128,null):(l&r.child.childLanes)!==0?b_(s,r,l):(qs(r),s=ts(s,r,l),s!==null?s.sibling:null);qs(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(qo(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return x_(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),le(Et,Et.current),c)break;return null;case 22:return r.lanes=0,S_(s,r,l,r.pendingProps);case 24:Ls(r,bt,s.memoizedState.cache)}return ts(s,r,l)}function M_(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)xt=!0;else{if(!Fh(s,l)&&(r.flags&128)===0)return xt=!1,xw(s,r,l);xt=(s.flags&131072)!==0}else xt=!1,He&&(r.flags&1048576)!==0&&uy(r,cl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=Kr(r.elementType),r.type=s,typeof s=="function")zd(s)?(c=Wr(s,c),r.tag=1,r=w_(null,r,s,c,l)):(r.tag=0,r=Dh(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===ie){r.tag=11,r=v_(null,r,s,c,l);break e}else if(y===N){r.tag=14,r=E_(null,r,s,c,l);break e}}throw r=xe(s)||s,Error(i(306,r,""))}}return r;case 0:return Dh(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=Wr(c,r.pendingProps),w_(s,r,c,y,l);case 3:e:{if(Vt(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,rh(s,r),_l(r,c,null,l);var A=r.memoizedState;if(c=A.cache,Ls(r,bt,c),c!==_.cache&&Zd(r,[bt],l,!0),yl(),c=A.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=R_(s,r,c,l);break e}else if(c!==y){y=Fn(Error(i(424)),r),fl(y),r=R_(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(lt=zn(s.firstChild),Kt=r,He=!0,ks=null,Bn=!0,l=Sy(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Hr(),c===y){r=ts(s,r,l);break e}Qt(s,r,c,l)}r=r.child}return r;case 26:return Mc(s,r),s===null?(l=Bv(r.type,null,r.pendingProps,null))?r.memoizedState=l:He||(l=r.type,s=r.pendingProps,c=$c(Me.current).createElement(l),c[It]=r,c[Ft]=s,Xt(c,l,s),wt(c),r.stateNode=c):r.memoizedState=Bv(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Ar(r),s===null&&He&&(c=r.stateNode=Fv(r.type,r.pendingProps,Me.current),Kt=r,Bn=!0,y=lt,Xs(r.type)?(_p=y,lt=zn(c.firstChild)):lt=y),Qt(s,r,r.pendingProps.children,l),Mc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&He&&((y=c=lt)&&(c=oR(c,r.type,r.pendingProps,Bn),c!==null?(r.stateNode=c,Kt=r,lt=zn(c.firstChild),Bn=!1,y=!0):y=!1),y||Us(r)),Ar(r),y=r.type,_=r.pendingProps,A=s!==null?s.memoizedProps:null,c=_.children,hp(y,_)?c=null:A!==null&&hp(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=dh(s,r,Tw,null,null,l),Ol._currentValue=y),Mc(s,r),Qt(s,r,c,l),r.child;case 6:return s===null&&He&&((s=l=lt)&&(l=aR(l,r.pendingProps,Bn),l!==null?(r.stateNode=l,Kt=r,lt=null,s=!0):s=!1),s||Us(r)),null;case 13:return b_(s,r,l);case 4:return Vt(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=Qr(r,null,c,l):Qt(s,r,c,l),r.child;case 11:return v_(s,r,r.type,r.pendingProps,l);case 7:return Qt(s,r,r.pendingProps,l),r.child;case 8:return Qt(s,r,r.pendingProps.children,l),r.child;case 12:return Qt(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,Ls(r,r.type,c.value),Qt(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,Jr(r),y=$t(y),c=c(y),r.flags|=1,Qt(s,r,c,l),r.child;case 14:return E_(s,r,r.type,r.pendingProps,l);case 15:return T_(s,r,r.type,r.pendingProps,l);case 19:return x_(s,r,l);case 31:return Nw(s,r,l);case 22:return S_(s,r,l,r.pendingProps);case 24:return Jr(r),c=$t(bt),s===null?(y=nh(),y===null&&(y=at,_=eh(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),r.memoizedState={parent:c,cache:y},sh(r),Ls(r,bt,y)):((s.lanes&l)!==0&&(rh(s,r),_l(r,null,null,l),yl()),y=s.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Ls(r,bt,c)):(c=_.cache,Ls(r,bt,c),c!==y.cache&&Zd(r,[bt],l,!0))),Qt(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ns(s){s.flags|=4}function Gh(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(sv())s.flags|=8192;else throw $r=gc,ih}else s.flags&=-16777217}function D_(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Kv(r))if(sv())s.flags|=8192;else throw $r=gc,ih}function Pc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?Fu():536870912,s.lanes|=r,Zo|=r)}function Cl(s,r){if(!He)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ut(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function Mw(s,r,l){var c=r.pendingProps;switch($d(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(r),null;case 1:return ut(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ji(bt),ft(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Go(r)?ns(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Xd())),ut(r),null;case 26:var y=r.type,_=r.memoizedState;return s===null?(ns(r),_!==null?(ut(r),D_(r,_)):(ut(r),Gh(r,y,null,c,l))):_?_!==s.memoizedState?(ns(r),ut(r),D_(r,_)):(ut(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&ns(r),ut(r),Gh(r,y,s,c,l)),null;case 27:if(_o(r),l=Me.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&ns(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ut(r),null}s=ce.current,Go(r)?fy(r):(s=Fv(y,c,l),r.stateNode=s,ns(r))}return ut(r),null;case 5:if(_o(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&ns(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ut(r),null}if(_=ce.current,Go(r))fy(r);else{var A=$c(Me.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}_[It]=r,_[Ft]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=_;e:switch(Xt(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ns(r)}}return ut(r),Gh(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&ns(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=Me.current,Go(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=Kt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[It]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||bv(s.nodeValue,l)),s||Us(r,!0)}else s=$c(s).createTextNode(c),s[It]=r,r.stateNode=s}return ut(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=Go(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[It]=r}else Hr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),s=!1}else l=Xd(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(Rn(r),r):(Rn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return ut(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Go(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[It]=r}else Hr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),y=!1}else y=Xd(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Rn(r),r):(Rn(r),null)}return Rn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),Pc(r,r.updateQueue),ut(r),null);case 4:return ft(),s===null&&lp(r.stateNode.containerInfo),ut(r),null;case 10:return ji(r.type),ut(r),null;case 19:if(ee(Et),c=r.memoizedState,c===null)return ut(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)Cl(c,!1);else{if(yt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(_=Ec(s),_!==null){for(r.flags|=128,Cl(c,!1),s=_.updateQueue,r.updateQueue=s,Pc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)oy(l,s),l=l.sibling;return le(Et,Et.current&1|2),He&&Xi(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&ln()>Oc&&(r.flags|=128,y=!0,Cl(c,!1),r.lanes=4194304)}else{if(!y)if(s=Ec(_),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,Pc(r,s),Cl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!He)return ut(r),null}else 2*ln()-c.renderingStartTime>Oc&&l!==536870912&&(r.flags|=128,y=!0,Cl(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(s=c.last,s!==null?s.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=ln(),s.sibling=null,l=Et.current,le(Et,y?l&1|2:l&1),He&&Xi(r,c.treeForkCount),s):(ut(r),null);case 22:case 23:return Rn(r),uh(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(ut(r),r.subtreeFlags&6&&(r.flags|=8192)):ut(r),l=r.updateQueue,l!==null&&Pc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&ee(Yr),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ji(bt),ut(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Dw(s,r){switch($d(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return ji(bt),ft(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return _o(r),null;case 31:if(r.memoizedState!==null){if(Rn(r),r.alternate===null)throw Error(i(340));Hr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(Rn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Hr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ee(Et),null;case 4:return ft(),null;case 10:return ji(r.type),null;case 22:case 23:return Rn(r),uh(),s!==null&&ee(Yr),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return ji(bt),null;case 25:return null;default:return null}}function P_(s,r){switch($d(r),r.tag){case 3:ji(bt),ft();break;case 26:case 27:case 5:_o(r);break;case 4:ft();break;case 31:r.memoizedState!==null&&Rn(r);break;case 13:Rn(r);break;case 19:ee(Et);break;case 10:ji(r.type);break;case 22:case 23:Rn(r),uh(),s!==null&&ee(Yr);break;case 24:ji(bt)}}function Il(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var _=l.create,A=l.inst;c=_(),A.destroy=c}l=l.next}while(l!==y)}}catch(R){tt(r,r.return,R)}}function Hs(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&s)===s){var A=c.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,y=r;var k=l,J=R;try{J()}catch(te){tt(y,k,te)}}}c=c.next}while(c!==_)}}catch(te){tt(r,r.return,te)}}function V_(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{Cy(r,l)}catch(c){tt(s,s.return,c)}}}function k_(s,r,l){l.props=Wr(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){tt(s,r,c)}}function wl(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){tt(s,r,y)}}function Ui(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){tt(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){tt(s,r,y)}else l.current=null}function U_(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){tt(s,s.return,y)}}function qh(s,r,l){try{var c=s.stateNode;eR(c,s.type,l,r),c[Ft]=r}catch(y){tt(s,s.return,y)}}function L_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Xs(s.type)||s.tag===4}function Bh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||L_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Xs(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Hh(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=ti));else if(c!==4&&(c===27&&Xs(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(Hh(s,r,l),s=s.sibling;s!==null;)Hh(s,r,l),s=s.sibling}function Vc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&Xs(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Vc(s,r,l),s=s.sibling;s!==null;)Vc(s,r,l),s=s.sibling}function O_(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);Xt(r,c,l),r[It]=s,r[Ft]=l}catch(_){tt(s,s.return,_)}}var is=!1,Mt=!1,zh=!1,F_=typeof WeakSet=="function"?WeakSet:Set,qt=null;function Pw(s,r){if(s=s.containerInfo,fp=tf,s=Wg(s),Ld(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var A=0,R=-1,k=-1,J=0,te=0,se=s,Y=null;t:for(;;){for(var X;se!==l||y!==0&&se.nodeType!==3||(R=A+y),se!==_||c!==0&&se.nodeType!==3||(k=A+c),se.nodeType===3&&(A+=se.nodeValue.length),(X=se.firstChild)!==null;)Y=se,se=X;for(;;){if(se===s)break t;if(Y===l&&++J===y&&(R=A),Y===_&&++te===c&&(k=A),(X=se.nextSibling)!==null)break;se=Y,Y=se.parentNode}se=X}l=R===-1||k===-1?null:{start:R,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(dp={focusedElem:s,selectionRange:l},tf=!1,qt=r;qt!==null;)if(r=qt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,qt=s;else for(;qt!==null;){switch(r=qt,_=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,l=r,y=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var ge=Wr(l.type,y);s=c.getSnapshotBeforeUpdate(ge,_),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ae){tt(l,l.return,Ae)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)mp(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":mp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,qt=s;break}qt=r.return}}function G_(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:rs(s,l),c&4&&Il(5,l);break;case 1:if(rs(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(A){tt(l,l.return,A)}else{var y=Wr(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(A){tt(l,l.return,A)}}c&64&&V_(l),c&512&&wl(l,l.return);break;case 3:if(rs(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Cy(s,r)}catch(A){tt(l,l.return,A)}}break;case 27:r===null&&c&4&&O_(l);case 26:case 5:rs(s,l),r===null&&c&4&&U_(l),c&512&&wl(l,l.return);break;case 12:rs(s,l);break;case 31:rs(s,l),c&4&&H_(s,l);break;case 13:rs(s,l),c&4&&z_(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=Bw.bind(null,l),lR(s,l))));break;case 22:if(c=l.memoizedState!==null||is,!c){r=r!==null&&r.memoizedState!==null||Mt,y=is;var _=Mt;is=c,(Mt=r)&&!_?os(s,l,(l.subtreeFlags&8772)!==0):rs(s,l),is=y,Mt=_}break;case 30:break;default:rs(s,l)}}function q_(s){var r=s.alternate;r!==null&&(s.alternate=null,q_(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Ao(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ht=null,mn=!1;function ss(s,r,l){for(l=l.child;l!==null;)B_(s,r,l),l=l.sibling}function B_(s,r,l){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Wn,l)}catch{}switch(l.tag){case 26:Mt||Ui(l,r),ss(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Mt||Ui(l,r);var c=ht,y=mn;Xs(l.type)&&(ht=l.stateNode,mn=!1),ss(s,r,l),kl(l.stateNode),ht=c,mn=y;break;case 5:Mt||Ui(l,r);case 6:if(c=ht,y=mn,ht=null,ss(s,r,l),ht=c,mn=y,ht!==null)if(mn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(l.stateNode)}catch(_){tt(l,r,_)}else try{ht.removeChild(l.stateNode)}catch(_){tt(l,r,_)}break;case 18:ht!==null&&(mn?(s=ht,Vv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),aa(s)):Vv(ht,l.stateNode));break;case 4:c=ht,y=mn,ht=l.stateNode.containerInfo,mn=!0,ss(s,r,l),ht=c,mn=y;break;case 0:case 11:case 14:case 15:Hs(2,l,r),Mt||Hs(4,l,r),ss(s,r,l);break;case 1:Mt||(Ui(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&k_(l,r,c)),ss(s,r,l);break;case 21:ss(s,r,l);break;case 22:Mt=(c=Mt)||l.memoizedState!==null,ss(s,r,l),Mt=c;break;default:ss(s,r,l)}}function H_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{aa(s)}catch(l){tt(r,r.return,l)}}}function z_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{aa(s)}catch(l){tt(r,r.return,l)}}function Vw(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new F_),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new F_),r;default:throw Error(i(435,s.tag))}}function kc(s,r){var l=Vw(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=Hw.bind(null,s,c);c.then(y,y)}})}function gn(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],_=s,A=r,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(Xs(R.type)){ht=R.stateNode,mn=!1;break e}break;case 5:ht=R.stateNode,mn=!1;break e;case 3:case 4:ht=R.stateNode.containerInfo,mn=!0;break e}R=R.return}if(ht===null)throw Error(i(160));B_(_,A,y),ht=null,mn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)J_(r,s),r=r.sibling}var ai=null;function J_(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:gn(r,s),yn(s),c&4&&(Hs(3,s,s.return),Il(3,s),Hs(5,s,s.return));break;case 1:gn(r,s),yn(s),c&512&&(Mt||l===null||Ui(l,l.return)),c&64&&is&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=ai;if(gn(r,s),yn(s),c&512&&(Mt||l===null||Ui(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Si]||_[It]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),Xt(_,c,l),_[It]=s,wt(_),c=_;break e;case"link":var A=Jv("link","href",y).get(c+(l.href||""));if(A){for(var R=0;R<A.length;R++)if(_=A[R],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(R,1);break t}}_=y.createElement(c),Xt(_,c,l),y.head.appendChild(_);break;case"meta":if(A=Jv("meta","content",y).get(c+(l.content||""))){for(R=0;R<A.length;R++)if(_=A[R],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(R,1);break t}}_=y.createElement(c),Xt(_,c,l),y.head.appendChild(_);break;default:throw Error(i(468,c))}_[It]=s,wt(_),c=_}s.stateNode=c}else Yv(y,s.type,s.stateNode);else s.stateNode=zv(y,c,s.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?Yv(y,s.type,s.stateNode):zv(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&qh(s,s.memoizedProps,l.memoizedProps)}break;case 27:gn(r,s),yn(s),c&512&&(Mt||l===null||Ui(l,l.return)),l!==null&&c&4&&qh(s,s.memoizedProps,l.memoizedProps);break;case 5:if(gn(r,s),yn(s),c&512&&(Mt||l===null||Ui(l,l.return)),s.flags&32){y=s.stateNode;try{pn(y,"")}catch(ge){tt(s,s.return,ge)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,qh(s,y,l!==null?l.memoizedProps:y)),c&1024&&(zh=!0);break;case 6:if(gn(r,s),yn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(ge){tt(s,s.return,ge)}}break;case 3:if(Wc=null,y=ai,ai=Qc(r.containerInfo),gn(r,s),ai=y,yn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{aa(r.containerInfo)}catch(ge){tt(s,s.return,ge)}zh&&(zh=!1,Y_(s));break;case 4:c=ai,ai=Qc(s.stateNode.containerInfo),gn(r,s),yn(s),ai=c;break;case 12:gn(r,s),yn(s);break;case 31:gn(r,s),yn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,kc(s,c)));break;case 13:gn(r,s),yn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Lc=ln()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,kc(s,c)));break;case 22:y=s.memoizedState!==null;var k=l!==null&&l.memoizedState!==null,J=is,te=Mt;if(is=J||y,Mt=te||k,gn(r,s),Mt=te,is=J,yn(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||k||is||Mt||jr(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){k=l=r;try{if(_=k.stateNode,y)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=k.stateNode;var se=k.memoizedProps.style,Y=se!=null&&se.hasOwnProperty("display")?se.display:null;R.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(ge){tt(k,k.return,ge)}}}else if(r.tag===6){if(l===null){k=r;try{k.stateNode.nodeValue=y?"":k.memoizedProps}catch(ge){tt(k,k.return,ge)}}}else if(r.tag===18){if(l===null){k=r;try{var X=k.stateNode;y?kv(X,!0):kv(k.stateNode,!1)}catch(ge){tt(k,k.return,ge)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,kc(s,l))));break;case 19:gn(r,s),yn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,kc(s,c)));break;case 30:break;case 21:break;default:gn(r,s),yn(s)}}function yn(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(L_(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=Bh(s);Vc(s,_,y);break;case 5:var A=l.stateNode;l.flags&32&&(pn(A,""),l.flags&=-33);var R=Bh(s);Vc(s,R,A);break;case 3:case 4:var k=l.stateNode.containerInfo,J=Bh(s);Hh(s,J,k);break;default:throw Error(i(161))}}catch(te){tt(s,s.return,te)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function Y_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;Y_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function rs(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)G_(s,r.alternate,r),r=r.sibling}function jr(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Hs(4,r,r.return),jr(r);break;case 1:Ui(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&k_(r,r.return,l),jr(r);break;case 27:kl(r.stateNode);case 26:case 5:Ui(r,r.return),jr(r);break;case 22:r.memoizedState===null&&jr(r);break;case 30:jr(r);break;default:jr(r)}s=s.sibling}}function os(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,_=r,A=_.flags;switch(_.tag){case 0:case 11:case 15:os(y,_,l),Il(4,_);break;case 1:if(os(y,_,l),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){tt(c,c.return,J)}if(c=_,y=c.updateQueue,y!==null){var R=c.stateNode;try{var k=y.shared.hiddenCallbacks;if(k!==null)for(y.shared.hiddenCallbacks=null,y=0;y<k.length;y++)Ay(k[y],R)}catch(J){tt(c,c.return,J)}}l&&A&64&&V_(_),wl(_,_.return);break;case 27:O_(_);case 26:case 5:os(y,_,l),l&&c===null&&A&4&&U_(_),wl(_,_.return);break;case 12:os(y,_,l);break;case 31:os(y,_,l),l&&A&4&&H_(y,_);break;case 13:os(y,_,l),l&&A&4&&z_(y,_);break;case 22:_.memoizedState===null&&os(y,_,l),wl(_,_.return);break;case 30:break;default:os(y,_,l)}r=r.sibling}}function Jh(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&dl(l))}function Yh(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&dl(s))}function li(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)K_(s,r,l,c),r=r.sibling}function K_(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:li(s,r,l,c),y&2048&&Il(9,r);break;case 1:li(s,r,l,c);break;case 3:li(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&dl(s)));break;case 12:if(y&2048){li(s,r,l,c),s=r.stateNode;try{var _=r.memoizedProps,A=_.id,R=_.onPostCommit;typeof R=="function"&&R(A,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(k){tt(r,r.return,k)}}else li(s,r,l,c);break;case 31:li(s,r,l,c);break;case 13:li(s,r,l,c);break;case 23:break;case 22:_=r.stateNode,A=r.alternate,r.memoizedState!==null?_._visibility&2?li(s,r,l,c):Rl(s,r):_._visibility&2?li(s,r,l,c):(_._visibility|=2,Xo(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Jh(A,r);break;case 24:li(s,r,l,c),y&2048&&Yh(r.alternate,r);break;default:li(s,r,l,c)}}function Xo(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=s,A=r,R=l,k=c,J=A.flags;switch(A.tag){case 0:case 11:case 15:Xo(_,A,R,k,y),Il(8,A);break;case 23:break;case 22:var te=A.stateNode;A.memoizedState!==null?te._visibility&2?Xo(_,A,R,k,y):Rl(_,A):(te._visibility|=2,Xo(_,A,R,k,y)),y&&J&2048&&Jh(A.alternate,A);break;case 24:Xo(_,A,R,k,y),y&&J&2048&&Yh(A.alternate,A);break;default:Xo(_,A,R,k,y)}r=r.sibling}}function Rl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:Rl(l,c),y&2048&&Jh(c.alternate,c);break;case 24:Rl(l,c),y&2048&&Yh(c.alternate,c);break;default:Rl(l,c)}r=r.sibling}}var bl=8192;function Wo(s,r,l){if(s.subtreeFlags&bl)for(s=s.child;s!==null;)$_(s,r,l),s=s.sibling}function $_(s,r,l){switch(s.tag){case 26:Wo(s,r,l),s.flags&bl&&s.memoizedState!==null&&ER(l,ai,s.memoizedState,s.memoizedProps);break;case 5:Wo(s,r,l);break;case 3:case 4:var c=ai;ai=Qc(s.stateNode.containerInfo),Wo(s,r,l),ai=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=bl,bl=16777216,Wo(s,r,l),bl=c):Wo(s,r,l));break;default:Wo(s,r,l)}}function Q_(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Nl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];qt=c,W_(c,s)}Q_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)X_(s),s=s.sibling}function X_(s){switch(s.tag){case 0:case 11:case 15:Nl(s),s.flags&2048&&Hs(9,s,s.return);break;case 3:Nl(s);break;case 12:Nl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Uc(s)):Nl(s);break;default:Nl(s)}}function Uc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];qt=c,W_(c,s)}Q_(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Hs(8,r,r.return),Uc(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Uc(r));break;default:Uc(r)}s=s.sibling}}function W_(s,r){for(;qt!==null;){var l=qt;switch(l.tag){case 0:case 11:case 15:Hs(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:dl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,qt=c;else e:for(l=s;qt!==null;){c=qt;var y=c.sibling,_=c.return;if(q_(c),c===l){qt=null;break e}if(y!==null){y.return=_,qt=y;break e}qt=_}}}var kw={getCacheForType:function(s){var r=$t(bt),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return $t(bt).controller.signal}},Uw=typeof WeakMap=="function"?WeakMap:Map,Xe=0,at=null,Ue=null,Oe=0,et=0,bn=null,zs=!1,jo=!1,Kh=!1,as=0,yt=0,Js=0,Zr=0,$h=0,Nn=0,Zo=0,xl=null,_n=null,Qh=!1,Lc=0,j_=0,Oc=1/0,Fc=null,Ys=null,Ut=0,Ks=null,ea=null,ls=0,Xh=0,Wh=null,Z_=null,Ml=0,jh=null;function xn(){return(Xe&2)!==0&&Oe!==0?Oe&-Oe:Z.T!==null?sp():Gu()}function ev(){if(Nn===0)if((Oe&536870912)===0||He){var s=wr;wr<<=1,(wr&3932160)===0&&(wr=262144),Nn=s}else Nn=536870912;return s=wn.current,s!==null&&(s.flags|=32),Nn}function vn(s,r,l){(s===at&&(et===2||et===9)||s.cancelPendingCommit!==null)&&(ta(s,0),$s(s,Oe,Nn,!1)),Rr(s,l),((Xe&2)===0||s!==at)&&(s===at&&((Xe&2)===0&&(Zr|=l),yt===4&&$s(s,Oe,Nn,!1)),Li(s))}function tv(s,r,l){if((Xe&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||jn(s,r),y=c?Fw(s,r):ep(s,r,!0),_=c;do{if(y===0){jo&&!c&&$s(s,r,0,!1);break}else{if(l=s.current.alternate,_&&!Lw(l)){y=ep(s,r,!1),_=!1;continue}if(y===2){if(_=r,s.errorRecoveryDisabledLanes&_)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var R=s;y=xl;var k=R.current.memoizedState.isDehydrated;if(k&&(ta(R,A).flags|=256),A=ep(R,A,!1),A!==2){if(Kh&&!k){R.errorRecoveryDisabledLanes|=_,Zr|=_,y=4;break e}_=_n,_n=y,_!==null&&(_n===null?_n=_:_n.push.apply(_n,_))}y=A}if(_=!1,y!==2)continue}}if(y===1){ta(s,0),$s(s,r,0,!0);break}e:{switch(c=s,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:$s(c,r,Nn,!zs);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=Lc+300-ln(),10<y)){if($s(c,r,Nn,!zs),vi(c,0,!0)!==0)break e;ls=r,c.timeoutHandle=Dv(nv.bind(null,c,l,_n,Fc,Qh,r,Nn,Zr,Zo,zs,_,"Throttled",-0,0),y);break e}nv(c,l,_n,Fc,Qh,r,Nn,Zr,Zo,zs,_,null,-0,0)}}break}while(!0);Li(s)}function nv(s,r,l,c,y,_,A,R,k,J,te,se,Y,X){if(s.timeoutHandle=-1,se=r.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ti},$_(r,_,se);var ge=(_&62914560)===_?Lc-ln():(_&4194048)===_?j_-ln():0;if(ge=TR(se,ge),ge!==null){ls=_,s.cancelPendingCommit=ge(cv.bind(null,s,r,_,l,c,y,A,R,k,te,se,null,Y,X)),$s(s,_,A,!J);return}}cv(s,r,_,l,c,y,A,R,k)}function Lw(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],_=y.getSnapshot;y=y.value;try{if(!Cn(_(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function $s(s,r,l,c){r&=~$h,r&=~Zr,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var _=31-_t(y),A=1<<_;c[_]=-1,y&=~A}l!==0&&br(s,l,r)}function Gc(){return(Xe&6)===0?(Dl(0),!1):!0}function Zh(){if(Ue!==null){if(et===0)var s=Ue.return;else s=Ue,Wi=zr=null,mh(s),Jo=null,pl=0,s=Ue;for(;s!==null;)P_(s.alternate,s),s=s.return;Ue=null}}function ta(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,iR(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),ls=0,Zh(),at=s,Ue=l=Qi(s.current,null),Oe=r,et=0,bn=null,zs=!1,jo=jn(s,r),Kh=!1,Zo=Nn=$h=Zr=Js=yt=0,_n=xl=null,Qh=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-_t(c),_=1<<y;r|=s[y],c&=~_}return as=r,ac(),l}function iv(s,r){Pe=null,Z.H=Sl,r===zo||r===mc?(r=vy(),et=3):r===ih?(r=vy(),et=4):et=r===Mh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,bn=r,Ue===null&&(yt=1,Nc(s,Fn(r,s.current)))}function sv(){var s=wn.current;return s===null?!0:(Oe&4194048)===Oe?Hn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?s===Hn:!1}function rv(){var s=Z.H;return Z.H=Sl,s===null?Sl:s}function ov(){var s=Z.A;return Z.A=kw,s}function qc(){yt=4,zs||(Oe&4194048)!==Oe&&wn.current!==null||(jo=!0),(Js&134217727)===0&&(Zr&134217727)===0||at===null||$s(at,Oe,Nn,!1)}function ep(s,r,l){var c=Xe;Xe|=2;var y=rv(),_=ov();(at!==s||Oe!==r)&&(Fc=null,ta(s,r)),r=!1;var A=yt;e:do try{if(et!==0&&Ue!==null){var R=Ue,k=bn;switch(et){case 8:Zh(),A=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(r=!0);var J=et;if(et=0,bn=null,na(s,R,k,J),l&&jo){A=0;break e}break;default:J=et,et=0,bn=null,na(s,R,k,J)}}Ow(),A=yt;break}catch(te){iv(s,te)}while(!0);return r&&s.shellSuspendCounter++,Wi=zr=null,Xe=c,Z.H=y,Z.A=_,Ue===null&&(at=null,Oe=0,ac()),A}function Ow(){for(;Ue!==null;)av(Ue)}function Fw(s,r){var l=Xe;Xe|=2;var c=rv(),y=ov();at!==s||Oe!==r?(Fc=null,Oc=ln()+500,ta(s,r)):jo=jn(s,r);e:do try{if(et!==0&&Ue!==null){r=Ue;var _=bn;t:switch(et){case 1:et=0,bn=null,na(s,r,_,1);break;case 2:case 9:if(yy(_)){et=0,bn=null,lv(r);break}r=function(){et!==2&&et!==9||at!==s||(et=7),Li(s)},_.then(r,r);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:yy(_)?(et=0,bn=null,lv(r)):(et=0,bn=null,na(s,r,_,7));break;case 5:var A=null;switch(Ue.tag){case 26:A=Ue.memoizedState;case 5:case 27:var R=Ue;if(A?Kv(A):R.stateNode.complete){et=0,bn=null;var k=R.sibling;if(k!==null)Ue=k;else{var J=R.return;J!==null?(Ue=J,Bc(J)):Ue=null}break t}}et=0,bn=null,na(s,r,_,5);break;case 6:et=0,bn=null,na(s,r,_,6);break;case 8:Zh(),yt=6;break e;default:throw Error(i(462))}}Gw();break}catch(te){iv(s,te)}while(!0);return Wi=zr=null,Z.H=c,Z.A=y,Xe=l,Ue!==null?0:(at=null,Oe=0,ac(),yt)}function Gw(){for(;Ue!==null&&!xd();)av(Ue)}function av(s){var r=M_(s.alternate,s,as);s.memoizedProps=s.pendingProps,r===null?Bc(s):Ue=r}function lv(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=I_(l,r,r.pendingProps,r.type,void 0,Oe);break;case 11:r=I_(l,r,r.pendingProps,r.type.render,r.ref,Oe);break;case 5:mh(r);default:P_(l,r),r=Ue=oy(r,as),r=M_(l,r,as)}s.memoizedProps=s.pendingProps,r===null?Bc(s):Ue=r}function na(s,r,l,c){Wi=zr=null,mh(r),Jo=null,pl=0;var y=r.return;try{if(bw(s,y,r,l,Oe)){yt=1,Nc(s,Fn(l,s.current)),Ue=null;return}}catch(_){if(y!==null)throw Ue=y,_;yt=1,Nc(s,Fn(l,s.current)),Ue=null;return}r.flags&32768?(He||c===1?s=!0:jo||(Oe&536870912)!==0?s=!1:(zs=s=!0,(c===2||c===9||c===3||c===6)&&(c=wn.current,c!==null&&c.tag===13&&(c.flags|=16384))),uv(r,s)):Bc(r)}function Bc(s){var r=s;do{if((r.flags&32768)!==0){uv(r,zs);return}s=r.return;var l=Mw(r.alternate,r,as);if(l!==null){Ue=l;return}if(r=r.sibling,r!==null){Ue=r;return}Ue=r=s}while(r!==null);yt===0&&(yt=5)}function uv(s,r){do{var l=Dw(s.alternate,s);if(l!==null){l.flags&=32767,Ue=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Ue=s;return}Ue=s=l}while(s!==null);yt=6,Ue=null}function cv(s,r,l,c,y,_,A,R,k){s.cancelPendingCommit=null;do Hc();while(Ut!==0);if((Xe&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(_=r.lanes|r.childLanes,_|=Bd,Pd(s,l,_,A,R,k),s===at&&(Ue=at=null,Oe=0),ea=r,Ks=s,ls=l,Xh=_,Wh=y,Z_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,zw(Cs,function(){return mv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Z.T,Z.T=null,y=fe.p,fe.p=2,A=Xe,Xe|=4;try{Pw(s,r,l)}finally{Xe=A,fe.p=y,Z.T=c}}Ut=1,fv(),dv(),hv()}}function fv(){if(Ut===1){Ut=0;var s=Ks,r=ea,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=Z.T,Z.T=null;var c=fe.p;fe.p=2;var y=Xe;Xe|=4;try{J_(r,s);var _=dp,A=Wg(s.containerInfo),R=_.focusedElem,k=_.selectionRange;if(A!==R&&R&&R.ownerDocument&&Xg(R.ownerDocument.documentElement,R)){if(k!==null&&Ld(R)){var J=k.start,te=k.end;if(te===void 0&&(te=J),"selectionStart"in R)R.selectionStart=J,R.selectionEnd=Math.min(te,R.value.length);else{var se=R.ownerDocument||document,Y=se&&se.defaultView||window;if(Y.getSelection){var X=Y.getSelection(),ge=R.textContent.length,Ae=Math.min(k.start,ge),ot=k.end===void 0?Ae:Math.min(k.end,ge);!X.extend&&Ae>ot&&(A=ot,ot=Ae,Ae=A);var B=Qg(R,Ae),G=Qg(R,ot);if(B&&G&&(X.rangeCount!==1||X.anchorNode!==B.node||X.anchorOffset!==B.offset||X.focusNode!==G.node||X.focusOffset!==G.offset)){var z=se.createRange();z.setStart(B.node,B.offset),X.removeAllRanges(),Ae>ot?(X.addRange(z),X.extend(G.node,G.offset)):(z.setEnd(G.node,G.offset),X.addRange(z))}}}}for(se=[],X=R;X=X.parentNode;)X.nodeType===1&&se.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<se.length;R++){var ne=se[R];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}tf=!!fp,dp=fp=null}finally{Xe=y,fe.p=c,Z.T=l}}s.current=r,Ut=2}}function dv(){if(Ut===2){Ut=0;var s=Ks,r=ea,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=Z.T,Z.T=null;var c=fe.p;fe.p=2;var y=Xe;Xe|=4;try{G_(s,r.alternate,r)}finally{Xe=y,fe.p=c,Z.T=l}}Ut=3}}function hv(){if(Ut===4||Ut===3){Ut=0,Pu();var s=Ks,r=ea,l=ls,c=Z_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ut=5:(Ut=0,ea=Ks=null,pv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Ys=null),Ji(l),r=r.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Wn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Z.T,y=fe.p,fe.p=2,Z.T=null;try{for(var _=s.onRecoverableError,A=0;A<c.length;A++){var R=c[A];_(R.value,{componentStack:R.stack})}}finally{Z.T=r,fe.p=y}}(ls&3)!==0&&Hc(),Li(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===jh?Ml++:(Ml=0,jh=s):Ml=0,Dl(0)}}function pv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,dl(r)))}function Hc(){return fv(),dv(),hv(),mv()}function mv(){if(Ut!==5)return!1;var s=Ks,r=Xh;Xh=0;var l=Ji(ls),c=Z.T,y=fe.p;try{fe.p=32>l?32:l,Z.T=null,l=Wh,Wh=null;var _=Ks,A=ls;if(Ut=0,ea=Ks=null,ls=0,(Xe&6)!==0)throw Error(i(331));var R=Xe;if(Xe|=4,X_(_.current),K_(_,_.current,A,l),Xe=R,Dl(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Wn,_)}catch{}return!0}finally{fe.p=y,Z.T=c,pv(s,r)}}function gv(s,r,l){r=Fn(l,r),r=xh(s.stateNode,r,2),s=Gs(s,r,2),s!==null&&(Rr(s,2),Li(s))}function tt(s,r,l){if(s.tag===3)gv(s,s,l);else for(;r!==null;){if(r.tag===3){gv(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ys===null||!Ys.has(c))){s=Fn(l,s),l=y_(2),c=Gs(r,l,2),c!==null&&(__(l,c,r,s),Rr(c,2),Li(c));break}}r=r.return}}function tp(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new Uw;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(Kh=!0,y.add(l),s=qw.bind(null,s,r,l),r.then(s,s))}function qw(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,at===s&&(Oe&l)===l&&(yt===4||yt===3&&(Oe&62914560)===Oe&&300>ln()-Lc?(Xe&2)===0&&ta(s,0):$h|=l,Zo===Oe&&(Zo=0)),Li(s)}function yv(s,r){r===0&&(r=Fu()),s=qr(s,r),s!==null&&(Rr(s,r),Li(s))}function Bw(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),yv(s,l)}function Hw(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),yv(s,l)}function zw(s,r){return kt(s,r)}var zc=null,ia=null,np=!1,Jc=!1,ip=!1,Qs=0;function Li(s){s!==ia&&s.next===null&&(ia===null?zc=ia=s:ia=ia.next=s),Jc=!0,np||(np=!0,Yw())}function Dl(s,r){if(!ip&&Jc){ip=!0;do for(var l=!1,c=zc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var A=c.suspendedLanes,R=c.pingedLanes;_=(1<<31-_t(42|s)+1)-1,_&=y&~(A&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,Tv(c,_))}else _=Oe,_=vi(c,c===at?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||jn(c,_)||(l=!0,Tv(c,_));c=c.next}while(l);ip=!1}}function Jw(){_v()}function _v(){Jc=np=!1;var s=0;Qs!==0&&nR()&&(s=Qs);for(var r=ln(),l=null,c=zc;c!==null;){var y=c.next,_=vv(c,r);_===0?(c.next=null,l===null?zc=y:l.next=y,y===null&&(ia=l)):(l=c,(s!==0||(_&3)!==0)&&(Jc=!0)),c=y}Ut!==0&&Ut!==5||Dl(s),Qs!==0&&(Qs=0)}function vv(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var A=31-_t(_),R=1<<A,k=y[A];k===-1?((R&l)===0||(R&c)!==0)&&(y[A]=Dd(R,r)):k<=r&&(s.expiredLanes|=R),_&=~R}if(r=at,l=Oe,l=vi(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(et===2||et===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&As(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||jn(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&As(c),Ji(l)){case 2:case 8:l=Ba;break;case 32:l=Cs;break;case 268435456:l=Vu;break;default:l=Cs}return c=Ev.bind(null,s),l=kt(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&As(c),s.callbackPriority=2,s.callbackNode=null,2}function Ev(s,r){if(Ut!==0&&Ut!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Hc()&&s.callbackNode!==l)return null;var c=Oe;return c=vi(s,s===at?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(tv(s,c,r),vv(s,ln()),s.callbackNode!=null&&s.callbackNode===l?Ev.bind(null,s):null)}function Tv(s,r){if(Hc())return null;tv(s,r,!0)}function Yw(){sR(function(){(Xe&6)!==0?kt(qa,Jw):_v()})}function sp(){if(Qs===0){var s=Bo;s===0&&(s=yi,yi<<=1,(yi&261888)===0&&(yi=256)),Qs=s}return Qs}function Sv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ro(""+s)}function Av(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function Kw(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var _=Sv((y[Ft]||null).action),A=c.submitter;A&&(r=(r=A[Ft]||null)?Sv(r.formAction):A.getAttribute("formAction"),r!==null&&(_=r,A=null));var R=new xi("action","action",null,c,y);s.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Qs!==0){var k=A?Av(y,A):new FormData(y);Ch(l,{pending:!0,data:k,method:y.method,action:_},null,k)}}else typeof _=="function"&&(R.preventDefault(),k=A?Av(y,A):new FormData(y),Ch(l,{pending:!0,data:k,method:y.method,action:_},_,k))},currentTarget:y}]})}}for(var rp=0;rp<qd.length;rp++){var op=qd[rp],$w=op.toLowerCase(),Qw=op[0].toUpperCase()+op.slice(1);oi($w,"on"+Qw)}oi(ey,"onAnimationEnd"),oi(ty,"onAnimationIteration"),oi(ny,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(fw,"onTransitionRun"),oi(dw,"onTransitionStart"),oi(hw,"onTransitionCancel"),oi(iy,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pl));function Cv(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var A=c.length-1;0<=A;A--){var R=c[A],k=R.instance,J=R.currentTarget;if(R=R.listener,k!==_&&y.isPropagationStopped())break e;_=R,y.currentTarget=J;try{_(y)}catch(te){oc(te)}y.currentTarget=null,_=k}else for(A=0;A<c.length;A++){if(R=c[A],k=R.instance,J=R.currentTarget,R=R.listener,k!==_&&y.isPropagationStopped())break e;_=R,y.currentTarget=J;try{_(y)}catch(te){oc(te)}y.currentTarget=null,_=k}}}}function Le(s,r){var l=r[So];l===void 0&&(l=r[So]=new Set);var c=s+"__bubble";l.has(c)||(Iv(r,s,2,!1),l.add(c))}function ap(s,r,l){var c=0;r&&(c|=4),Iv(l,s,c,r)}var Yc="_reactListening"+Math.random().toString(36).slice(2);function lp(s){if(!s[Yc]){s[Yc]=!0,Ja.forEach(function(l){l!=="selectionchange"&&(Xw.has(l)||ap(l,!1,s),ap(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Yc]||(r[Yc]=!0,ap("selectionchange",!1,r))}}function Iv(s,r,l,c){switch(e0(r)){case 2:var y=CR;break;case 8:y=IR;break;default:y=Ap}l=y.bind(null,r,l,s),y=void 0,!Pr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function up(s,r,l,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var R=c.stateNode.containerInfo;if(R===y)break;if(A===4)for(A=c.return;A!==null;){var k=A.tag;if((k===3||k===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;R!==null;){if(A=Ai(R),A===null)return;if(k=A.tag,k===5||k===6||k===26||k===27){c=_=A;continue e}R=R.parentNode}}c=c.return}xs(function(){var J=_,te=kn(l),se=[];e:{var Y=sy.get(s);if(Y!==void 0){var X=xi,ge=s;switch(s){case"keypress":if(kr(l)===0)break e;case"keydown":case"keyup":X=ic;break;case"focusin":ge="focus",X=Lr;break;case"focusout":ge="blur",X=Lr;break;case"beforeblur":case"afterblur":X=Lr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=sl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=$u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=T;break;case ey:case ty:case ny:X=Xu;break;case iy:X=b;break;case"scroll":case"scrollend":X=il;break;case"wheel":X=Q;break;case"copy":case"cut":case"paste":X=Wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=$i;break;case"toggle":case"beforetoggle":X=De}var Ae=(r&4)!==0,ot=!Ae&&(s==="scroll"||s==="scrollend"),B=Ae?Y!==null?Y+"Capture":null:Y;Ae=[];for(var G=J,z;G!==null;){var ne=G;if(z=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||z===null||B===null||(ne=ni(G,B),ne!=null&&Ae.push(Vl(G,ne,z))),ot)break;G=G.return}0<Ae.length&&(Y=new X(Y,ge,null,l,te),se.push({event:Y,listeners:Ae}))}}if((r&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",X=s==="mouseout"||s==="pointerout",Y&&l!==el&&(ge=l.relatedTarget||l.fromElement)&&(Ai(ge)||ge[Ti]))break e;if((X||Y)&&(Y=te.window===te?te:(Y=te.ownerDocument)?Y.defaultView||Y.parentWindow:window,X?(ge=l.relatedTarget||l.toElement,X=J,ge=ge?Ai(ge):null,ge!==null&&(ot=a(ge),Ae=ge.tag,ge!==ot||Ae!==5&&Ae!==27&&Ae!==6)&&(ge=null)):(X=null,ge=J),X!==ge)){if(Ae=sl,ne="onMouseLeave",B="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(Ae=$i,ne="onPointerLeave",B="onPointerEnter",G="pointer"),ot=X==null?Y:Sn(X),z=ge==null?Y:Sn(ge),Y=new Ae(ne,G+"leave",X,l,te),Y.target=ot,Y.relatedTarget=z,ne=null,Ai(te)===J&&(Ae=new Ae(B,G+"enter",ge,l,te),Ae.target=z,Ae.relatedTarget=ot,ne=Ae),ot=ne,X&&ge)t:{for(Ae=Ww,B=X,G=ge,z=0,ne=B;ne;ne=Ae(ne))z++;ne=0;for(var ve=G;ve;ve=Ae(ve))ne++;for(;0<z-ne;)B=Ae(B),z--;for(;0<ne-z;)G=Ae(G),ne--;for(;z--;){if(B===G||G!==null&&B===G.alternate){Ae=B;break t}B=Ae(B),G=Ae(G)}Ae=null}else Ae=null;X!==null&&wv(se,Y,X,Ae,!1),ge!==null&&ot!==null&&wv(se,ot,ge,Ae,!0)}}e:{if(Y=J?Sn(J):window,X=Y.nodeName&&Y.nodeName.toLowerCase(),X==="select"||X==="input"&&Y.type==="file")var Ye=Hg;else if(qg(Y))if(zg)Ye=lw;else{Ye=ow;var ye=rw}else X=Y.nodeName,!X||X.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?J&&wo(J.elementType)&&(Ye=Hg):Ye=aw;if(Ye&&(Ye=Ye(s,J))){Bg(se,Ye,l,te);break e}ye&&ye(s,Y,J),s==="focusout"&&J&&Y.type==="number"&&J.memoizedProps.value!=null&&Wa(Y,"number",Y.value)}switch(ye=J?Sn(J):window,s){case"focusin":(qg(ye)||ye.contentEditable==="true")&&(Vo=ye,Od=J,ul=null);break;case"focusout":ul=Od=Vo=null;break;case"mousedown":Fd=!0;break;case"contextmenu":case"mouseup":case"dragend":Fd=!1,jg(se,l,te);break;case"selectionchange":if(cw)break;case"keydown":case"keyup":jg(se,l,te)}var Ve;if(Qe)e:{switch(s){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Po?Or(s,l)&&(Fe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Fe="onCompositionStart");Fe&&(Pi&&l.locale!=="ko"&&(Po||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Po&&(Ve=nl()):(Ni=te,tl="value"in Ni?Ni.value:Ni.textContent,Po=!0)),ye=Kc(J,Fe),0<ye.length&&(Fe=new Di(Fe,s,null,l,te),se.push({event:Fe,listeners:ye}),Ve?Fe.data=Ve:(Ve=Do(l),Ve!==null&&(Fe.data=Ve)))),(Ve=Ln?tw(s,l):nw(s,l))&&(Fe=Kc(J,"onBeforeInput"),0<Fe.length&&(ye=new Di("onBeforeInput","beforeinput",null,l,te),se.push({event:ye,listeners:Fe}),ye.data=Ve)),Kw(se,s,J,l,te)}Cv(se,r)})}function Vl(s,r,l){return{instance:s,listener:r,currentTarget:l}}function Kc(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=ni(s,l),y!=null&&c.unshift(Vl(s,y,_)),y=ni(s,r),y!=null&&c.push(Vl(s,y,_))),s.tag===3)return c;s=s.return}return[]}function Ww(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function wv(s,r,l,c,y){for(var _=r._reactName,A=[];l!==null&&l!==c;){var R=l,k=R.alternate,J=R.stateNode;if(R=R.tag,k!==null&&k===c)break;R!==5&&R!==26&&R!==27||J===null||(k=J,y?(J=ni(l,_),J!=null&&A.unshift(Vl(l,J,k))):y||(J=ni(l,_),J!=null&&A.push(Vl(l,J,k)))),l=l.return}A.length!==0&&s.push({event:r,listeners:A})}var jw=/\r\n?/g,Zw=/\u0000|\uFFFD/g;function Rv(s){return(typeof s=="string"?s:""+s).replace(jw,`
`).replace(Zw,"")}function bv(s,r){return r=Rv(r),Rv(s)===r}function rt(s,r,l,c,y,_){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||pn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&pn(s,""+c);break;case"className":An(s,"class",c);break;case"tabIndex":An(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":An(s,l,c);break;case"style":Za(s,c,_);break;case"data":if(r!=="object"){An(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ro(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(r!=="input"&&rt(s,r,"name",y.name,y,null),rt(s,r,"formEncType",y.formEncType,y,null),rt(s,r,"formMethod",y.formMethod,y,null),rt(s,r,"formTarget",y.formTarget,y,null)):(rt(s,r,"encType",y.encType,y,null),rt(s,r,"method",y.method,y,null),rt(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ro(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=ti);break;case"onScroll":c!=null&&Le("scroll",s);break;case"onScrollEnd":c!=null&&Le("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Ro(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Le("beforetoggle",s),Le("toggle",s),Co(s,"popover",c);break;case"xlinkActuate":Rt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Rt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Rt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Rt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Rt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Rt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Rt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Rt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Rt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Co(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Ku.get(l)||l,Co(s,l,c))}}function cp(s,r,l,c,y,_){switch(l){case"style":Za(s,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?pn(s,c):(typeof c=="number"||typeof c=="bigint")&&pn(s,""+c);break;case"onScroll":c!=null&&Le("scroll",s);break;case"onScrollEnd":c!=null&&Le("scrollend",s);break;case"onClick":c!=null&&(s.onclick=ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ya.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),_=s[Ft]||null,_=_!=null?_[l]:null,typeof _=="function"&&s.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):Co(s,l,c)}}}function Xt(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",s),Le("load",s);var c=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var A=l[_];if(A!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:rt(s,r,_,A,l,null)}}y&&rt(s,r,"srcSet",l.srcSet,l,null),c&&rt(s,r,"src",l.src,l,null);return;case"input":Le("invalid",s);var R=_=A=y=null,k=null,J=null;for(c in l)if(l.hasOwnProperty(c)){var te=l[c];if(te!=null)switch(c){case"name":y=te;break;case"type":A=te;break;case"checked":k=te;break;case"defaultChecked":J=te;break;case"value":_=te;break;case"defaultValue":R=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,r));break;default:rt(s,r,c,te,l,null)}}zu(s,_,R,k,J,A,y,!1);return;case"select":Le("invalid",s),c=A=_=null;for(y in l)if(l.hasOwnProperty(y)&&(R=l[y],R!=null))switch(y){case"value":_=R;break;case"defaultValue":A=R;break;case"multiple":c=R;default:rt(s,r,y,R,l,null)}r=_,l=A,s.multiple=!!c,r!=null?ws(s,!!c,r,!1):l!=null&&ws(s,!!c,l,!0);return;case"textarea":Le("invalid",s),_=y=c=null;for(A in l)if(l.hasOwnProperty(A)&&(R=l[A],R!=null))switch(A){case"value":c=R;break;case"defaultValue":y=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:rt(s,r,A,R,l,null)}Rs(s,c,y,_);return;case"option":for(k in l)if(l.hasOwnProperty(k)&&(c=l[k],c!=null))switch(k){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:rt(s,r,k,c,l,null)}return;case"dialog":Le("beforetoggle",s),Le("toggle",s),Le("cancel",s),Le("close",s);break;case"iframe":case"object":Le("load",s);break;case"video":case"audio":for(c=0;c<Pl.length;c++)Le(Pl[c],s);break;case"image":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"embed":case"source":case"link":Le("error",s),Le("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in l)if(l.hasOwnProperty(J)&&(c=l[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:rt(s,r,J,c,l,null)}return;default:if(wo(r)){for(te in l)l.hasOwnProperty(te)&&(c=l[te],c!==void 0&&cp(s,r,te,c,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(c=l[R],c!=null&&rt(s,r,R,c,l,null))}function eR(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,A=null,R=null,k=null,J=null,te=null;for(X in l){var se=l[X];if(l.hasOwnProperty(X)&&se!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":k=se;default:c.hasOwnProperty(X)||rt(s,r,X,null,c,se)}}for(var Y in c){var X=c[Y];if(se=l[Y],c.hasOwnProperty(Y)&&(X!=null||se!=null))switch(Y){case"type":_=X;break;case"name":y=X;break;case"checked":J=X;break;case"defaultChecked":te=X;break;case"value":A=X;break;case"defaultValue":R=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:X!==se&&rt(s,r,Y,X,c,se)}}Io(s,A,R,k,J,te,_,y);return;case"select":X=A=R=Y=null;for(_ in l)if(k=l[_],l.hasOwnProperty(_)&&k!=null)switch(_){case"value":break;case"multiple":X=k;default:c.hasOwnProperty(_)||rt(s,r,_,null,c,k)}for(y in c)if(_=c[y],k=l[y],c.hasOwnProperty(y)&&(_!=null||k!=null))switch(y){case"value":Y=_;break;case"defaultValue":R=_;break;case"multiple":A=_;default:_!==k&&rt(s,r,y,_,c,k)}r=R,l=A,c=X,Y!=null?ws(s,!!l,Y,!1):!!c!=!!l&&(r!=null?ws(s,!!l,r,!0):ws(s,!!l,l?[]:"",!1));return;case"textarea":X=Y=null;for(R in l)if(y=l[R],l.hasOwnProperty(R)&&y!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:rt(s,r,R,null,c,y)}for(A in c)if(y=c[A],_=l[A],c.hasOwnProperty(A)&&(y!=null||_!=null))switch(A){case"value":Y=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&rt(s,r,A,y,c,_)}Ju(s,Y,X);return;case"option":for(var ge in l)if(Y=l[ge],l.hasOwnProperty(ge)&&Y!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":s.selected=!1;break;default:rt(s,r,ge,null,c,Y)}for(k in c)if(Y=c[k],X=l[k],c.hasOwnProperty(k)&&Y!==X&&(Y!=null||X!=null))switch(k){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:rt(s,r,k,Y,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in l)Y=l[Ae],l.hasOwnProperty(Ae)&&Y!=null&&!c.hasOwnProperty(Ae)&&rt(s,r,Ae,null,c,Y);for(J in c)if(Y=c[J],X=l[J],c.hasOwnProperty(J)&&Y!==X&&(Y!=null||X!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,r));break;default:rt(s,r,J,Y,c,X)}return;default:if(wo(r)){for(var ot in l)Y=l[ot],l.hasOwnProperty(ot)&&Y!==void 0&&!c.hasOwnProperty(ot)&&cp(s,r,ot,void 0,c,Y);for(te in c)Y=c[te],X=l[te],!c.hasOwnProperty(te)||Y===X||Y===void 0&&X===void 0||cp(s,r,te,Y,c,X);return}}for(var B in l)Y=l[B],l.hasOwnProperty(B)&&Y!=null&&!c.hasOwnProperty(B)&&rt(s,r,B,null,c,Y);for(se in c)Y=c[se],X=l[se],!c.hasOwnProperty(se)||Y===X||Y==null&&X==null||rt(s,r,se,Y,c,X)}function Nv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tR(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],_=y.transferSize,A=y.initiatorType,R=y.duration;if(_&&R&&Nv(A)){for(A=0,R=y.responseEnd,c+=1;c<l.length;c++){var k=l[c],J=k.startTime;if(J>R)break;var te=k.transferSize,se=k.initiatorType;te&&Nv(se)&&(k=k.responseEnd,A+=te*(k<R?1:(R-J)/(k-J)))}if(--c,r+=8*(_+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var fp=null,dp=null;function $c(s){return s.nodeType===9?s:s.ownerDocument}function xv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mv(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function hp(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var pp=null;function nR(){var s=window.event;return s&&s.type==="popstate"?s===pp?!1:(pp=s,!0):(pp=null,!1)}var Dv=typeof setTimeout=="function"?setTimeout:void 0,iR=typeof clearTimeout=="function"?clearTimeout:void 0,Pv=typeof Promise=="function"?Promise:void 0,sR=typeof queueMicrotask=="function"?queueMicrotask:typeof Pv<"u"?function(s){return Pv.resolve(null).then(s).catch(rR)}:Dv;function rR(s){setTimeout(function(){throw s})}function Xs(s){return s==="head"}function Vv(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),aa(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")kl(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,kl(l);for(var _=l.firstChild;_;){var A=_.nextSibling,R=_.nodeName;_[Si]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=A}}else l==="body"&&kl(s.ownerDocument.body);l=y}while(l);aa(r)}function kv(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function mp(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":mp(l),Ao(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function oR(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Si])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=zn(s.nextSibling),s===null)break}return null}function aR(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=zn(s.nextSibling),s===null))return null;return s}function Uv(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=zn(s.nextSibling),s===null))return null;return s}function gp(s){return s.data==="$?"||s.data==="$~"}function yp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function lR(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function zn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var _p=null;function Lv(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return zn(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function Ov(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function Fv(s,r,l){switch(r=$c(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function kl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Ao(s)}var Jn=new Map,Gv=new Set;function Qc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var us=fe.d;fe.d={f:uR,r:cR,D:fR,C:dR,L:hR,m:pR,X:gR,S:mR,M:yR};function uR(){var s=us.f(),r=Gc();return s||r}function cR(s){var r=Vn(s);r!==null&&r.tag===5&&r.type==="form"?i_(r):us.r(s)}var sa=typeof document>"u"?null:document;function qv(s,r,l){var c=sa;if(c&&typeof r=="string"&&r){var y=hn(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),Gv.has(y)||(Gv.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),Xt(r,"link",s),wt(r),c.head.appendChild(r)))}}function fR(s){us.D(s),qv("dns-prefetch",s,null)}function dR(s,r){us.C(s,r),qv("preconnect",s,r)}function hR(s,r,l){us.L(s,r,l);var c=sa;if(c&&s&&r){var y='link[rel="preload"][as="'+hn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+hn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+hn(l.imageSizes)+'"]')):y+='[href="'+hn(s)+'"]';var _=y;switch(r){case"style":_=ra(s);break;case"script":_=oa(s)}Jn.has(_)||(s=E({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),Jn.set(_,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(Ul(_))||r==="script"&&c.querySelector(Ll(_))||(r=c.createElement("link"),Xt(r,"link",s),wt(r),c.head.appendChild(r)))}}function pR(s,r){us.m(s,r);var l=sa;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+hn(c)+'"][href="'+hn(s)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=oa(s)}if(!Jn.has(_)&&(s=E({rel:"modulepreload",href:s},r),Jn.set(_,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ll(_)))return}c=l.createElement("link"),Xt(c,"link",s),wt(c),l.head.appendChild(c)}}}function mR(s,r,l){us.S(s,r,l);var c=sa;if(c&&s){var y=Ci(c).hoistableStyles,_=ra(s);r=r||"default";var A=y.get(_);if(!A){var R={loading:0,preload:null};if(A=c.querySelector(Ul(_)))R.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":r},l),(l=Jn.get(_))&&vp(s,l);var k=A=c.createElement("link");wt(k),Xt(k,"link",s),k._p=new Promise(function(J,te){k.onload=J,k.onerror=te}),k.addEventListener("load",function(){R.loading|=1}),k.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Xc(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:R},y.set(_,A)}}}function gR(s,r){us.X(s,r);var l=sa;if(l&&s){var c=Ci(l).hoistableScripts,y=oa(s),_=c.get(y);_||(_=l.querySelector(Ll(y)),_||(s=E({src:s,async:!0},r),(r=Jn.get(y))&&Ep(s,r),_=l.createElement("script"),wt(_),Xt(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function yR(s,r){us.M(s,r);var l=sa;if(l&&s){var c=Ci(l).hoistableScripts,y=oa(s),_=c.get(y);_||(_=l.querySelector(Ll(y)),_||(s=E({src:s,async:!0,type:"module"},r),(r=Jn.get(y))&&Ep(s,r),_=l.createElement("script"),wt(_),Xt(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function Bv(s,r,l,c){var y=(y=Me.current)?Qc(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=ra(l.href),l=Ci(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=ra(l.href);var _=Ci(y).hoistableStyles,A=_.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,A),(_=y.querySelector(Ul(s)))&&!_._p&&(A.instance=_,A.state.loading=5),Jn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Jn.set(s,l),_||_R(y,s,l,A.state))),r&&c===null)throw Error(i(528,""));return A}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=oa(l),l=Ci(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ra(s){return'href="'+hn(s)+'"'}function Ul(s){return'link[rel="stylesheet"]['+s+"]"}function Hv(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function _R(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Xt(r,"link",l),wt(r),s.head.appendChild(r))}function oa(s){return'[src="'+hn(s)+'"]'}function Ll(s){return"script[async]"+s}function zv(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+hn(l.href)+'"]');if(c)return r.instance=c,wt(c),c;var y=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),wt(c),Xt(c,"style",y),Xc(c,l.precedence,s),r.instance=c;case"stylesheet":y=ra(l.href);var _=s.querySelector(Ul(y));if(_)return r.state.loading|=4,r.instance=_,wt(_),_;c=Hv(l),(y=Jn.get(y))&&vp(c,y),_=(s.ownerDocument||s).createElement("link"),wt(_);var A=_;return A._p=new Promise(function(R,k){A.onload=R,A.onerror=k}),Xt(_,"link",c),r.state.loading|=4,Xc(_,l.precedence,s),r.instance=_;case"script":return _=oa(l.src),(y=s.querySelector(Ll(_)))?(r.instance=y,wt(y),y):(c=l,(y=Jn.get(_))&&(c=E({},l),Ep(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),wt(y),Xt(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Xc(c,l.precedence,s));return r.instance}function Xc(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,A=0;A<c.length;A++){var R=c[A];if(R.dataset.precedence===r)_=R;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function vp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Ep(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Wc=null;function Jv(s,r,l){if(Wc===null){var c=new Map,y=Wc=new Map;y.set(l,c)}else y=Wc,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var _=l[y];if(!(_[Si]||_[It]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(r)||"";A=s+A;var R=c.get(A);R?R.push(_):c.set(A,[_])}}return c}function Yv(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function vR(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Kv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function ER(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=ra(c.href),_=r.querySelector(Ul(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=jc.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=_,wt(_);return}_=r.ownerDocument||r,c=Hv(c),(y=Jn.get(y))&&vp(c,y),_=_.createElement("link"),wt(_);var A=_;A._p=new Promise(function(R,k){A.onload=R,A.onerror=k}),Xt(_,"link",c),l.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=jc.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var Tp=0;function TR(s,r){return s.stylesheets&&s.count===0&&ef(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&ef(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+r);0<s.imgBytes&&Tp===0&&(Tp=62500*tR());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&ef(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>Tp?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function jc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ef(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Zc=null;function ef(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Zc=new Map,r.forEach(SR,s),Zc=null,jc.call(s))}function SR(s,r){if(!(r.state.loading&4)){var l=Zc.get(s);if(l)var c=l.get(null);else{l=new Map,Zc.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var A=y[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}y=r.instance,A=y.getAttribute("data-precedence"),_=l.get(A)||c,_===c&&l.set(null,y),l.set(A,y),this.count++,c=jc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var Ol={$$typeof:W,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function AR(s,r,l,c,y,_,A,R,k){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.hiddenUpdates=Ei(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function $v(s,r,l,c,y,_,A,R,k,J,te,se){return s=new AR(s,r,l,A,k,J,te,se,R),r=1,_===!0&&(r|=24),_=In(3,null,null,r),s.current=_,_.stateNode=s,r=eh(),r.refCount++,s.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:r},sh(_),s}function Qv(s){return s?(s=Lo,s):Lo}function Xv(s,r,l,c,y,_){y=Qv(y),c.context===null?c.context=y:c.pendingContext=y,c=Fs(r),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=Gs(s,c,r),l!==null&&(vn(l,s,r),gl(l,s,r))}function Wv(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function Sp(s,r){Wv(s,r),(s=s.alternate)&&Wv(s,r)}function jv(s){if(s.tag===13||s.tag===31){var r=qr(s,67108864);r!==null&&vn(r,s,67108864),Sp(s,67108864)}}function Zv(s){if(s.tag===13||s.tag===31){var r=xn();r=Nr(r);var l=qr(s,r);l!==null&&vn(l,s,r),Sp(s,r)}}var tf=!0;function CR(s,r,l,c){var y=Z.T;Z.T=null;var _=fe.p;try{fe.p=2,Ap(s,r,l,c)}finally{fe.p=_,Z.T=y}}function IR(s,r,l,c){var y=Z.T;Z.T=null;var _=fe.p;try{fe.p=8,Ap(s,r,l,c)}finally{fe.p=_,Z.T=y}}function Ap(s,r,l,c){if(tf){var y=Cp(c);if(y===null)up(s,r,c,nf,l),t0(s,c);else if(RR(y,s,r,l,c))c.stopPropagation();else if(t0(s,c),r&4&&-1<wR.indexOf(s)){for(;y!==null;){var _=Vn(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=_i(_.pendingLanes);if(A!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var k=1<<31-_t(A);R.entanglements[1]|=k,A&=~k}Li(_),(Xe&6)===0&&(Oc=ln()+500,Dl(0))}}break;case 31:case 13:R=qr(_,2),R!==null&&vn(R,_,2),Gc(),Sp(_,2)}if(_=Cp(c),_===null&&up(s,r,c,nf,l),_===y)break;y=_}y!==null&&c.stopPropagation()}else up(s,r,c,null,l)}}function Cp(s){return s=kn(s),Ip(s)}var nf=null;function Ip(s){if(nf=null,s=Ai(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=d(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return nf=s,null}function e0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ir()){case qa:return 2;case Ba:return 8;case Cs:case Md:return 32;case Vu:return 268435456;default:return 32}default:return 32}}var wp=!1,Ws=null,js=null,Zs=null,Fl=new Map,Gl=new Map,er=[],wR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function t0(s,r){switch(s){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":Fl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(r.pointerId)}}function ql(s,r,l,c,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Vn(r),r!==null&&jv(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function RR(s,r,l,c,y){switch(r){case"focusin":return Ws=ql(Ws,s,r,l,c,y),!0;case"dragenter":return js=ql(js,s,r,l,c,y),!0;case"mouseover":return Zs=ql(Zs,s,r,l,c,y),!0;case"pointerover":var _=y.pointerId;return Fl.set(_,ql(Fl.get(_)||null,s,r,l,c,y)),!0;case"gotpointercapture":return _=y.pointerId,Gl.set(_,ql(Gl.get(_)||null,s,r,l,c,y)),!0}return!1}function n0(s){var r=Ai(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,Zn(s.priority,function(){Zv(l)});return}}else if(r===31){if(r=d(l),r!==null){s.blockedOn=r,Zn(s.priority,function(){Zv(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function sf(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=Cp(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);el=c,l.target.dispatchEvent(c),el=null}else return r=Vn(l),r!==null&&jv(r),s.blockedOn=l,!1;r.shift()}return!0}function i0(s,r,l){sf(s)&&l.delete(r)}function bR(){wp=!1,Ws!==null&&sf(Ws)&&(Ws=null),js!==null&&sf(js)&&(js=null),Zs!==null&&sf(Zs)&&(Zs=null),Fl.forEach(i0),Gl.forEach(i0)}function rf(s,r){s.blockedOn===r&&(s.blockedOn=null,wp||(wp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,bR)))}var of=null;function s0(s){of!==s&&(of=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){of===s&&(of=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(Ip(c||l)===null)continue;break}var _=Vn(l);_!==null&&(s.splice(r,3),r-=3,Ch(_,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function aa(s){function r(k){return rf(k,s)}Ws!==null&&rf(Ws,s),js!==null&&rf(js,s),Zs!==null&&rf(Zs,s),Fl.forEach(r),Gl.forEach(r);for(var l=0;l<er.length;l++){var c=er[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<er.length&&(l=er[0],l.blockedOn===null);)n0(l),l.blockedOn===null&&er.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],_=l[c+1],A=y[Ft]||null;if(typeof _=="function")A||s0(l);else if(A){var R=null;if(_&&_.hasAttribute("formAction")){if(y=_,A=_[Ft]||null)R=A.formAction;else if(Ip(y)!==null)continue}else R=A.action;typeof R=="function"?l[c+1]=R:(l.splice(c,3),c-=3),s0(l)}}}function r0(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Rp(s){this._internalRoot=s}af.prototype.render=Rp.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=xn();Xv(l,c,s,r,null,null)},af.prototype.unmount=Rp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;Xv(s.current,2,null,s,null,null),Gc(),r[Ti]=null}};function af(s){this._internalRoot=s}af.prototype.unstable_scheduleHydration=function(s){if(s){var r=Gu();s={blockedOn:null,target:s,priority:r};for(var l=0;l<er.length&&r!==0&&r<er[l].priority;l++);er.splice(l,0,s),l===0&&n0(s)}};var o0=e.version;if(o0!=="19.2.4")throw Error(i(527,o0,"19.2.4"));fe.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var NR={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lf.isDisabled&&lf.supportsFiber)try{Wn=lf.inject(NR),Jt=lf}catch{}}return Hl.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=h_,_=p_,A=m_;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=$v(s,1,!1,null,null,l,c,null,y,_,A,r0),s[Ti]=r.current,lp(s),new Rp(r)},Hl.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",_=h_,A=p_,R=m_,k=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(k=l.formState)),r=$v(s,1,!0,r,l??null,c,y,k,_,A,R,r0),r.context=Qv(null),l=r.current,c=xn(),c=Nr(c),y=Fs(c),y.callback=null,Gs(l,y,c),l=c,r.current.lanes=l,Rr(r,l),Li(r),s[Ti]=r.current,lp(s),new af(r)},Hl.version="19.2.4",Hl}var g0;function GR(){if(g0)return xp.exports;g0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),xp.exports=FR(),xp.exports}var qR=GR();const BR=wS(qR),HR=()=>{};var y0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},zR=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],m=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},bS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,m=o+2<n.length,h=m?n[o+2]:0,v=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|h>>6,w=h&63;m||(w=64,u||(S=64)),i.push(t[v],t[E],t[S],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(RS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):zR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const h=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||h==null||E==null)throw new JR;const S=a<<2|d>>4;if(i.push(S),h!==64){const w=d<<4&240|h>>2;if(i.push(w),E!==64){const P=h<<6&192|E;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class JR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YR=function(n){const e=RS(n);return bS.encodeByteArray(e,!0)},Pf=function(n){return YR(n).replace(/\./g,"")},NS=function(n){try{return bS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=()=>KR().__FIREBASE_DEFAULTS__,QR=()=>{if(typeof process>"u"||typeof y0>"u")return;const n=y0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},XR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&NS(n[1]);return e&&JSON.parse(e)},ad=()=>{try{return HR()||$R()||QR()||XR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},xS=n=>{var e,t;return(t=(e=ad())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},WR=n=>{const e=xS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},MS=()=>{var n;return(n=ad())==null?void 0:n.config},DS=n=>{var e;return(e=ad())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function PS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Pf(JSON.stringify(t)),Pf(JSON.stringify(u)),""].join(".")}const tu={};function eb(){const n={prod:[],emulator:[]};for(const e of Object.keys(tu))tu[e]?n.emulator.push(e):n.prod.push(e);return n}function tb(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let _0=!1;function VS(n,e){if(typeof window>"u"||typeof document>"u"||!ba(window.location.host)||tu[n]===e||tu[n]||_0)return;tu[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=eb().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function h(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{_0=!0,u()},S}function v(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=tb(i),w=t("text"),P=document.getElementById(w)||document.createElement("span"),O=t("learnmore"),F=document.getElementById(O)||document.createElement("a"),K=t("preprendIcon"),$=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const W=S.element;d(W),v(F,O);const ie=h();m($,K),W.append($,P,F,ie),document.body.appendChild(W)}a?(P.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function ib(){var e;const n=(e=ad())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ob(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ab(){const n=an();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function lb(){return!ib()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ub(){try{return typeof indexedDB=="object"}catch{return!1}}function cb(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="FirebaseError";class Es extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=fb,Object.setPrototypeOf(this,Es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Su.prototype.create)}}class Su{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?db(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Es(o,d,i)}}function db(n,e){return n.replace(hb,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const hb=/\{\$([^}]+)}/g;function pb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ro(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(v0(a)&&v0(u)){if(!ro(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function v0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $l(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Ql(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function mb(n,e){const t=new gb(n,e);return t.subscribe.bind(t)}class gb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");yb(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Vp),o.error===void 0&&(o.error=Vp),o.complete===void 0&&(o.complete=Vp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yb(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Vp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(n){return n&&n._delegate?n._delegate:n}class oo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new jR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Eb(e))try{this.getOrInitializeService({instanceIdentifier:eo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=eo){return this.instances.has(e)}getOptions(e=eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:vb(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=eo){return this.component?this.component.multipleInstances?e:eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vb(n){return n===eo?void 0:n}function Eb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _b(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ge||(Ge={}));const Sb={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},Ab=Ge.INFO,Cb={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},Ib=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=Cb[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Om{constructor(e){this.name=e,this._logLevel=Ab,this._logHandler=Ib,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Sb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const wb=(n,e)=>e.some(t=>n instanceof t);let E0,T0;function Rb(){return E0||(E0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bb(){return T0||(T0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kS=new WeakMap,Xp=new WeakMap,US=new WeakMap,kp=new WeakMap,Fm=new WeakMap;function Nb(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(lr(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&kS.set(t,n)}).catch(()=>{}),Fm.set(e,n),e}function xb(n){if(Xp.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Xp.set(n,e)}let Wp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Xp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||US.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return lr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Mb(n){Wp=n(Wp)}function Db(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Up(this),e,...t);return US.set(i,e.sort?e.sort():[e]),lr(i)}:bb().includes(n)?function(...e){return n.apply(Up(this),e),lr(kS.get(this))}:function(...e){return lr(n.apply(Up(this),e))}}function Pb(n){return typeof n=="function"?Db(n):(n instanceof IDBTransaction&&xb(n),wb(n,Rb())?new Proxy(n,Wp):n)}function lr(n){if(n instanceof IDBRequest)return Nb(n);if(kp.has(n))return kp.get(n);const e=Pb(n);return e!==n&&(kp.set(n,e),Fm.set(e,n)),e}const Up=n=>Fm.get(n);function Vb(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=lr(u);return i&&u.addEventListener("upgradeneeded",m=>{i(lr(u.result),m.oldVersion,m.newVersion,lr(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{a&&m.addEventListener("close",()=>a()),o&&m.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const kb=["get","getKey","getAll","getAllKeys","count"],Ub=["put","add","delete","clear"],Lp=new Map;function S0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Lp.get(e))return Lp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=Ub.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||kb.includes(t)))return;const a=async function(u,...d){const m=this.transaction(u,o?"readwrite":"readonly");let h=m.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[t](...d),o&&m.done]))[0]};return Lp.set(e,a),a}Mb(n=>({...n,get:(e,t,i)=>S0(e,t)||n.get(e,t,i),has:(e,t)=>!!S0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ob(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Ob(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jp="@firebase/app",A0="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Om("@firebase/app"),Fb="@firebase/app-compat",Gb="@firebase/analytics-compat",qb="@firebase/analytics",Bb="@firebase/app-check-compat",Hb="@firebase/app-check",zb="@firebase/auth",Jb="@firebase/auth-compat",Yb="@firebase/database",Kb="@firebase/data-connect",$b="@firebase/database-compat",Qb="@firebase/functions",Xb="@firebase/functions-compat",Wb="@firebase/installations",jb="@firebase/installations-compat",Zb="@firebase/messaging",eN="@firebase/messaging-compat",tN="@firebase/performance",nN="@firebase/performance-compat",iN="@firebase/remote-config",sN="@firebase/remote-config-compat",rN="@firebase/storage",oN="@firebase/storage-compat",aN="@firebase/firestore",lN="@firebase/ai",uN="@firebase/firestore-compat",cN="firebase",fN="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="[DEFAULT]",dN={[jp]:"fire-core",[Fb]:"fire-core-compat",[qb]:"fire-analytics",[Gb]:"fire-analytics-compat",[Hb]:"fire-app-check",[Bb]:"fire-app-check-compat",[zb]:"fire-auth",[Jb]:"fire-auth-compat",[Yb]:"fire-rtdb",[Kb]:"fire-data-connect",[$b]:"fire-rtdb-compat",[Qb]:"fire-fn",[Xb]:"fire-fn-compat",[Wb]:"fire-iid",[jb]:"fire-iid-compat",[Zb]:"fire-fcm",[eN]:"fire-fcm-compat",[tN]:"fire-perf",[nN]:"fire-perf-compat",[iN]:"fire-rc",[sN]:"fire-rc-compat",[rN]:"fire-gcs",[oN]:"fire-gcs-compat",[aN]:"fire-fst",[uN]:"fire-fst-compat",[lN]:"fire-vertex","fire-js":"fire-js",[cN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=new Map,hN=new Map,em=new Map;function C0(n,e){try{n.container.addComponent(e)}catch(t){ms.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Sa(n){const e=n.name;if(em.has(e))return ms.debug(`There were multiple attempts to register component ${e}.`),!1;em.set(e,n);for(const t of Vf.values())C0(t,n);for(const t of hN.values())C0(t,n);return!0}function Gm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Mn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ur=new Su("app","Firebase",pN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new oo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=fN;function LS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Zp,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw ur.create("bad-app-name",{appName:String(o)});if(t||(t=MS()),!t)throw ur.create("no-options");const a=Vf.get(o);if(a){if(ro(t,a.options)&&ro(i,a.config))return a;throw ur.create("duplicate-app",{appName:o})}const u=new Tb(o);for(const m of em.values())u.addComponent(m);const d=new mN(t,i,u);return Vf.set(o,d),d}function OS(n=Zp){const e=Vf.get(n);if(!e&&n===Zp&&MS())return LS();if(!e)throw ur.create("no-app",{appName:n});return e}function cr(n,e,t){let i=dN[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ms.warn(u.join(" "));return}Sa(new oo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN="firebase-heartbeat-database",yN=1,uu="firebase-heartbeat-store";let Op=null;function FS(){return Op||(Op=Vb(gN,yN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(uu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ur.create("idb-open",{originalErrorMessage:n.message})})),Op}async function _N(n){try{const t=(await FS()).transaction(uu),i=await t.objectStore(uu).get(GS(n));return await t.done,i}catch(e){if(e instanceof Es)ms.warn(e.message);else{const t=ur.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ms.warn(t.message)}}}async function I0(n,e){try{const i=(await FS()).transaction(uu,"readwrite");await i.objectStore(uu).put(e,GS(n)),await i.done}catch(t){if(t instanceof Es)ms.warn(t.message);else{const i=ur.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ms.warn(i.message)}}}function GS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=1024,EN=30;class TN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=w0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>EN){const u=CN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ms.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=w0(),{heartbeatsToSend:i,unsentEntries:o}=SN(this._heartbeatsCache.heartbeats),a=Pf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ms.warn(t),""}}}function w0(){return new Date().toISOString().substring(0,10)}function SN(n,e=vN){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),R0(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),R0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class AN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ub()?cb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await _N(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return I0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return I0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function R0(n){return Pf(JSON.stringify({version:2,heartbeats:n})).length}function CN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(n){Sa(new oo("platform-logger",e=>new Lb(e),"PRIVATE")),Sa(new oo("heartbeat",e=>new TN(e),"PRIVATE")),cr(jp,A0,n),cr(jp,A0,"esm2020"),cr("fire-js","")}IN("");function qS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wN=qS,BS=new Su("auth","Firebase",qS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf=new Om("@firebase/auth");function RN(n,...e){kf.logLevel<=Ge.WARN&&kf.warn(`Auth (${Na}): ${n}`,...e)}function Tf(n,...e){kf.logLevel<=Ge.ERROR&&kf.error(`Auth (${Na}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(n,...e){throw Bm(n,...e)}function fi(n,...e){return Bm(n,...e)}function qm(n,e,t){const i={...wN(),[e]:t};return new Su("auth","Firebase",i).create(e,{appName:n.name})}function hs(n){return qm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bN(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Qn(n,"argument-error"),qm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Bm(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return BS.create(n,...e)}function Ce(n,e,...t){if(!n)throw Bm(e,...t)}function fs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Tf(e),new Error(e)}function gs(n,e){n||fs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function NN(){return b0()==="http:"||b0()==="https:"}function b0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NN()||rb()||"connection"in navigator)?navigator.onLine:!0}function MN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,t){this.shortDelay=e,this.longDelay=t,gs(t>e,"Short delay should be less than long delay!"),this.isMobile=nb()||ob()}get(){return xN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(n,e){gs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VN=new Cu(3e4,6e4);function vr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Er(n,e,t,i,o={}){return zS(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=Au({key:n.config.apiKey,...u}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:m,...a};return sb()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&ba(n.emulatorConfig.host)&&(h.credentials="include"),HS.fetch()(await JS(n,n.config.apiHost,t,d),h)})}async function zS(n,e,t){n._canInitEmulator=!1;const i={...DN,...e};try{const o=new UN(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw uf(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[m,h]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw uf(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw uf(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw uf(n,"user-disabled",u);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw qm(n,v,h);Qn(n,v)}}catch(o){if(o instanceof Es)throw o;Qn(n,"network-request-failed",{message:String(o)})}}async function Iu(n,e,t,i,o={}){const a=await Er(n,e,t,i,o);return"mfaPendingCredential"in a&&Qn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function JS(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?Hm(n.config,o):`${n.config.apiScheme}://${o}`;return PN.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function kN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class UN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(fi(this.auth,"network-request-failed")),VN.get())})}}function uf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=fi(n,e,i);return o.customData._tokenResponse=t,o}function N0(n){return n!==void 0&&n.enterprise!==void 0}class LN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return kN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ON(n,e){return Er(n,"GET","/v2/recaptchaConfig",vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(n,e){return Er(n,"POST","/v1/accounts:delete",e)}async function Uf(n,e){return Er(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GN(n,e=!1){const t=Dn(n),i=await t.getIdToken(e),o=zm(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:nu(Fp(o.auth_time)),issuedAtTime:nu(Fp(o.iat)),expirationTime:nu(Fp(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Fp(n){return Number(n)*1e3}function zm(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Tf("JWT malformed, contained fewer than 3 sections"),null;try{const o=NS(t);return o?JSON.parse(o):(Tf("Failed to decode base64 JWT payload"),null)}catch(o){return Tf("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function x0(n){const e=zm(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Es&&qN(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function qN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nu(this.lastLoginAt),this.creationTime=nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lf(n){var E;const e=n.auth,t=await n.getIdToken(),i=await cu(n,Uf(e,{idToken:t}));Ce(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=(E=o.providerUserInfo)!=null&&E.length?YS(o.providerUserInfo):[],u=zN(n.providerData,a),d=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),h=d?m:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new nm(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,v)}async function HN(n){const e=Dn(n);await Lf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zN(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function YS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(n,e){const t=await zS(n,{},async()=>{const i=Au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await JS(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:i};return n.emulatorConfig&&ba(n.emulatorConfig.host)&&(m.credentials="include"),HS.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function YN(n,e){return Er(n,"POST","/v2/accounts:revokeToken",vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):x0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=x0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await JN(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new ma;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ce(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ma,this.toJSON())}_performRefresh(){return fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ui{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new BN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new nm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await cu(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return GN(this,e)}reload(){return HN(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ui({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Lf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(hs(this.auth));const e=await this.getIdToken();return await cu(this,FN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,h=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:w,providerData:P,stsTokenManager:O}=t;Ce(E&&O,e,"internal-error");const F=ma.fromJSON(this.name,O);Ce(typeof E=="string",e,"internal-error"),nr(i,e.name),nr(o,e.name),Ce(typeof S=="boolean",e,"internal-error"),Ce(typeof w=="boolean",e,"internal-error"),nr(a,e.name),nr(u,e.name),nr(d,e.name),nr(m,e.name),nr(h,e.name),nr(v,e.name);const K=new ui({uid:E,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:w,photoURL:u,phoneNumber:a,tenantId:d,stsTokenManager:F,createdAt:h,lastLoginAt:v});return P&&Array.isArray(P)&&(K.providerData=P.map($=>({...$}))),m&&(K._redirectEventId=m),K}static async _fromIdTokenResponse(e,t,i=!1){const o=new ma;o.updateFromServerResponse(t);const a=new ui({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Lf(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?YS(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new ma;d.updateFromIdToken(i);const m=new ui({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new nm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(m,h),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0=new Map;function ds(n){gs(n instanceof Function,"Expected a class definition");let e=M0.get(n);return e?(gs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,M0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}KS.type="NONE";const D0=KS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(n,e,t){return`firebase:${n}:${e}:${t}`}class ga{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Sf(this.userKey,o.apiKey,a),this.fullPersistenceKey=Sf("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Uf(this.auth,{idToken:e}).catch(()=>{});return t?ui._fromGetAccountInfoResponse(this.auth,t,e):null}return ui._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ga(ds(D0),e,i);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||ds(D0);const u=Sf(i,e.config.apiKey,e.name);let d=null;for(const h of t)try{const v=await h._get(u);if(v){let E;if(typeof v=="string"){const S=await Uf(e,{idToken:v}).catch(()=>{});if(!S)break;E=await ui._fromGetAccountInfoResponse(e,S,v)}else E=ui._fromJSON(e,v);h!==a&&(d=E),a=h;break}}catch{}const m=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new ga(a,e,i):(a=m[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new ga(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($S(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZS(e))return"Blackberry";if(eA(e))return"Webos";if(QS(e))return"Safari";if((e.includes("chrome/")||XS(e))&&!e.includes("edge/"))return"Chrome";if(jS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function $S(n=an()){return/firefox\//i.test(n)}function QS(n=an()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XS(n=an()){return/crios\//i.test(n)}function WS(n=an()){return/iemobile/i.test(n)}function jS(n=an()){return/android/i.test(n)}function ZS(n=an()){return/blackberry/i.test(n)}function eA(n=an()){return/webos/i.test(n)}function Jm(n=an()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KN(n=an()){var e;return Jm(n)&&!!((e=window.navigator)!=null&&e.standalone)}function $N(){return ab()&&document.documentMode===10}function tA(n=an()){return Jm(n)||jS(n)||eA(n)||ZS(n)||/windows phone/i.test(n)||WS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(n,e=[]){let t;switch(n){case"Browser":t=P0(an());break;case"Worker":t=`${P0(an())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Na}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const m=e(a);u(m)}catch(m){d(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(n,e={}){return Er(n,"GET","/v2/passwordPolicy",vr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=6;class jN{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??WN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new V0(this),this.idTokenSubscription=new V0(this),this.beforeStateQueue=new QN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ds(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await ga.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Uf(this,{idToken:e}),i=await ui._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Mn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,d=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===d)&&(m!=null&&m.user)&&(i=m.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Lf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mn(this.app))return Promise.reject(hs(this));const t=e?Dn(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mn(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XN(this),t=new jN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Su("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await YN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ds(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await ga.create(this,[ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&RN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Tr(n){return Dn(n)}class V0{constructor(e){this.auth=e,this.observer=null,this.addObserver=mb(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ex(n){ld=n}function iA(n){return ld.loadJS(n)}function tx(){return ld.recaptchaEnterpriseScript}function nx(){return ld.gapiScript}function ix(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class sx{constructor(){this.enterprise=new rx}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class rx{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ox="recaptcha-enterprise",sA="NO_RECAPTCHA";class ax{constructor(e){this.type=ox,this.auth=Tr(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{ON(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new LN(m);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}}).catch(m=>{d(m)})})}function o(a,u,d){const m=window.grecaptcha;N0(m)?m.enterprise.ready(()=>{m.enterprise.execute(a,{action:e}).then(h=>{u(h)}).catch(()=>{u(sA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sx().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&N0(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=tx();m.length!==0&&(m+=d),iA(m).then(()=>{o(d,a,u)}).catch(h=>{u(h)})}}).catch(d=>{u(d)})})}}async function k0(n,e,t,i=!1,o=!1){const a=new ax(n);let u;if(o)u=sA;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function im(n,e,t,i,o){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await k0(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await k0(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(n,e){const t=Gm(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(ro(a,e??{}))return o;Qn(o,"already-initialized")}return t.initialize({options:e})}function ux(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ds);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function cx(n,e,t){const i=Tr(n);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=rA(e),{host:u,port:d}=fx(e),m=d===null?"":`:${d}`,h={url:`${a}//${u}${m}/`},v=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(ro(h,i.config.emulator)&&ro(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,ba(u)?(PS(`${a}//${u}${m}`),VS("Auth",!0)):dx()}function rA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function fx(n){const e=rA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:U0(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:U0(u)}}}function U0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function dx(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fs("not implemented")}_getIdTokenResponse(e){return fs("not implemented")}_linkToIdToken(e,t){return fs("not implemented")}_getReauthenticationResolver(e){return fs("not implemented")}}async function hx(n,e){return Er(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function px(n,e){return Iu(n,"POST","/v1/accounts:signInWithPassword",vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mx(n,e){return Iu(n,"POST","/v1/accounts:signInWithEmailLink",vr(n,e))}async function gx(n,e){return Iu(n,"POST","/v1/accounts:signInWithEmailLink",vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends Ym{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new fu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new fu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,t,"signInWithPassword",px);case"emailLink":return mx(e,{email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,i,"signUpPassword",hx);case"emailLink":return gx(e,{idToken:t,email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(n,e){return Iu(n,"POST","/v1/accounts:signInWithIdp",vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx="http://localhost";class ao extends Ym{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=t;if(!i||!o)return null;const u=new ao(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return ya(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ya(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ya(e,t)}buildRequest(){const e={requestUri:yx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Au(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vx(n){const e=$l(Ql(n)).link,t=e?$l(Ql(e)).deep_link_id:null,i=$l(Ql(n)).deep_link_id;return(i?$l(Ql(i)).link:null)||i||t||e||n}class Km{constructor(e){const t=$l(Ql(e)),i=t.apiKey??null,o=t.oobCode??null,a=_x(t.mode??null);Ce(i&&o&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=vx(e);try{return new Km(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.providerId=xa.PROVIDER_ID}static credential(e,t){return fu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Km.parseLink(t);return Ce(i,"argument-error"),fu._fromEmailAndCode(e,i.code,i.tenantId)}}xa.PROVIDER_ID="password";xa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends $m{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends wu{constructor(){super("facebook.com")}static credential(e){return ao._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.FACEBOOK_SIGN_IN_METHOD="facebook.com";sr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ao._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return cs.credential(t,i)}catch{return null}}}cs.GOOGLE_SIGN_IN_METHOD="google.com";cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends wu{constructor(){super("github.com")}static credential(e){return ao._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.GITHUB_SIGN_IN_METHOD="github.com";rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends wu{constructor(){super("twitter.com")}static credential(e,t){return ao._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return or.credential(t,i)}catch{return null}}}or.TWITTER_SIGN_IN_METHOD="twitter.com";or.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ex(n,e){return Iu(n,"POST","/v1/accounts:signUp",vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await ui._fromIdTokenResponse(e,i,o),u=L0(i);return new lo({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=L0(i);return new lo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function L0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of extends Es{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Of.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Of(e,t,i,o)}}function oA(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Of._fromErrorAndOperation(n,a,e,i):a})}async function Tx(n,e,t=!1){const i=await cu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return lo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sx(n,e,t=!1){const{auth:i}=n;if(Mn(i.app))return Promise.reject(hs(i));const o="reauthenticate";try{const a=await cu(n,oA(i,o,e,n),t);Ce(a.idToken,i,"internal-error");const u=zm(a.idToken);Ce(u,i,"internal-error");const{sub:d}=u;return Ce(n.uid===d,i,"user-mismatch"),lo._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Qn(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aA(n,e,t=!1){if(Mn(n.app))return Promise.reject(hs(n));const i="signIn",o=await oA(n,i,e),a=await lo._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function Ax(n,e){return aA(Tr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lA(n){const e=Tr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Cx(n,e,t){if(Mn(n.app))return Promise.reject(hs(n));const i=Tr(n),u=await im(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ex).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&lA(n),m}),d=await lo._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function Ix(n,e,t){return Mn(n.app)?Promise.reject(hs(n)):Ax(Dn(n),xa.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&lA(n),i})}function wx(n,e,t,i){return Dn(n).onIdTokenChanged(e,t,i)}function Rx(n,e,t){return Dn(n).beforeAuthStateChanged(e,t)}function bx(n,e,t,i){return Dn(n).onAuthStateChanged(e,t,i)}function Nx(n){return Dn(n).signOut()}const Ff="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ff,"1"),this.storage.removeItem(Ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=1e3,Mx=10;class cA extends uA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);$N()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Mx):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},xx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cA.type="LOCAL";const Dx=cA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA extends uA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fA.type="SESSION";const dA=fA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new ud(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async h=>h(t.origin,a)),m=await Px(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ud.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,m)=>{const h=Qm("",20);o.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===h)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(v),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(){return window}function kx(n){Fi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(){return typeof Fi().WorkerGlobalScope<"u"&&typeof Fi().importScripts=="function"}async function Ux(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Lx(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Ox(){return hA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="firebaseLocalStorageDb",Fx=1,Gf="firebaseLocalStorage",mA="fbase_key";class Ru{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function cd(n,e){return n.transaction([Gf],e?"readwrite":"readonly").objectStore(Gf)}function Gx(){const n=indexedDB.deleteDatabase(pA);return new Ru(n).toPromise()}function sm(){const n=indexedDB.open(pA,Fx);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Gf,{keyPath:mA})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Gf)?e(i):(i.close(),await Gx(),e(await sm()))})})}async function O0(n,e,t){const i=cd(n,!0).put({[mA]:e,value:t});return new Ru(i).toPromise()}async function qx(n,e){const t=cd(n,!1).get(e),i=await new Ru(t).toPromise();return i===void 0?null:i.value}function F0(n,e){const t=cd(n,!0).delete(e);return new Ru(t).toPromise()}const Bx=800,Hx=3;class gA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Hx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ud._getInstance(Ox()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await Ux(),!this.activeServiceWorker)return;this.sender=new Vx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Lx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sm();return await O0(e,Ff,"1"),await F0(e,Ff),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>O0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>qx(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>F0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=cd(o,!1).getAll();return new Ru(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Bx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gA.type="LOCAL";const zx=gA;new Cu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(n,e){return e?ds(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm extends Ym{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ya(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ya(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ya(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Jx(n){return aA(n.auth,new Xm(n),n.bypassAuthState)}function Yx(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),Sx(t,new Xm(n),n.bypassAuthState)}async function Kx(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),Tx(t,new Xm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jx;case"linkViaPopup":case"linkViaRedirect":return Kx;case"reauthViaPopup":case"reauthViaRedirect":return Yx;default:Qn(this.auth,"internal-error")}}resolve(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=new Cu(2e3,1e4);async function Qx(n,e,t){if(Mn(n.app))return Promise.reject(fi(n,"operation-not-supported-in-this-environment"));const i=Tr(n);bN(n,e,$m);const o=yA(i,t);return new no(i,"signInViaPopup",e,o).executeNotNull()}class no extends _A{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,no.currentPopupAction&&no.currentPopupAction.cancel(),no.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){gs(this.filter.length===1,"Popup operations only handle one event");const e=Qm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,no.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$x.get())};e()}}no.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="pendingRedirect",Af=new Map;class Wx extends _A{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Af.get(this.auth._key());if(!e){try{const i=await jx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Af.set(this.auth._key(),e)}return this.bypassAuthState||Af.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jx(n,e){const t=t1(e),i=e1(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function Zx(n,e){Af.set(n._key(),e)}function e1(n){return ds(n._redirectPersistence)}function t1(n){return Sf(Xx,n.config.apiKey,n.name)}async function n1(n,e,t=!1){if(Mn(n.app))return Promise.reject(hs(n));const i=Tr(n),o=yA(i,e),u=await new Wx(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=600*1e3;class s1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!r1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!vA(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(fi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=i1&&this.cachedEventUids.clear(),this.cachedEventUids.has(G0(e))}saveEventToCache(e){this.cachedEventUids.add(G0(e)),this.lastProcessedEventTime=Date.now()}}function G0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function vA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function r1(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o1(n,e={}){return Er(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l1=/^https?/;async function u1(n){if(n.config.emulator)return;const{authorizedDomains:e}=await o1(n);for(const t of e)try{if(c1(t))return}catch{}Qn(n,"unauthorized-domain")}function c1(n){const e=tm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!l1.test(t))return!1;if(a1.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=new Cu(3e4,6e4);function q0(){const n=Fi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function d1(n){return new Promise((e,t)=>{var o,a,u;function i(){q0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{q0(),t(fi(n,"network-request-failed"))},timeout:f1.get()})}if((a=(o=Fi().gapi)==null?void 0:o.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=Fi().gapi)!=null&&u.load)i();else{const d=ix("iframefcb");return Fi()[d]=()=>{gapi.load?i():t(fi(n,"network-request-failed"))},iA(`${nx()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw Cf=null,e})}let Cf=null;function h1(n){return Cf=Cf||d1(n),Cf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=new Cu(5e3,15e3),m1="__/auth/iframe",g1="emulator/auth/iframe",y1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v1(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Hm(e,g1):`https://${n.config.authDomain}/${m1}`,i={apiKey:e.apiKey,appName:n.name,v:Na},o=_1.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Au(i).slice(1)}`}async function E1(n){const e=await h1(n),t=Fi().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:v1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:y1,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=fi(n,"network-request-failed"),d=Fi().setTimeout(()=>{a(u)},p1.get());function m(){Fi().clearTimeout(d),o(i)}i.ping(m).then(m,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},S1=500,A1=600,C1="_blank",I1="http://localhost";class B0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function w1(n,e,t,i=S1,o=A1){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m={...T1,width:i.toString(),height:o.toString(),top:a,left:u},h=an().toLowerCase();t&&(d=XS(h)?C1:t),$S(h)&&(e=e||I1,m.scrollbars="yes");const v=Object.entries(m).reduce((S,[w,P])=>`${S}${w}=${P},`,"");if(KN(h)&&d!=="_self")return R1(e||"",d),new B0(null);const E=window.open(e||"",d,v);Ce(E,n,"popup-blocked");try{E.focus()}catch{}return new B0(E)}function R1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="__/auth/handler",N1="emulator/auth/handler",x1=encodeURIComponent("fac");async function H0(n,e,t,i,o,a){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Na,eventId:o};if(e instanceof $m){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",pb(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof wu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const m=await n._getAppCheckToken(),h=m?`#${x1}=${encodeURIComponent(m)}`:"";return`${M1(n)}?${Au(d).slice(1)}${h}`}function M1({config:n}){return n.emulator?Hm(n,N1):`https://${n.authDomain}/${b1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="webStorageSupport";class D1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dA,this._completeRedirectFn=n1,this._overrideRedirectResult=Zx}async _openPopup(e,t,i,o){var u;gs((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await H0(e,t,i,tm(),o);return w1(e,a,Qm())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await H0(e,t,i,tm(),o);return kx(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(gs(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await E1(e),i=new s1(e);return t.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gp,{type:Gp},o=>{var u;const a=(u=o==null?void 0:o[0])==null?void 0:u[Gp];a!==void 0&&t(!!a),Qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=u1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tA()||QS()||Jm()}}const P1=D1;var z0="@firebase/auth",J0="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function U1(n){Sa(new oo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ce(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nA(n)},h=new ZN(i,o,a,m);return ux(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Sa(new oo("auth-internal",e=>{const t=Tr(e.getProvider("auth").getImmediate());return(i=>new V1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),cr(z0,J0,k1(n)),cr(z0,J0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=300,O1=DS("authIdTokenMaxAge")||L1;let Y0=null;const F1=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>O1)return;const o=t==null?void 0:t.token;Y0!==o&&(Y0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function G1(n=OS()){const e=Gm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=lx(n,{popupRedirectResolver:P1,persistence:[zx,Dx,dA]}),i=DS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=F1(a.toString());Rx(t,u,()=>u(t.currentUser)),wx(t,d=>u(d))}}const o=xS("auth");return o&&cx(t,`http://${o}`),t}function q1(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}ex({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=fi("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",q1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});U1("Browser");var B1="firebase",H1="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr(B1,H1,"app");var K0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fr,EA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,x){function M(){}M.prototype=x.prototype,N.F=x.prototype,N.prototype=new M,N.prototype.constructor=N,N.D=function(L,U,q){for(var D=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)D[xe-2]=arguments[xe];return x.prototype[U].apply(L,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,x,M){M||(M=0);const L=Array(16);if(typeof x=="string")for(var U=0;U<16;++U)L[U]=x.charCodeAt(M++)|x.charCodeAt(M++)<<8|x.charCodeAt(M++)<<16|x.charCodeAt(M++)<<24;else for(U=0;U<16;++U)L[U]=x[M++]|x[M++]<<8|x[M++]<<16|x[M++]<<24;x=N.g[0],M=N.g[1],U=N.g[2];let q=N.g[3],D;D=x+(q^M&(U^q))+L[0]+3614090360&4294967295,x=M+(D<<7&4294967295|D>>>25),D=q+(U^x&(M^U))+L[1]+3905402710&4294967295,q=x+(D<<12&4294967295|D>>>20),D=U+(M^q&(x^M))+L[2]+606105819&4294967295,U=q+(D<<17&4294967295|D>>>15),D=M+(x^U&(q^x))+L[3]+3250441966&4294967295,M=U+(D<<22&4294967295|D>>>10),D=x+(q^M&(U^q))+L[4]+4118548399&4294967295,x=M+(D<<7&4294967295|D>>>25),D=q+(U^x&(M^U))+L[5]+1200080426&4294967295,q=x+(D<<12&4294967295|D>>>20),D=U+(M^q&(x^M))+L[6]+2821735955&4294967295,U=q+(D<<17&4294967295|D>>>15),D=M+(x^U&(q^x))+L[7]+4249261313&4294967295,M=U+(D<<22&4294967295|D>>>10),D=x+(q^M&(U^q))+L[8]+1770035416&4294967295,x=M+(D<<7&4294967295|D>>>25),D=q+(U^x&(M^U))+L[9]+2336552879&4294967295,q=x+(D<<12&4294967295|D>>>20),D=U+(M^q&(x^M))+L[10]+4294925233&4294967295,U=q+(D<<17&4294967295|D>>>15),D=M+(x^U&(q^x))+L[11]+2304563134&4294967295,M=U+(D<<22&4294967295|D>>>10),D=x+(q^M&(U^q))+L[12]+1804603682&4294967295,x=M+(D<<7&4294967295|D>>>25),D=q+(U^x&(M^U))+L[13]+4254626195&4294967295,q=x+(D<<12&4294967295|D>>>20),D=U+(M^q&(x^M))+L[14]+2792965006&4294967295,U=q+(D<<17&4294967295|D>>>15),D=M+(x^U&(q^x))+L[15]+1236535329&4294967295,M=U+(D<<22&4294967295|D>>>10),D=x+(U^q&(M^U))+L[1]+4129170786&4294967295,x=M+(D<<5&4294967295|D>>>27),D=q+(M^U&(x^M))+L[6]+3225465664&4294967295,q=x+(D<<9&4294967295|D>>>23),D=U+(x^M&(q^x))+L[11]+643717713&4294967295,U=q+(D<<14&4294967295|D>>>18),D=M+(q^x&(U^q))+L[0]+3921069994&4294967295,M=U+(D<<20&4294967295|D>>>12),D=x+(U^q&(M^U))+L[5]+3593408605&4294967295,x=M+(D<<5&4294967295|D>>>27),D=q+(M^U&(x^M))+L[10]+38016083&4294967295,q=x+(D<<9&4294967295|D>>>23),D=U+(x^M&(q^x))+L[15]+3634488961&4294967295,U=q+(D<<14&4294967295|D>>>18),D=M+(q^x&(U^q))+L[4]+3889429448&4294967295,M=U+(D<<20&4294967295|D>>>12),D=x+(U^q&(M^U))+L[9]+568446438&4294967295,x=M+(D<<5&4294967295|D>>>27),D=q+(M^U&(x^M))+L[14]+3275163606&4294967295,q=x+(D<<9&4294967295|D>>>23),D=U+(x^M&(q^x))+L[3]+4107603335&4294967295,U=q+(D<<14&4294967295|D>>>18),D=M+(q^x&(U^q))+L[8]+1163531501&4294967295,M=U+(D<<20&4294967295|D>>>12),D=x+(U^q&(M^U))+L[13]+2850285829&4294967295,x=M+(D<<5&4294967295|D>>>27),D=q+(M^U&(x^M))+L[2]+4243563512&4294967295,q=x+(D<<9&4294967295|D>>>23),D=U+(x^M&(q^x))+L[7]+1735328473&4294967295,U=q+(D<<14&4294967295|D>>>18),D=M+(q^x&(U^q))+L[12]+2368359562&4294967295,M=U+(D<<20&4294967295|D>>>12),D=x+(M^U^q)+L[5]+4294588738&4294967295,x=M+(D<<4&4294967295|D>>>28),D=q+(x^M^U)+L[8]+2272392833&4294967295,q=x+(D<<11&4294967295|D>>>21),D=U+(q^x^M)+L[11]+1839030562&4294967295,U=q+(D<<16&4294967295|D>>>16),D=M+(U^q^x)+L[14]+4259657740&4294967295,M=U+(D<<23&4294967295|D>>>9),D=x+(M^U^q)+L[1]+2763975236&4294967295,x=M+(D<<4&4294967295|D>>>28),D=q+(x^M^U)+L[4]+1272893353&4294967295,q=x+(D<<11&4294967295|D>>>21),D=U+(q^x^M)+L[7]+4139469664&4294967295,U=q+(D<<16&4294967295|D>>>16),D=M+(U^q^x)+L[10]+3200236656&4294967295,M=U+(D<<23&4294967295|D>>>9),D=x+(M^U^q)+L[13]+681279174&4294967295,x=M+(D<<4&4294967295|D>>>28),D=q+(x^M^U)+L[0]+3936430074&4294967295,q=x+(D<<11&4294967295|D>>>21),D=U+(q^x^M)+L[3]+3572445317&4294967295,U=q+(D<<16&4294967295|D>>>16),D=M+(U^q^x)+L[6]+76029189&4294967295,M=U+(D<<23&4294967295|D>>>9),D=x+(M^U^q)+L[9]+3654602809&4294967295,x=M+(D<<4&4294967295|D>>>28),D=q+(x^M^U)+L[12]+3873151461&4294967295,q=x+(D<<11&4294967295|D>>>21),D=U+(q^x^M)+L[15]+530742520&4294967295,U=q+(D<<16&4294967295|D>>>16),D=M+(U^q^x)+L[2]+3299628645&4294967295,M=U+(D<<23&4294967295|D>>>9),D=x+(U^(M|~q))+L[0]+4096336452&4294967295,x=M+(D<<6&4294967295|D>>>26),D=q+(M^(x|~U))+L[7]+1126891415&4294967295,q=x+(D<<10&4294967295|D>>>22),D=U+(x^(q|~M))+L[14]+2878612391&4294967295,U=q+(D<<15&4294967295|D>>>17),D=M+(q^(U|~x))+L[5]+4237533241&4294967295,M=U+(D<<21&4294967295|D>>>11),D=x+(U^(M|~q))+L[12]+1700485571&4294967295,x=M+(D<<6&4294967295|D>>>26),D=q+(M^(x|~U))+L[3]+2399980690&4294967295,q=x+(D<<10&4294967295|D>>>22),D=U+(x^(q|~M))+L[10]+4293915773&4294967295,U=q+(D<<15&4294967295|D>>>17),D=M+(q^(U|~x))+L[1]+2240044497&4294967295,M=U+(D<<21&4294967295|D>>>11),D=x+(U^(M|~q))+L[8]+1873313359&4294967295,x=M+(D<<6&4294967295|D>>>26),D=q+(M^(x|~U))+L[15]+4264355552&4294967295,q=x+(D<<10&4294967295|D>>>22),D=U+(x^(q|~M))+L[6]+2734768916&4294967295,U=q+(D<<15&4294967295|D>>>17),D=M+(q^(U|~x))+L[13]+1309151649&4294967295,M=U+(D<<21&4294967295|D>>>11),D=x+(U^(M|~q))+L[4]+4149444226&4294967295,x=M+(D<<6&4294967295|D>>>26),D=q+(M^(x|~U))+L[11]+3174756917&4294967295,q=x+(D<<10&4294967295|D>>>22),D=U+(x^(q|~M))+L[2]+718787259&4294967295,U=q+(D<<15&4294967295|D>>>17),D=M+(q^(U|~x))+L[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(U+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+U&4294967295,N.g[3]=N.g[3]+q&4294967295}i.prototype.v=function(N,x){x===void 0&&(x=N.length);const M=x-this.blockSize,L=this.C;let U=this.h,q=0;for(;q<x;){if(U==0)for(;q<=M;)o(this,N,q),q+=this.blockSize;if(typeof N=="string"){for(;q<x;)if(L[U++]=N.charCodeAt(q++),U==this.blockSize){o(this,L),U=0;break}}else for(;q<x;)if(L[U++]=N[q++],U==this.blockSize){o(this,L),U=0;break}}this.h=U,this.o+=x},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;x=this.o*8;for(var M=N.length-8;M<N.length;++M)N[M]=x&255,x/=256;for(this.v(N),N=Array(16),x=0,M=0;M<4;++M)for(let L=0;L<32;L+=8)N[x++]=this.g[M]>>>L&255;return N};function a(N,x){var M=d;return Object.prototype.hasOwnProperty.call(M,N)?M[N]:M[N]=x(N)}function u(N,x){this.h=x;const M=[];let L=!0;for(let U=N.length-1;U>=0;U--){const q=N[U]|0;L&&q==x||(M[U]=q,L=!1)}this.g=M}var d={};function m(N){return-128<=N&&N<128?a(N,function(x){return new u([x|0],x<0?-1:0)}):new u([N|0],N<0?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return E;if(N<0)return F(h(-N));const x=[];let M=1;for(let L=0;N>=M;L++)x[L]=N/M|0,M*=4294967296;return new u(x,0)}function v(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return F(v(N.substring(1),x));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=h(Math.pow(x,8));let L=E;for(let q=0;q<N.length;q+=8){var U=Math.min(8,N.length-q);const D=parseInt(N.substring(q,q+U),x);U<8?(U=h(Math.pow(x,U)),L=L.j(U).add(h(D))):(L=L.j(M),L=L.add(h(D)))}return L}var E=m(0),S=m(1),w=m(16777216);n=u.prototype,n.m=function(){if(O(this))return-F(this).m();let N=0,x=1;for(let M=0;M<this.g.length;M++){const L=this.i(M);N+=(L>=0?L:4294967296+L)*x,x*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(P(this))return"0";if(O(this))return"-"+F(this).toString(N);const x=h(Math.pow(N,6));var M=this;let L="";for(;;){const U=ie(M,x).g;M=K(M,U.j(x));let q=((M.g.length>0?M.g[0]:M.h)>>>0).toString(N);if(M=U,P(M))return q+L;for(;q.length<6;)q="0"+q;L=q+L}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function P(N){if(N.h!=0)return!1;for(let x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function O(N){return N.h==-1}n.l=function(N){return N=K(this,N),O(N)?-1:P(N)?0:1};function F(N){const x=N.g.length,M=[];for(let L=0;L<x;L++)M[L]=~N.g[L];return new u(M,~N.h).add(S)}n.abs=function(){return O(this)?F(this):this},n.add=function(N){const x=Math.max(this.g.length,N.g.length),M=[];let L=0;for(let U=0;U<=x;U++){let q=L+(this.i(U)&65535)+(N.i(U)&65535),D=(q>>>16)+(this.i(U)>>>16)+(N.i(U)>>>16);L=D>>>16,q&=65535,D&=65535,M[U]=D<<16|q}return new u(M,M[M.length-1]&-2147483648?-1:0)};function K(N,x){return N.add(F(x))}n.j=function(N){if(P(this)||P(N))return E;if(O(this))return O(N)?F(this).j(F(N)):F(F(this).j(N));if(O(N))return F(this.j(F(N)));if(this.l(w)<0&&N.l(w)<0)return h(this.m()*N.m());const x=this.g.length+N.g.length,M=[];for(var L=0;L<2*x;L++)M[L]=0;for(L=0;L<this.g.length;L++)for(let U=0;U<N.g.length;U++){const q=this.i(L)>>>16,D=this.i(L)&65535,xe=N.i(U)>>>16,nt=N.i(U)&65535;M[2*L+2*U]+=D*nt,$(M,2*L+2*U),M[2*L+2*U+1]+=q*nt,$(M,2*L+2*U+1),M[2*L+2*U+1]+=D*xe,$(M,2*L+2*U+1),M[2*L+2*U+2]+=q*xe,$(M,2*L+2*U+2)}for(N=0;N<x;N++)M[N]=M[2*N+1]<<16|M[2*N];for(N=x;N<2*x;N++)M[N]=0;return new u(M,0)};function $(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function W(N,x){this.g=N,this.h=x}function ie(N,x){if(P(x))throw Error("division by zero");if(P(N))return new W(E,E);if(O(N))return x=ie(F(N),x),new W(F(x.g),F(x.h));if(O(x))return x=ie(N,F(x)),new W(F(x.g),x.h);if(N.g.length>30){if(O(N)||O(x))throw Error("slowDivide_ only works with positive integers.");for(var M=S,L=x;L.l(N)<=0;)M=ae(M),L=ae(L);var U=j(M,1),q=j(L,1);for(L=j(L,2),M=j(M,2);!P(L);){var D=q.add(L);D.l(N)<=0&&(U=U.add(M),q=D),L=j(L,1),M=j(M,1)}return x=K(N,U.j(x)),new W(U,x)}for(U=E;N.l(x)>=0;){for(M=Math.max(1,Math.floor(N.m()/x.m())),L=Math.ceil(Math.log(M)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),q=h(M),D=q.j(x);O(D)||D.l(N)>0;)M-=L,q=h(M),D=q.j(x);P(q)&&(q=S),U=U.add(q),N=K(N,D)}return new W(U,N)}n.B=function(N){return ie(this,N).h},n.and=function(N){const x=Math.max(this.g.length,N.g.length),M=[];for(let L=0;L<x;L++)M[L]=this.i(L)&N.i(L);return new u(M,this.h&N.h)},n.or=function(N){const x=Math.max(this.g.length,N.g.length),M=[];for(let L=0;L<x;L++)M[L]=this.i(L)|N.i(L);return new u(M,this.h|N.h)},n.xor=function(N){const x=Math.max(this.g.length,N.g.length),M=[];for(let L=0;L<x;L++)M[L]=this.i(L)^N.i(L);return new u(M,this.h^N.h)};function ae(N){const x=N.g.length+1,M=[];for(let L=0;L<x;L++)M[L]=N.i(L)<<1|N.i(L-1)>>>31;return new u(M,N.h)}function j(N,x){const M=x>>5;x%=32;const L=N.g.length-M,U=[];for(let q=0;q<L;q++)U[q]=x>0?N.i(q+M)>>>x|N.i(q+M+1)<<32-x:N.i(q+M);return new u(U,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,EA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=v,fr=u}).apply(typeof K0<"u"?K0:typeof self<"u"?self:typeof window<"u"?window:{});var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TA,Xl,SA,If,rm,AA,CA,IA;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof cf=="object"&&cf];for(var T=0;T<g.length;++T){var C=g[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function o(g,T){if(T)e:{var C=i;g=g.split(".");for(var b=0;b<g.length-1;b++){var H=g[b];if(!(H in C))break e;C=C[H]}g=g[g.length-1],b=C[g],T=T(b),T!=b&&T!=null&&e(C,g,{configurable:!0,writable:!0,value:T})}}o("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(g){return g||function(T){var C=[],b;for(b in T)Object.prototype.hasOwnProperty.call(T,b)&&C.push([b,T[b]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(g){var T=typeof g;return T=="object"&&g!=null||T=="function"}function m(g,T,C){return g.call.apply(g.bind,arguments)}function h(g,T,C){return h=m,h.apply(null,arguments)}function v(g,T){var C=Array.prototype.slice.call(arguments,1);return function(){var b=C.slice();return b.push.apply(b,arguments),g.apply(this,b)}}function E(g,T){function C(){}C.prototype=T.prototype,g.Z=T.prototype,g.prototype=new C,g.prototype.constructor=g,g.Ob=function(b,H,Q){for(var ue=Array(arguments.length-2),De=2;De<arguments.length;De++)ue[De-2]=arguments[De];return T.prototype[H].apply(b,ue)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function w(g){const T=g.length;if(T>0){const C=Array(T);for(let b=0;b<T;b++)C[b]=g[b];return C}return[]}function P(g,T){for(let b=1;b<arguments.length;b++){const H=arguments[b];var C=typeof H;if(C=C!="object"?C:H?Array.isArray(H)?"array":C:"null",C=="array"||C=="object"&&typeof H.length=="number"){C=g.length||0;const Q=H.length||0;g.length=C+Q;for(let ue=0;ue<Q;ue++)g[C+ue]=H[ue]}else g.push(H)}}class O{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function F(g){u.setTimeout(()=>{throw g},0)}function K(){var g=N;let T=null;return g.g&&(T=g.g,g.g=g.g.next,g.g||(g.h=null),T.next=null),T}class ${constructor(){this.h=this.g=null}add(T,C){const b=W.get();b.set(T,C),this.h?this.h.next=b:this.g=b,this.h=b}}var W=new O(()=>new ie,g=>g.reset());class ie{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,j=!1,N=new $,x=()=>{const g=Promise.resolve(void 0);ae=()=>{g.then(M)}};function M(){for(var g;g=K();){try{g.h.call(g.g)}catch(C){F(C)}var T=W;T.j(g),T.h<100&&(T.h++,g.next=T.g,T.g=g)}j=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(g,T){this.type=g,this.g=this.target=T,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,T=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};u.addEventListener("test",C,T),u.removeEventListener("test",C,T)}catch{}return g})();function D(g){return/^[\s\xa0]*$/.test(g)}function xe(g,T){U.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,T)}E(xe,U),xe.prototype.init=function(g,T){const C=this.type=g.type,b=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=T,T=g.relatedTarget,T||(C=="mouseover"?T=g.fromElement:C=="mouseout"&&(T=g.toElement)),this.relatedTarget=T,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var nt="closure_listenable_"+(Math.random()*1e6|0),Z=0;function fe(g,T,C,b,H){this.listener=g,this.proxy=null,this.src=T,this.type=C,this.capture=!!b,this.ha=H,this.key=++Z,this.da=this.fa=!1}function me(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function ke(g,T,C){for(const b in g)T.call(C,g[b],b,g)}function de(g,T){for(const C in g)T.call(void 0,g[C],C,g)}function V(g){const T={};for(const C in g)T[C]=g[C];return T}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(g,T){let C,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(C in b)g[C]=b[C];for(let Q=0;Q<ee.length;Q++)C=ee[Q],Object.prototype.hasOwnProperty.call(b,C)&&(g[C]=b[C])}}function ce(g){this.src=g,this.g={},this.h=0}ce.prototype.add=function(g,T,C,b,H){const Q=g.toString();g=this.g[Q],g||(g=this.g[Q]=[],this.h++);const ue=Me(g,T,b,H);return ue>-1?(T=g[ue],C||(T.fa=!1)):(T=new fe(T,this.src,Q,!!b,H),T.fa=C,g.push(T)),T};function Te(g,T){const C=T.type;if(C in g.g){var b=g.g[C],H=Array.prototype.indexOf.call(b,T,void 0),Q;(Q=H>=0)&&Array.prototype.splice.call(b,H,1),Q&&(me(T),g.g[C].length==0&&(delete g.g[C],g.h--))}}function Me(g,T,C,b){for(let H=0;H<g.length;++H){const Q=g[H];if(!Q.da&&Q.listener==T&&Q.capture==!!C&&Q.ha==b)return H}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Vt={};function ft(g,T,C,b,H){if(Array.isArray(T)){for(let Q=0;Q<T.length;Q++)ft(g,T[Q],C,b,H);return null}return C=Ga(C),g&&g[nt]?g.J(T,C,d(b)?!!b.capture:!1,H):Ar(g,T,C,!1,b,H)}function Ar(g,T,C,b,H,Q){if(!T)throw Error("Invalid event type");const ue=d(H)?!!H.capture:!!H;let De=Cr(g);if(De||(g[ze]=De=new ce(g)),C=De.add(T,C,b,ue,Q),C.proxy)return C;if(b=_o(),C.proxy=b,b.src=g,b.listener=C,g.addEventListener)q||(H=ue),H===void 0&&(H=!1),g.addEventListener(T.toString(),b,H);else if(g.attachEvent)g.attachEvent(gi(T.toString()),b);else if(g.addListener&&g.removeListener)g.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return C}function _o(){function g(C){return T.call(g.src,g.listener,C)}const T=Oa;return g}function vo(g,T,C,b,H){if(Array.isArray(T))for(var Q=0;Q<T.length;Q++)vo(g,T[Q],C,b,H);else b=d(b)?!!b.capture:!!b,C=Ga(C),g&&g[nt]?(g=g.i,Q=String(T).toString(),Q in g.g&&(T=g.g[Q],C=Me(T,C,b,H),C>-1&&(me(T[C]),Array.prototype.splice.call(T,C,1),T.length==0&&(delete g.g[Q],g.h--)))):g&&(g=Cr(g))&&(T=g.g[T.toString()],g=-1,T&&(g=Me(T,C,b,H)),(C=g>-1?T[g]:null)&&Eo(C))}function Eo(g){if(typeof g!="number"&&g&&!g.da){var T=g.src;if(T&&T[nt])Te(T.i,g);else{var C=g.type,b=g.proxy;T.removeEventListener?T.removeEventListener(C,b,g.capture):T.detachEvent?T.detachEvent(gi(C),b):T.addListener&&T.removeListener&&T.removeListener(b),(C=Cr(T))?(Te(C,g),C.h==0&&(C.src=null,T[ze]=null)):me(g)}}}function gi(g){return g in Vt?Vt[g]:Vt[g]="on"+g}function Oa(g,T){if(g.da)g=!0;else{T=new xe(T,this);const C=g.listener,b=g.ha||g.src;g.fa&&Eo(g),g=C.call(b,T)}return g}function Cr(g){return g=g[ze],g instanceof ce?g:null}var Fa="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ga(g){return typeof g=="function"?g:(g[Fa]||(g[Fa]=function(T){return g.handleEvent(T)}),g[Fa])}function At(){L.call(this),this.i=new ce(this),this.M=this,this.G=null}E(At,L),At.prototype[nt]=!0,At.prototype.removeEventListener=function(g,T,C,b){vo(this,g,T,C,b)};function kt(g,T){var C,b=g.G;if(b)for(C=[];b;b=b.G)C.push(b);if(g=g.M,b=T.type||T,typeof T=="string")T=new U(T,g);else if(T instanceof U)T.target=T.target||g;else{var H=T;T=new U(b,g),le(T,H)}H=!0;let Q,ue;if(C)for(ue=C.length-1;ue>=0;ue--)Q=T.g=C[ue],H=As(Q,b,!0,T)&&H;if(Q=T.g=g,H=As(Q,b,!0,T)&&H,H=As(Q,b,!1,T)&&H,C)for(ue=0;ue<C.length;ue++)Q=T.g=C[ue],H=As(Q,b,!1,T)&&H}At.prototype.N=function(){if(At.Z.N.call(this),this.i){var g=this.i;for(const T in g.g){const C=g.g[T];for(let b=0;b<C.length;b++)me(C[b]);delete g.g[T],g.h--}}this.G=null},At.prototype.J=function(g,T,C,b){return this.i.add(String(g),T,!1,C,b)},At.prototype.K=function(g,T,C,b){return this.i.add(String(g),T,!0,C,b)};function As(g,T,C,b){if(T=g.i.g[String(T)],!T)return!0;T=T.concat();let H=!0;for(let Q=0;Q<T.length;++Q){const ue=T[Q];if(ue&&!ue.da&&ue.capture==C){const De=ue.listener,vt=ue.ha||ue.src;ue.fa&&Te(g.i,ue),H=De.call(vt,b)!==!1&&H}}return H&&!b.defaultPrevented}function xd(g,T){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:u.setTimeout(g,T||0)}function Pu(g){g.g=xd(()=>{g.g=null,g.i&&(g.i=!1,Pu(g))},g.l);const T=g.h;g.h=null,g.m.apply(null,T)}class ln extends L{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Pu(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ir(g){L.call(this),this.h=g,this.g={}}E(Ir,L);var qa=[];function Ba(g){ke(g.g,function(T,C){this.g.hasOwnProperty(C)&&Eo(T)},g),g.g={}}Ir.prototype.N=function(){Ir.Z.N.call(this),Ba(this)},Ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cs=u.JSON.stringify,Md=u.JSON.parse,Vu=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function ku(){}function Uu(){}var Wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){U.call(this,"d")}E(Jt,U);function Pn(){U.call(this,"c")}E(Pn,U);var _t={},Lu=null;function To(){return Lu=Lu||new At}_t.Ia="serverreachability";function Ou(g){U.call(this,_t.Ia,g)}E(Ou,U);function yi(g){const T=To();kt(T,new Ou(T))}_t.STAT_EVENT="statevent";function wr(g,T){U.call(this,_t.STAT_EVENT,g),this.stat=T}E(wr,U);function Ct(g){const T=To();kt(T,new wr(T,g))}_t.Ja="timingevent";function _i(g,T){U.call(this,_t.Ja,g),this.size=T}E(_i,U);function vi(g,T){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},T)}function jn(){this.g=!0}jn.prototype.ua=function(){this.g=!1};function Dd(g,T,C,b,H,Q){g.info(function(){if(g.g)if(Q){var ue="",De=Q.split("&");for(let Qe=0;Qe<De.length;Qe++){var vt=De[Qe].split("=");if(vt.length>1){const dt=vt[0];vt=vt[1];const Ln=dt.split("_");ue=Ln.length>=2&&Ln[1]=="type"?ue+(dt+"="+vt+"&"):ue+(dt+"=redacted&")}}}else ue=null;else ue=Q;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+T+`
`+C+`
`+ue})}function Fu(g,T,C,b,H,Q,ue){g.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+T+`
`+C+`
`+Q+" "+ue})}function Ei(g,T,C,b){g.info(function(){return"XMLHTTP TEXT ("+T+"): "+Pd(g,C)+(b?" "+b:"")})}function Rr(g,T){g.info(function(){return"TIMEOUT: "+T})}jn.prototype.info=function(){};function Pd(g,T){if(!g.g)return T;if(!T)return null;try{const Q=JSON.parse(T);if(Q){for(g=0;g<Q.length;g++)if(Array.isArray(Q[g])){var C=Q[g];if(!(C.length<2)){var b=C[1];if(Array.isArray(b)&&!(b.length<1)){var H=b[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ue=1;ue<b.length;ue++)b[ue]=""}}}}return Cs(Q)}catch{return T}}var br={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ha={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},za;function Nr(){}E(Nr,ku),Nr.prototype.g=function(){return new XMLHttpRequest},za=new Nr;function Ji(g){return encodeURIComponent(String(g))}function Gu(g){var T=1;g=g.split(":");const C=[];for(;T>0&&g.length;)C.push(g.shift()),T--;return g.length&&C.push(g.join(":")),C}function Zn(g,T,C,b){this.j=g,this.i=T,this.l=C,this.S=b||1,this.V=new Ir(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ei}function ei(){this.i=null,this.g="",this.h=!1}var It={},Ft={};function Ti(g,T,C){g.M=1,g.A=xr(Rt(T)),g.u=C,g.R=!0,So(g,null)}function So(g,T){g.F=Date.now(),Si(g),g.B=Rt(g.A);var C=g.B,b=g.S;Array.isArray(b)||(b=[String(b)]),wo(C.i,"t",b),g.C=0,C=g.j.L,g.h=new ei,g.g=tc(g.j,C?T:null,!g.u),g.P>0&&(g.O=new ln(h(g.Y,g,g.g),g.P)),T=g.V,C=g.g,b=g.ba;var H="readystatechange";Array.isArray(H)||(H&&(qa[0]=H.toString()),H=qa);for(let Q=0;Q<H.length;Q++){const ue=ft(C,H[Q],b||T.handleEvent,!1,T.h||T);if(!ue)break;T.g[ue.key]=ue}T=g.J?V(g.J):{},g.u?(g.v||(g.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,T)):(g.v="GET",g.g.ea(g.B,g.v,null,T)),yi(),Dd(g.i,g.v,g.B,g.l,g.S,g.u)}Zn.prototype.ba=function(g){g=g.target;const T=this.O;T&&ii(g)==3?T.j():this.Y(g)},Zn.prototype.Y=function(g){try{if(g==this.g)e:{const De=ii(this.g),vt=this.g.ya(),Qe=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||De!=4||vt==7||(vt==8||Qe<=0?yi(3):yi(2)),Ai(this);var T=this.g.ca();this.X=T;var C=Vd(this);if(this.o=T==200,Fu(this.i,this.v,this.B,this.l,this.S,De,T),this.o){if(this.U&&!this.L){t:{if(this.g){var b,H=this.g;if((b=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(b)){var Q=b;break t}}Q=null}if(g=Q)Ei(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ci(this,g);else{this.o=!1,this.m=3,Ct(12),Sn(this),Vn(this);break e}}if(this.R){g=!0;let dt;for(;!this.K&&this.C<C.length;)if(dt=Bu(this,C),dt==Ft){De==4&&(this.m=4,Ct(14),g=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==It){this.m=4,Ct(15),Ei(this.i,this.l,C,"[Invalid Chunk]"),g=!1;break}else Ei(this.i,this.l,dt,null),Ci(this,dt);if(qu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||C.length!=0||this.h.h||(this.m=1,Ct(16),g=!1),this.o=this.o&&g,!g)Ei(this.i,this.l,C,"[Invalid Chunked Response]"),Sn(this),Vn(this);else if(C.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),rl(ue),ue.P=!0,Ct(11))}}else Ei(this.i,this.l,C,null),Ci(this,C);De==4&&Sn(this),this.o&&!this.K&&(De==4?Wu(this.j,this):(this.o=!1,Si(this)))}else Ki(this.g),T==400&&C.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),Sn(this),Vn(this)}}}catch{}finally{}};function Vd(g){if(!qu(g))return g.g.la();const T=Yt(g.g);if(T==="")return"";let C="";const b=T.length,H=ii(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return Sn(g),Vn(g),"";g.h.i=new u.TextDecoder}for(let Q=0;Q<b;Q++)g.h.h=!0,C+=g.h.i.decode(T[Q],{stream:!(H&&Q==b-1)});return T.length=0,g.h.g+=C,g.C=0,g.h.g}function qu(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Bu(g,T){var C=g.C,b=T.indexOf(`
`,C);return b==-1?Ft:(C=Number(T.substring(C,b)),isNaN(C)?It:(b+=1,b+C>T.length?Ft:(T=T.slice(b,b+C),g.C=b+C,T)))}Zn.prototype.cancel=function(){this.K=!0,Sn(this)};function Si(g){g.T=Date.now()+g.H,Ao(g,g.H)}function Ao(g,T){if(g.D!=null)throw Error("WatchDog timer not null");g.D=vi(h(g.aa,g),T)}function Ai(g){g.D&&(u.clearTimeout(g.D),g.D=null)}Zn.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Rr(this.i,this.B),this.M!=2&&(yi(),Ct(17)),Sn(this),this.m=2,Vn(this)):Ao(this,this.T-g)};function Vn(g){g.j.I==0||g.K||Wu(g.j,g)}function Sn(g){Ai(g);var T=g.O;T&&typeof T.dispose=="function"&&T.dispose(),g.O=null,Ba(g.V),g.g&&(T=g.g,g.g=null,T.abort(),T.dispose())}function Ci(g,T){try{var C=g.j;if(C.I!=0&&(C.g==g||wi(C.h,g))){if(!g.L&&wi(C.h,g)&&C.I==3){try{var b=C.Ba.g.parse(T)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<g.F)Mo(C),Ds(C);else break e;Lr(C),Ct(18)}}else C.xa=H[1],0<C.xa-C.K&&H[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=vi(h(C.Va,C),6e3));Ii(C.h)<=1&&C.ta&&(C.ta=void 0)}else Di(C,11)}else if((g.L||C.g==g)&&Mo(C),!D(T))for(H=C.Ba.g.parse(T),T=0;T<H.length;T++){let Qe=H[T];const dt=Qe[0];if(!(dt<=C.K))if(C.K=dt,Qe=Qe[1],C.I==2)if(Qe[0]=="c"){C.M=Qe[1],C.ba=Qe[2];const Ln=Qe[3];Ln!=null&&(C.ka=Ln,C.j.info("VER="+C.ka));const Pi=Qe[4];Pi!=null&&(C.za=Pi,C.j.info("SVER="+C.za));const si=Qe[5];si!=null&&typeof si=="number"&&si>0&&(b=1.5*si,C.O=b,C.j.info("backChannelRequestTimeoutMs_="+b)),b=C;const ri=g.g;if(ri){const Or=ri.g?ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Or){var Q=b.h;Q.g||Or.indexOf("spdy")==-1&&Or.indexOf("quic")==-1&&Or.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ka(Q,Q.h),Q.h=null))}if(b.G){const Do=ri.g?ri.g.getResponseHeader("X-HTTP-Session-Id"):null;Do&&(b.wa=Do,Ze(b.J,b.G,Do))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-g.F,C.j.info("Handshake RTT: "+C.T+"ms")),b=C;var ue=g;if(b.na=ec(b,b.L?b.ba:null,b.W),ue.L){$a(b.h,ue);var De=ue,vt=b.O;vt&&(De.H=vt),De.D&&(Ai(De),Si(De)),b.g=ue}else Qu(b);C.i.length>0&&Mi(C)}else Qe[0]!="stop"&&Qe[0]!="close"||Di(C,7);else C.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Di(C,7):il(C):Qe[0]!="noop"&&C.l&&C.l.qa(Qe),C.A=0)}}yi(4)}catch{}}var wt=class{constructor(g,T){this.g=g,this.map=T}};function Ja(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ya(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ii(g){return g.h?1:g.g?g.g.size:0}function wi(g,T){return g.h?g.h==T:g.g?g.g.has(T):!1}function Ka(g,T){g.g?g.g.add(T):g.h=T}function $a(g,T){g.h&&g.h==T?g.h=null:g.g&&g.g.has(T)&&g.g.delete(T)}Ja.prototype.cancel=function(){if(this.i=Qa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Qa(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let T=g.i;for(const C of g.g.values())T=T.concat(C.G);return T}return w(g.i)}var Hu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Co(g,T){if(g){g=g.split("&");for(let C=0;C<g.length;C++){const b=g[C].indexOf("=");let H,Q=null;b>=0?(H=g[C].substring(0,b),Q=g[C].substring(b+1)):H=g[C],T(H,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function An(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;g instanceof An?(this.l=g.l,Gt(this,g.j),this.o=g.o,this.g=g.g,Is(this,g.u),this.h=g.h,Xa(this,Ku(g.i)),this.m=g.m):g&&(T=String(g).match(Hu))?(this.l=!1,Gt(this,T[1]||"",!0),this.o=Ri(T[2]||""),this.g=Ri(T[3]||"",!0),Is(this,T[4]),this.h=Ri(T[5]||"",!0),Xa(this,T[6]||"",!0),this.m=Ri(T[7]||"")):(this.l=!1,this.i=new Rs(null,this.l))}An.prototype.toString=function(){const g=[];var T=this.j;T&&g.push(Mr(T,Io,!0),":");var C=this.g;return(C||T=="file")&&(g.push("//"),(T=this.o)&&g.push(Mr(T,Io,!0),"@"),g.push(Ji(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&g.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(Mr(C,C.charAt(0)=="/"?Wa:zu,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",Mr(C,Ju)),g.join("")},An.prototype.resolve=function(g){const T=Rt(this);let C=!!g.j;C?Gt(T,g.j):C=!!g.o,C?T.o=g.o:C=!!g.g,C?T.g=g.g:C=g.u!=null;var b=g.h;if(C)Is(T,g.u);else if(C=!!g.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var H=T.h.lastIndexOf("/");H!=-1&&(b=T.h.slice(0,H+1)+b)}if(H=b,H==".."||H==".")b="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){b=H.lastIndexOf("/",0)==0,H=H.split("/");const Q=[];for(let ue=0;ue<H.length;){const De=H[ue++];De=="."?b&&ue==H.length&&Q.push(""):De==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),b&&ue==H.length&&Q.push("")):(Q.push(De),b=!0)}b=Q.join("/")}else b=H}return C?T.h=b:C=g.i.toString()!=="",C?Xa(T,Ku(g.i)):C=!!g.m,C&&(T.m=g.m),T};function Rt(g){return new An(g)}function Gt(g,T,C){g.j=C?Ri(T,!0):T,g.j&&(g.j=g.j.replace(/:$/,""))}function Is(g,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);g.u=T}else g.u=null}function Xa(g,T,C){T instanceof Rs?(g.i=T,Ro(g.i,g.l)):(C||(T=Mr(T,ws)),g.i=new Rs(T,g.l))}function Ze(g,T,C){g.i.set(T,C)}function xr(g){return Ze(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Ri(g,T){return g?T?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Mr(g,T,C){return typeof g=="string"?(g=encodeURI(g).replace(T,hn),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function hn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Io=/[#\/\?@]/g,zu=/[#\?:]/g,Wa=/[#\?]/g,ws=/[#\?@]/g,Ju=/#/g;function Rs(g,T){this.h=this.g=null,this.i=g||null,this.j=!!T}function pn(g){g.g||(g.g=new Map,g.h=0,g.i&&Co(g.i,function(T,C){g.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=Rs.prototype,n.add=function(g,T){pn(this),this.i=null,g=bs(this,g);let C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(T),this.h+=1,this};function Yu(g,T){pn(g),T=bs(g,T),g.g.has(T)&&(g.i=null,g.h-=g.g.get(T).length,g.g.delete(T))}function ja(g,T){return pn(g),T=bs(g,T),g.g.has(T)}n.forEach=function(g,T){pn(this),this.g.forEach(function(C,b){C.forEach(function(H){g.call(T,H,b,this)},this)},this)};function Za(g,T){pn(g);let C=[];if(typeof T=="string")ja(g,T)&&(C=C.concat(g.g.get(bs(g,T))));else for(g=Array.from(g.g.values()),T=0;T<g.length;T++)C=C.concat(g[T]);return C}n.set=function(g,T){return pn(this),this.i=null,g=bs(this,g),ja(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[T]),this.h+=1,this},n.get=function(g,T){return g?(g=Za(this,g),g.length>0?String(g[0]):T):T};function wo(g,T,C){Yu(g,T),C.length>0&&(g.i=null,g.g.set(bs(g,T),w(C)),g.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],T=Array.from(this.g.keys());for(let b=0;b<T.length;b++){var C=T[b];const H=Ji(C);C=Za(this,C);for(let Q=0;Q<C.length;Q++){let ue=H;C[Q]!==""&&(ue+="="+Ji(C[Q])),g.push(ue)}}return this.i=g.join("&")};function Ku(g){const T=new Rs;return T.i=g.i,g.g&&(T.g=new Map(g.g),T.h=g.h),T}function bs(g,T){return T=String(T),g.j&&(T=T.toLowerCase()),T}function Ro(g,T){T&&!g.j&&(pn(g),g.i=null,g.g.forEach(function(C,b){const H=b.toLowerCase();b!=H&&(Yu(this,b),wo(this,H,C))},g)),g.j=T}function ti(g,T){const C=new jn;if(u.Image){const b=new Image;b.onload=v(kn,C,"TestLoadImage: loaded",!0,T,b),b.onerror=v(kn,C,"TestLoadImage: error",!1,T,b),b.onabort=v(kn,C,"TestLoadImage: abort",!1,T,b),b.ontimeout=v(kn,C,"TestLoadImage: timeout",!1,T,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=g}else T(!1)}function el(g,T){const C=new jn,b=new AbortController,H=setTimeout(()=>{b.abort(),kn(C,"TestPingServer: timeout",!1,T)},1e4);fetch(g,{signal:b.signal}).then(Q=>{clearTimeout(H),Q.ok?kn(C,"TestPingServer: ok",!0,T):kn(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(H),kn(C,"TestPingServer: error",!1,T)})}function kn(g,T,C,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(C)}catch{}}function Ns(){this.g=new Vu}function bi(g){this.i=g.Sb||null,this.h=g.ab||!1}E(bi,ku),bi.prototype.g=function(){return new Dr(this.i,this.h)};function Dr(g,T){At.call(this),this.H=g,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Dr,At),n=Dr.prototype,n.open=function(g,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=T,this.readyState=1,ni(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(T.body=g),(this.H||u).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xs(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;bo(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function bo(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var T=g.value?g.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!g.done}))&&(this.response=this.responseText+=T)}g.done?xs(this):ni(this),this.readyState==3&&bo(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,xs(this))},n.Na=function(g){this.g&&(this.response=g,xs(this))},n.ga=function(){this.g&&xs(this)};function xs(g){g.readyState=4,g.l=null,g.j=null,g.B=null,ni(g)}n.setRequestHeader=function(g,T){this.A.append(g,T)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=T.next();return g.join(`\r
`)};function ni(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Dr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Un(g){let T="";return ke(g,function(C,b){T+=b,T+=":",T+=C,T+=`\r
`}),T}function Pr(g,T,C){e:{for(b in C){var b=!1;break e}b=!0}b||(C=Un(C),typeof g=="string"?C!=null&&Ji(C):Ze(g,T,C))}function it(g){At.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(it,At);var Ni=/^https?$/i,tl=["POST","PUT"];n=it.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,T,C,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);T=T?T.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():za.g(),this.g.onreadystatechange=S(h(this.Ca,this));try{this.B=!0,this.g.open(T,String(g),!0),this.B=!1}catch(Q){Vr(this,Q);return}if(g=C||"",C=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)C.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const Q of b.keys())C.set(Q,b.get(Q));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(C.keys()).find(Q=>Q.toLowerCase()=="content-type"),H=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(tl,T,void 0)>=0)||b||H||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ue]of C)this.g.setRequestHeader(Q,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(Q){Vr(this,Q)}};function Vr(g,T){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=T,g.o=5,nl(g),Yi(g)}function nl(g){g.A||(g.A=!0,kt(g,"complete"),kt(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,kt(this,"complete"),kt(this,"abort"),Yi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yi(this,!0)),it.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?kr(this):this.Xa())},n.Xa=function(){kr(this)};function kr(g){if(g.h&&typeof a<"u"){if(g.v&&ii(g)==4)setTimeout(g.Ca.bind(g),0);else if(kt(g,"readystatechange"),ii(g)==4){g.h=!1;try{const Q=g.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var b;if(b=Q===0){let ue=String(g.D).match(Hu)[1]||null;!ue&&u.self&&u.self.location&&(ue=u.self.location.protocol.slice(0,-1)),b=!Ni.test(ue?ue.toLowerCase():"")}C=b}if(C)kt(g,"complete"),kt(g,"success");else{g.o=6;try{var H=ii(g)>2?g.g.statusText:""}catch{H=""}g.l=H+" ["+g.ca()+"]",nl(g)}}finally{Yi(g)}}}}function Yi(g,T){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const C=g.g;g.g=null,T||kt(g,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ii(g){return g.g?g.g.readyState:0}n.ca=function(){try{return ii(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var T=this.g.responseText;return g&&T.indexOf(g)==0&&(T=T.substring(g.length)),Md(T)}};function Yt(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Ki(g){const T={};g=(g.g&&ii(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<g.length;b++){if(D(g[b]))continue;var C=Gu(g[b]);const H=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Q=T[H]||[];T[H]=Q,Q.push(C)}de(T,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xi(g,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||T}function Ms(g){this.za=0,this.i=[],this.j=new jn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xi("baseRetryDelayMs",5e3,g),this.Za=xi("retryDelaySeedMs",1e4,g),this.Ta=xi("forwardChannelMaxRetries",2,g),this.va=xi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Ja(g&&g.concurrentRequestLimit),this.Ba=new Ns,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ms.prototype,n.ka=8,n.I=1,n.connect=function(g,T,C,b){Ct(0),this.W=g,this.H=T||{},C&&b!==void 0&&(this.H.OSID=C,this.H.OAID=b),this.F=this.X,this.J=ec(this,null,this.W),Mi(this)};function il(g){if(No(g),g.I==3){var T=g.V++,C=Rt(g.J);if(Ze(C,"SID",g.M),Ze(C,"RID",T),Ze(C,"TYPE","terminate"),Ur(g,C),T=new Zn(g,g.j,T),T.M=2,T.A=xr(Rt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(T.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=T.A,C=!0),C||(T.g=tc(T.j,null),T.g.ea(T.A)),T.F=Date.now(),Si(T)}Zu(g)}function Ds(g){g.g&&(rl(g),g.g.cancel(),g.g=null)}function No(g){Ds(g),g.v&&(u.clearTimeout(g.v),g.v=null),Mo(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function Mi(g){if(!Ya(g.h)&&!g.m){g.m=!0;var T=g.Ea;ae||x(),j||(ae(),j=!0),N.add(T,g),g.D=0}}function xo(g,T){return Ii(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=T.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=vi(h(g.Ea,g,T),ju(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const H=new Zn(this,this.j,g);let Q=this.o;if(this.U&&(Q?(Q=V(Q),le(Q,this.U)):Q=this.U),this.u!==null||this.R||(H.J=Q,Q=null),this.S)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var b=this.i[C];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(T+=b,T>4096){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=$u(this,H,T),C=Rt(this.J),Ze(C,"RID",g),Ze(C,"CVER",22),this.G&&Ze(C,"X-HTTP-Session-Id",this.G),Ur(this,C),Q&&(this.R?T="headers="+Ji(Un(Q))+"&"+T:this.u&&Pr(C,this.u,Q)),Ka(this.h,H),this.Ra&&Ze(C,"TYPE","init"),this.S?(Ze(C,"$req",T),Ze(C,"SID","null"),H.U=!0,Ti(H,C,null)):Ti(H,C,T),this.I=2}}else this.I==3&&(g?sl(this,g):this.i.length==0||Ya(this.h)||sl(this))};function sl(g,T){var C;T?C=T.l:C=g.V++;const b=Rt(g.J);Ze(b,"SID",g.M),Ze(b,"RID",C),Ze(b,"AID",g.K),Ur(g,b),g.u&&g.o&&Pr(b,g.u,g.o),C=new Zn(g,g.j,C,g.D+1),g.u===null&&(C.J=g.o),T&&(g.i=T.G.concat(g.i)),T=$u(g,C,1e3),C.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Ka(g.h,C),Ti(C,b,T)}function Ur(g,T){g.H&&ke(g.H,function(C,b){Ze(T,b,C)}),g.l&&ke({},function(C,b){Ze(T,b,C)})}function $u(g,T,C){C=Math.min(g.i.length,C);const b=g.l?h(g.l.Ka,g.l,g):null;e:{var H=g.i;let De=-1;for(;;){const vt=["count="+C];De==-1?C>0?(De=H[0].g,vt.push("ofs="+De)):De=0:vt.push("ofs="+De);let Qe=!0;for(let dt=0;dt<C;dt++){var Q=H[dt].g;const Ln=H[dt].map;if(Q-=De,Q<0)De=Math.max(0,H[dt].g-100),Qe=!1;else try{Q="req"+Q+"_"||"";try{var ue=Ln instanceof Map?Ln:Object.entries(Ln);for(const[Pi,si]of ue){let ri=si;d(si)&&(ri=Cs(si)),vt.push(Q+Pi+"="+encodeURIComponent(ri))}}catch(Pi){throw vt.push(Q+"type="+encodeURIComponent("_badmap")),Pi}}catch{b&&b(Ln)}}if(Qe){ue=vt.join("&");break e}}ue=void 0}return g=g.i.splice(0,C),T.G=g,ue}function Qu(g){if(!g.g&&!g.v){g.Y=1;var T=g.Da;ae||x(),j||(ae(),j=!0),N.add(T,g),g.A=0}}function Lr(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=vi(h(g.Da,g),ju(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,Xu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=vi(h(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Ds(this),Xu(this))};function rl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function Xu(g){g.g=new Zn(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var T=Rt(g.na);Ze(T,"RID","rpc"),Ze(T,"SID",g.M),Ze(T,"AID",g.K),Ze(T,"CI",g.F?"0":"1"),!g.F&&g.ia&&Ze(T,"TO",g.ia),Ze(T,"TYPE","xmlhttp"),Ur(g,T),g.u&&g.o&&Pr(T,g.u,g.o),g.O&&(g.g.H=g.O);var C=g.g;g=g.ba,C.M=1,C.A=xr(Rt(T)),C.u=null,C.R=!0,So(C,g)}n.Va=function(){this.C!=null&&(this.C=null,Ds(this),Lr(this),Ct(19))};function Mo(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function Wu(g,T){var C=null;if(g.g==T){Mo(g),rl(g),g.g=null;var b=2}else if(wi(g.h,T))C=T.G,$a(g.h,T),b=1;else return;if(g.I!=0){if(T.o)if(b==1){C=T.u?T.u.length:0,T=Date.now()-T.F;var H=g.D;b=To(),kt(b,new _i(b,C)),Mi(g)}else Qu(g);else if(H=T.m,H==3||H==0&&T.X>0||!(b==1&&xo(g,T)||b==2&&Lr(g)))switch(C&&C.length>0&&(T=g.h,T.i=T.i.concat(C)),H){case 1:Di(g,5);break;case 4:Di(g,10);break;case 3:Di(g,6);break;default:Di(g,2)}}}function ju(g,T){let C=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(C*=2),C*T}function Di(g,T){if(g.j.info("Error code "+T),T==2){var C=h(g.bb,g),b=g.Ua;const H=!b;b=new An(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Gt(b,"https"),xr(b),H?ti(b.toString(),C):el(b.toString(),C)}else Ct(2);g.I=0,g.l&&g.l.pa(T),Zu(g),No(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Zu(g){if(g.I=0,g.ja=[],g.l){const T=Qa(g.h);(T.length!=0||g.i.length!=0)&&(P(g.ja,T),P(g.ja,g.i),g.h.i.length=0,w(g.i),g.i.length=0),g.l.oa()}}function ec(g,T,C){var b=C instanceof An?Rt(C):new An(C);if(b.g!="")T&&(b.g=T+"."+b.g),Is(b,b.u);else{var H=u.location;b=H.protocol,T=T?T+"."+H.hostname:H.hostname,H=+H.port;const Q=new An(null);b&&Gt(Q,b),T&&(Q.g=T),H&&Is(Q,H),C&&(Q.h=C),b=Q}return C=g.G,T=g.wa,C&&T&&Ze(b,C,T),Ze(b,"VER",g.ka),Ur(g,b),b}function tc(g,T,C){if(T&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=g.Aa&&!g.ma?new it(new bi({ab:C})):new it(g.ma),T.Fa(g.L),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function nc(){}n=nc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ps(){}Ps.prototype.g=function(g,T){return new un(g,T)};function un(g,T){At.call(this),this.g=new Ms(T),this.l=g,this.h=T&&T.messageUrlParams||null,g=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(g?g["X-WebChannel-Content-Type"]=T.messageContentType:g={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(g?g["X-WebChannel-Client-Profile"]=T.sa:g={"X-WebChannel-Client-Profile":T.sa}),this.g.U=g,(g=T&&T.Qb)&&!D(g)&&(this.g.u=g),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!D(T)&&(this.g.G=T,g=this.h,g!==null&&T in g&&(g=this.h,T in g&&delete g[T])),this.j=new $i(this)}E(un,At),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){il(this.g)},un.prototype.o=function(g){var T=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.v&&(C={},C.__data__=Cs(g),g=C);T.i.push(new wt(T.Ya++,g)),T.I==3&&Mi(T)},un.prototype.N=function(){this.g.l=null,delete this.j,il(this.g),delete this.g,un.Z.N.call(this)};function ic(g){Jt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var T=g.__sm__;if(T){e:{for(const C in T){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,T=T!==null&&g in T?T[g]:void 0),this.data=T}else this.data=g}E(ic,Jt);function sc(){Pn.call(this),this.status=1}E(sc,Pn);function $i(g){this.g=g}E($i,nc),$i.prototype.ra=function(){kt(this.g,"a")},$i.prototype.qa=function(g){kt(this.g,new ic(g))},$i.prototype.pa=function(g){kt(this.g,new sc)},$i.prototype.oa=function(){kt(this.g,"b")},Ps.prototype.createWebChannel=Ps.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,IA=function(){return new Ps},CA=function(){return To()},AA=_t,rm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},br.NO_ERROR=0,br.TIMEOUT=8,br.HTTP_ERROR=6,If=br,Ha.COMPLETE="complete",SA=Ha,Uu.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",At.prototype.listen=At.prototype.J,Xl=Uu,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,TA=it}).apply(typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ma="12.9.0";function z1(n){Ma=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=new Om("@firebase/firestore");function la(){return uo.logLevel}function pe(n,...e){if(uo.logLevel<=Ge.DEBUG){const t=e.map(Wm);uo.debug(`Firestore (${Ma}): ${n}`,...t)}}function ys(n,...e){if(uo.logLevel<=Ge.ERROR){const t=e.map(Wm);uo.error(`Firestore (${Ma}): ${n}`,...t)}}function co(n,...e){if(uo.logLevel<=Ge.WARN){const t=e.map(Wm);uo.warn(`Firestore (${Ma}): ${n}`,...t)}}function Wm(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,wA(n,i,t)}function wA(n,e,t){let i=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ys(i),new Error(i)}function je(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||wA(e,o,i)}function Ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Es{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(sn.UNAUTHENTICATED)))}shutdown(){}}class Y1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class K1{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){je(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let a=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new dr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const m=a;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},d=m=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new dr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(je(typeof i.accessToken=="string",31837,{l:i}),new RA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class $1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Q1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new $1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){je(this.o===void 0,3512);const i=a=>{a.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=W1(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function qe(n,e){return n<e?-1:n>e?1:0}function om(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),a=e.charAt(i);if(o!==a)return qp(o)===qp(a)?qe(o,a):qp(o)?1:-1}return qe(n.length,e.length)}const j1=55296,Z1=57343;function qp(n){const e=n.charCodeAt(0);return e>=j1&&e<=Z1}function Aa(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="__name__";class Oi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ie(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Oi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Oi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=Oi.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return qe(e.length,t.length)}static compareSegments(e,t){const i=Oi.isNumericId(e),o=Oi.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Oi.extractNumericId(e).compare(Oi.extractNumericId(t)):om(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fr.fromString(e.substring(4,e.length-2))}}class pt extends Oi{construct(e,t,i){return new pt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new _e(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new pt(t)}static emptyPath(){return new pt([])}}const eM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Oi{construct(e,t,i){return new Zt(e,t,i)}static isValidIdentifier(e){return eM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Q0}static keyField(){return new Zt([Q0])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new _e(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new _e(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new _e(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new _e(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(pt.fromString(e))}static fromName(e){return new Se(pt.fromString(e).popFirst(5))}static empty(){return new Se(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(n,e,t){if(!t)throw new _e(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nM(n,e,t,i){if(e===!0&&i===!0)throw new _e(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function X0(n){if(!Se.isDocumentKey(n))throw new _e(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Zm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function du(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zm(n);throw new _e(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(n,e){const t={typeString:n};return e&&(t.value=e),t}function bu(n,e){if(!bA(n))throw new _e(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new _e(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=-62135596800,j0=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*j0);return new ct(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<W0)throw new _e(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/j0}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bu(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-W0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Pt("string",ct._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ct(0,0))}static max(){return new Re(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=-1;function iM(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new ct(t+1,0):new ct(t,i));return new hr(o,Se.empty(),e)}function sM(n){return new hr(n.readTime,n.key,hu)}class hr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new hr(Re.min(),Se.empty(),hu)}static max(){return new hr(Re.max(),Se.empty(),hu)}}function rM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==oM)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,i)=>{t(e)}))}static reject(e){return new re(((t,i)=>{i(e)}))}static waitFor(e){return new re(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(m=>i(m)))})),u=!0,a===o&&t()}))}static or(e){let t=re.resolve(!1);for(const i of e)t=t.next((o=>o?re.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new re(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let m=0;m<a;m++){const h=m;t(e[h]).next((v=>{u[h]=v,++d,d===a&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new re(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function lM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Pa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=-1;function dd(n){return n==null}function qf(n){return n===0&&1/n==-1/0}function uM(n){return typeof n=="number"&&Number.isInteger(n)&&!qf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="";function cM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Z0(e)),e=fM(n.get(t),e);return Z0(e)}function fM(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case NA:t+="";break;default:t+=a}}return t}function Z0(n){return n+NA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ho(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ff(this.root,e,this.comparator,!0)}}class ff{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Wt.RED,this.left=o??Wt.EMPTY,this.right=a??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Wt(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Wt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new Wt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tE(this.data.getIterator())}getIteratorFrom(e){return new tE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class tE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new ci([])}unionWith(e){let t=new Ot(Zt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ci(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Aa(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new MA("Invalid base64 string: "+a):a}})(e);return new en(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const dM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(n){if(je(!!n,39018),typeof n=="string"){let e=0;const t=dM.exec(n);if(je(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function mr(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="server_timestamp",PA="__type__",VA="__previous_value__",kA="__local_write_time__";function tg(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[PA])==null?void 0:i.stringValue)===DA}function hd(n){const e=n.mapValue.fields[VA];return tg(e)?hd(e):e}function pu(n){const e=pr(n.mapValue.fields[kA].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,t,i,o,a,u,d,m,h,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=h,this.isUsingEmulator=v,this.apiKey=E}}const Bf="(default)";class mu{constructor(e,t){this.projectId=e,this.database=t||Bf}static empty(){return new mu("","")}get isDefaultDatabase(){return this.database===Bf}isEqual(e){return e instanceof mu&&e.projectId===this.projectId&&e.database===this.database}}function pM(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new _e(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="__type__",mM="__max__",df={mapValue:{}},LA="__vector__",Hf="value";function gr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tg(n)?4:yM(n)?9007199254740991:gM(n)?10:11:Ie(28295,{value:n})}function Hi(n,e){if(n===e)return!0;const t=gr(n);if(t!==gr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pu(n).isEqual(pu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=pr(o.timestampValue),d=pr(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return mr(o.bytesValue).isEqual(mr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return St(o.geoPointValue.latitude)===St(a.geoPointValue.latitude)&&St(o.geoPointValue.longitude)===St(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return St(o.integerValue)===St(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=St(o.doubleValue),d=St(a.doubleValue);return u===d?qf(u)===qf(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Aa(n.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(eE(u)!==eE(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(d[m]===void 0||!Hi(u[m],d[m])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function gu(n,e){return(n.values||[]).find((t=>Hi(t,e)))!==void 0}function Ca(n,e){if(n===e)return 0;const t=gr(n),i=gr(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=St(a.integerValue||a.doubleValue),m=St(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return nE(n.timestampValue,e.timestampValue);case 4:return nE(pu(n),pu(e));case 5:return om(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=mr(a),m=mr(u);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),m=u.split("/");for(let h=0;h<d.length&&h<m.length;h++){const v=qe(d[h],m[h]);if(v!==0)return v}return qe(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=qe(St(a.latitude),St(u.latitude));return d!==0?d:qe(St(a.longitude),St(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return iE(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var S,w,P,O;const d=a.fields||{},m=u.fields||{},h=(S=d[Hf])==null?void 0:S.arrayValue,v=(w=m[Hf])==null?void 0:w.arrayValue,E=qe(((P=h==null?void 0:h.values)==null?void 0:P.length)||0,((O=v==null?void 0:v.values)==null?void 0:O.length)||0);return E!==0?E:iE(h,v)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===df.mapValue&&u===df.mapValue)return 0;if(a===df.mapValue)return 1;if(u===df.mapValue)return-1;const d=a.fields||{},m=Object.keys(d),h=u.fields||{},v=Object.keys(h);m.sort(),v.sort();for(let E=0;E<m.length&&E<v.length;++E){const S=om(m[E],v[E]);if(S!==0)return S;const w=Ca(d[m[E]],h[v[E]]);if(w!==0)return w}return qe(m.length,v.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function nE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);const t=pr(n),i=pr(e),o=qe(t.seconds,i.seconds);return o!==0?o:qe(t.nanos,i.nanos)}function iE(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Ca(t[o],i[o]);if(a)return a}return qe(t.length,i.length)}function Ia(n){return am(n)}function am(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=pr(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return mr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Se.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=am(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${am(t.fields[u])}`;return o+"}"})(n.mapValue):Ie(61005,{value:n})}function wf(n){switch(gr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hd(n);return e?16+wf(e):16;case 5:return 2*n.stringValue.length;case 6:return mr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+wf(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return ho(i.fields,((a,u)=>{o+=a.length+wf(u)})),o})(n.mapValue);default:throw Ie(13486,{value:n})}}function lm(n){return!!n&&"integerValue"in n}function ng(n){return!!n&&"arrayValue"in n}function sE(n){return!!n&&"nullValue"in n}function rE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rf(n){return!!n&&"mapValue"in n}function gM(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[UA])==null?void 0:i.stringValue)===LA}function iu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ho(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=iu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=iu(n.arrayValue.values[t]);return e}return{...n}}function yM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===mM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.value=e}static empty(){return new Yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Rf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=iu(t)}setAll(e){let t=Zt.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=iu(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Rf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Rf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){ho(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Yn(iu(this.value))}}function OA(n){const e=[];return ho(n.fields,((t,i)=>{const o=new Zt([t]);if(Rf(i)){const a=OA(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new ci(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new rn(e,0,Re.min(),Re.min(),Re.min(),Yn.empty(),0)}static newFoundDocument(e,t,i,o){return new rn(e,1,t,Re.min(),i,o,0)}static newNoDocument(e,t){return new rn(e,2,t,Re.min(),Re.min(),Yn.empty(),0)}static newUnknownDocument(e,t){return new rn(e,3,t,Re.min(),Re.min(),Yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t){this.position=e,this.inclusive=t}}function oE(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Se.comparator(Se.fromName(u.referenceValue),t.key):i=Ca(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function aE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t="asc"){this.field=e,this.dir=t}}function _M(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{}class Lt extends FA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new EM(e,t,i):t==="array-contains"?new AM(e,i):t==="in"?new CM(e,i):t==="not-in"?new IM(e,i):t==="array-contains-any"?new wM(e,i):new Lt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new TM(e,i):new SM(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ca(t,this.value)):t!==null&&gr(this.value)===gr(t)&&this.matchesComparison(Ca(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zi extends FA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new zi(e,t)}matches(e){return GA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function GA(n){return n.op==="and"}function qA(n){return vM(n)&&GA(n)}function vM(n){for(const e of n.filters)if(e instanceof zi)return!1;return!0}function um(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+Ia(n.value);if(qA(n))return n.filters.map((e=>um(e))).join(",");{const e=n.filters.map((t=>um(t))).join(",");return`${n.op}(${e})`}}function BA(n,e){return n instanceof Lt?(function(i,o){return o instanceof Lt&&i.op===o.op&&i.field.isEqual(o.field)&&Hi(i.value,o.value)})(n,e):n instanceof zi?(function(i,o){return o instanceof zi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&BA(u,o.filters[d])),!0):!1})(n,e):void Ie(19439)}function HA(n){return n instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ia(t.value)}`})(n):n instanceof zi?(function(t){return t.op.toString()+" {"+t.getFilters().map(HA).join(" ,")+"}"})(n):"Filter"}class EM extends Lt{constructor(e,t,i){super(e,t,i),this.key=Se.fromName(i.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class TM extends Lt{constructor(e,t){super(e,"in",t),this.keys=zA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class SM extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=zA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function zA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Se.fromName(i.referenceValue)))}class AM extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ng(t)&&gu(t.arrayValue,this.value)}}class CM extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gu(this.value.arrayValue,t)}}class IM extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gu(this.value.arrayValue,t)}}class wM extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ng(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>gu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function lE(n,e=null,t=[],i=[],o=null,a=null,u=null){return new RM(n,e,t,i,o,a,u)}function ig(n){const e=Ne(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>um(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),dd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ia(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ia(i))).join(",")),e.Te=t}return e.Te}function sg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!_M(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!BA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!aE(n.startAt,e.startAt)&&aE(n.endAt,e.endAt)}function cm(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function bM(n,e,t,i,o,a,u,d){return new pd(n,e,t,i,o,a,u,d)}function rg(n){return new pd(n)}function uE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function NM(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function xM(n){return n.collectionGroup!==null}function su(n){const e=Ne(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ot(Zt.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Jf(a,i))})),t.has(Zt.keyField().canonicalString())||e.Ie.push(new Jf(Zt.keyField(),i))}return e.Ie}function Gi(n){const e=Ne(n);return e.Ee||(e.Ee=MM(e,su(n))),e.Ee}function MM(n,e){if(n.limitType==="F")return lE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Jf(o.field,a)}));const t=n.endAt?new zf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new zf(n.startAt.position,n.startAt.inclusive):null;return lE(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function fm(n,e,t){return new pd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function md(n,e){return sg(Gi(n),Gi(e))&&n.limitType===e.limitType}function JA(n){return`${ig(Gi(n))}|lt:${n.limitType}`}function ua(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>HA(o))).join(", ")}]`),dd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Ia(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Ia(o))).join(",")),`Target(${i})`})(Gi(n))}; limitType=${n.limitType})`}function gd(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Se.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of su(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,m){const h=oE(u,d,m);return u.inclusive?h<=0:h<0})(i.startAt,su(i),o)||i.endAt&&!(function(u,d,m){const h=oE(u,d,m);return u.inclusive?h>=0:h>0})(i.endAt,su(i),o))})(n,e)}function DM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function YA(n){return(e,t)=>{let i=!1;for(const o of su(n)){const a=PM(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function PM(n,e,t){const i=n.field.isKeyField()?Se.comparator(e.key,t.key):(function(a,u,d){const m=u.data.field(a),h=d.data.field(a);return m!==null&&h!==null?Ca(m,h):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ho(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return xA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=new mt(Se.comparator);function _s(){return VM}const KA=new mt(Se.comparator);function Wl(...n){let e=KA;for(const t of n)e=e.insert(t.key,t);return e}function $A(n){let e=KA;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function io(){return ru()}function QA(){return ru()}function ru(){return new po((n=>n.toString()),((n,e)=>n.isEqual(e)))}const kM=new mt(Se.comparator),UM=new Ot(Se.comparator);function Be(...n){let e=UM;for(const t of n)e=e.add(t);return e}const LM=new Ot(qe);function OM(){return LM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qf(e)?"-0":e}}function XA(n){return{integerValue:""+n}}function FM(n,e){return uM(e)?XA(e):og(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(){this._=void 0}}function GM(n,e,t){return n instanceof Yf?(function(o,a){const u={fields:{[PA]:{stringValue:DA},[kA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&tg(a)&&(a=hd(a)),a&&(u.fields[VA]=a),{mapValue:u}})(t,e):n instanceof yu?jA(n,e):n instanceof _u?ZA(n,e):(function(o,a){const u=WA(o,a),d=cE(u)+cE(o.Ae);return lm(u)&&lm(o.Ae)?XA(d):og(o.serializer,d)})(n,e)}function qM(n,e,t){return n instanceof yu?jA(n,e):n instanceof _u?ZA(n,e):t}function WA(n,e){return n instanceof Kf?(function(i){return lm(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Yf extends yd{}class yu extends yd{constructor(e){super(),this.elements=e}}function jA(n,e){const t=eC(e);for(const i of n.elements)t.some((o=>Hi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class _u extends yd{constructor(e){super(),this.elements=e}}function ZA(n,e){let t=eC(e);for(const i of n.elements)t=t.filter((o=>!Hi(o,i)));return{arrayValue:{values:t}}}class Kf extends yd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function cE(n){return St(n.integerValue||n.doubleValue)}function eC(n){return ng(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function BM(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof yu&&o instanceof yu||i instanceof _u&&o instanceof _u?Aa(i.elements,o.elements,Hi):i instanceof Kf&&o instanceof Kf?Hi(i.Ae,o.Ae):i instanceof Yf&&o instanceof Yf})(n.transform,e.transform)}class HM{constructor(e,t){this.version=e,this.transformResults=t}}class ps{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ps}static exists(e){return new ps(void 0,e)}static updateTime(e){return new ps(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class _d{}function tC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new iC(n.key,ps.none()):new Nu(n.key,n.data,ps.none());{const t=n.data,i=Yn.empty();let o=new Ot(Zt.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new mo(n.key,i,new ci(o.toArray()),ps.none())}}function zM(n,e,t){n instanceof Nu?(function(o,a,u){const d=o.value.clone(),m=dE(o.fieldTransforms,a,u.transformResults);d.setAll(m),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof mo?(function(o,a,u){if(!bf(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=dE(o.fieldTransforms,a,u.transformResults),m=a.data;m.setAll(nC(o)),m.setAll(d),a.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function ou(n,e,t,i){return n instanceof Nu?(function(a,u,d,m){if(!bf(a.precondition,u))return d;const h=a.value.clone(),v=hE(a.fieldTransforms,m,u);return h.setAll(v),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof mo?(function(a,u,d,m){if(!bf(a.precondition,u))return d;const h=hE(a.fieldTransforms,m,u),v=u.data;return v.setAll(nC(a)),v.setAll(h),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,u,d){return bf(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function JM(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=WA(i.transform,o||null);a!=null&&(t===null&&(t=Yn.empty()),t.set(i.field,a))}return t||null}function fE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Aa(i,o,((a,u)=>BM(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Nu extends _d{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class mo extends _d{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function nC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function dE(n,e,t){const i=new Map;je(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,qM(u,d,t[o]))}return i}function hE(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,GM(a,u,e))}return i}class iC extends _d{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YM extends _d{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&zM(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ou(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ou(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=QA();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const m=tC(u,d);m!==null&&i.set(o.key,m),u.isValidDocument()||u.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Aa(this.mutations,e.mutations,((t,i)=>fE(t,i)))&&Aa(this.baseMutations,e.baseMutations,((t,i)=>fE(t,i)))}}class ag{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){je(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return kM})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new ag(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Je;function XM(n){switch(n){case oe.OK:return Ie(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function sC(n){if(n===void 0)return ys("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Dt.OK:return oe.OK;case Dt.CANCELLED:return oe.CANCELLED;case Dt.UNKNOWN:return oe.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return oe.INTERNAL;case Dt.UNAVAILABLE:return oe.UNAVAILABLE;case Dt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Dt.NOT_FOUND:return oe.NOT_FOUND;case Dt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Dt.ABORTED:return oe.ABORTED;case Dt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Dt.DATA_LOSS:return oe.DATA_LOSS;default:return Ie(39323,{code:n})}}(Je=Dt||(Dt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=new fr([4294967295,4294967295],0);function pE(n){const e=WM().encode(n),t=new EA;return t.update(e),new Uint8Array(t.digest())}function mE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new fr([t,i],0),new fr([o,a],0)]}class lg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new jl(`Invalid padding: ${t}`);if(i<0)throw new jl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new jl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new jl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=fr.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(fr.fromNumber(i)));return o.compare(jM)===1&&(o=new fr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=pE(e),[i,o]=mE(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new lg(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=pE(e),[i,o]=mE(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,xu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new vd(Re.min(),o,new mt(qe),_s(),Be())}}class xu{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new xu(i,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=o}}class rC{constructor(e,t){this.targetId=e,this.Ce=t}}class oC{constructor(e,t,i=en.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class gE{constructor(){this.ve=0,this.Fe=yE(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),i=Be();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ie(38017,{changeType:a})}})),new xu(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=yE()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class ZM{constructor(e){this.Ge=e,this.ze=new Map,this.je=_s(),this.He=hf(),this.Je=hf(),this.Ze=new mt(qe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(cm(a))if(i===0){const u=new Se(a.path);this.et(t,u,rn.newNoDocument(u,Re.min()))}else je(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),m=d?this.ct(d,e,u):1;if(m!==0){this.it(t);const h=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=mr(i).toUint8Array()}catch(m){if(m instanceof MA)return co("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new lg(u,o,a)}catch(m){return co(m instanceof jl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&cm(d.target)){const m=new Se(d.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,rn.newNoDocument(m,e))}a.Be&&(t.set(u,a.ke()),a.Ke())}}));let i=Be();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((m=>{const h=this.ot(m);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const o=new vd(e,t,this.Ze,this.je,i);return this.je=_s(),this.He=hf(),this.Je=hf(),this.Ze=new mt(qe),o}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new gE,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Ot(qe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Ot(qe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function hf(){return new mt(Se.comparator)}function yE(){return new mt(Se.comparator)}const eD={asc:"ASCENDING",desc:"DESCENDING"},tD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nD={and:"AND",or:"OR"};class iD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function dm(n,e){return n.useProto3Json||dd(e)?e:{value:e}}function $f(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sD(n,e){return $f(n,e.toTimestamp())}function qi(n){return je(!!n,49232),Re.fromTimestamp((function(t){const i=pr(t);return new ct(i.seconds,i.nanos)})(n))}function ug(n,e){return hm(n,e).canonicalString()}function hm(n,e){const t=(function(o){return new pt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function lC(n){const e=pt.fromString(n);return je(hC(e),10190,{key:e.toString()}),e}function pm(n,e){return ug(n.databaseId,e.path)}function Bp(n,e){const t=lC(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(cC(t))}function uC(n,e){return ug(n.databaseId,e)}function rD(n){const e=lC(n);return e.length===4?pt.emptyPath():cC(e)}function mm(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cC(n){return je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function _E(n,e,t){return{name:pm(n,e),fields:t.value.mapValue.fields}}function oD(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ie(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,v){return h.useProto3Json?(je(v===void 0||typeof v=="string",58123),en.fromBase64String(v||"")):(je(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),en.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(h){const v=h.code===void 0?oe.UNKNOWN:sC(h.code);return new _e(v,h.message||"")})(u);t=new oC(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Bp(n,i.document.name),a=qi(i.document.updateTime),u=i.document.createTime?qi(i.document.createTime):Re.min(),d=new Yn({mapValue:{fields:i.document.fields}}),m=rn.newFoundDocument(o,a,u,d),h=i.targetIds||[],v=i.removedTargetIds||[];t=new Nf(h,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Bp(n,i.document),a=i.readTime?qi(i.readTime):Re.min(),u=rn.newNoDocument(o,a),d=i.removedTargetIds||[];t=new Nf([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Bp(n,i.document),a=i.removedTargetIds||[];t=new Nf([],a,o,null)}else{if(!("filter"in e))return Ie(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new QM(o,a),d=i.targetId;t=new rC(d,u)}}return t}function aD(n,e){let t;if(e instanceof Nu)t={update:_E(n,e.key,e.value)};else if(e instanceof iC)t={delete:pm(n,e.key)};else if(e instanceof mo)t={update:_E(n,e.key,e.data),updateMask:gD(e.fieldMask)};else{if(!(e instanceof YM))return Ie(16599,{dt:e.type});t={verify:pm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Yf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof yu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof _u)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Kf)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Ie(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:sD(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ie(27497)})(n,e.precondition)),t}function lD(n,e){return n&&n.length>0?(je(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?qi(o.updateTime):qi(a);return u.isEqual(Re.min())&&(u=qi(a)),new HM(u,o.transformResults||[])})(t,e)))):[]}function uD(n,e){return{documents:[uC(n,e.path)]}}function cD(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=uC(n,o);const a=(function(h){if(h.length!==0)return dC(zi.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((v=>(function(S){return{field:ca(S.field),direction:hD(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=dm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function fD(n){let e=rD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){je(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(E){const S=fC(E);return S instanceof zi&&qA(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((S=>(function(P){return new Jf(fa(P.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,dd(S)?null:S})(t.limit));let m=null;t.startAt&&(m=(function(E){const S=!!E.before,w=E.values||[];return new zf(w,S)})(t.startAt));let h=null;return t.endAt&&(h=(function(E){const S=!E.before,w=E.values||[];return new zf(w,S)})(t.endAt)),bM(e,o,u,a,d,"F",m,h)}function dD(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=fa(t.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=fa(t.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=fa(t.unaryFilter.field);return Lt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=fa(t.unaryFilter.field);return Lt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Lt.create(fa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return zi.create(t.compositeFilter.filters.map((i=>fC(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function hD(n){return eD[n]}function pD(n){return tD[n]}function mD(n){return nD[n]}function ca(n){return{fieldPath:n.canonicalString()}}function fa(n){return Zt.fromServerFormat(n.fieldPath)}function dC(n){return n instanceof Lt?(function(t){if(t.op==="=="){if(rE(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NAN"}};if(sE(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(rE(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NOT_NAN"}};if(sE(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ca(t.field),op:pD(t.op),value:t.value}}})(n):n instanceof zi?(function(t){const i=t.getFilters().map((o=>dC(o)));return i.length===1?i[0]:{compositeFilter:{op:mD(t.op),filters:i}}})(n):Ie(54877,{filter:n})}function gD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function hC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function pC(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,t,i,o,a=Re.min(),u=Re.min(),d=en.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.yt=e}}function _D(n){const e=fD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?fm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this.Sn=new ED}addToCollectionParentIndex(e,t){return this.Sn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(hr.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(hr.min())}updateCollectionGroup(e,t,i){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class ED{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ot(pt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ot(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mC=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(mC,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new wa(0)}static ar(){return new wa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="LruGarbageCollector",TD=1048576;function TE([n,e],[t,i]){const o=qe(n,t);return o===0?qe(e,i):o}class SD{constructor(e){this.Pr=e,this.buffer=new Ot(TE),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();TE(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AD{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){pe(EE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Pa(t)?pe(EE,"Ignoring IndexedDB error during garbage collection: ",t):await Da(t)}await this.Ar(3e5)}))}}class CD{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(fd.ce);const i=new SD(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(vE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vE):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,o,a,u,d,m,h;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,d=Date.now(),this.removeTargets(e,i,t)))).next((E=>(a=E,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),la()<=Ge.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(m-d)+`ms
	Removed ${E} documents in `+(h-m)+`ms
Total Duration: ${h-v}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:E}))))}}function ID(n,e){return new CD(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(){this.changes=new po((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?re.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&ou(i.mutation,o,ci.empty(),ct.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Be()){const o=io();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=Wl();return a.forEach(((d,m)=>{u=u.insert(d,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=io();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Be())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=_s();const u=ru(),d=(function(){return ru()})();return t.forEach(((m,h)=>{const v=i.get(h.key);o.has(h.key)&&(v===void 0||v.mutation instanceof mo)?a=a.insert(h.key,h):v!==void 0?(u.set(h.key,v.mutation.getFieldMask()),ou(v.mutation,h,v.mutation.getFieldMask(),ct.now())):u.set(h.key,ci.empty())})),this.recalculateAndSaveOverlays(e,a).next((m=>(m.forEach(((h,v)=>u.set(h,v))),t.forEach(((h,v)=>d.set(h,new RD(v,u.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=ru();let o=new mt(((u,d)=>u-d)),a=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((m=>{const h=t.get(m);if(h===null)return;let v=i.get(m)||ci.empty();v=d.applyToLocalView(h,v),i.set(m,v);const E=(o.get(d.batchId)||Be()).add(m);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),h=m.key,v=m.value,E=QA();v.forEach((S=>{if(!a.has(S)){const w=tC(t.get(S),i.get(S));w!==null&&E.set(S,w),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,E))}return re.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return NM(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):re.resolve(io());let d=hu,m=a;return u.next((h=>re.forEach(h,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(v)?re.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{m=m.insert(v,S)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,m,h,Be()))).next((v=>({batchId:d,changes:$A(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next((i=>{let o=Wl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=Wl();return this.indexManager.getCollectionParents(e,a).next((d=>re.forEach(d,(m=>{const h=(function(E,S){return new pd(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((v=>{v.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((m,h)=>{const v=h.getKey();u.get(v)===null&&(u=u.insert(v,rn.newInvalidDocument(v)))}));let d=Wl();return u.forEach(((m,h)=>{const v=a.get(m);v!==void 0&&ou(v.mutation,h,ci.empty(),ct.now()),gd(t,h)&&(d=d.insert(m,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return re.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:qi(o.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:_D(o.bundledQuery),readTime:qi(o.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this.overlays=new mt(Se.comparator),this.Lr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const i=io();return re.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.bt(e,t,a)})),re.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Lr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),re.resolve()}getOverlaysForCollection(e,t,i){const o=io(),a=t.length+1,u=new Se(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const m=d.getNext().value,h=m.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&m.largestBatchId>i&&o.set(m.getKey(),m)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new mt(((h,v)=>h-v));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let v=a.get(h.largestBatchId);v===null&&(v=io(),a=a.insert(h.largestBatchId,v)),v.set(h.getKey(),h)}}const d=io(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((h,v)=>d.set(h,v))),!(d.size()>=o)););return re.resolve(d)}bt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Lr.get(o.largestBatchId).delete(i.key);this.Lr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new $M(t,i));let a=this.Lr.get(t);a===void 0&&(a=Be(),this.Lr.set(t,a)),this.Lr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(){this.kr=new Ot(Bt.Kr),this.qr=new Ot(Bt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Bt(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Bt(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Se(new pt([])),i=new Bt(t,e),o=new Bt(t,e+1),a=[];return this.qr.forEachInRange([i,o],(u=>{this.Wr(u),a.push(u.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Se(new pt([])),i=new Bt(t,e),o=new Bt(t,e+1);let a=Be();return this.qr.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Bt(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Bt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Se.comparator(e.key,t.key)||qe(e.Hr,t.Hr)}static Ur(e,t){return qe(e.Hr,t.Hr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Ot(Bt.Kr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new KM(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Jr=this.Jr.add(new Bt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(u)}lookupMutationBatch(e,t){return re.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),a=o<0?0:o;return re.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?eg:this.Yn-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Bt(t,0),o=new Bt(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,o],(u=>{const d=this.Zr(u.Hr);a.push(d)})),re.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ot(qe);return t.forEach((o=>{const a=new Bt(o,0),u=new Bt(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,u],(d=>{i=i.add(d.Hr)}))})),re.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Se.isDocumentKey(a)||(a=a.child(""));const u=new Bt(new Se(a),0);let d=new Ot(qe);return this.Jr.forEachWhile((m=>{const h=m.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(d=d.add(m.Hr)),!0)}),u),re.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){je(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return re.forEach(t.mutations,(o=>{const a=new Bt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Bt(t,0),o=this.Jr.firstAfterOrEqual(i);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.ti=e,this.docs=(function(){return new mt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return re.resolve(i?i.document.mutableCopy():rn.newInvalidDocument(t))}getEntries(e,t){let i=_s();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():rn.newInvalidDocument(o))})),re.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=_s();const u=t.path,d=new Se(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:h,value:{document:v}}=m.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||rM(sM(v),i)<=0||(o.has(v.key)||gd(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return re.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ie(9500)}ni(e,t){return re.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new VD(this)}getSize(e){return re.resolve(this.size)}}class VD extends wD{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(i)})),re.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.persistence=e,this.ri=new po((t=>ig(t)),sg),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.ii=0,this.si=new cg,this.targetCount=0,this.oi=wa._r()}forEachTarget(e,t){return this.ri.forEach(((i,o)=>t(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),re.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new wa(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.lr(t),re.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.ri.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ri.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),re.waitFor(a).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return re.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),re.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),re.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return re.resolve(i)}containsKey(e,t){return re.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,t){this._i={},this.overlays={},this.ai=new fd(0),this.ui=!1,this.ui=!0,this.ci=new MD,this.referenceDelegate=e(this),this.li=new kD(this),this.indexManager=new vD,this.remoteDocumentCache=(function(o){return new PD(o)})((i=>this.referenceDelegate.hi(i))),this.serializer=new yD(t),this.Pi=new ND(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new DD(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const o=new UD(this.ai.next());return this.referenceDelegate.Ti(),i(o).next((a=>this.referenceDelegate.Ii(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ei(e,t){return re.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class UD extends aM{constructor(e){super(),this.currentSequenceNumber=e}}class fg{constructor(e){this.persistence=e,this.Ri=new cg,this.Ai=null}static Vi(e){return new fg(e)}get di(){if(this.Ai)return this.Ai;throw Ie(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),re.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.di,(i=>{const o=Se.fromPath(i);return this.mi(e,o).next((a=>{a||t.removeEntry(o,Re.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Qf{constructor(e,t){this.persistence=e,this.fi=new po((i=>cM(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=ID(this,t)}static Vi(e,t){return new Qf(e,t)}Ti(){}Ii(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return re.forEach(this.fi,((i,o)=>this.wr(e,i,o).next((a=>a?re.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ni(e,(u=>this.wr(e,u,t).next((d=>{d||(i++,a.removeEntry(u,Re.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),re.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),re.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wf(e.data.value)),t}wr(e,t,i){return re.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return re.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=o}static Es(e,t){let i=Be(),o=Be();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new dg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return lb()?8:lM(an())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.gs(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ps(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new LD;return this.ys(e,t,u).next((d=>{if(a.result=d,this.As)return this.ws(e,t,u,d.size)}))})).next((()=>a.result))}ws(e,t,i,o){return i.documentReadCount<this.Vs?(la()<=Ge.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",ua(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(la()<=Ge.DEBUG&&pe("QueryEngine","Query:",ua(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ds*o?(la()<=Ge.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",ua(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gi(t))):re.resolve())}gs(e,t){if(uE(t))return re.resolve(null);let i=Gi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=fm(t,null,"F"),i=Gi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Be(...a);return this.fs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((m=>{const h=this.bs(t,d);return this.Ss(t,h,u,m.readTime)?this.gs(e,fm(t,null,"F")):this.Ds(e,h,t,m)}))))})))))}ps(e,t,i,o){return uE(t)||o.isEqual(Re.min())?re.resolve(null):this.fs.getDocuments(e,i).next((a=>{const u=this.bs(t,a);return this.Ss(t,u,i,o)?re.resolve(null):(la()<=Ge.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ua(t)),this.Ds(e,u,t,iM(o,hu)).next((d=>d)))}))}bs(e,t){let i=new Ot(YA(e));return t.forEach(((o,a)=>{gd(e,a)&&(i=i.add(a))})),i}Ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ys(e,t,i){return la()<=Ge.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",ua(t)),this.fs.getDocumentsMatchingQuery(e,t,hr.min(),i)}Ds(e,t,i,o){return this.fs.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="LocalStore",FD=3e8;class GD{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new mt(qe),this.Fs=new po((a=>ig(a)),sg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bD(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function qD(n,e,t,i){return new GD(n,e,t,i)}async function yC(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let m=Be();for(const h of o){u.push(h.batchId);for(const v of h.mutations)m=m.add(v.key)}for(const h of a){d.push(h.batchId);for(const v of h.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(i,m).next((h=>({Ns:h,removedBatchIds:u,addedBatchIds:d})))}))}))}function BD(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,m,h,v){const E=h.batch,S=E.keys();let w=re.resolve();return S.forEach((P=>{w=w.next((()=>v.getEntry(m,P))).next((O=>{const F=h.docVersions.get(P);je(F!==null,48541),O.version.compareTo(F)<0&&(E.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),v.addEntry(O)))}))})),w.next((()=>d.mutationQueue.removeMutationBatch(m,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let m=Be();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(m=m.add(d.batch.mutations[h].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function _C(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function HD(n,e){const t=Ne(n),i=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const d=[];e.targetChanges.forEach(((v,E)=>{const S=o.get(E);if(!S)return;d.push(t.li.removeMatchingKeys(a,v.removedDocuments,E).next((()=>t.li.addMatchingKeys(a,v.addedDocuments,E))));let w=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(en.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(v.resumeToken,i)),o=o.insert(E,w),(function(O,F,K){return O.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=FD?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(S,w,v)&&d.push(t.li.updateTargetData(a,w))}));let m=_s(),h=Be();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(zD(a,u,e.documentUpdates).next((v=>{m=v.Bs,h=v.Ls}))),!i.isEqual(Re.min())){const v=t.li.getLastRemoteSnapshotVersion(a).next((E=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return re.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,m,h))).next((()=>m))})).then((a=>(t.vs=o,a)))}function zD(n,e,t){let i=Be(),o=Be();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=_s();return t.forEach(((d,m)=>{const h=a.get(d);m.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(d)),m.isNoDocument()&&m.version.isEqual(Re.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!h.isValidDocument()||m.version.compareTo(h.version)>0||m.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):pe(hg,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",m.version)})),{Bs:u,Ls:o}}))}function JD(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=eg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function YD(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.li.getTargetData(i,e).next((a=>a?(o=a,re.resolve(o)):t.li.allocateTargetId(i).next((u=>(o=new ar(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.vs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function gm(n,e,t){const i=Ne(n),o=i.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Pa(u))throw u;pe(hg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(o.target)}function SE(n,e,t){const i=Ne(n);let o=Re.min(),a=Be();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,h,v){const E=Ne(m),S=E.Fs.get(v);return S!==void 0?re.resolve(E.vs.get(S)):E.li.getTargetData(h,v)})(i,u,Gi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,d.targetId).next((m=>{a=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?o:Re.min(),t?a:Be()))).next((d=>(KD(i,DM(e),d),{documents:d,ks:a})))))}function KD(n,e,t){let i=n.Ms.get(e)||Re.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Ms.set(e,i)}class AE{constructor(){this.activeTargetIds=OM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $D{constructor(){this.vo=new AE,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new AE,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="ConnectivityMonitor";class IE{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){pe(CE,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){pe(CE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pf=null;function ym(){return pf===null?pf=(function(){return 268435456+Math.round(2147483648*Math.random())})():pf++,"0x"+pf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="RestConnection",XD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class WD{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.$o=this.databaseId.database===Bf?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,a){const u=ym(),d=this.Qo(e,t.toUriEncodedString());pe(Hp,`Sending RPC '${e}' ${u}:`,d,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,o,a);const{host:h}=new URL(d),v=ba(h);return this.zo(e,d,m,i,v).then((E=>(pe(Hp,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw co(Hp,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",i),E}))}jo(e,t,i,o,a,u){return this.Wo(e,t,i,o,a)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ma})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}Qo(e,t){const i=XD[e];let o=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection",zl=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(o){setTimeout((()=>{throw o}),0)}}))};class _a extends WD{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!_a.c_){const e=CA();zl(e,AA.STAT_EVENT,(t=>{t.stat===rm.PROXY?pe(nn,"STAT_EVENT: detected buffering proxy"):t.stat===rm.NOPROXY&&pe(nn,"STAT_EVENT: detected no buffering proxy")})),_a.c_=!0}}zo(e,t,i,o,a){const u=ym();return new Promise(((d,m)=>{const h=new TA;h.setWithCredentials(!0),h.listenOnce(SA.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case If.NO_ERROR:const E=h.getResponseJson();pe(nn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case If.TIMEOUT:pe(nn,`RPC '${e}' ${u} timed out`),m(new _e(oe.DEADLINE_EXCEEDED,"Request time out"));break;case If.HTTP_ERROR:const S=h.getStatus();if(pe(nn,`RPC '${e}' ${u} failed with status:`,S,"response text:",h.getResponseText()),S>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const P=w==null?void 0:w.error;if(P&&P.status&&P.message){const O=(function(K){const $=K.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf($)>=0?$:oe.UNKNOWN})(P.status);m(new _e(O,P.message))}else m(new _e(oe.UNKNOWN,"Server responded with status "+h.getStatus()))}else m(new _e(oe.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{pe(nn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);pe(nn,`RPC '${e}' ${u} sending request:`,o),h.send(t,"POST",v,i,15)}))}T_(e,t,i){const o=ym(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const h=a.join("");pe(nn,`Creating RPC '${e}' stream ${o}: ${h}`,d);const v=u.createWebChannel(h,d);this.I_(v);let E=!1,S=!1;const w=new jD({Ho:P=>{S?pe(nn,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(E||(pe(nn,`Opening RPC '${e}' stream ${o} transport.`),v.open(),E=!0),pe(nn,`RPC '${e}' stream ${o} sending:`,P),v.send(P))},Jo:()=>v.close()});return zl(v,Xl.EventType.OPEN,(()=>{S||(pe(nn,`RPC '${e}' stream ${o} transport opened.`),w.i_())})),zl(v,Xl.EventType.CLOSE,(()=>{S||(S=!0,pe(nn,`RPC '${e}' stream ${o} transport closed`),w.o_(),this.E_(v))})),zl(v,Xl.EventType.ERROR,(P=>{S||(S=!0,co(nn,`RPC '${e}' stream ${o} transport errored. Name:`,P.name,"Message:",P.message),w.o_(new _e(oe.UNAVAILABLE,"The operation could not be completed")))})),zl(v,Xl.EventType.MESSAGE,(P=>{var O;if(!S){const F=P.data[0];je(!!F,16349);const K=F,$=(K==null?void 0:K.error)||((O=K[0])==null?void 0:O.error);if($){pe(nn,`RPC '${e}' stream ${o} received error:`,$);const W=$.status;let ie=(function(N){const x=Dt[N];if(x!==void 0)return sC(x)})(W),ae=$.message;W==="NOT_FOUND"&&ae.includes("database")&&ae.includes("does not exist")&&ae.includes(this.databaseId.database)&&co(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ie===void 0&&(ie=oe.INTERNAL,ae="Unknown error status: "+W+" with message "+$.message),S=!0,w.o_(new _e(ie,ae)),v.close()}else pe(nn,`RPC '${e}' stream ${o} received:`,F),w.__(F)}})),_a.u_(),setTimeout((()=>{w.s_()}),0),w}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return IA()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(n){return new _a(n)}function zp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n){return new iD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_a.c_=!1;class vC{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=o,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="PersistentStream";class EC{constructor(e,t,i,o,a,u,d,m){this.Ci=e,this.b_=i,this.S_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(ys(t.toString()),ys("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new _e(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(wE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(pe(wE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eP extends EC{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=oD(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Re.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?qi(u.readTime):Re.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=mm(this.serializer),t.addTarget=(function(a,u){let d;const m=u.target;if(d=cm(m)?{documents:uD(a,m)}:{query:cD(a,m).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=aC(a,u.resumeToken);const h=dm(a,u.expectedCount);h!==null&&(d.expectedCount=h)}else if(u.snapshotVersion.compareTo(Re.min())>0){d.readTime=$f(a,u.snapshotVersion.toTimestamp());const h=dm(a,u.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=dD(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=mm(this.serializer),t.removeTarget=e,this.K_(t)}}class tP extends EC{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=lD(e.writeResults,e.commitTime),i=qi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=mm(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>aD(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{}class iP extends nP{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new _e(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,hm(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new _e(oe.UNKNOWN,a.toString())}))}jo(e,t,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.jo(e,hm(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new _e(oe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function sP(n,e,t,i){return new iP(n,e,t,i)}class rP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ys(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="RemoteStore";class oP{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{go(this)&&(pe(fo,"Restarting streams for network reachability change."),await(async function(m){const h=Ne(m);h.Ea.add(4),await Mu(h),h.Va.set("Unknown"),h.Ea.delete(4),await Td(h)})(this))}))})),this.Va=new rP(i,o)}}async function Td(n){if(go(n))for(const e of n.Ra)await e(!0)}async function Mu(n){for(const e of n.Ra)await e(!1)}function TC(n,e){const t=Ne(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),yg(t)?gg(t):Va(t).O_()&&mg(t,e))}function pg(n,e){const t=Ne(n),i=Va(t);t.Ia.delete(e),i.O_()&&SC(t,e),t.Ia.size===0&&(i.O_()?i.L_():go(t)&&t.Va.set("Unknown"))}function mg(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Va(n).Z_(e)}function SC(n,e){n.da.$e(e),Va(n).X_(e)}function gg(n){n.da=new ZM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Va(n).start(),n.Va.ua()}function yg(n){return go(n)&&!Va(n).x_()&&n.Ia.size>0}function go(n){return Ne(n).Ea.size===0}function AC(n){n.da=void 0}async function aP(n){n.Va.set("Online")}async function lP(n){n.Ia.forEach(((e,t)=>{mg(n,e)}))}async function uP(n,e){AC(n),yg(n)?(n.Va.ha(e),gg(n)):n.Va.set("Unknown")}async function cP(n,e,t){if(n.Va.set("Online"),e instanceof oC&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.da.removeTarget(d))})(n,e)}catch(i){pe(fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Xf(n,i)}else if(e instanceof Nf?n.da.Xe(e):e instanceof rC?n.da.st(e):n.da.tt(e),!t.isEqual(Re.min()))try{const i=await _C(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.da.Tt(u);return d.targetChanges.forEach(((m,h)=>{if(m.resumeToken.approximateByteSize()>0){const v=a.Ia.get(h);v&&a.Ia.set(h,v.withResumeToken(m.resumeToken,u))}})),d.targetMismatches.forEach(((m,h)=>{const v=a.Ia.get(m);if(!v)return;a.Ia.set(m,v.withResumeToken(en.EMPTY_BYTE_STRING,v.snapshotVersion)),SC(a,m);const E=new ar(v.target,m,h,v.sequenceNumber);mg(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){pe(fo,"Failed to raise snapshot:",i),await Xf(n,i)}}async function Xf(n,e,t){if(!Pa(e))throw e;n.Ea.add(1),await Mu(n),n.Va.set("Offline"),t||(t=()=>_C(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(fo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Td(n)}))}function CC(n,e){return e().catch((t=>Xf(n,t,e)))}async function Sd(n){const e=Ne(n),t=yr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:eg;for(;fP(e);)try{const o=await JD(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,dP(e,o)}catch(o){await Xf(e,o)}IC(e)&&wC(e)}function fP(n){return go(n)&&n.Ta.length<10}function dP(n,e){n.Ta.push(e);const t=yr(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function IC(n){return go(n)&&!yr(n).x_()&&n.Ta.length>0}function wC(n){yr(n).start()}async function hP(n){yr(n).ra()}async function pP(n){const e=yr(n);for(const t of n.Ta)e.ea(t.mutations)}async function mP(n,e,t){const i=n.Ta.shift(),o=ag.from(i,e,t);await CC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Sd(n)}async function gP(n,e){e&&yr(n).Y_&&await(async function(i,o){if((function(u){return XM(u)&&u!==oe.ABORTED})(o.code)){const a=i.Ta.shift();yr(i).B_(),await CC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Sd(i)}})(n,e),IC(n)&&wC(n)}async function RE(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),pe(fo,"RemoteStore received new credentials");const i=go(t);t.Ea.add(3),await Mu(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Td(t)}async function yP(n,e){const t=Ne(n);e?(t.Ea.delete(2),await Td(t)):e||(t.Ea.add(2),await Mu(t),t.Va.set("Unknown"))}function Va(n){return n.ma||(n.ma=(function(t,i,o){const a=Ne(t);return a.sa(),new eP(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:aP.bind(null,n),Yo:lP.bind(null,n),t_:uP.bind(null,n),J_:cP.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),yg(n)?gg(n):n.Va.set("Unknown")):(await n.ma.stop(),AC(n))}))),n.ma}function yr(n){return n.fa||(n.fa=(function(t,i,o){const a=Ne(t);return a.sa(),new tP(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:hP.bind(null,n),t_:gP.bind(null,n),ta:pP.bind(null,n),na:mP.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Sd(n)):(await n.fa.stop(),n.Ta.length>0&&(pe(fo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new _g(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vg(n,e){if(ys("AsyncQueue",`${e}: ${n}`),Pa(n))return new _e(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{static emptySet(e){return new va(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Se.comparator(t.key,i.key):(t,i)=>Se.comparator(t.key,i.key),this.keyedMap=Wl(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof va)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new va;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(){this.ga=new mt(Se.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ra{constructor(e,t,i,o,a,u,d,m,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ra(e,t,va.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&md(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class vP{constructor(){this.queries=NE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Ne(t),a=o.queries;o.queries=NE(),a.forEach(((u,d)=>{for(const m of d.ba)m.onError(i)}))})(this,new _e(oe.ABORTED,"Firestore shutting down"))}}function NE(){return new po((n=>JA(n)),md)}async function EP(n,e){const t=Ne(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.Sa()&&e.Da()&&(i=2):(a=new _P,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=vg(u,`Initialization of query '${ua(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Eg(t)}async function TP(n,e){const t=Ne(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.ba.indexOf(e);u>=0&&(a.ba.splice(u,1),a.ba.length===0?o=e.Da()?0:1:!a.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function SP(n,e){const t=Ne(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.ba)d.Fa(o)&&(i=!0);u.wa=o}}i&&Eg(t)}function AP(n,e,t){const i=Ne(n),o=i.queries.get(e);if(o)for(const a of o.ba)a.onError(t);i.queries.delete(e)}function Eg(n){n.Ca.forEach((e=>{e.next()}))}var _m,xE;(xE=_m||(_m={})).Ma="default",xE.Cache="cache";class CP{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ra(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_m.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.key=e}}class bC{constructor(e){this.key=e}}class IP{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Be(),this.mutatedKeys=Be(),this.eu=YA(e),this.tu=new va(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new bE,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const S=o.get(v),w=gd(this.query,E)?E:null,P=!!S&&this.mutatedKeys.has(S.key),O=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let F=!1;S&&w?S.data.isEqual(w.data)?P!==O&&(i.track({type:3,doc:w}),F=!0):this.su(S,w)||(i.track({type:2,doc:w}),F=!0,(m&&this.eu(w,m)>0||h&&this.eu(w,h)<0)&&(d=!0)):!S&&w?(i.track({type:0,doc:w}),F=!0):S&&!w&&(i.track({type:1,doc:S}),F=!0,(m||h)&&(d=!0)),F&&(w?(u=u.add(w),a=O?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Ss:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,E)=>(function(w,P){const O=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Vt:F})}};return O(w)-O(P)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(i),o=o??!1;const d=t&&!o?this._u():[],m=this.Ya.size===0&&this.current&&!o?1:0,h=m!==this.Xa;return this.Xa=m,u.length!==0||h?{snapshot:new Ra(this.query,e.tu,a,u,e.mutatedKeys,m===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Be(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new bC(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new RC(i))})),t}cu(e){this.Za=e.ks,this.Ya=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ra.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Tg="SyncEngine";class wP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class RP{constructor(e){this.key=e,this.hu=!1}}class bP{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new po((d=>JA(d)),md),this.Iu=new Map,this.Eu=new Set,this.Ru=new mt(Se.comparator),this.Au=new Map,this.Vu=new cg,this.du={},this.mu=new Map,this.fu=wa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NP(n,e,t=!0){const i=VC(n);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await NC(i,e,t,!0),o}async function xP(n,e){const t=VC(n);await NC(t,e,!0,!1)}async function NC(n,e,t,i){const o=await YD(n.localStore,Gi(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await MP(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&TC(n.remoteStore,o),d}async function MP(n,e,t,i,o){n.pu=(E,S,w)=>(async function(O,F,K,$){let W=F.view.ru(K);W.Ss&&(W=await SE(O.localStore,F.query,!1).then((({documents:N})=>F.view.ru(N,W))));const ie=$&&$.targetChanges.get(F.targetId),ae=$&&$.targetMismatches.get(F.targetId)!=null,j=F.view.applyChanges(W,O.isPrimaryClient,ie,ae);return DE(O,F.targetId,j.au),j.snapshot})(n,E,S,w);const a=await SE(n.localStore,e,!0),u=new IP(e,a.ks),d=u.ru(a.documents),m=xu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),h=u.applyChanges(d,n.isPrimaryClient,m);DE(n,t,h.au);const v=new wP(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function DP(n,e,t){const i=Ne(n),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter((u=>!md(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await gm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&pg(i.remoteStore,o.targetId),vm(i,o.targetId)})).catch(Da)):(vm(i,o.targetId),await gm(i.localStore,o.targetId,!0))}async function PP(n,e){const t=Ne(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),pg(t.remoteStore,i.targetId))}async function VP(n,e,t){const i=qP(n);try{const o=await(function(u,d){const m=Ne(u),h=ct.now(),v=d.reduce(((w,P)=>w.add(P.key)),Be());let E,S;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let P=_s(),O=Be();return m.xs.getEntries(w,v).next((F=>{P=F,P.forEach(((K,$)=>{$.isValidDocument()||(O=O.add(K))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,P))).next((F=>{E=F;const K=[];for(const $ of d){const W=JM($,E.get($.key).overlayedDocument);W!=null&&K.push(new mo($.key,W,OA(W.value.mapValue),ps.exists(!0)))}return m.mutationQueue.addMutationBatch(w,h,K,d)})).next((F=>{S=F;const K=F.applyToLocalDocumentSet(E,O);return m.documentOverlayCache.saveOverlays(w,F.batchId,K)}))})).then((()=>({batchId:S.batchId,changes:$A(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,m){let h=u.du[u.currentUser.toKey()];h||(h=new mt(qe)),h=h.insert(d,m),u.du[u.currentUser.toKey()]=h})(i,o.batchId,t),await Du(i,o.changes),await Sd(i.remoteStore)}catch(o){const a=vg(o,"Failed to persist write");t.reject(a)}}async function xC(n,e){const t=Ne(n);try{const i=await HD(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Au.get(a);u&&(je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?je(u.hu,14607):o.removedDocuments.size>0&&(je(u.hu,42227),u.hu=!1))})),await Du(t,i,e)}catch(i){await Da(i)}}function ME(n,e,t){const i=Ne(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const m=Ne(u);m.onlineState=d;let h=!1;m.queries.forEach(((v,E)=>{for(const S of E.ba)S.va(d)&&(h=!0)})),h&&Eg(m)})(i.eventManager,e),o.length&&i.Pu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function kP(n,e,t){const i=Ne(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),a=o&&o.key;if(a){let u=new mt(Se.comparator);u=u.insert(a,rn.newNoDocument(a,Re.min()));const d=Be().add(a),m=new vd(Re.min(),new Map,new mt(qe),u,d);await xC(i,m),i.Ru=i.Ru.remove(a),i.Au.delete(e),Sg(i)}else await gm(i.localStore,e,!1).then((()=>vm(i,e,t))).catch(Da)}async function UP(n,e){const t=Ne(n),i=e.batch.batchId;try{const o=await BD(t.localStore,e);DC(t,i,null),MC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Du(t,o)}catch(o){await Da(o)}}async function LP(n,e,t){const i=Ne(n);try{const o=await(function(u,d){const m=Ne(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let v;return m.mutationQueue.lookupMutationBatch(h,d).next((E=>(je(E!==null,37113),v=E.keys(),m.mutationQueue.removeMutationBatch(h,E)))).next((()=>m.mutationQueue.performConsistencyCheck(h))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(h,v,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,v))).next((()=>m.localDocuments.getDocuments(h,v)))}))})(i.localStore,e);DC(i,e,t),MC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Du(i,o)}catch(o){await Da(o)}}function MC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function DC(n,e,t){const i=Ne(n);let o=i.du[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.du[i.currentUser.toKey()]=o}}function vm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||PC(n,i)}))}function PC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(pg(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Sg(n))}function DE(n,e,t){for(const i of t)i instanceof RC?(n.Vu.addReference(i.key,e),OP(n,i)):i instanceof bC?(pe(Tg,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||PC(n,i.key)):Ie(19791,{wu:i})}function OP(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(pe(Tg,"New document in limbo: "+t),n.Eu.add(i),Sg(n))}function Sg(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Se(pt.fromString(e)),i=n.fu.next();n.Au.set(i,new RP(t)),n.Ru=n.Ru.insert(t,i),TC(n.remoteStore,new ar(Gi(rg(t.path)),i,"TargetPurposeLimboResolution",fd.ce))}}async function Du(n,e,t){const i=Ne(n),o=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,m)=>{u.push(i.pu(m,e,t).then((h=>{var v;if((h||t)&&i.isPrimaryClient){const E=h?!h.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(h){o.push(h);const E=dg.Es(m.targetId,h);a.push(E)}})))})),await Promise.all(u),i.Pu.J_(o),await(async function(m,h){const v=Ne(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>re.forEach(h,(S=>re.forEach(S.Ts,(w=>v.persistence.referenceDelegate.addReference(E,S.targetId,w))).next((()=>re.forEach(S.Is,(w=>v.persistence.referenceDelegate.removeReference(E,S.targetId,w)))))))))}catch(E){if(!Pa(E))throw E;pe(hg,"Failed to update sequence numbers: "+E)}for(const E of h){const S=E.targetId;if(!E.fromCache){const w=v.vs.get(S),P=w.snapshotVersion,O=w.withLastLimboFreeSnapshotVersion(P);v.vs=v.vs.insert(S,O)}}})(i.localStore,a))}async function FP(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){pe(Tg,"User change. New user:",e.toKey());const i=await yC(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((m=>{m.reject(new _e(oe.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Du(t,i.Ns)}}function GP(n,e){const t=Ne(n),i=t.Au.get(e);if(i&&i.hu)return Be().add(i.key);{let o=Be();const a=t.Iu.get(e);if(!a)return o;for(const u of a){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function VC(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kP.bind(null,e),e.Pu.J_=SP.bind(null,e.eventManager),e.Pu.yu=AP.bind(null,e.eventManager),e}function qP(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LP.bind(null,e),e}class Wf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ed(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return qD(this.persistence,new OD,e.initialUser,this.serializer)}Cu(e){return new gC(fg.Vi,this.serializer)}Du(e){return new $D}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wf.provider={build:()=>new Wf};class BP extends Wf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){je(this.persistence.referenceDelegate instanceof Qf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new AD(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new gC((i=>Qf.Vi(i,t)),this.serializer)}}class Em{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ME(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=FP.bind(null,this.syncEngine),await yP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new vP})()}createDatastore(e){const t=Ed(e.databaseInfo.databaseId),i=ZD(e.databaseInfo);return sP(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new oP(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>ME(this.syncEngine,t,0)),(function(){return IE.v()?new IE:new QD})())}createSyncEngine(e,t){return(function(o,a,u,d,m,h,v){const E=new bP(o,a,u,d,m,h);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Ne(o);pe(fo,"RemoteStore shutting down."),a.Ea.add(5),await Mu(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Em.provider={build:()=>new Em};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ys("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="FirestoreClient";class zP{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=o,this.user=sn.UNAUTHENTICATED,this.clientId=jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{pe(_r,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(pe(_r,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=vg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Jp(n,e){n.asyncQueue.verifyOperationInProgress(),pe(_r,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await yC(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function PE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await JP(n);pe(_r,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>RE(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>RE(e.remoteStore,o))),n._onlineComponents=e}async function JP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(_r,"Using user provided OfflineComponentProvider");try{await Jp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;co("Error using user provided cache. Falling back to memory cache: "+t),await Jp(n,new Wf)}}else pe(_r,"Using default OfflineComponentProvider"),await Jp(n,new BP(void 0));return n._offlineComponents}async function kC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(_r,"Using user provided OnlineComponentProvider"),await PE(n,n._uninitializedComponentsProvider._online)):(pe(_r,"Using default OnlineComponentProvider"),await PE(n,new Em))),n._onlineComponents}function YP(n){return kC(n).then((e=>e.syncEngine))}async function KP(n){const e=await kC(n),t=e.eventManager;return t.onListen=NP.bind(null,e.syncEngine),t.onUnlisten=DP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=xP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=PP.bind(null,e.syncEngine),t}function $P(n,e,t={}){const i=new dr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,m,h){const v=new HP({next:S=>{v.Nu(),u.enqueueAndForget((()=>TP(a,E)));const w=S.docs.has(d);!w&&S.fromCache?h.reject(new _e(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&m&&m.source==="server"?h.reject(new _e(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(S)},error:S=>h.reject(S)}),E=new CP(rg(d.path),v,{includeMetadataChanges:!0,Ka:!0});return EP(a,E)})(await KP(n),n.asyncQueue,e,t,i))),i.promise}function QP(n,e){const t=new dr;return n.asyncQueue.enqueueAndForget((async()=>VP(await YP(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP="ComponentProvider",VE=new Map;function WP(n,e,t,i,o){return new hM(n,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,UC(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="firestore.googleapis.com",kE=!0;class UE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LC,this.ssl=kE}else this.host=e.host,this.ssl=e.ssl??kE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TD)throw new _e(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ag{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new J1;switch(i.type){case"firstParty":return new Q1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=VE.get(t);i&&(pe(XP,"Removing Datastore"),VE.delete(t),i.terminate())})(this),Promise.resolve()}}function jP(n,e,t,i={}){var h;n=du(n,Ag);const o=ba(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(PS(`https://${d}`),VS("Firestore",!0)),a.host!==LC&&a.host!==d&&co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...a,host:d,ssl:o,emulatorOptions:i};if(!ro(m,u)&&(n._setSettings(m),i.mockUserToken)){let v,E;if(typeof i.mockUserToken=="string")v=i.mockUserToken,E=sn.MOCK_USER;else{v=ZR(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new _e(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new sn(S)}n._authCredentials=new Y1(new RA(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Cg(this.firestore,e,this._query)}}class Ht{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}toJSON(){return{type:Ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(bu(t,Ht._jsonSchema))return new Ht(e,i||null,new Se(pt.fromString(t.referencePath)))}}Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:Pt("string",Ht._jsonSchemaVersion),referencePath:Pt("string")};class vu extends Cg{constructor(e,t,i){super(e,t,rg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Se(e))}withConverter(e){return new vu(this.firestore,e,this._path)}}function OC(n,e,...t){if(n=Dn(n),arguments.length===1&&(e=jm.newId()),tM("doc","path",e),n instanceof Ag){const i=pt.fromString(e,...t);return X0(i),new Ht(n,null,new Se(i))}{if(!(n instanceof Ht||n instanceof vu))throw new _e(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pt.fromString(e,...t));return X0(i),new Ht(n.firestore,n instanceof vu?n.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="AsyncQueue";class OE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vC(this,"async_queue_retry"),this._c=()=>{const i=zp();i&&pe(LE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=zp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=zp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new dr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Pa(e))throw e;pe(LE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ys("INTERNAL UNHANDLED ERROR: ",FE(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=_g.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&Ie(47125,{Pc:FE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function FE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ig extends Ag{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new OE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new OE(e),this._firestoreClient=void 0,await e}}}function ZP(n,e){const t=typeof n=="object"?n:OS(),i=typeof n=="string"?n:Bf,o=Gm(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=WR("firestore");a&&jP(o,...a)}return o}function FC(n){if(n._terminated)throw new _e(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||e2(n),n._firestoreClient}function e2(n){var i,o,a,u;const e=n._freezeSettings(),t=WP(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(o=n._app)==null?void 0:o.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new zP(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(m){const h=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(h),_online:h}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(en.fromBase64String(e))}catch(t){throw new _e(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kn(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bu(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Pt("string",Kn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bi._jsonSchemaVersion}}static fromJSON(e){if(bu(e,Bi._jsonSchema))return new Bi(e.latitude,e.longitude)}}Bi._jsonSchemaVersion="firestore/geoPoint/1.0",Bi._jsonSchema={type:Pt("string",Bi._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:di._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bu(e,di._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new di(e.vectorValues);throw new _e(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}di._jsonSchemaVersion="firestore/vectorValue/1.0",di._jsonSchema={type:Pt("string",di._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=/^__.*__$/;class n2{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new mo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nu(e,this.data,t,this.fieldTransforms)}}function BC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{dataSource:n})}}class wg{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new wg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return jf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(BC(this.dataSource)&&t2.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class i2{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ed(e)}createContext(e,t,i,o=!1){return new wg({dataSource:e,methodName:t,targetDoc:i,path:Zt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function s2(n){const e=n._freezeSettings(),t=Ed(n._databaseId);return new i2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function r2(n,e,t,i,o,a={}){const u=n.createContext(a.merge||a.mergeFields?2:0,e,t,o);YC("Data must be an object, but it was:",u,i);const d=zC(i,u);let m,h;if(a.merge)m=new ci(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const S=Rg(e,E,t);if(!u.contains(S))throw new _e(oe.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);l2(v,S)||v.push(S)}m=new ci(v),h=u.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,h=u.fieldTransforms;return new n2(new Yn(d),m,h)}function HC(n,e){if(JC(n=Dn(n)))return YC("Unsupported field value:",e,n),zC(n,e);if(n instanceof qC)return(function(i,o){if(!BC(o.dataSource))throw o.createError(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let m=HC(d,o.childContextForArray(u));m==null&&(m={nullValue:"NULL_VALUE"}),a.push(m),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=Dn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return FM(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=ct.fromDate(i);return{timestampValue:$f(o.serializer,a)}}if(i instanceof ct){const a=new ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:$f(o.serializer,a)}}if(i instanceof Bi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Kn)return{bytesValue:aC(o.serializer,i._byteString)};if(i instanceof Ht){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ug(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof di)return(function(u,d){const m=u instanceof di?u.toArray():u;return{mapValue:{fields:{[UA]:{stringValue:LA},[Hf]:{arrayValue:{values:m.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return og(d.serializer,v)}))}}}}}})(i,o);if(pC(i))return i._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Zm(i)}`)})(n,e)}function zC(n,e){const t={};return xA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ho(n,((i,o)=>{const a=HC(o,e.childContextForField(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function JC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof Bi||n instanceof Kn||n instanceof Ht||n instanceof qC||n instanceof di||pC(n))}function YC(n,e,t){if(!JC(t)||!bA(t)){const i=Zm(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function Rg(n,e,t){if((e=Dn(e))instanceof GC)return e._internalPath;if(typeof e=="string")return a2(n,e);throw jf("Field path arguments must be of type string or ",n,!1,void 0,t)}const o2=new RegExp("[~\\*/\\[\\]]");function a2(n,e,t){if(e.search(o2)>=0)throw jf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new GC(...e.split("."))._internalPath}catch{throw jf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jf(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(a||u)&&(m+=" (found",a&&(m+=` in field ${i}`),u&&(m+=` in document ${o}`),m+=")"),new _e(oe.INVALID_ARGUMENT,d+n+m)}function l2(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{convertValue(e,t="none"){switch(gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ho(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,o,a;const t=(a=(o=(i=e.fields)==null?void 0:i[Hf].arrayValue)==null?void 0:o.values)==null?void 0:a.map((u=>St(u.doubleValue)));return new di(t)}convertGeoPoint(e){return new Bi(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=hd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(pu(e));default:return null}}convertTimestamp(e){const t=pr(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=pt.fromString(e);je(hC(i),9688,{name:e});const o=new mu(i.get(1),i.get(3)),a=new Se(i.popFirst(5));return o.isEqual(t)||ys(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2 extends u2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}const GE="@firebase/firestore",qE="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new f2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Rg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class f2 extends KC{data(){return super.data()}}function d2(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Zl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class so extends KC{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Rg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=so._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}so._jsonSchemaVersion="firestore/documentSnapshot/1.0",so._jsonSchema={type:Pt("string",so._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class xf extends so{data(e={}){return super.data(e)}}class au{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Zl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new xf(this._firestore,this._userDataWriter,i.key,i,new Zl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const m=new xf(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Zl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const m=new xf(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Zl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,v=-1;return d.type!==0&&(h=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:h2(d.type),doc:m,oldIndex:h,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=au._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function h2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */au._jsonSchemaVersion="firestore/querySnapshot/1.0",au._jsonSchema={type:Pt("string",au._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(n){n=du(n,Ht);const e=du(n.firestore,Ig),t=FC(e);return $P(t,n._key).then((i=>y2(e,n,i)))}function m2(n,e,t){n=du(n,Ht);const i=du(n.firestore,Ig),o=d2(n.converter,e,t),a=s2(i);return g2(i,[r2(a,"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ps.none())])}function g2(n,e){const t=FC(n);return QP(t,e)}function y2(n,e,t){const i=t.docs.get(e._key),o=new c2(n);return new so(n,o,e._key,i,new Zl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){z1(Na),Sa(new oo("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Ig(new K1(i.getProvider("auth-internal")),new X1(u,i.getProvider("app-check-internal")),pM(u,o),u);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),cr(GE,qE,e),cr(GE,qE,"esm2020")})();const $C={apiKey:"AIzaSyAkzofEaby0xfOxYFRwitmLm0o1SlirQZk",authDomain:"flutter-apply.firebaseapp.com",databaseURL:"https://flutter-apply-default-rtdb.firebaseio.com",projectId:"flutter-apply",storageBucket:"flutter-apply.firebasestorage.app",messagingSenderId:"226410919520",appId:"1:226410919520:web:b9c26cf5a94d8ea7347505",measurementId:"G-RQ8V3DNTES"},_2=!$C.apiKey.includes("YOUR_API_KEY"),QC=LS($C),Jl=G1(QC),XC=ZP(QC),WC=Ee.createContext(void 0),bg=()=>{const n=Ee.useContext(WC);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},v2=({children:n})=>{const[e,t]=Ee.useState(null),[i,o]=Ee.useState(!0);Ee.useEffect(()=>bx(Jl,E=>{t(E),o(!1)}),[]);const h={currentUser:e,loading:i,signInWithGoogle:async()=>{const v=new cs;try{await Qx(Jl,v)}catch(E){throw console.error("Error signing in with Google",E),E}},loginWithEmail:async(v,E)=>{try{await Ix(Jl,v,E)}catch(S){throw console.error("Error signing in with Email",S),S}},registerWithEmail:async(v,E)=>{try{await Cx(Jl,v,E)}catch(S){throw console.error("Error registering with Email",S),S}},logout:async()=>{try{await Nx(Jl)}catch(v){throw console.error("Error signing out",v),v}}};return I.jsx(WC.Provider,{value:h,children:!i&&n})};var ir=(n=>(n.GENERATOR="GENERATOR",n.PROFILE="PROFILE",n.EMAIL_FINDER="EMAIL_FINDER",n))(ir||{});const jC="users",ZC="flutter_apply_profile_",E2=async n=>{let e=null;try{const t=OC(XC,jC,n),i=await p2(t);i.exists()&&(e=i.data())}catch(t){console.warn("Firestore fetch warning (using local fallback):",t.message)}if(!e)try{const t=localStorage.getItem(`${ZC}${n}`);t&&(e=JSON.parse(t),console.log("Loaded profile from local storage."))}catch(t){console.error("Failed to parse local profile",t)}return e},T2=async(n,e)=>{try{localStorage.setItem(`${ZC}${n}`,JSON.stringify(e))}catch(t){console.error("Failed to save to local storage",t)}try{const t=OC(XC,jC,n);await m2(t,e,{merge:!0})}catch(t){throw t.code==="permission-denied"||t.message.includes("Missing or insufficient permissions")?(console.warn("Cloud sync skipped: Firestore Security Rules blocked the write."),new Error("Firestore Rules blocked write. Update rules in Console.")):(console.warn("Firestore save failed:",t.message),new Error("Cloud Sync Failed: "+t.message))}},S2=Object.prototype.toString,A2=n=>S2.call(n)==="[object Error]",C2=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function I2(n){if(!(n&&A2(n)&&n.name==="TypeError"&&typeof n.message=="string"))return!1;const{message:t,stack:i}=n;return t==="Load failed"?i===void 0||"__sentry_captured__"in n:t.startsWith("error sending request for url")?!0:C2.has(t)}function w2(n){if(typeof n=="number"){if(n<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(n))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(n!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function mf(n,e,{min:t=0,allowInfinity:i=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${n}\` to be a number${i?" or Infinity":""}.`);if(!i&&!Number.isFinite(e))throw new TypeError(`Expected \`${n}\` to be a finite number.`);if(e<t)throw new TypeError(`Expected \`${n}\` to be  ${t}.`)}}class eI extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function R2(n,e){const t=Math.max(1,n+1),i=e.randomize?Math.random()+1:1;let o=Math.round(i*e.minTimeout*e.factor**(t-1));return o=Math.min(o,e.maxTimeout),o}function BE(n,e){return Number.isFinite(e)?e-(performance.now()-n):e}async function b2({error:n,attemptNumber:e,retriesConsumed:t,startTime:i,options:o}){var w,P,O,F;const a=n instanceof Error?n:new TypeError(`Non-error was thrown: "${n}". You should only throw errors.`);if(a instanceof eI)throw a.originalError;const u=Number.isFinite(o.retries)?Math.max(0,o.retries-t):o.retries,d=o.maxRetryTime??Number.POSITIVE_INFINITY,m=Object.freeze({error:a,attemptNumber:e,retriesLeft:u,retriesConsumed:t});if(await o.onFailedAttempt(m),BE(i,d)<=0)throw a;const h=await o.shouldConsumeRetry(m),v=BE(i,d);if(v<=0||u<=0)throw a;if(a instanceof TypeError&&!I2(a)){if(h)throw a;return(w=o.signal)==null||w.throwIfAborted(),!1}if(!await o.shouldRetry(m))throw a;if(!h)return(P=o.signal)==null||P.throwIfAborted(),!1;const E=R2(t,o),S=Math.min(E,v);return(O=o.signal)==null||O.throwIfAborted(),S>0&&await new Promise((K,$)=>{var ae,j;const W=()=>{var N;clearTimeout(ie),(N=o.signal)==null||N.removeEventListener("abort",W),$(o.signal.reason)},ie=setTimeout(()=>{var N;(N=o.signal)==null||N.removeEventListener("abort",W),K()},S);o.unref&&((ae=ie.unref)==null||ae.call(ie)),(j=o.signal)==null||j.addEventListener("abort",W,{once:!0})}),(F=o.signal)==null||F.throwIfAborted(),!0}async function N2(n,e={}){var a,u,d;if(e={...e},w2(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),mf("factor",e.factor,{min:0,allowInfinity:!1}),mf("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),mf("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),mf("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(a=e.signal)==null||a.throwIfAborted();let t=0,i=0;const o=performance.now();for(;!Number.isFinite(e.retries)||i<=e.retries;){t++;try{(u=e.signal)==null||u.throwIfAborted();const m=await n(t);return(d=e.signal)==null||d.throwIfAborted(),m}catch(m){await b2({error:m,attemptNumber:t,retriesConsumed:i,startTime:o,options:e})&&i++}}throw new Error("Retry attempts exhausted without throwing an error.")}var x2={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let M2,D2;function P2(){return{geminiUrl:M2,vertexUrl:D2}}function V2(n,e,t,i){var o,a;if(!(n!=null&&n.baseUrl)){const u=P2();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ts{}function he(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function p(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const m=n[d];if(Array.isArray(t))for(let h=0;h<m.length;h++){const v=m[h];p(v,e.slice(a+1),t[h])}else for(const h of m)p(h,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const m=n[d];p(m[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function k2(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let m=0;m<o.length;m++)if(o[m]==="*"){d=m;break}if(d!==-1&&a.length>d)for(let m=d;m<a.length;m++){const h=a[m];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}Tm(n,o,a,0,u)}}function Tm(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const m of d[u])Tm(m,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),m={};for(const h of d)m[h]=u[h];for(const[h,v]of Object.entries(m)){const E=[];for(const S of t.slice(i))S==="*"?E.push(h):E.push(S);p(u,E,v)}for(const h of d)delete u[h]}}else{const u=n;a in u&&Tm(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ng(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U2(n){const e={},t=f(n,["operationName"]);t!=null&&p(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function L2(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],F2(u)),e}function O2(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],G2(u)),e}function F2(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>q2(u))),p(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function G2(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>B2(u))),p(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function q2(n){const e={},t=f(n,["video"]);return t!=null&&p(e,["video"],$2(t)),e}function B2(n){const e={},t=f(n,["_self"]);return t!=null&&p(e,["video"],Q2(t)),e}function H2(n){const e={},t=f(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function z2(n){const e={},t=f(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function J2(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],Y2(u)),e}function Y2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&p(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function tI(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],K2(u)),e}function K2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&p(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function $2(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Ng(i));const o=f(n,["encoding"]);return o!=null&&p(e,["mimeType"],o),e}function Q2(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Ng(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var HE;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(HE||(HE={}));var zE;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(zE||(zE={}));var JE;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(JE||(JE={}));var Tn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Tn||(Tn={}));var YE;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(YE||(YE={}));var KE;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(KE||(KE={}));var $E;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})($E||($E={}));var QE;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(QE||(QE={}));var XE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(XE||(XE={}));var WE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(WE||(WE={}));var jE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(jE||(jE={}));var ZE;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(ZE||(ZE={}));var eT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(eT||(eT={}));var tT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(tT||(tT={}));var nT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(nT||(nT={}));var iT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(iT||(iT={}));var sT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(sT||(sT={}));var rT;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(rT||(rT={}));var oT;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(oT||(oT={}));var aT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(aT||(aT={}));var lT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(lT||(lT={}));var Zf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Zf||(Zf={}));var uT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(uT||(uT={}));var cT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(cT||(cT={}));var fT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(fT||(fT={}));var Sm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Sm||(Sm={}));var dT;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(dT||(dT={}));var hT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(hT||(hT={}));var Am;(function(n){n.COLLECTION="COLLECTION"})(Am||(Am={}));var pT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(pT||(pT={}));var mT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(mT||(mT={}));var gT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(gT||(gT={}));var yT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(yT||(yT={}));var _T;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(_T||(_T={}));var vT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(vT||(vT={}));var ET;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ET||(ET={}));var TT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(TT||(TT={}));var ST;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ST||(ST={}));var AT;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(AT||(AT={}));var CT;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(CT||(CT={}));var IT;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(IT||(IT={}));var wT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(wT||(wT={}));var RT;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(RT||(RT={}));var bT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(bT||(bT={}));var NT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(NT||(NT={}));var xT;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(xT||(xT={}));var MT;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(MT||(MT={}));var DT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(DT||(DT={}));var PT;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(PT||(PT={}));var VT;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(VT||(VT={}));var kT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(kT||(kT={}));var UT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(UT||(UT={}));var LT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(LT||(LT={}));var OT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(OT||(OT={}));var FT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(FT||(FT={}));var GT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(GT||(GT={}));var ha;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ha||(ha={}));class Cm{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Yl{get text(){var e,t,i,o,a,u,d,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const E=[];for(const S of(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[w,P]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(P!==null||P!==void 0)&&E.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,h+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,t,i,o,a,u,d,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const E of(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[S,w]of Object.entries(E))S!=="inlineData"&&(w!==null||w!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,o,a,u,d,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,o,a,u,d,m,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,o,a,u,d,m,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class qT{}class BT{}class X2{}class W2{}class j2{}class Z2{}class HT{}class zT{}class JT{}class eV{}class ed{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new ed;let o;const a=e;return t?o=O2(a):o=L2(a),Object.assign(i,o),i}}class YT{}class KT{}class $T{}class QT{}class tV{}class nV{}class iV{}class xg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new xg,a=J2(e);return Object.assign(i,a),i}}class sV{}class rV{}class oV{}class aV{}class XT{}class lV{get text(){var e,t,i;let o="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[m,h]of Object.entries(d))m!=="text"&&m!=="thought"&&h!==null&&u.push(m);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,m]of Object.entries(u))d!=="inlineData"&&m!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class uV{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Mg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Mg,a=tI(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $e(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function nI(n,e){const t=$e(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function iI(n){return Array.isArray(n)?n.map(e=>td(e)):[td(n)]}function td(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function sI(n){const e=td(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function rI(n){const e=td(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function WT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function oI(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>WT(e)):[WT(n)]}function Im(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function jT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function ZT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function on(n){if(n==null)throw new Error("ContentUnion is required");return Im(n)?n:{role:"user",parts:oI(n)}}function Dg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=on(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=on(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>on(t)):[on(e)]}function $n(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(jT(n)||ZT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[on(n)]}const e=[],t=[],i=Im(n[0]);for(const o of n){const a=Im(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(jT(o)||ZT(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:oI(t)}),e}function cV(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Tn).includes(t[0].toUpperCase())?t[0].toUpperCase():Tn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Tn).includes(i.toUpperCase())?i.toUpperCase():Tn.TYPE_UNSPECIFIED})}}function Ea(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&cV(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Tn).includes(d.toUpperCase())?d.toUpperCase():Tn.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Ea(d);else if(i.includes(u)){const m=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}m.push(Ea(h))}e[u]=m}else if(o.includes(u)){const m={};for(const[h,v]of Object.entries(d))m[h]=Ea(v);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Pg(n){return Ea(n)}function Vg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function kg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ka(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ea(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ea(e.response));return n}function Ua(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function fV(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Ss(n,e){if(typeof e!="string")throw new Error("name must be a string");return fV(n,e,"cachedContents")}function aI(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Sr(n){return Ng(n)}function dV(n){return n!=null&&typeof n=="object"&&"name"in n}function hV(n){return n!=null&&typeof n=="object"&&"video"in n}function pV(n){return n!=null&&typeof n=="object"&&"uri"in n}function lI(n){var e;let t;if(dV(n)&&(t=n.name),!(pV(n)&&(t=n.uri,t===void 0))&&!(hV(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function uI(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function cI(n){for(const e of["models","tunedModels","publisherModels"])if(mV(n,e))return n[e];return[]}function mV(n,e){return n!==null&&typeof n=="object"&&e in n}function gV(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function yV(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=gV(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function fI(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function _V(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function dI(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const m=u.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function La(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function hI(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vV(n){const e={},t=f(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>ZV(u))),p(e,["inlinedResponses"],a)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["inlinedEmbedContentResponses"],a)}return e}function EV(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function TV(n){const e={},t=f(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&p(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Mf(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const o=f(n,["metadata","state"]);o!=null&&p(e,["state"],hI(o));const a=f(n,["metadata","createTime"]);a!=null&&p(e,["createTime"],a);const u=f(n,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&p(e,["updateTime"],d);const m=f(n,["metadata","model"]);m!=null&&p(e,["model"],m);const h=f(n,["metadata","output"]);return h!=null&&p(e,["dest"],vV(dI(h))),e}function wm(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["displayName"]);i!=null&&p(e,["displayName"],i);const o=f(n,["state"]);o!=null&&p(e,["state"],hI(o));const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["createTime"]);u!=null&&p(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&p(e,["startTime"],d);const m=f(n,["endTime"]);m!=null&&p(e,["endTime"],m);const h=f(n,["updateTime"]);h!=null&&p(e,["updateTime"],h);const v=f(n,["model"]);v!=null&&p(e,["model"],v);const E=f(n,["inputConfig"]);E!=null&&p(e,["src"],SV(E));const S=f(n,["outputConfig"]);S!=null&&p(e,["dest"],EV(dI(S)));const w=f(n,["completionStats"]);return w!=null&&p(e,["completionStats"],w),e}function SV(n){const e={},t=f(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function AV(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&p(t,["fileName"],i);const o=f(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>jV(n,u))),p(t,["requests","requests"],a)}return t}function CV(n){const e={},t=f(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&p(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function IV(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function wV(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],La(n,i)),t}function RV(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],La(n,i)),t}function bV(n){const e={},t=f(n,["content"]);t!=null&&p(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],NV(i));const o=f(n,["tokenCount"]);o!=null&&p(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const m=f(n,["index"]);m!=null&&p(e,["index"],m);const h=f(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(w=>w)),p(e,["safetyRatings"],S)}const E=f(n,["urlContextMetadata"]);return E!=null&&p(e,["urlContextMetadata"],E),e}function NV(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["citations"],i)}return e}function pI(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>ok(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function xV(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function MV(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=f(n,["dest"]);return e!==void 0&&o!=null&&p(e,["outputConfig"],TV(_V(o))),t}function eS(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["src"]);o!=null&&p(t,["batch","inputConfig"],AV(n,fI(n,o)));const a=f(e,["config"]);return a!=null&&xV(a,t),t}function DV(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["model"],$e(n,i));const o=f(e,["src"]);o!=null&&p(t,["inputConfig"],CV(fI(n,o)));const a=f(e,["config"]);return a!=null&&MV(a,t),t}function PV(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),t}function VV(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["src"]);o!=null&&p(t,["batch","inputConfig"],qV(n,o));const a=f(e,["config"]);return a!=null&&PV(a,t),t}function kV(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],La(n,i)),t}function UV(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],La(n,i)),t}function LV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);return a!=null&&p(e,["error"],a),e}function OV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);return a!=null&&p(e,["error"],a),e}function FV(n,e){const t={},i=f(e,["contents"]);if(i!=null){let a=Dg(n,i);Array.isArray(a)&&(a=a.map(u=>u)),p(t,["requests[]","request","content"],a)}const o=f(e,["config"]);return o!=null&&(p(t,["_self"],GV(o,t)),k2(t,{"requests[].*":"requests[].request.*"})),t}function GV(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function qV(n,e){const t={},i=f(e,["fileName"]);i!=null&&p(t,["file_name"],i);const o=f(e,["inlinedRequests"]);return o!=null&&p(t,["requests"],FV(n,o)),t}function BV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function HV(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zV(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const i=f(n,["mode"]);if(i!=null&&p(e,["mode"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function JV(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&p(t,["systemInstruction"],pI(on(o)));const a=f(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(i,["topP"],u);const d=f(e,["topK"]);d!=null&&p(i,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&p(i,["candidateCount"],m);const h=f(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const v=f(e,["stopSequences"]);v!=null&&p(i,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&p(i,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const P=f(e,["frequencyPenalty"]);P!=null&&p(i,["frequencyPenalty"],P);const O=f(e,["seed"]);O!=null&&p(i,["seed"],O);const F=f(e,["responseMimeType"]);F!=null&&p(i,["responseMimeType"],F);const K=f(e,["responseSchema"]);K!=null&&p(i,["responseSchema"],Pg(K));const $=f(e,["responseJsonSchema"]);if($!=null&&p(i,["responseJsonSchema"],$),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let D=W;Array.isArray(D)&&(D=D.map(xe=>ak(xe))),p(t,["safetySettings"],D)}const ie=f(e,["tools"]);if(t!==void 0&&ie!=null){let D=Ua(ie);Array.isArray(D)&&(D=D.map(xe=>uk(ka(xe)))),p(t,["tools"],D)}const ae=f(e,["toolConfig"]);if(t!==void 0&&ae!=null&&p(t,["toolConfig"],lk(ae)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=f(e,["cachedContent"]);t!==void 0&&j!=null&&p(t,["cachedContent"],Ss(n,j));const N=f(e,["responseModalities"]);N!=null&&p(i,["responseModalities"],N);const x=f(e,["mediaResolution"]);x!=null&&p(i,["mediaResolution"],x);const M=f(e,["speechConfig"]);if(M!=null&&p(i,["speechConfig"],Vg(M)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&p(i,["thinkingConfig"],L);const U=f(e,["imageConfig"]);U!=null&&p(i,["imageConfig"],WV(U));const q=f(e,["enableEnhancedCivicAnswers"]);if(q!=null&&p(i,["enableEnhancedCivicAnswers"],q),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function YV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(h=>bV(h))),p(e,["candidates"],m)}const o=f(n,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&p(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function KV(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],La(n,i)),t}function $V(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],La(n,i)),t}function QV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function XV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function WV(n){const e={},t=f(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function jV(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["request","model"],$e(n,i));const o=f(e,["contents"]);if(o!=null){let d=$n(o);Array.isArray(d)&&(d=d.map(m=>pI(m))),p(t,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&p(t,["metadata"],a);const u=f(e,["config"]);return u!=null&&p(t,["request","generationConfig"],JV(n,u,f(t,["request"],{}))),t}function ZV(n){const e={},t=f(n,["response"]);t!=null&&p(e,["response"],YV(t));const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["error"]);return o!=null&&p(e,["error"],o),e}function ek(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function tk(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const a=f(n,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),t}function nk(n){const e={},t=f(n,["config"]);return t!=null&&ek(t,e),e}function ik(n){const e={},t=f(n,["config"]);return t!=null&&tk(t,e),e}function sk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Mf(u))),p(e,["batchJobs"],a)}return e}function rk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>wm(u))),p(e,["batchJobs"],a)}return e}function ok(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],BV(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],HV(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],IV(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function ak(n){const e={},t=f(n,["category"]);if(t!=null&&p(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function lk(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const i=f(n,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],zV(i)),e}function uk(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=f(n,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(E=>E)),p(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],QV(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],XV(d));const m=f(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vs;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(vs||(vs={}));class yo{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ck extends Ts{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new yo(vs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=eS(this.apiClient,e),i=t._url,o=he("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,m=d.requests,h=[];for(const v of m){const E=Object.assign({},v);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=S,E.request=w}h.push(E)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=DV(this.apiClient,e);return d=he("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>wm(v))}else{const h=eS(this.apiClient,e);return d=he("{model}:batchGenerateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Mf(v))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=VV(this.apiClient,e);return a=he("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>Mf(m))}}async get(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=$V(this.apiClient,e);return d=he("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>wm(v))}else{const h=KV(this.apiClient,e);return d=he("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Mf(v))}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const m=RV(this.apiClient,e);u=he("batchPredictionJobs/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=wV(this.apiClient,e);u=he("batches/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=ik(e);return d=he("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=rk(v),S=new XT;return Object.assign(S,E),S})}else{const h=nk(e);return d=he("batches",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=sk(v),S=new XT;return Object.assign(S,E),S})}}async delete(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=UV(this.apiClient,e);return d=he("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>OV(v))}else{const h=kV(this.apiClient,e);return d=he("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>LV(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fk(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function tS(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>Vk(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function dk(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=$n(u);Array.isArray(v)&&(v=v.map(E=>tS(E))),p(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],tS(on(d)));const m=f(n,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(E=>Uk(E))),p(e,["tools"],v)}const h=f(n,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],kk(h)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function hk(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let E=$n(u);Array.isArray(E)&&(E=E.map(S=>S)),p(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],on(d));const m=f(n,["tools"]);if(e!==void 0&&m!=null){let E=m;Array.isArray(E)&&(E=E.map(S=>Lk(S))),p(e,["tools"],E)}const h=f(n,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&p(e,["encryption_spec","kmsKeyName"],v),t}function pk(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["model"],nI(n,i));const o=f(e,["config"]);return o!=null&&dk(o,t),t}function mk(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["model"],nI(n,i));const o=f(e,["config"]);return o!=null&&hk(o,t),t}function gk(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Ss(n,i)),t}function yk(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Ss(n,i)),t}function _k(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function vk(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function Ek(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Tk(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Sk(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const i=f(n,["mode"]);if(i!=null&&p(e,["mode"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Ak(n){const e={},t=f(n,["description"]);t!=null&&p(e,["description"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&p(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&p(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Ck(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Ss(n,i)),t}function Ik(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Ss(n,i)),t}function wk(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function Rk(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function bk(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function Nk(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function xk(n){const e={},t=f(n,["config"]);return t!=null&&bk(t,e),e}function Mk(n){const e={},t=f(n,["config"]);return t!=null&&Nk(t,e),e}function Dk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function Pk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function Vk(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],Ek(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],Tk(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],fk(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function kk(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const i=f(n,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],Sk(i)),e}function Uk(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=f(n,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(E=>E)),p(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],wk(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],Rk(d));const m=f(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function Lk(n){const e={},t=f(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const i=f(n,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=f(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=f(n,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=f(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>Ak(S))),p(e,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],d);const m=f(n,["googleSearch"]);m!=null&&p(e,["googleSearch"],m);const h=f(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const v=f(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function Ok(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),t}function Fk(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),t}function Gk(n,e){const t={},i=f(e,["name"]);i!=null&&p(t,["_url","name"],Ss(n,i));const o=f(e,["config"]);return o!=null&&Ok(o,t),t}function qk(n,e){const t={},i=f(e,["name"]);i!=null&&p(t,["_url","name"],Ss(n,i));const o=f(e,["config"]);return o!=null&&Fk(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bk extends Ts{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new yo(vs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=mk(this.apiClient,e);return d=he("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=pk(this.apiClient,e);return d=he("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=Ik(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=Ck(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=yk(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=vk(v),S=new $T;return Object.assign(S,E),S})}else{const h=gk(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=_k(v),S=new $T;return Object.assign(S,E),S})}}async update(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=qk(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=Gk(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=Mk(e);return d=he("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Pk(v),S=new QT;return Object.assign(S,E),S})}else{const h=xk(e);return d=he("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Dk(v),S=new QT;return Object.assign(S,E),S})}}}function nd(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function nS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(n){return this instanceof we?(this.v=n,this):new we(n)}function hi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(w){return function(P){return Promise.resolve(P).then(w,E)}}function d(w,P){i[w]&&(o[w]=function(O){return new Promise(function(F,K){a.push([w,O,F,K])>1||m(w,O)})},P&&(o[w]=P(o[w])))}function m(w,P){try{h(i[w](P))}catch(O){S(a[0][3],O)}}function h(w){w.value instanceof we?Promise.resolve(w.value.v).then(v,E):S(a[0][2],w)}function v(w){m("next",w)}function E(w){m("throw",w)}function S(w,P){w(P),a.shift(),a.length&&m(a[0][0],a[0][1])}}function pi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof nS=="function"?nS(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,m){u=n[a](u),o(d,m,u.done,u.value)})}}function o(a,u,d,m){Promise.resolve(m).then(function(h){a({value:h,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hk(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:mI(t)}function mI(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function zk(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function iS(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!mI(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class Jk{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Yk(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Yk{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),zk(a)}async sendMessage(e){var t;await this.sendPromise;const i=on(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const m=await o,h=(u=(a=m.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=m.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(E))!==null&&d!==void 0?d:[]);const w=h?[h]:[];this.recordHistory(i,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=on(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?iS(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return hi(this,arguments,function*(){var o,a,u,d,m,h;const v=[];try{for(var E=!0,S=pi(e),w;w=yield we(S.next()),o=w.done,!o;E=!0){d=w.value,E=!1;const P=d;if(Hk(P)){const O=(h=(m=P.candidates)===null||m===void 0?void 0:m[0])===null||h===void 0?void 0:h.content;O!==void 0&&v.push(O)}yield yield we(P)}}catch(P){a={error:P}}finally{try{!E&&!o&&(u=S.return)&&(yield we(u.call(S)))}finally{if(a)throw a.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...iS(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Eu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Eu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kk(n){const e={},t=f(n,["file"]);return t!=null&&p(e,["file"],t),e}function $k(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function Qk(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","file"],lI(t)),e}function Xk(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function Wk(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","file"],lI(t)),e}function jk(n){const e={},t=f(n,["uris"]);return t!=null&&p(e,["uris"],t),e}function Zk(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function eU(n){const e={},t=f(n,["config"]);return t!=null&&Zk(t,e),e}function tU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["files"],a)}return e}function nU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iU extends Ts{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new yo(vs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=eU(e);return a=he("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=tU(m),v=new sV;return Object.assign(v,h),v})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Kk(e);return a=he("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=$k(m),v=new rV;return Object.assign(v,h),v})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Wk(e);return a=he("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Qk(e);return a=he("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=Xk(m),v=new oV;return Object.assign(v,h),v})}}async registerFilesInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=jk(e);return a=he("files:register",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=nU(m),v=new aV;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Df(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function sU(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>EU(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function rU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function oU(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function aU(n){const e={},t=f(n,["description"]);t!=null&&p(e,["description"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&p(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&p(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function lU(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&p(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const m=f(n,["logprobs"]);m!=null&&p(e,["logprobs"],m);const h=f(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const v=f(n,["mediaResolution"]);v!=null&&p(e,["mediaResolution"],v);const E=f(n,["presencePenalty"]);E!=null&&p(e,["presencePenalty"],E);const S=f(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const w=f(n,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const P=f(n,["responseModalities"]);P!=null&&p(e,["responseModalities"],P);const O=f(n,["responseSchema"]);O!=null&&p(e,["responseSchema"],O);const F=f(n,["routingConfig"]);F!=null&&p(e,["routingConfig"],F);const K=f(n,["seed"]);K!=null&&p(e,["seed"],K);const $=f(n,["speechConfig"]);$!=null&&p(e,["speechConfig"],$);const W=f(n,["stopSequences"]);W!=null&&p(e,["stopSequences"],W);const ie=f(n,["temperature"]);ie!=null&&p(e,["temperature"],ie);const ae=f(n,["thinkingConfig"]);ae!=null&&p(e,["thinkingConfig"],ae);const j=f(n,["topK"]);j!=null&&p(e,["topK"],j);const N=f(n,["topP"]);if(N!=null&&p(e,["topP"],N),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function uU(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function cU(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function fU(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=f(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],kg(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const P=f(n,["systemInstruction"]);e!==void 0&&P!=null&&p(e,["setup","systemInstruction"],sU(on(P)));const O=f(n,["tools"]);if(e!==void 0&&O!=null){let j=Ua(O);Array.isArray(j)&&(j=j.map(N=>SU(ka(N)))),p(e,["setup","tools"],j)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&p(e,["setup","sessionResumption"],TU(F));const K=f(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const $=f(n,["outputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","outputAudioTranscription"],$);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&p(e,["setup","realtimeInputConfig"],W);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&p(e,["setup","contextWindowCompression"],ie);const ae=f(n,["proactivity"]);if(e!==void 0&&ae!=null&&p(e,["setup","proactivity"],ae),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function dU(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],lU(i));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=f(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],kg(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const P=f(n,["systemInstruction"]);e!==void 0&&P!=null&&p(e,["setup","systemInstruction"],on(P));const O=f(n,["tools"]);if(e!==void 0&&O!=null){let N=Ua(O);Array.isArray(N)&&(N=N.map(x=>AU(ka(x)))),p(e,["setup","tools"],N)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&p(e,["setup","sessionResumption"],F);const K=f(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const $=f(n,["outputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","outputAudioTranscription"],$);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&p(e,["setup","realtimeInputConfig"],W);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&p(e,["setup","contextWindowCompression"],ie);const ae=f(n,["proactivity"]);e!==void 0&&ae!=null&&p(e,["setup","proactivity"],ae);const j=f(n,["explicitVadSignal"]);return e!==void 0&&j!=null&&p(e,["setup","explicitVadSignal"],j),t}function hU(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["setup","model"],$e(n,i));const o=f(e,["config"]);return o!=null&&p(t,["config"],fU(o,t)),t}function pU(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["setup","model"],$e(n,i));const o=f(e,["config"]);return o!=null&&p(t,["config"],dU(o,t)),t}function mU(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function gU(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["weightedPrompts"],i)}return e}function yU(n){const e={},t=f(n,["media"]);if(t!=null){let h=iI(t);Array.isArray(h)&&(h=h.map(v=>Df(v))),p(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&p(e,["audio"],Df(rI(i)));const o=f(n,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&p(e,["video"],Df(sI(a)));const u=f(n,["text"]);u!=null&&p(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&p(e,["activityStart"],d);const m=f(n,["activityEnd"]);return m!=null&&p(e,["activityEnd"],m),e}function _U(n){const e={},t=f(n,["media"]);if(t!=null){let h=iI(t);Array.isArray(h)&&(h=h.map(v=>v)),p(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&p(e,["audio"],rI(i));const o=f(n,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&p(e,["video"],sI(a));const u=f(n,["text"]);u!=null&&p(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&p(e,["activityStart"],d);const m=f(n,["activityEnd"]);return m!=null&&p(e,["activityEnd"],m),e}function vU(n){const e={},t=f(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&p(e,["serverContent"],i);const o=f(n,["toolCall"]);o!=null&&p(e,["toolCall"],o);const a=f(n,["toolCallCancellation"]);a!=null&&p(e,["toolCallCancellation"],a);const u=f(n,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],CU(u));const d=f(n,["goAway"]);d!=null&&p(e,["goAway"],d);const m=f(n,["sessionResumptionUpdate"]);m!=null&&p(e,["sessionResumptionUpdate"],m);const h=f(n,["voiceActivityDetectionSignal"]);h!=null&&p(e,["voiceActivityDetectionSignal"],h);const v=f(n,["voiceActivity"]);return v!=null&&p(e,["voiceActivity"],IU(v)),e}function EU(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],rU(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],oU(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],Df(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function TU(n){const e={},t=f(n,["handle"]);if(t!=null&&p(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function SU(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=f(n,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(E=>E)),p(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],uU(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],cU(d));const m=f(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function AU(n){const e={},t=f(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const i=f(n,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=f(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=f(n,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=f(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>aU(S))),p(e,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],d);const m=f(n,["googleSearch"]);m!=null&&p(e,["googleSearch"],m);const h=f(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const v=f(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function CU(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const o=f(n,["candidatesTokenCount"]);o!=null&&p(e,["responseTokenCount"],o);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&p(e,["toolUsePromptTokenCount"],a);const u=f(n,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&p(e,["totalTokenCount"],d);const m=f(n,["promptTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(P=>P)),p(e,["promptTokensDetails"],w)}const h=f(n,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(P=>P)),p(e,["cacheTokensDetails"],w)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(P=>P)),p(e,["responseTokensDetails"],w)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(P=>P)),p(e,["toolUsePromptTokensDetails"],w)}const S=f(n,["trafficType"]);return S!=null&&p(e,["trafficType"],S),e}function IU(n){const e={},t=f(n,["type"]);return t!=null&&p(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wU(n,e){const t={},i=f(n,["data"]);if(i!=null&&p(t,["data"],i),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function RU(n,e){const t={},i=f(n,["content"]);i!=null&&p(t,["content"],i);const o=f(n,["citationMetadata"]);o!=null&&p(t,["citationMetadata"],bU(o));const a=f(n,["tokenCount"]);a!=null&&p(t,["tokenCount"],a);const u=f(n,["finishReason"]);u!=null&&p(t,["finishReason"],u);const d=f(n,["avgLogprobs"]);d!=null&&p(t,["avgLogprobs"],d);const m=f(n,["groundingMetadata"]);m!=null&&p(t,["groundingMetadata"],m);const h=f(n,["index"]);h!=null&&p(t,["index"],h);const v=f(n,["logprobsResult"]);v!=null&&p(t,["logprobsResult"],v);const E=f(n,["safetyRatings"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(P=>P)),p(t,["safetyRatings"],w)}const S=f(n,["urlContextMetadata"]);return S!=null&&p(t,["urlContextMetadata"],S),t}function bU(n,e){const t={},i=f(n,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(t,["citations"],o)}return t}function NU(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],$e(n,o));const a=f(e,["contents"]);if(a!=null){let u=$n(a);Array.isArray(u)&&(u=u.map(d=>d)),p(i,["contents"],u)}return i}function xU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["tokensInfo"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(t,["tokensInfo"],a)}return t}function MU(n,e){const t={},i=f(n,["values"]);i!=null&&p(t,["values"],i);const o=f(n,["statistics"]);return o!=null&&p(t,["statistics"],DU(o)),t}function DU(n,e){const t={},i=f(n,["truncated"]);i!=null&&p(t,["truncated"],i);const o=f(n,["token_count"]);return o!=null&&p(t,["tokenCount"],o),t}function Ad(n,e){const t={},i=f(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>qL(u))),p(t,["parts"],a)}const o=f(n,["role"]);return o!=null&&p(t,["role"],o),t}function PU(n,e){const t={},i=f(n,["controlType"]);i!=null&&p(t,["controlType"],i);const o=f(n,["enableControlImageComputation"]);return o!=null&&p(t,["computeControl"],o),t}function VU(n,e){const t={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function kU(n,e,t){const i={},o=f(n,["systemInstruction"]);e!==void 0&&o!=null&&p(e,["systemInstruction"],on(o));const a=f(n,["tools"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(m=>vI(m))),p(e,["tools"],d)}const u=f(n,["generationConfig"]);return e!==void 0&&u!=null&&p(e,["generationConfig"],wL(u)),i}function UU(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],$e(n,o));const a=f(e,["contents"]);if(a!=null){let d=$n(a);Array.isArray(d)&&(d=d.map(m=>Ad(m))),p(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&VU(u),i}function LU(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],$e(n,o));const a=f(e,["contents"]);if(a!=null){let d=$n(a);Array.isArray(d)&&(d=d.map(m=>m)),p(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&kU(u,i),i}function OU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["totalTokens"]);o!=null&&p(t,["totalTokens"],o);const a=f(n,["cachedContentTokenCount"]);return a!=null&&p(t,["cachedContentTokenCount"],a),t}function FU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["totalTokens"]);return o!=null&&p(t,["totalTokens"],o),t}function GU(n,e,t){const i={},o=f(e,["model"]);return o!=null&&p(i,["_url","name"],$e(n,o)),i}function qU(n,e,t){const i={},o=f(e,["model"]);return o!=null&&p(i,["_url","name"],$e(n,o)),i}function BU(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function HU(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function zU(n,e,t){const i={},o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&p(e,["parameters","negativePrompt"],a);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&p(e,["parameters","aspectRatio"],d);const m=f(n,["guidanceScale"]);e!==void 0&&m!=null&&p(e,["parameters","guidanceScale"],m);const h=f(n,["seed"]);e!==void 0&&h!=null&&p(e,["parameters","seed"],h);const v=f(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&p(e,["parameters","safetySetting"],v);const E=f(n,["personGeneration"]);e!==void 0&&E!=null&&p(e,["parameters","personGeneration"],E);const S=f(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&p(e,["parameters","includeSafetyAttributes"],S);const w=f(n,["includeRaiReason"]);e!==void 0&&w!=null&&p(e,["parameters","includeRaiReason"],w);const P=f(n,["language"]);e!==void 0&&P!=null&&p(e,["parameters","language"],P);const O=f(n,["outputMimeType"]);e!==void 0&&O!=null&&p(e,["parameters","outputOptions","mimeType"],O);const F=f(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&p(e,["parameters","outputOptions","compressionQuality"],F);const K=f(n,["addWatermark"]);e!==void 0&&K!=null&&p(e,["parameters","addWatermark"],K);const $=f(n,["labels"]);e!==void 0&&$!=null&&p(e,["labels"],$);const W=f(n,["editMode"]);e!==void 0&&W!=null&&p(e,["parameters","editMode"],W);const ie=f(n,["baseSteps"]);return e!==void 0&&ie!=null&&p(e,["parameters","editConfig","baseSteps"],ie),i}function JU(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],$e(n,o));const a=f(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=f(e,["referenceImages"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(h=>KL(h))),p(i,["instances[0]","referenceImages"],m)}const d=f(e,["config"]);return d!=null&&zU(d,i),i}function YU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Cd(u))),p(t,["generatedImages"],a)}return t}function KU(n,e,t){const i={},o=f(n,["taskType"]);e!==void 0&&o!=null&&p(e,["requests[]","taskType"],o);const a=f(n,["title"]);e!==void 0&&a!=null&&p(e,["requests[]","title"],a);const u=f(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&p(e,["requests[]","outputDimensionality"],u),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function $U(n,e,t){const i={},o=f(n,["taskType"]);e!==void 0&&o!=null&&p(e,["instances[]","task_type"],o);const a=f(n,["title"]);e!==void 0&&a!=null&&p(e,["instances[]","title"],a);const u=f(n,["outputDimensionality"]);e!==void 0&&u!=null&&p(e,["parameters","outputDimensionality"],u);const d=f(n,["mimeType"]);e!==void 0&&d!=null&&p(e,["instances[]","mimeType"],d);const m=f(n,["autoTruncate"]);return e!==void 0&&m!=null&&p(e,["parameters","autoTruncate"],m),i}function QU(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],$e(n,o));const a=f(e,["contents"]);if(a!=null){let m=Dg(n,a);Array.isArray(m)&&(m=m.map(h=>h)),p(i,["requests[]","content"],m)}const u=f(e,["config"]);u!=null&&KU(u,i);const d=f(e,["model"]);return d!==void 0&&p(i,["requests[]","model"],$e(n,d)),i}function XU(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],$e(n,o));const a=f(e,["contents"]);if(a!=null){let d=Dg(n,a);Array.isArray(d)&&(d=d.map(m=>m)),p(i,["instances[]","content"],d)}const u=f(e,["config"]);return u!=null&&$U(u,i),i}function WU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["embeddings"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>d)),p(t,["embeddings"],u)}const a=f(n,["metadata"]);return a!=null&&p(t,["metadata"],a),t}function jU(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["predictions[]","embeddings"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>MU(d))),p(t,["embeddings"],u)}const a=f(n,["metadata"]);return a!=null&&p(t,["metadata"],a),t}function ZU(n,e){const t={},i=f(n,["endpoint"]);i!=null&&p(t,["name"],i);const o=f(n,["deployedModelId"]);return o!=null&&p(t,["deployedModelId"],o),t}function eL(n,e){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["fileUri"]);i!=null&&p(t,["fileUri"],i);const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function tL(n,e){const t={},i=f(n,["id"]);i!=null&&p(t,["id"],i);const o=f(n,["args"]);o!=null&&p(t,["args"],o);const a=f(n,["name"]);if(a!=null&&p(t,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function nL(n,e){const t={},i=f(n,["allowedFunctionNames"]);i!=null&&p(t,["allowedFunctionNames"],i);const o=f(n,["mode"]);if(o!=null&&p(t,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function iL(n,e){const t={},i=f(n,["description"]);i!=null&&p(t,["description"],i);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const a=f(n,["parameters"]);a!=null&&p(t,["parameters"],a);const u=f(n,["parametersJsonSchema"]);u!=null&&p(t,["parametersJsonSchema"],u);const d=f(n,["response"]);d!=null&&p(t,["response"],d);const m=f(n,["responseJsonSchema"]);if(m!=null&&p(t,["responseJsonSchema"],m),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function sL(n,e,t,i){const o={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&p(t,["systemInstruction"],Ad(on(a)));const u=f(e,["temperature"]);u!=null&&p(o,["temperature"],u);const d=f(e,["topP"]);d!=null&&p(o,["topP"],d);const m=f(e,["topK"]);m!=null&&p(o,["topK"],m);const h=f(e,["candidateCount"]);h!=null&&p(o,["candidateCount"],h);const v=f(e,["maxOutputTokens"]);v!=null&&p(o,["maxOutputTokens"],v);const E=f(e,["stopSequences"]);E!=null&&p(o,["stopSequences"],E);const S=f(e,["responseLogprobs"]);S!=null&&p(o,["responseLogprobs"],S);const w=f(e,["logprobs"]);w!=null&&p(o,["logprobs"],w);const P=f(e,["presencePenalty"]);P!=null&&p(o,["presencePenalty"],P);const O=f(e,["frequencyPenalty"]);O!=null&&p(o,["frequencyPenalty"],O);const F=f(e,["seed"]);F!=null&&p(o,["seed"],F);const K=f(e,["responseMimeType"]);K!=null&&p(o,["responseMimeType"],K);const $=f(e,["responseSchema"]);$!=null&&p(o,["responseSchema"],Pg($));const W=f(e,["responseJsonSchema"]);if(W!=null&&p(o,["responseJsonSchema"],W),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ie=f(e,["safetySettings"]);if(t!==void 0&&ie!=null){let xe=ie;Array.isArray(xe)&&(xe=xe.map(nt=>$L(nt))),p(t,["safetySettings"],xe)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let xe=Ua(ae);Array.isArray(xe)&&(xe=xe.map(nt=>t4(ka(nt)))),p(t,["tools"],xe)}const j=f(e,["toolConfig"]);if(t!==void 0&&j!=null&&p(t,["toolConfig"],e4(j)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=f(e,["cachedContent"]);t!==void 0&&N!=null&&p(t,["cachedContent"],Ss(n,N));const x=f(e,["responseModalities"]);x!=null&&p(o,["responseModalities"],x);const M=f(e,["mediaResolution"]);M!=null&&p(o,["mediaResolution"],M);const L=f(e,["speechConfig"]);if(L!=null&&p(o,["speechConfig"],Vg(L)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&p(o,["thinkingConfig"],U);const q=f(e,["imageConfig"]);q!=null&&p(o,["imageConfig"],ML(q));const D=f(e,["enableEnhancedCivicAnswers"]);if(D!=null&&p(o,["enableEnhancedCivicAnswers"],D),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function rL(n,e,t,i){const o={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&p(t,["systemInstruction"],on(a));const u=f(e,["temperature"]);u!=null&&p(o,["temperature"],u);const d=f(e,["topP"]);d!=null&&p(o,["topP"],d);const m=f(e,["topK"]);m!=null&&p(o,["topK"],m);const h=f(e,["candidateCount"]);h!=null&&p(o,["candidateCount"],h);const v=f(e,["maxOutputTokens"]);v!=null&&p(o,["maxOutputTokens"],v);const E=f(e,["stopSequences"]);E!=null&&p(o,["stopSequences"],E);const S=f(e,["responseLogprobs"]);S!=null&&p(o,["responseLogprobs"],S);const w=f(e,["logprobs"]);w!=null&&p(o,["logprobs"],w);const P=f(e,["presencePenalty"]);P!=null&&p(o,["presencePenalty"],P);const O=f(e,["frequencyPenalty"]);O!=null&&p(o,["frequencyPenalty"],O);const F=f(e,["seed"]);F!=null&&p(o,["seed"],F);const K=f(e,["responseMimeType"]);K!=null&&p(o,["responseMimeType"],K);const $=f(e,["responseSchema"]);$!=null&&p(o,["responseSchema"],Pg($));const W=f(e,["responseJsonSchema"]);W!=null&&p(o,["responseJsonSchema"],W);const ie=f(e,["routingConfig"]);ie!=null&&p(o,["routingConfig"],ie);const ae=f(e,["modelSelectionConfig"]);ae!=null&&p(o,["modelConfig"],ae);const j=f(e,["safetySettings"]);if(t!==void 0&&j!=null){let me=j;Array.isArray(me)&&(me=me.map(ke=>ke)),p(t,["safetySettings"],me)}const N=f(e,["tools"]);if(t!==void 0&&N!=null){let me=Ua(N);Array.isArray(me)&&(me=me.map(ke=>vI(ka(ke)))),p(t,["tools"],me)}const x=f(e,["toolConfig"]);t!==void 0&&x!=null&&p(t,["toolConfig"],x);const M=f(e,["labels"]);t!==void 0&&M!=null&&p(t,["labels"],M);const L=f(e,["cachedContent"]);t!==void 0&&L!=null&&p(t,["cachedContent"],Ss(n,L));const U=f(e,["responseModalities"]);U!=null&&p(o,["responseModalities"],U);const q=f(e,["mediaResolution"]);q!=null&&p(o,["mediaResolution"],q);const D=f(e,["speechConfig"]);D!=null&&p(o,["speechConfig"],Vg(D));const xe=f(e,["audioTimestamp"]);xe!=null&&p(o,["audioTimestamp"],xe);const nt=f(e,["thinkingConfig"]);nt!=null&&p(o,["thinkingConfig"],nt);const Z=f(e,["imageConfig"]);if(Z!=null&&p(o,["imageConfig"],DL(Z)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const fe=f(e,["modelArmorConfig"]);return t!==void 0&&fe!=null&&p(t,["modelArmorConfig"],fe),o}function sS(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],$e(n,o));const a=f(e,["contents"]);if(a!=null){let d=$n(a);Array.isArray(d)&&(d=d.map(m=>Ad(m))),p(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&p(i,["generationConfig"],sL(n,u,i)),i}function rS(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],$e(n,o));const a=f(e,["contents"]);if(a!=null){let d=$n(a);Array.isArray(d)&&(d=d.map(m=>m)),p(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&p(i,["generationConfig"],rL(n,u,i)),i}function oS(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["candidates"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(v=>RU(v))),p(t,["candidates"],h)}const a=f(n,["modelVersion"]);a!=null&&p(t,["modelVersion"],a);const u=f(n,["promptFeedback"]);u!=null&&p(t,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&p(t,["responseId"],d);const m=f(n,["usageMetadata"]);return m!=null&&p(t,["usageMetadata"],m),t}function aS(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["candidates"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(E=>E)),p(t,["candidates"],v)}const a=f(n,["createTime"]);a!=null&&p(t,["createTime"],a);const u=f(n,["modelVersion"]);u!=null&&p(t,["modelVersion"],u);const d=f(n,["promptFeedback"]);d!=null&&p(t,["promptFeedback"],d);const m=f(n,["responseId"]);m!=null&&p(t,["responseId"],m);const h=f(n,["usageMetadata"]);return h!=null&&p(t,["usageMetadata"],h),t}function oL(n,e,t){const i={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=f(n,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const u=f(n,["guidanceScale"]);if(e!==void 0&&u!=null&&p(e,["parameters","guidanceScale"],u),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&p(e,["parameters","safetySetting"],d);const m=f(n,["personGeneration"]);e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m);const h=f(n,["includeSafetyAttributes"]);e!==void 0&&h!=null&&p(e,["parameters","includeSafetyAttributes"],h);const v=f(n,["includeRaiReason"]);e!==void 0&&v!=null&&p(e,["parameters","includeRaiReason"],v);const E=f(n,["language"]);e!==void 0&&E!=null&&p(e,["parameters","language"],E);const S=f(n,["outputMimeType"]);e!==void 0&&S!=null&&p(e,["parameters","outputOptions","mimeType"],S);const w=f(n,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&p(e,["parameters","outputOptions","compressionQuality"],w),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=f(n,["imageSize"]);if(e!==void 0&&P!=null&&p(e,["parameters","sampleImageSize"],P),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function aL(n,e,t){const i={},o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&p(e,["parameters","negativePrompt"],a);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&p(e,["parameters","aspectRatio"],d);const m=f(n,["guidanceScale"]);e!==void 0&&m!=null&&p(e,["parameters","guidanceScale"],m);const h=f(n,["seed"]);e!==void 0&&h!=null&&p(e,["parameters","seed"],h);const v=f(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&p(e,["parameters","safetySetting"],v);const E=f(n,["personGeneration"]);e!==void 0&&E!=null&&p(e,["parameters","personGeneration"],E);const S=f(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&p(e,["parameters","includeSafetyAttributes"],S);const w=f(n,["includeRaiReason"]);e!==void 0&&w!=null&&p(e,["parameters","includeRaiReason"],w);const P=f(n,["language"]);e!==void 0&&P!=null&&p(e,["parameters","language"],P);const O=f(n,["outputMimeType"]);e!==void 0&&O!=null&&p(e,["parameters","outputOptions","mimeType"],O);const F=f(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&p(e,["parameters","outputOptions","compressionQuality"],F);const K=f(n,["addWatermark"]);e!==void 0&&K!=null&&p(e,["parameters","addWatermark"],K);const $=f(n,["labels"]);e!==void 0&&$!=null&&p(e,["labels"],$);const W=f(n,["imageSize"]);e!==void 0&&W!=null&&p(e,["parameters","sampleImageSize"],W);const ie=f(n,["enhancePrompt"]);return e!==void 0&&ie!=null&&p(e,["parameters","enhancePrompt"],ie),i}function lL(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],$e(n,o));const a=f(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=f(e,["config"]);return u!=null&&oL(u,i),i}function uL(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],$e(n,o));const a=f(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=f(e,["config"]);return u!=null&&aL(u,i),i}function cL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["predictions"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>SL(d))),p(t,["generatedImages"],u)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&p(t,["positivePromptSafetyAttributes"],yI(a)),t}function fL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["predictions"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>Cd(d))),p(t,["generatedImages"],u)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&p(t,["positivePromptSafetyAttributes"],_I(a)),t}function dL(n,e,t){const i={},o=f(n,["numberOfVideos"]);if(e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=f(n,["durationSeconds"]);if(e!==void 0&&a!=null&&p(e,["parameters","durationSeconds"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=f(n,["resolution"]);e!==void 0&&d!=null&&p(e,["parameters","resolution"],d);const m=f(n,["personGeneration"]);if(e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=f(n,["negativePrompt"]);e!==void 0&&h!=null&&p(e,["parameters","negativePrompt"],h);const v=f(n,["enhancePrompt"]);if(e!==void 0&&v!=null&&p(e,["parameters","enhancePrompt"],v),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const E=f(n,["lastFrame"]);e!==void 0&&E!=null&&p(e,["instances[0]","lastFrame"],Id(E));const S=f(n,["referenceImages"]);if(e!==void 0&&S!=null){let w=S;Array.isArray(w)&&(w=w.map(P=>p4(P))),p(e,["instances[0]","referenceImages"],w)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function hL(n,e,t){const i={},o=f(n,["numberOfVideos"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const u=f(n,["fps"]);e!==void 0&&u!=null&&p(e,["parameters","fps"],u);const d=f(n,["durationSeconds"]);e!==void 0&&d!=null&&p(e,["parameters","durationSeconds"],d);const m=f(n,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const h=f(n,["aspectRatio"]);e!==void 0&&h!=null&&p(e,["parameters","aspectRatio"],h);const v=f(n,["resolution"]);e!==void 0&&v!=null&&p(e,["parameters","resolution"],v);const E=f(n,["personGeneration"]);e!==void 0&&E!=null&&p(e,["parameters","personGeneration"],E);const S=f(n,["pubsubTopic"]);e!==void 0&&S!=null&&p(e,["parameters","pubsubTopic"],S);const w=f(n,["negativePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","negativePrompt"],w);const P=f(n,["enhancePrompt"]);e!==void 0&&P!=null&&p(e,["parameters","enhancePrompt"],P);const O=f(n,["generateAudio"]);e!==void 0&&O!=null&&p(e,["parameters","generateAudio"],O);const F=f(n,["lastFrame"]);e!==void 0&&F!=null&&p(e,["instances[0]","lastFrame"],mi(F));const K=f(n,["referenceImages"]);if(e!==void 0&&K!=null){let ie=K;Array.isArray(ie)&&(ie=ie.map(ae=>m4(ae))),p(e,["instances[0]","referenceImages"],ie)}const $=f(n,["mask"]);e!==void 0&&$!=null&&p(e,["instances[0]","mask"],h4($));const W=f(n,["compressionQuality"]);return e!==void 0&&W!=null&&p(e,["parameters","compressionQuality"],W),i}function pL(n,e){const t={},i=f(n,["name"]);i!=null&&p(t,["name"],i);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const a=f(n,["done"]);a!=null&&p(t,["done"],a);const u=f(n,["error"]);u!=null&&p(t,["error"],u);const d=f(n,["response","generateVideoResponse"]);return d!=null&&p(t,["response"],_L(d)),t}function mL(n,e){const t={},i=f(n,["name"]);i!=null&&p(t,["name"],i);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const a=f(n,["done"]);a!=null&&p(t,["done"],a);const u=f(n,["error"]);u!=null&&p(t,["error"],u);const d=f(n,["response"]);return d!=null&&p(t,["response"],vL(d)),t}function gL(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],$e(n,o));const a=f(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=f(e,["image"]);u!=null&&p(i,["instances[0]","image"],Id(u));const d=f(e,["video"]);d!=null&&p(i,["instances[0]","video"],EI(d));const m=f(e,["source"]);m!=null&&EL(m,i);const h=f(e,["config"]);return h!=null&&dL(h,i),i}function yL(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],$e(n,o));const a=f(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=f(e,["image"]);u!=null&&p(i,["instances[0]","image"],mi(u));const d=f(e,["video"]);d!=null&&p(i,["instances[0]","video"],TI(d));const m=f(e,["source"]);m!=null&&TL(m,i);const h=f(e,["config"]);return h!=null&&hL(h,i),i}function _L(n,e){const t={},i=f(n,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>CL(d))),p(t,["generatedVideos"],u)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&p(t,["raiMediaFilteredCount"],o);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&p(t,["raiMediaFilteredReasons"],a),t}function vL(n,e){const t={},i=f(n,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>IL(d))),p(t,["generatedVideos"],u)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&p(t,["raiMediaFilteredCount"],o);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&p(t,["raiMediaFilteredReasons"],a),t}function EL(n,e,t){const i={},o=f(n,["prompt"]);e!==void 0&&o!=null&&p(e,["instances[0]","prompt"],o);const a=f(n,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],Id(a));const u=f(n,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],EI(u)),i}function TL(n,e,t){const i={},o=f(n,["prompt"]);e!==void 0&&o!=null&&p(e,["instances[0]","prompt"],o);const a=f(n,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],mi(a));const u=f(n,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],TI(u)),i}function SL(n,e){const t={},i=f(n,["_self"]);i!=null&&p(t,["image"],PL(i));const o=f(n,["raiFilteredReason"]);o!=null&&p(t,["raiFilteredReason"],o);const a=f(n,["_self"]);return a!=null&&p(t,["safetyAttributes"],yI(a)),t}function Cd(n,e){const t={},i=f(n,["_self"]);i!=null&&p(t,["image"],gI(i));const o=f(n,["raiFilteredReason"]);o!=null&&p(t,["raiFilteredReason"],o);const a=f(n,["_self"]);a!=null&&p(t,["safetyAttributes"],_I(a));const u=f(n,["prompt"]);return u!=null&&p(t,["enhancedPrompt"],u),t}function AL(n,e){const t={},i=f(n,["_self"]);i!=null&&p(t,["mask"],gI(i));const o=f(n,["labels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(t,["labels"],a)}return t}function CL(n,e){const t={},i=f(n,["video"]);return i!=null&&p(t,["video"],f4(i)),t}function IL(n,e){const t={},i=f(n,["_self"]);return i!=null&&p(t,["video"],d4(i)),t}function wL(n,e){const t={},i=f(n,["modelSelectionConfig"]);i!=null&&p(t,["modelConfig"],i);const o=f(n,["responseJsonSchema"]);o!=null&&p(t,["responseJsonSchema"],o);const a=f(n,["audioTimestamp"]);a!=null&&p(t,["audioTimestamp"],a);const u=f(n,["candidateCount"]);u!=null&&p(t,["candidateCount"],u);const d=f(n,["enableAffectiveDialog"]);d!=null&&p(t,["enableAffectiveDialog"],d);const m=f(n,["frequencyPenalty"]);m!=null&&p(t,["frequencyPenalty"],m);const h=f(n,["logprobs"]);h!=null&&p(t,["logprobs"],h);const v=f(n,["maxOutputTokens"]);v!=null&&p(t,["maxOutputTokens"],v);const E=f(n,["mediaResolution"]);E!=null&&p(t,["mediaResolution"],E);const S=f(n,["presencePenalty"]);S!=null&&p(t,["presencePenalty"],S);const w=f(n,["responseLogprobs"]);w!=null&&p(t,["responseLogprobs"],w);const P=f(n,["responseMimeType"]);P!=null&&p(t,["responseMimeType"],P);const O=f(n,["responseModalities"]);O!=null&&p(t,["responseModalities"],O);const F=f(n,["responseSchema"]);F!=null&&p(t,["responseSchema"],F);const K=f(n,["routingConfig"]);K!=null&&p(t,["routingConfig"],K);const $=f(n,["seed"]);$!=null&&p(t,["seed"],$);const W=f(n,["speechConfig"]);W!=null&&p(t,["speechConfig"],W);const ie=f(n,["stopSequences"]);ie!=null&&p(t,["stopSequences"],ie);const ae=f(n,["temperature"]);ae!=null&&p(t,["temperature"],ae);const j=f(n,["thinkingConfig"]);j!=null&&p(t,["thinkingConfig"],j);const N=f(n,["topK"]);N!=null&&p(t,["topK"],N);const x=f(n,["topP"]);if(x!=null&&p(t,["topP"],x),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function RL(n,e,t){const i={},o=f(e,["model"]);return o!=null&&p(i,["_url","name"],$e(n,o)),i}function bL(n,e,t){const i={},o=f(e,["model"]);return o!=null&&p(i,["_url","name"],$e(n,o)),i}function NL(n,e){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(n,["enableWidget"]);return i!=null&&p(t,["enableWidget"],i),t}function xL(n,e){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(n,["timeRangeFilter"]);return i!=null&&p(t,["timeRangeFilter"],i),t}function ML(n,e){const t={},i=f(n,["aspectRatio"]);i!=null&&p(t,["aspectRatio"],i);const o=f(n,["imageSize"]);if(o!=null&&p(t,["imageSize"],o),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function DL(n,e){const t={},i=f(n,["aspectRatio"]);i!=null&&p(t,["aspectRatio"],i);const o=f(n,["imageSize"]);o!=null&&p(t,["imageSize"],o);const a=f(n,["personGeneration"]);a!=null&&p(t,["personGeneration"],a);const u=f(n,["outputMimeType"]);u!=null&&p(t,["imageOutputOptions","mimeType"],u);const d=f(n,["outputCompressionQuality"]);return d!=null&&p(t,["imageOutputOptions","compressionQuality"],d),t}function PL(n,e){const t={},i=f(n,["bytesBase64Encoded"]);i!=null&&p(t,["imageBytes"],Sr(i));const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function gI(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&p(t,["gcsUri"],i);const o=f(n,["bytesBase64Encoded"]);o!=null&&p(t,["imageBytes"],Sr(o));const a=f(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}function Id(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=f(n,["imageBytes"]);i!=null&&p(t,["bytesBase64Encoded"],Sr(i));const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function mi(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&p(t,["gcsUri"],i);const o=f(n,["imageBytes"]);o!=null&&p(t,["bytesBase64Encoded"],Sr(o));const a=f(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}function VL(n,e,t,i){const o={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&p(t,["_query","pageSize"],a);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&p(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&p(t,["_query","filter"],d);const m=f(e,["queryBase"]);return t!==void 0&&m!=null&&p(t,["_url","models_url"],uI(n,m)),o}function kL(n,e,t,i){const o={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&p(t,["_query","pageSize"],a);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&p(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&p(t,["_query","filter"],d);const m=f(e,["queryBase"]);return t!==void 0&&m!=null&&p(t,["_url","models_url"],uI(n,m)),o}function UL(n,e,t){const i={},o=f(e,["config"]);return o!=null&&VL(n,o,i),i}function LL(n,e,t){const i={},o=f(e,["config"]);return o!=null&&kL(n,o,i),i}function OL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=f(n,["_self"]);if(a!=null){let u=cI(a);Array.isArray(u)&&(u=u.map(d=>Rm(d))),p(t,["models"],u)}return t}function FL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=f(n,["_self"]);if(a!=null){let u=cI(a);Array.isArray(u)&&(u=u.map(d=>bm(d))),p(t,["models"],u)}return t}function GL(n,e){const t={},i=f(n,["maskMode"]);i!=null&&p(t,["maskMode"],i);const o=f(n,["segmentationClasses"]);o!=null&&p(t,["maskClasses"],o);const a=f(n,["maskDilation"]);return a!=null&&p(t,["dilation"],a),t}function Rm(n,e){const t={},i=f(n,["name"]);i!=null&&p(t,["name"],i);const o=f(n,["displayName"]);o!=null&&p(t,["displayName"],o);const a=f(n,["description"]);a!=null&&p(t,["description"],a);const u=f(n,["version"]);u!=null&&p(t,["version"],u);const d=f(n,["_self"]);d!=null&&p(t,["tunedModelInfo"],n4(d));const m=f(n,["inputTokenLimit"]);m!=null&&p(t,["inputTokenLimit"],m);const h=f(n,["outputTokenLimit"]);h!=null&&p(t,["outputTokenLimit"],h);const v=f(n,["supportedGenerationMethods"]);v!=null&&p(t,["supportedActions"],v);const E=f(n,["temperature"]);E!=null&&p(t,["temperature"],E);const S=f(n,["maxTemperature"]);S!=null&&p(t,["maxTemperature"],S);const w=f(n,["topP"]);w!=null&&p(t,["topP"],w);const P=f(n,["topK"]);P!=null&&p(t,["topK"],P);const O=f(n,["thinking"]);return O!=null&&p(t,["thinking"],O),t}function bm(n,e){const t={},i=f(n,["name"]);i!=null&&p(t,["name"],i);const o=f(n,["displayName"]);o!=null&&p(t,["displayName"],o);const a=f(n,["description"]);a!=null&&p(t,["description"],a);const u=f(n,["versionId"]);u!=null&&p(t,["version"],u);const d=f(n,["deployedModels"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(w=>ZU(w))),p(t,["endpoints"],S)}const m=f(n,["labels"]);m!=null&&p(t,["labels"],m);const h=f(n,["_self"]);h!=null&&p(t,["tunedModelInfo"],i4(h));const v=f(n,["defaultCheckpointId"]);v!=null&&p(t,["defaultCheckpointId"],v);const E=f(n,["checkpoints"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(w=>w)),p(t,["checkpoints"],S)}return t}function qL(n,e){const t={},i=f(n,["mediaResolution"]);i!=null&&p(t,["mediaResolution"],i);const o=f(n,["codeExecutionResult"]);o!=null&&p(t,["codeExecutionResult"],o);const a=f(n,["executableCode"]);a!=null&&p(t,["executableCode"],a);const u=f(n,["fileData"]);u!=null&&p(t,["fileData"],eL(u));const d=f(n,["functionCall"]);d!=null&&p(t,["functionCall"],tL(d));const m=f(n,["functionResponse"]);m!=null&&p(t,["functionResponse"],m);const h=f(n,["inlineData"]);h!=null&&p(t,["inlineData"],wU(h));const v=f(n,["text"]);v!=null&&p(t,["text"],v);const E=f(n,["thought"]);E!=null&&p(t,["thought"],E);const S=f(n,["thoughtSignature"]);S!=null&&p(t,["thoughtSignature"],S);const w=f(n,["videoMetadata"]);return w!=null&&p(t,["videoMetadata"],w),t}function BL(n,e){const t={},i=f(n,["productImage"]);return i!=null&&p(t,["image"],mi(i)),t}function HL(n,e,t){const i={},o=f(n,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const a=f(n,["baseSteps"]);e!==void 0&&a!=null&&p(e,["parameters","baseSteps"],a);const u=f(n,["outputGcsUri"]);e!==void 0&&u!=null&&p(e,["parameters","storageUri"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&p(e,["parameters","safetySetting"],m);const h=f(n,["personGeneration"]);e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h);const v=f(n,["addWatermark"]);e!==void 0&&v!=null&&p(e,["parameters","addWatermark"],v);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);const S=f(n,["outputCompressionQuality"]);e!==void 0&&S!=null&&p(e,["parameters","outputOptions","compressionQuality"],S);const w=f(n,["enhancePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","enhancePrompt"],w);const P=f(n,["labels"]);return e!==void 0&&P!=null&&p(e,["labels"],P),i}function zL(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],$e(n,o));const a=f(e,["source"]);a!=null&&YL(a,i);const u=f(e,["config"]);return u!=null&&HL(u,i),i}function JL(n,e){const t={},i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Cd(a))),p(t,["generatedImages"],o)}return t}function YL(n,e,t){const i={},o=f(n,["prompt"]);e!==void 0&&o!=null&&p(e,["instances[0]","prompt"],o);const a=f(n,["personImage"]);e!==void 0&&a!=null&&p(e,["instances[0]","personImage","image"],mi(a));const u=f(n,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(m=>BL(m))),p(e,["instances[0]","productImages"],d)}return i}function KL(n,e){const t={},i=f(n,["referenceImage"]);i!=null&&p(t,["referenceImage"],mi(i));const o=f(n,["referenceId"]);o!=null&&p(t,["referenceId"],o);const a=f(n,["referenceType"]);a!=null&&p(t,["referenceType"],a);const u=f(n,["maskImageConfig"]);u!=null&&p(t,["maskImageConfig"],GL(u));const d=f(n,["controlImageConfig"]);d!=null&&p(t,["controlImageConfig"],PU(d));const m=f(n,["styleImageConfig"]);m!=null&&p(t,["styleImageConfig"],m);const h=f(n,["subjectImageConfig"]);return h!=null&&p(t,["subjectImageConfig"],h),t}function yI(n,e){const t={},i=f(n,["safetyAttributes","categories"]);i!=null&&p(t,["categories"],i);const o=f(n,["safetyAttributes","scores"]);o!=null&&p(t,["scores"],o);const a=f(n,["contentType"]);return a!=null&&p(t,["contentType"],a),t}function _I(n,e){const t={},i=f(n,["safetyAttributes","categories"]);i!=null&&p(t,["categories"],i);const o=f(n,["safetyAttributes","scores"]);o!=null&&p(t,["scores"],o);const a=f(n,["contentType"]);return a!=null&&p(t,["contentType"],a),t}function $L(n,e){const t={},i=f(n,["category"]);if(i!=null&&p(t,["category"],i),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(n,["threshold"]);return o!=null&&p(t,["threshold"],o),t}function QL(n,e){const t={},i=f(n,["image"]);return i!=null&&p(t,["image"],mi(i)),t}function XL(n,e,t){const i={},o=f(n,["mode"]);e!==void 0&&o!=null&&p(e,["parameters","mode"],o);const a=f(n,["maxPredictions"]);e!==void 0&&a!=null&&p(e,["parameters","maxPredictions"],a);const u=f(n,["confidenceThreshold"]);e!==void 0&&u!=null&&p(e,["parameters","confidenceThreshold"],u);const d=f(n,["maskDilation"]);e!==void 0&&d!=null&&p(e,["parameters","maskDilation"],d);const m=f(n,["binaryColorThreshold"]);e!==void 0&&m!=null&&p(e,["parameters","binaryColorThreshold"],m);const h=f(n,["labels"]);return e!==void 0&&h!=null&&p(e,["labels"],h),i}function WL(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],$e(n,o));const a=f(e,["source"]);a!=null&&ZL(a,i);const u=f(e,["config"]);return u!=null&&XL(u,i),i}function jL(n,e){const t={},i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>AL(a))),p(t,["generatedMasks"],o)}return t}function ZL(n,e,t){const i={},o=f(n,["prompt"]);e!==void 0&&o!=null&&p(e,["instances[0]","prompt"],o);const a=f(n,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],mi(a));const u=f(n,["scribbleImage"]);return e!==void 0&&u!=null&&p(e,["instances[0]","scribble"],QL(u)),i}function e4(n,e){const t={},i=f(n,["retrievalConfig"]);i!=null&&p(t,["retrievalConfig"],i);const o=f(n,["functionCallingConfig"]);return o!=null&&p(t,["functionCallingConfig"],nL(o)),t}function t4(n,e){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["computerUse"]);i!=null&&p(t,["computerUse"],i);const o=f(n,["fileSearch"]);o!=null&&p(t,["fileSearch"],o);const a=f(n,["codeExecution"]);if(a!=null&&p(t,["codeExecution"],a),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=f(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>S)),p(t,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&p(t,["googleMaps"],NL(d));const m=f(n,["googleSearch"]);m!=null&&p(t,["googleSearch"],xL(m));const h=f(n,["googleSearchRetrieval"]);h!=null&&p(t,["googleSearchRetrieval"],h);const v=f(n,["urlContext"]);return v!=null&&p(t,["urlContext"],v),t}function vI(n,e){const t={},i=f(n,["retrieval"]);i!=null&&p(t,["retrieval"],i);const o=f(n,["computerUse"]);if(o!=null&&p(t,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=f(n,["codeExecution"]);a!=null&&p(t,["codeExecution"],a);const u=f(n,["enterpriseWebSearch"]);u!=null&&p(t,["enterpriseWebSearch"],u);const d=f(n,["functionDeclarations"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(w=>iL(w))),p(t,["functionDeclarations"],S)}const m=f(n,["googleMaps"]);m!=null&&p(t,["googleMaps"],m);const h=f(n,["googleSearch"]);h!=null&&p(t,["googleSearch"],h);const v=f(n,["googleSearchRetrieval"]);v!=null&&p(t,["googleSearchRetrieval"],v);const E=f(n,["urlContext"]);return E!=null&&p(t,["urlContext"],E),t}function n4(n,e){const t={},i=f(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const o=f(n,["createTime"]);o!=null&&p(t,["createTime"],o);const a=f(n,["updateTime"]);return a!=null&&p(t,["updateTime"],a),t}function i4(n,e){const t={},i=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&p(t,["baseModel"],i);const o=f(n,["createTime"]);o!=null&&p(t,["createTime"],o);const a=f(n,["updateTime"]);return a!=null&&p(t,["updateTime"],a),t}function s4(n,e,t){const i={},o=f(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=f(n,["description"]);e!==void 0&&a!=null&&p(e,["description"],a);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),i}function r4(n,e,t){const i={},o=f(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=f(n,["description"]);e!==void 0&&a!=null&&p(e,["description"],a);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),i}function o4(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","name"],$e(n,o));const a=f(e,["config"]);return a!=null&&s4(a,i),i}function a4(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],$e(n,o));const a=f(e,["config"]);return a!=null&&r4(a,i),i}function l4(n,e,t){const i={},o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const a=f(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const u=f(n,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const d=f(n,["includeRaiReason"]);e!==void 0&&d!=null&&p(e,["parameters","includeRaiReason"],d);const m=f(n,["outputMimeType"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","mimeType"],m);const h=f(n,["outputCompressionQuality"]);e!==void 0&&h!=null&&p(e,["parameters","outputOptions","compressionQuality"],h);const v=f(n,["enhanceInputImage"]);e!==void 0&&v!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],v);const E=f(n,["imagePreservationFactor"]);e!==void 0&&E!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],E);const S=f(n,["labels"]);e!==void 0&&S!=null&&p(e,["labels"],S);const w=f(n,["numberOfImages"]);e!==void 0&&w!=null&&p(e,["parameters","sampleCount"],w);const P=f(n,["mode"]);return e!==void 0&&P!=null&&p(e,["parameters","mode"],P),i}function u4(n,e,t){const i={},o=f(e,["model"]);o!=null&&p(i,["_url","model"],$e(n,o));const a=f(e,["image"]);a!=null&&p(i,["instances[0]","image"],mi(a));const u=f(e,["upscaleFactor"]);u!=null&&p(i,["parameters","upscaleConfig","upscaleFactor"],u);const d=f(e,["config"]);return d!=null&&l4(d,i),i}function c4(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Cd(u))),p(t,["generatedImages"],a)}return t}function f4(n,e){const t={},i=f(n,["uri"]);i!=null&&p(t,["uri"],i);const o=f(n,["encodedVideo"]);o!=null&&p(t,["videoBytes"],Sr(o));const a=f(n,["encoding"]);return a!=null&&p(t,["mimeType"],a),t}function d4(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&p(t,["uri"],i);const o=f(n,["bytesBase64Encoded"]);o!=null&&p(t,["videoBytes"],Sr(o));const a=f(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}function h4(n,e){const t={},i=f(n,["image"]);i!=null&&p(t,["_self"],mi(i));const o=f(n,["maskMode"]);return o!=null&&p(t,["maskMode"],o),t}function p4(n,e){const t={},i=f(n,["image"]);i!=null&&p(t,["image"],Id(i));const o=f(n,["referenceType"]);return o!=null&&p(t,["referenceType"],o),t}function m4(n,e){const t={},i=f(n,["image"]);i!=null&&p(t,["image"],mi(i));const o=f(n,["referenceType"]);return o!=null&&p(t,["referenceType"],o),t}function EI(n,e){const t={},i=f(n,["uri"]);i!=null&&p(t,["uri"],i);const o=f(n,["videoBytes"]);o!=null&&p(t,["encodedVideo"],Sr(o));const a=f(n,["mimeType"]);return a!=null&&p(t,["encoding"],a),t}function TI(n,e){const t={},i=f(n,["uri"]);i!=null&&p(t,["gcsUri"],i);const o=f(n,["videoBytes"]);o!=null&&p(t,["bytesBase64Encoded"],Sr(o));const a=f(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g4(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),t}function y4(n){const e={},t=f(n,["config"]);return t!=null&&g4(t,e),e}function _4(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function v4(n){const e={},t=f(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&_4(i,e),e}function E4(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function T4(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["customMetadata"],a)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&p(e,["chunkingConfig"],o),t}function S4(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],C4(u)),e}function A4(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&p(e,["fileName"],i);const o=f(n,["config"]);return o!=null&&T4(o,e),e}function C4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&p(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function I4(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function w4(n){const e={},t=f(n,["config"]);return t!=null&&I4(t,e),e}function R4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["fileSearchStores"],a)}return e}function SI(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const o=f(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),t}function b4(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&SI(i,e),e}function N4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const x4="Content-Type",M4="X-Server-Timeout",D4="User-Agent",Nm="x-goog-api-client",P4="1.41.0",V4=`google-genai-sdk/${P4}`,k4="v1beta1",U4="v1beta",L4=5,O4=[408,429,500,502,503,504];class F4{constructor(e){var t,i,o;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:k4}else{if(!this.clientOptions.apiKey)throw new Eu({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:U4,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===Am.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&G4(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await lS(o),new Cm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await lS(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return hi(this,arguments,function*(){var i;const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";const d="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:v}=yield we(o.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=a.decode(v,{stream:!0});try{const P=JSON.parse(E);if("error"in P){const O=JSON.parse(JSON.stringify(P.error)),F=O.status,K=O.code,$=`got status: ${F}. ${JSON.stringify(P)}`;if(K>=400&&K<600)throw new Eu({message:$,status:K})}}catch(P){if(P.name==="ApiError")throw P}u+=E;let S=-1,w=0;for(;;){S=-1,w=0;for(const F of m){const K=u.indexOf(F);K!==-1&&(S===-1||K<S)&&(S=K,w=F.length)}if(S===-1)break;const P=u.substring(0,S);u=u.substring(S+w);const O=P.trim();if(O.startsWith(d)){const F=O.substring(d.length).trim();try{const K=new Response(F,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield we(new Cm(K))}catch(K){throw new Error(`exception parsing stream chunk ${F}. ${K}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,t){var i;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,t);const o=this.clientOptions.httpOptions.retryOptions;return N2(async()=>{const u=await fetch(e,t);if(u.ok)return u;throw O4.includes(u.status)?new Error(`Retryable HTTP Error: ${u.statusText}`):new eI(`Non-retryable exception ${u.statusText} sending request`)},{retries:((i=o.attempts)!==null&&i!==void 0?i:L4)-1})}getDefaultHeaders(){const e={},t=V4+" "+this.clientOptions.userAgentExtra;return e[D4]=t,e[Nm]=t,e[x4]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(M4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const m={file:o},h=this.getFileName(e),v=he("upload/v1beta/files",m._url),E=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,h,m,t==null?void 0:t.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,i){var o;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),m=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),E={};i!=null&&SI(i,E);const S=await this.fetchUploadUrl(h,d,m,v,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,a,u){var d;let m={};u?m=u:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:m});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function lS(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new Eu({message:o,status:t}):new Error(o)}}function G4(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const h=u[m],v=d[m];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?d[m]=i(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),d[m]=h)}return d}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const q4="mcp_used/unknown";let B4=!1;function AI(n){for(const e of n)if(H4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return B4}function CI(n){var e;const t=(e=n[Nm])!==null&&e!==void 0?e:"";n[Nm]=(t+` ${q4}`).trimStart()}function H4(n){return n!==null&&typeof n=="object"&&n instanceof Ug}function z4(n){return hi(this,arguments,function*(t,i=100){let o,a=0;for(;a<i;){const u=yield we(t.listTools({cursor:o}));for(const d of u.tools)yield yield we(d),a++;if(!u.nextCursor)break;o=u.nextCursor}})}class Ug{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Ug(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var d=!0,m=(t=void 0,pi(z4(v))),h;h=await m.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const E=o;u.push(E);const S=E.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(E){t={error:E}}finally{try{!d&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),yV(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function J4(n,e,t){const i=new uV;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class Y4{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=Q4(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),m=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const v=new Promise(W=>{h=W}),E=e.callbacks,S=function(){h({})},w=this.apiClient,P={onopen:S,onmessage:W=>{J4(w,E.onmessage,W)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(W){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(W){}},O=this.webSocketFactory.create(m,$4(u),P);O.connect(),await v;const $={setup:{model:$e(this.apiClient,e.model)}};return O.send(JSON.stringify($)),new K4(O,this.apiClient)}}class K4{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=gU(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=mU(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ha.PLAY)}pause(){this.sendPlaybackControl(ha.PAUSE)}stop(){this.sendPlaybackControl(ha.STOP)}resetContext(){this.sendPlaybackControl(ha.RESET_CONTEXT)}close(){this.conn.close()}}function $4(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function Q4(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const X4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function W4(n,e,t){const i=new lV;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=vU(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class j4{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new Y4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&AI(e.config.tools)&&CI(E);const S=nO(E);if(this.apiClient.isVertexAI()){const M=this.apiClient.getProject(),L=this.apiClient.getLocation(),U=this.apiClient.getApiKey(),q=!!M&&!!L||!!U;this.apiClient.getCustomBaseUrl()&&!q?v=m:(v=`${m}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v))}else{const M=this.apiClient.getApiKey();let L="BidiGenerateContent",U="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",U="access_token"),v=`${m}/ws/google.ai.generativelanguage.${h}.GenerativeService.${L}?${U}=${M}`}let w=()=>{};const P=new Promise(M=>{w=M}),O=e.callbacks,F=function(){var M;(M=O==null?void 0:O.onopen)===null||M===void 0||M.call(O),w({})},K=this.apiClient,$={onopen:F,onmessage:M=>{W4(K,O.onmessage,M)},onerror:(t=O==null?void 0:O.onerror)!==null&&t!==void 0?t:function(M){},onclose:(i=O==null?void 0:O.onclose)!==null&&i!==void 0?i:function(M){}},W=this.webSocketFactory.create(v,tO(S),$);W.connect(),await P;let ie=$e(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ie.startsWith("publishers/")){const M=this.apiClient.getProject(),L=this.apiClient.getLocation();M&&L&&(ie=`projects/${M}/locations/${L}/`+ie)}let ae={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Zf.AUDIO]}:e.config.responseModalities=[Zf.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const j=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],N=[];for(const M of j)if(this.isCallableTool(M)){const L=M;N.push(await L.tool())}else N.push(M);N.length>0&&(e.config.tools=N);const x={model:ie,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ae=pU(this.apiClient,x):ae=hU(this.apiClient,x),delete ae.config,W.send(JSON.stringify(ae)),new eO(W,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Z4={turnComplete:!0};class eO{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=$n(t.turns),e.isVertexAI()||(i=i.map(o=>Ad(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(X4)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},Z4),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:_U(e)}:t={realtimeInput:yU(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function tO(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function nO(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uS=10;function cS(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Ta(u)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ta(n){return"callTool"in n&&typeof n.callTool=="function"}function iO(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Ta(o)))!==null&&i!==void 0?i:!1}function fS(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(Ta(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(o)}),t}function dS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sO extends Ts{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,d;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!iO(t)||cS(t.config))return await this.generateContentInternal(m);const h=fS(t);if(h.length>0){const O=h.map(F=>`tools[${F}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${O}.`)}let v,E;const S=$n(m.contents),w=(a=(o=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:uS;let P=0;for(;P<w&&(v=await this.generateContentInternal(m),!(!v.functionCalls||v.functionCalls.length===0));){const O=v.candidates[0].content,F=[];for(const K of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Ta(K)){const W=await K.callTool(v.functionCalls);F.push(...W)}P++,E={role:"user",parts:F},m.contents=$n(m.contents),m.contents.push(O),m.contents.push(E),dS(m.config)&&(S.push(O),S.push(E))}return dS(m.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{var i,o,a,u,d;if(this.maybeMoveToResponseJsonSchem(t),cS(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const m=fS(t);if(m.length>0){const E=m.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(o=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,v=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((o=m==null?void 0:m.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=m==null?void 0:m.safetyAttributes:u.push(m);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new yo(vs.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,d,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((m=(d=t.source)===null||d===void 0?void 0:d.video)===null||m===void 0)&&m.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async m=>Ta(m)?await m.tool():m)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&AI(e.config.tools)){const m=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},m);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),CI(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Ta(u)){const d=u,m=await d.tool();for(const h of(o=m.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:uS;let u=!1,d=0;const m=await this.initAfcToolsMap(e);return(function(h,v,E){return hi(this,arguments,function*(){for(var S,w,P,O,F,K;d<a;){u&&(d++,u=!1);const ae=yield we(h.processParamsMaybeAddMcpUsage(E)),j=yield we(h.generateContentStreamInternal(ae)),N=[],x=[];try{for(var $=!0,W=(w=void 0,pi(j)),ie;ie=yield we(W.next()),S=ie.done,!S;$=!0){O=ie.value,$=!1;const M=O;if(yield yield we(M),M.candidates&&(!((F=M.candidates[0])===null||F===void 0)&&F.content)){x.push(M.candidates[0].content);for(const L of(K=M.candidates[0].content.parts)!==null&&K!==void 0?K:[])if(d<a&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(L.functionCall.name)){const U=yield we(v.get(L.functionCall.name).callTool([L.functionCall]));N.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(M){w={error:M}}finally{try{!$&&!S&&(P=W.return)&&(yield we(P.call(W)))}finally{if(w)throw w.error}}if(N.length>0){u=!0;const M=new Yl;M.candidates=[{content:{role:"user",parts:N}}],yield yield we(M);const L=[];L.push(...x),L.push({role:"user",parts:N});const U=$n(E.contents).concat(L);E.contents=U}else break}})})(this,m,e)}async generateContentInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=rS(this.apiClient,e);return d=he("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=aS(v),S=new Yl;return Object.assign(S,E),S})}else{const h=sS(this.apiClient,e);return d=he("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=oS(v),S=new Yl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=rS(this.apiClient,e);return d=he("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return hi(this,arguments,function*(){var S,w,P,O;try{for(var F=!0,K=pi(E),$;$=yield we(K.next()),S=$.done,!S;F=!0){O=$.value,F=!1;const W=O,ie=aS(yield we(W.json()),e);ie.sdkHttpResponse={headers:W.headers};const ae=new Yl;Object.assign(ae,ie),yield yield we(ae)}}catch(W){w={error:W}}finally{try{!F&&!S&&(P=K.return)&&(yield we(P.call(K)))}finally{if(w)throw w.error}}})})}else{const h=sS(this.apiClient,e);return d=he("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return hi(this,arguments,function*(){var S,w,P,O;try{for(var F=!0,K=pi(E),$;$=yield we(K.next()),S=$.done,!S;F=!0){O=$.value,F=!1;const W=O,ie=oS(yield we(W.json()),e);ie.sdkHttpResponse={headers:W.headers};const ae=new Yl;Object.assign(ae,ie),yield yield we(ae)}}catch(W){w={error:W}}finally{try{!F&&!S&&(P=K.return)&&(yield we(P.call(K)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=XU(this.apiClient,e);return d=he("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=jU(v),S=new qT;return Object.assign(S,E),S})}else{const h=QU(this.apiClient,e);return d=he("{model}:batchEmbedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=WU(v),S=new qT;return Object.assign(S,E),S})}}async generateImagesInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=uL(this.apiClient,e);return d=he("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=fL(v),S=new BT;return Object.assign(S,E),S})}else{const h=lL(this.apiClient,e);return d=he("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=cL(v),S=new BT;return Object.assign(S,E),S})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=JU(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=YU(m),v=new X2;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=u4(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=c4(m),v=new W2;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=zL(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=JL(m),v=new j2;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=WL(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=jL(m),v=new Z2;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=bL(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>bm(v))}else{const h=RL(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Rm(v))}}async listInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=LL(this.apiClient,e);return d=he("{models_url}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=FL(v),S=new HT;return Object.assign(S,E),S})}else{const h=UL(this.apiClient,e);return d=he("{models_url}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=OL(v),S=new HT;return Object.assign(S,E),S})}}async update(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=a4(this.apiClient,e);return d=he("{model}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>bm(v))}else{const h=o4(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Rm(v))}}async delete(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=qU(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=HU(v),S=new zT;return Object.assign(S,E),S})}else{const h=GU(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=BU(v),S=new zT;return Object.assign(S,E),S})}}async countTokens(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=LU(this.apiClient,e);return d=he("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=FU(v),S=new JT;return Object.assign(S,E),S})}else{const h=UU(this.apiClient,e);return d=he("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=OU(v),S=new JT;return Object.assign(S,E),S})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=NU(this.apiClient,e);return a=he("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=xU(m),v=new eV;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=yL(this.apiClient,e);return d=he("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const E=mL(v),S=new ed;return Object.assign(S,E),S})}else{const h=gL(this.apiClient,e);return d=he("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const E=pL(v),S=new ed;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rO extends Ts{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=z2(e);return d=he("{operationName}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const h=H2(e);return d=he("{operationName}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=U2(e);return a=he("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oO(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function aO(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>gO(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function lO(n,e,t){const i={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&p(t,["expireTime"],o);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&p(t,["newSessionExpireTime"],a);const u=f(e,["uses"]);t!==void 0&&u!=null&&p(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&p(t,["bidiGenerateContentSetup"],mO(n,d));const m=f(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&p(t,["fieldMask"],m),i}function uO(n,e){const t={},i=f(e,["config"]);return i!=null&&p(t,["config"],lO(n,i,t)),t}function cO(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function fO(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function dO(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function hO(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function pO(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=f(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],kg(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const P=f(n,["systemInstruction"]);e!==void 0&&P!=null&&p(e,["setup","systemInstruction"],aO(on(P)));const O=f(n,["tools"]);if(e!==void 0&&O!=null){let j=Ua(O);Array.isArray(j)&&(j=j.map(N=>_O(ka(N)))),p(e,["setup","tools"],j)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&p(e,["setup","sessionResumption"],yO(F));const K=f(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const $=f(n,["outputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","outputAudioTranscription"],$);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&p(e,["setup","realtimeInputConfig"],W);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&p(e,["setup","contextWindowCompression"],ie);const ae=f(n,["proactivity"]);if(e!==void 0&&ae!=null&&p(e,["setup","proactivity"],ae),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function mO(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["setup","model"],$e(n,i));const o=f(e,["config"]);return o!=null&&p(t,["config"],pO(o,t)),t}function gO(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],cO(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],fO(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],oO(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function yO(n){const e={},t=f(n,["handle"]);if(t!=null&&p(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function _O(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=f(n,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(E=>E)),p(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],dO(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],hO(d));const m=f(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vO(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function EO(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=vO(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const m=[];a&&m.push(a),d.length>0&&m.push(...d),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class TO extends Ts{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=uO(this.apiClient,e);a=he("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const m=EO(d,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SO(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function AO(n){const e={},t=f(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&SO(i,e),e}function CO(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function IO(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function wO(n){const e={},t=f(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&IO(i,e),e}function RO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bO extends Ts{constructor(e){super(),this.apiClient=e,this.list=async t=>new yo(vs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=CO(e);return a=he("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=AO(e);o=he("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=wO(e);return a=he("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=RO(m),v=new tV;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NO extends Ts{constructor(e,t=new bO(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new yo(vs.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=y4(e);return a=he("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=E4(e);return a=he("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=v4(e);o=he("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=w4(e);return a=he("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=R4(m),v=new nV;return Object.assign(v,h),v})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=b4(e);return a=he("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=N4(m),v=new iV;return Object.assign(v,h),v})}}async importFile(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=A4(e);return a=he("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=S4(m),v=new xg;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let II=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return II=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const xO=()=>II();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Mm=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xn extends Error{}class dn extends Xn{constructor(e,t,i,o){super(`${dn.makeMessage(e,t,i)}`),this.status=e,this.headers=o,this.error=t}static makeMessage(e,t,i){const o=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,t,i,o){if(!e||!o)return new wd({message:i,cause:Mm(t)});const a=t;return e===400?new RI(e,a,i,o):e===401?new bI(e,a,i,o):e===403?new NI(e,a,i,o):e===404?new xI(e,a,i,o):e===409?new MI(e,a,i,o):e===422?new DI(e,a,i,o):e===429?new PI(e,a,i,o):e>=500?new VI(e,a,i,o):new dn(e,a,i,o)}}class Dm extends dn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class wd extends dn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class wI extends wd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class RI extends dn{}class bI extends dn{}class NI extends dn{}class xI extends dn{}class MI extends dn{}class DI extends dn{}class PI extends dn{}class VI extends dn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MO=/^[a-z][a-z0-9+.-]*:/i,DO=n=>MO.test(n);let Pm=n=>(Pm=Array.isArray,Pm(n));const PO=Pm;let VO=PO;const hS=VO;function kO(n){if(!n)return!0;for(const e in n)return!1;return!0}function UO(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const LO=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Xn(`${n} must be an integer`);if(e<0)throw new Xn(`${n} must be a positive integer`);return e},OO=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FO=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const da="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GO(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const qO=()=>{var n,e,t,i,o;const a=GO();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":da,"X-Stainless-OS":mS(Deno.build.os),"X-Stainless-Arch":pS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":da,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":da,"X-Stainless-OS":mS((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":pS((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const u=BO();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":da,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":da,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function BO(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const o=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${o}.${a}.${u}`}}}return null}const pS=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",mS=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let gf;const HO=()=>gf??(gf=qO());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zO(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function kI(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function JO(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return kI({start(){},async pull(t){const{done:i,value:o}=await e.next();i?t.close():t.enqueue(o)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function UI(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function YO(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KO=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LI=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Yp(n,e,t){return LI(),new File(n,e??"unknown_file",t)}function $O(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const QO=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OI=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",XO=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&OI(n),WO=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function jO(n,e,t){if(LI(),n=await n,XO(n))return n instanceof File?n:Yp([await n.arrayBuffer()],n.name);if(WO(n)){const o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Yp(await Vm(o),e,t)}const i=await Vm(n);if(e||(e=$O(n)),!(t!=null&&t.type)){const o=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof o=="string"&&(t=Object.assign(Object.assign({},t),{type:o}))}return Yp(i,e,t)}async function Vm(n){var e,t,i,o,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(OI(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(QO(n))try{for(var d=!0,m=pi(n),h;h=await m.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const v=o;u.push(...await Vm(v))}}catch(v){t={error:v}}finally{try{!d&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}else{const v=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${ZO(n)}`)}return u}function ZO(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FI{constructor(e){this._client=e}}FI._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GI(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const gS=Object.freeze(Object.create(null)),e3=(n=GI)=>(function(t,...i){if(t.length===1)return t[0];let o=!1;const a=[],u=t.reduce((v,E,S)=>{var w,P,O;/[?#]/.test(E)&&(o=!0);const F=i[S];let K=(o?encodeURIComponent:n)(""+F);return S!==i.length&&(F==null||typeof F=="object"&&F.toString===((O=Object.getPrototypeOf((P=Object.getPrototypeOf((w=F.hasOwnProperty)!==null&&w!==void 0?w:gS))!==null&&P!==void 0?P:gS))===null||O===void 0?void 0:O.toString))&&(K=F+"",a.push({start:v.length+E.length,length:K.length,error:`Value of type ${Object.prototype.toString.call(F).slice(8,-1)} is not a valid path parameter`})),v+E+(S===i.length?"":K)},""),d=u.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=m.exec(d))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((v,E)=>v.start-E.start),a.length>0){let v=0;const E=a.reduce((S,w)=>{const P=" ".repeat(w.start-v),O="^".repeat(w.length);return v=w.start+w.length,S+P+O},"");throw new Xn(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${u}
${E}`)}return u}),yf=e3(GI);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qI extends FI{create(e,t){var i;const{api_version:o=this._client.apiVersion}=e,a=nd(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Xn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Xn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(yf`/${o}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.delete(yf`/${o}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.post(yf`/${o}/interactions/${e}/cancel`,i)}get(e,t={},i){var o;const a=t??{},{api_version:u=this._client.apiVersion}=a,d=nd(a,["api_version"]);return this._client.get(yf`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},i),{stream:(o=t==null?void 0:t.stream)!==null&&o!==void 0?o:!1}))}}qI._key=Object.freeze(["interactions"]);class BI extends qI{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t3(n){let e=0;for(const o of n)e+=o.length;const t=new Uint8Array(e);let i=0;for(const o of n)t.set(o,i),i+=o.length;return t}let _f;function Lg(n){let e;return(_f??(e=new globalThis.TextEncoder,_f=e.encode.bind(e)))(n)}let vf;function yS(n){let e;return(vf??(e=new globalThis.TextDecoder,vf=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Lg(e):e;this.buffer=t3([this.buffer,t]);const i=[];let o;for(;(o=n3(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(yS(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,u=yS(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Rd.NEWLINE_CHARS=new Set([`
`,"\r"]);Rd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function n3(n,e){for(let o=e??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function i3(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const id={off:0,error:200,warn:300,info:400,debug:500},_S=(n,e,t)=>{if(n){if(UO(id,n))return n;fn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(id))}`)}};function eu(){}function Ef(n,e,t){return!e||id[n]>id[t]?eu:e[n].bind(e)}const s3={error:eu,warn:eu,info:eu,debug:eu};let vS=new WeakMap;function fn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return s3;const o=vS.get(t);if(o&&o[0]===i)return o[1];const a={error:Ef("error",t,i),warn:Ef("warn",t,i),info:Ef("info",t,i),debug:Ef("debug",t,i)};return vS.set(t,[i,a]),a}const to=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pa{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let o=!1;const a=i?fn(i):console;function u(){return hi(this,arguments,function*(){var m,h,v,E;if(o)throw new Xn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let S=!1;try{try{for(var w=!0,P=pi(r3(e,t)),O;O=yield we(P.next()),m=O.done,!m;w=!0){E=O.value,w=!1;const F=E;if(!S)if(F.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield we(JSON.parse(F.data))}catch(K){throw a.error("Could not parse message into JSON:",F.data),a.error("From chunk:",F.raw),K}}}catch(F){h={error:F}}finally{try{!w&&!m&&(v=P.return)&&(yield we(v.call(P)))}finally{if(h)throw h.error}}S=!0}catch(F){if(xm(F))return yield we(void 0);throw F}finally{S||t.abort()}})}return new pa(u,t,i)}static fromReadableStream(e,t,i){let o=!1;function a(){return hi(this,arguments,function*(){var m,h,v,E;const S=new Rd,w=UI(e);try{for(var P=!0,O=pi(w),F;F=yield we(O.next()),m=F.done,!m;P=!0){E=F.value,P=!1;const K=E;for(const $ of S.decode(K))yield yield we($)}}catch(K){h={error:K}}finally{try{!P&&!m&&(v=O.return)&&(yield we(v.call(O)))}finally{if(h)throw h.error}}for(const K of S.flush())yield yield we(K)})}function u(){return hi(this,arguments,function*(){var m,h,v,E;if(o)throw new Xn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let S=!1;try{try{for(var w=!0,P=pi(a()),O;O=yield we(P.next()),m=O.done,!m;w=!0){E=O.value,w=!1;const F=E;S||F&&(yield yield we(JSON.parse(F)))}}catch(F){h={error:F}}finally{try{!w&&!m&&(v=P.return)&&(yield we(v.call(P)))}finally{if(h)throw h.error}}S=!0}catch(F){if(xm(F))return yield we(void 0);throw F}finally{S||t.abort()}})}return new pa(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),o=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new pa(()=>o(e),this.controller,this.client),new pa(()=>o(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return kI({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:a}=await t.next();if(a)return i.close();const u=Lg(JSON.stringify(o)+`
`);i.enqueue(u)}catch(o){i.error(o)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function r3(n,e){return hi(this,arguments,function*(){var i,o,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Xn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Xn("Attempted to iterate over a response with no body");const d=new a3,m=new Rd,h=UI(n.body);try{for(var v=!0,E=pi(o3(h)),S;S=yield we(E.next()),i=S.done,!i;v=!0){u=S.value,v=!1;const w=u;for(const P of m.decode(w)){const O=d.decode(P);O&&(yield yield we(O))}}}catch(w){o={error:w}}finally{try{!v&&!i&&(a=E.return)&&(yield we(a.call(E)))}finally{if(o)throw o.error}}for(const w of m.flush()){const P=d.decode(w);P&&(yield yield we(P))}})}function o3(n){return hi(this,arguments,function*(){var t,i,o,a;let u=new Uint8Array;try{for(var d=!0,m=pi(n),h;h=yield we(m.next()),t=h.done,!t;d=!0){a=h.value,d=!1;const v=a;if(v==null)continue;const E=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?Lg(v):v;let S=new Uint8Array(u.length+E.length);S.set(u),S.set(E,u.length),u=S;let w;for(;(w=i3(u))!==-1;)yield yield we(u.slice(0,w)),u=u.slice(w)}}catch(v){i={error:v}}finally{try{!d&&!t&&(o=m.return)&&(yield we(o.call(m)))}finally{if(i)throw i.error}}u.length>0&&(yield yield we(u))})}class a3{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,o]=l3(e,":");return o.startsWith(" ")&&(o=o.substring(1)),t==="event"?this.event=o:t==="data"&&this.data.push(o),null}}function l3(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function u3(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:o,startTime:a}=e,u=await(async()=>{var d;if(e.options.stream)return fn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):pa.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const m=t.headers.get("content-type"),h=(d=m==null?void 0:m.split(";")[0])===null||d===void 0?void 0:d.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return fn(n).debug(`[${i}] response parsed`,to({retryOfRequestLogID:o,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Og extends Promise{constructor(e,t,i=u3){super(o=>{o(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Og(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HI=Symbol("brand.privateNullableHeaders");function*c3(n){if(!n)return;if(HI in n){const{values:i,nulls:o}=n;yield*i.entries();for(const a of o)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():hS(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const a=hS(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[o,null]),yield[o,d])}}const Kl=n=>{const e=new Headers,t=new Set;for(const i of n){const o=new Set;for(const[a,u]of c3(i)){const d=a.toLowerCase();o.has(d)||(e.delete(a),o.add(d)),u===null?(e.delete(a),t.add(d)):(e.append(a,u),t.delete(d))}}return{[HI]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kp=n=>{var e,t,i,o,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=x2)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||a===void 0?void 0:a.call(o,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var zI;class bd{constructor(e){var t,i,o,a,u,d,m,{baseURL:h=Kp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=Kp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:E="v1beta"}=e,S=nd(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:v,apiVersion:E},S),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(i=w.timeout)!==null&&i!==void 0?i:bd.DEFAULT_TIMEOUT,this.logger=(o=w.logger)!==null&&o!==void 0?o:console;const P="warn";this.logLevel=P,this.logLevel=(u=(a=_S(w.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:_S(Kp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:P,this.fetchOptions=w.fetchOptions,this.maxRetries=(d=w.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(m=w.fetch)!==null&&m!==void 0?m:zO(),this.encoder=KO,this._options=w,this.apiKey=v,this.apiVersion=E,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Kl([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Kl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Kl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new Xn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${da}`}defaultIdempotencyKey(){return`stainless-node-retry-${xO()}`}makeStatusError(e,t,i,o){return dn.generate(e,t,i,o)}buildURL(e,t,i){const o=!this.baseURLOverridden()&&i||this.baseURL,a=DO(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return kO(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:t},o)))}request(e,t=null){return new Og(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var o,a,u;const d=await e,m=(o=d.maxRetries)!==null&&o!==void 0?o:this.maxRetries;t==null&&(t=m),await this.prepareOptions(d);const{req:h,url:v,timeout:E}=await this.buildRequest(d,{retryCount:m-t});await this.prepareRequest(h,{url:v,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=i===void 0?"":`, retryOf: ${i}`,P=Date.now();if(fn(this).debug(`[${S}] sending request`,to({retryOfRequestLogID:i,method:d.method,url:v,options:d,headers:h.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new Dm;const O=new AbortController,F=await this.fetchWithTimeout(v,h,E,O).catch(Mm),K=Date.now();if(F instanceof globalThis.Error){const W=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new Dm;const ie=xm(F)||/timed? ?out/i.test(String(F)+("cause"in F?String(F.cause):""));if(t)return fn(this).info(`[${S}] connection ${ie?"timed out":"failed"} - ${W}`),fn(this).debug(`[${S}] connection ${ie?"timed out":"failed"} (${W})`,to({retryOfRequestLogID:i,url:v,durationMs:K-P,message:F.message})),this.retryRequest(d,t,i??S);throw fn(this).info(`[${S}] connection ${ie?"timed out":"failed"} - error; no more retries left`),fn(this).debug(`[${S}] connection ${ie?"timed out":"failed"} (error; no more retries left)`,to({retryOfRequestLogID:i,url:v,durationMs:K-P,message:F.message})),ie?new wI:new wd({cause:F})}const $=`[${S}${w}] ${h.method} ${v} ${F.ok?"succeeded":"failed"} with status ${F.status} in ${K-P}ms`;if(!F.ok){const W=await this.shouldRetry(F);if(t&&W){const M=`retrying, ${t} attempts remaining`;return await YO(F.body),fn(this).info(`${$} - ${M}`),fn(this).debug(`[${S}] response error (${M})`,to({retryOfRequestLogID:i,url:F.url,status:F.status,headers:F.headers,durationMs:K-P})),this.retryRequest(d,t,i??S,F.headers)}const ie=W?"error; no more retries left":"error; not retryable";fn(this).info(`${$} - ${ie}`);const ae=await F.text().catch(M=>Mm(M).message),j=OO(ae),N=j?void 0:ae;throw fn(this).debug(`[${S}] response error (${ie})`,to({retryOfRequestLogID:i,url:F.url,status:F.status,headers:F.headers,message:N,durationMs:Date.now()-P})),this.makeStatusError(F.status,j,N,F.headers)}return fn(this).info($),fn(this).debug(`[${S}] response start`,to({retryOfRequestLogID:i,url:F.url,status:F.status,headers:F.headers,durationMs:K-P})),{response:F,options:d,controller:O,requestLogID:S,retryOfRequestLogID:i,startTime:P}}async fetchWithTimeout(e,t,i,o){const a=t||{},{signal:u,method:d}=a,m=nd(a,["signal","method"]),h=this._makeAbort(o);u&&u.addEventListener("abort",h,{once:!0});const v=setTimeout(h,i),E=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,S=Object.assign(Object.assign(Object.assign({signal:o.signal},E?{duplex:"half"}:{}),{method:"GET"}),m);d&&(S.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,S)}finally{clearTimeout(v)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,o){var a;let u;const d=o==null?void 0:o.get("retry-after-ms");if(d){const h=parseFloat(d);Number.isNaN(h)||(u=h)}const m=o==null?void 0:o.get("retry-after");if(m&&!u){const h=parseFloat(m);Number.isNaN(h)?u=Date.parse(m)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await FO(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,o,a;const u=Object.assign({},e),{method:d,path:m,query:h,defaultBaseURL:v}=u,E=this.buildURL(m,h,v);"timeout"in u&&LO("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:w}=this.buildBody({options:u}),P=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:P},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:E,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:o}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Kl([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),HO()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(d),d.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Kl([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:JO(e)}:this.encoder({body:e,headers:i})}}bd.DEFAULT_TIMEOUT=6e4;class zt extends bd{constructor(){super(...arguments),this.interactions=new BI(this)}}zI=zt;zt.GeminiNextGenAPIClient=zI;zt.GeminiNextGenAPIClientError=Xn;zt.APIError=dn;zt.APIConnectionError=wd;zt.APIConnectionTimeoutError=wI;zt.APIUserAbortError=Dm;zt.NotFoundError=xI;zt.ConflictError=MI;zt.RateLimitError=PI;zt.BadRequestError=RI;zt.AuthenticationError=bI;zt.InternalServerError=VI;zt.PermissionDeniedError=NI;zt.UnprocessableEntityError=DI;zt.toFile=jO;zt.Interactions=BI;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f3(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function d3(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function h3(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function p3(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function m3(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&p(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(n,["learningRateMultiplier"]);if(u!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&p(e,["tuningTask","hyperparameters","batchSize"],d);const m=f(n,["learningRate"]);if(e!==void 0&&m!=null&&p(e,["tuningTask","hyperparameters","learningRate"],m),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(f(n,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return i}function g3(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const j=f(n,["validationDataset"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec"],$p(j))}else if(o==="PREFERENCE_TUNING"){const j=f(n,["validationDataset"]);e!==void 0&&j!=null&&p(e,["preferenceOptimizationSpec"],$p(j))}else if(o==="DISTILLATION"){const j=f(n,["validationDataset"]);e!==void 0&&j!=null&&p(e,["distillationSpec"],$p(j))}const a=f(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&p(e,["tunedModelDisplayName"],a);const u=f(n,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const j=f(n,["epochCount"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],j)}else if(d==="PREFERENCE_TUNING"){const j=f(n,["epochCount"]);e!==void 0&&j!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],j)}else if(d==="DISTILLATION"){const j=f(n,["epochCount"]);e!==void 0&&j!=null&&p(e,["distillationSpec","hyperParameters","epochCount"],j)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const j=f(n,["learningRateMultiplier"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],j)}else if(m==="PREFERENCE_TUNING"){const j=f(n,["learningRateMultiplier"]);e!==void 0&&j!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],j)}else if(m==="DISTILLATION"){const j=f(n,["learningRateMultiplier"]);e!==void 0&&j!=null&&p(e,["distillationSpec","hyperParameters","learningRateMultiplier"],j)}let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const j=f(n,["exportLastCheckpointOnly"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],j)}else if(h==="PREFERENCE_TUNING"){const j=f(n,["exportLastCheckpointOnly"]);e!==void 0&&j!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],j)}else if(h==="DISTILLATION"){const j=f(n,["exportLastCheckpointOnly"]);e!==void 0&&j!=null&&p(e,["distillationSpec","exportLastCheckpointOnly"],j)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const j=f(n,["adapterSize"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],j)}else if(v==="PREFERENCE_TUNING"){const j=f(n,["adapterSize"]);e!==void 0&&j!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],j)}else if(v==="DISTILLATION"){const j=f(n,["adapterSize"]);e!==void 0&&j!=null&&p(e,["distillationSpec","hyperParameters","adapterSize"],j)}let E=f(t,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const j=f(n,["tuningMode"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","tuningMode"],j)}const S=f(n,["customBaseModel"]);e!==void 0&&S!=null&&p(e,["customBaseModel"],S);let w=f(t,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){const j=f(n,["batchSize"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","hyperParameters","batchSize"],j)}let P=f(t,["config","method"]);if(P===void 0&&(P="SUPERVISED_FINE_TUNING"),P==="SUPERVISED_FINE_TUNING"){const j=f(n,["learningRate"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRate"],j)}const O=f(n,["labels"]);e!==void 0&&O!=null&&p(e,["labels"],O);const F=f(n,["beta"]);e!==void 0&&F!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],F);const K=f(n,["baseTeacherModel"]);e!==void 0&&K!=null&&p(e,["distillationSpec","baseTeacherModel"],K);const $=f(n,["tunedTeacherModelSource"]);e!==void 0&&$!=null&&p(e,["distillationSpec","tunedTeacherModelSource"],$);const W=f(n,["sftLossWeightMultiplier"]);e!==void 0&&W!=null&&p(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],W);const ie=f(n,["outputUri"]);e!==void 0&&ie!=null&&p(e,["outputUri"],ie);const ae=f(n,["encryptionSpec"]);return e!==void 0&&ae!=null&&p(e,["encryptionSpec"],ae),i}function y3(n,e){const t={},i=f(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&p(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&b3(a);const u=f(n,["config"]);return u!=null&&m3(u,t),t}function _3(n,e){const t={},i=f(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&p(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&N3(a,t,e);const u=f(n,["config"]);return u!=null&&g3(u,t,e),t}function v3(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function E3(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function T3(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function S3(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function A3(n,e){const t={},i=f(n,["config"]);return i!=null&&T3(i,t),t}function C3(n,e){const t={},i=f(n,["config"]);return i!=null&&S3(i,t),t}function I3(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=f(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>JI(d))),p(t,["tuningJobs"],u)}return t}function w3(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=f(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>km(d))),p(t,["tuningJobs"],u)}return t}function R3(n,e){const t={},i=f(n,["name"]);i!=null&&p(t,["model"],i);const o=f(n,["name"]);return o!=null&&p(t,["endpoint"],o),t}function b3(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(t,["examples","examples"],o)}return t}function N3(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(o==="DISTILLATION"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(a==="DISTILLATION"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function JI(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const a=f(n,["state"]);a!=null&&p(t,["state"],aI(a));const u=f(n,["createTime"]);u!=null&&p(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&p(t,["startTime"],d);const m=f(n,["tuningTask","completeTime"]);m!=null&&p(t,["endTime"],m);const h=f(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const v=f(n,["description"]);v!=null&&p(t,["description"],v);const E=f(n,["baseModel"]);E!=null&&p(t,["baseModel"],E);const S=f(n,["_self"]);return S!=null&&p(t,["tunedModel"],R3(S)),t}function km(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const a=f(n,["state"]);a!=null&&p(t,["state"],aI(a));const u=f(n,["createTime"]);u!=null&&p(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&p(t,["startTime"],d);const m=f(n,["endTime"]);m!=null&&p(t,["endTime"],m);const h=f(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const v=f(n,["error"]);v!=null&&p(t,["error"],v);const E=f(n,["description"]);E!=null&&p(t,["description"],E);const S=f(n,["baseModel"]);S!=null&&p(t,["baseModel"],S);const w=f(n,["tunedModel"]);w!=null&&p(t,["tunedModel"],w);const P=f(n,["preTunedModel"]);P!=null&&p(t,["preTunedModel"],P);const O=f(n,["supervisedTuningSpec"]);O!=null&&p(t,["supervisedTuningSpec"],O);const F=f(n,["preferenceOptimizationSpec"]);F!=null&&p(t,["preferenceOptimizationSpec"],F);const K=f(n,["distillationSpec"]);K!=null&&p(t,["distillationSpec"],K);const $=f(n,["tuningDataStats"]);$!=null&&p(t,["tuningDataStats"],$);const W=f(n,["encryptionSpec"]);W!=null&&p(t,["encryptionSpec"],W);const ie=f(n,["partnerModelTuningSpec"]);ie!=null&&p(t,["partnerModelTuningSpec"],ie);const ae=f(n,["customBaseModel"]);ae!=null&&p(t,["customBaseModel"],ae);const j=f(n,["experiment"]);j!=null&&p(t,["experiment"],j);const N=f(n,["labels"]);N!=null&&p(t,["labels"],N);const x=f(n,["outputUri"]);x!=null&&p(t,["outputUri"],x);const M=f(n,["pipelineJob"]);M!=null&&p(t,["pipelineJob"],M);const L=f(n,["serviceAccount"]);L!=null&&p(t,["serviceAccount"],L);const U=f(n,["tunedModelDisplayName"]);U!=null&&p(t,["tunedModelDisplayName"],U);const q=f(n,["veoTuningSpec"]);return q!=null&&p(t,["veoTuningSpec"],q),t}function x3(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const a=f(n,["metadata"]);a!=null&&p(t,["metadata"],a);const u=f(n,["done"]);u!=null&&p(t,["done"],u);const d=f(n,["error"]);return d!=null&&p(t,["error"],d),t}function $p(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&p(t,["validationDatasetUri"],i);const o=f(n,["vertexDatasetResource"]);return o!=null&&p(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class M3 extends Ts{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new yo(vs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:Sm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=E3(e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>km(v))}else{const h=v3(e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>JI(v))}}async listInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=C3(e);return d=he("tuningJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=w3(v),S=new YT;return Object.assign(S,E),S})}else{const h=A3(e);return d=he("tunedModels",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=I3(v),S=new YT;return Object.assign(S,E),S})}}async cancel(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=d3(e);return d=he("{name}:cancel",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=p3(v),S=new KT;return Object.assign(S,E),S})}else{const h=f3(e);return d=he("{name}:cancel",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=h3(v),S=new KT;return Object.assign(S,E),S})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=_3(e,e);return a=he("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>km(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=y3(e);return a=he("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>x3(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D3{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const P3=1024*1024*8,V3=3,k3=1e3,U3=2,sd="x-goog-upload-status";async function L3(n,e,t){var i;const o=await YI(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[sd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function O3(n,e,t){var i;const o=await YI(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[sd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=tI(a),d=new Mg;return Object.assign(d,u),d}async function YI(n,e,t){var i,o;let a=0,u=0,d=new Cm(new Response),m="upload";for(a=n.size;u<a;){const h=Math.min(P3,a-u),v=n.slice(u,u+h);u+h>=a&&(m+=", finalize");let E=0,S=k3;for(;E<V3&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[sd]));)E++,await G3(S),S=S*U3;if(u+=h,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[sd])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function F3(n){return{size:n.size,type:n.type}}function G3(n){return new Promise(e=>setTimeout(e,n))}class q3{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await L3(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await O3(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await F3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B3{create(e,t,i){return new H3(e,t,i)}}class H3{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ES="x-goog-api-key";class z3{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(ES)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ES,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J3="gl-node/";class Y3{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new zt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout,maxRetries:(e=t==null?void 0:t.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=i.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=V2(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new z3(this.apiKey);this.apiClient=new F4({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:J3+"web",uploader:new q3,downloader:new D3}),this.models=new sO(this.apiClient),this.live=new j4(this.apiClient,o,new B3),this.batches=new ck(this.apiClient),this.chats=new Jk(this.models,this.apiClient),this.caches=new Bk(this.apiClient),this.files=new iU(this.apiClient),this.operations=new rO(this.apiClient),this.authTokens=new TO(this.apiClient),this.tunings=new M3(this.apiClient),this.fileSearchStores=new NO(this.apiClient)}}const Nd=new Y3({apiKey:"AIzaSyCnZWuqbyyUw86ajDqzT_X3R06JGIACkuk"}),K3=async n=>{const e=`
    Find 4-5 active job listings for: "${n}".
    
    Return the output strictly as a raw JSON array.
    Each object in the array must have these fields:
    - "company": (string) Company Name
    - "title": (string) Job Title
    - "location": (string) Location
    - "email": (string or null) Contact email if found
    - "snippet": (string) Short description of the role
    - "url": (string or null) Link to the job
    - "fullDescription": (string) Full, detailed job description
    - "sourceSite": (string) The name of the website where the job listing was found
  `;try{const i=(await Nd.models.generateContent({model:"gemini-3-flash-preview",contents:e,config:{tools:[{googleSearch:{}}]}})).text||"[]",o=i.replace(/```json/g,"").replace(/```/g,"").trim();try{return JSON.parse(o)}catch{return console.error("Failed to parse job search JSON",i),[]}}catch(t){throw console.error("Gemini search error:",t),t}};async function*$3(n,e="recruiters",t=10,i="",o=[]){const a=`
    Find ~${t} professional contacts related to: "${n}" in "${i||"Anywhere"}".
    Focus: ${e}.
    Return JSON objects, one per line.
    {
      "email": "string",
      "type": "recruitment" | "personal" | "general",
      "name": "string",
      "role": "string",
      "company": "string",
      "snippet": "string (Context found)",
      "sourceUrl": "string"
    }
  `;try{const u=await Nd.models.generateContentStream({model:"gemini-3-flash-preview",contents:a,config:{tools:[{googleSearch:{}}]}});let d="";for await(const m of u){const h=m.text||"";d+=h;let v=d.split(`
`);d=v.pop()||"";for(const E of v){const S=E.trim();if(S&&S.startsWith("{")&&S.endsWith("}"))try{yield{type:"result",data:JSON.parse(S)}}catch{}}}}catch(u){throw u}}const Q3=async(n,e)=>{const t=`
    Write a highly tailored and professional cold email application for a Flutter job.
    RECIPIENT: ${e.name} at ${e.company}.
    SENDER: ${n.name}, ${n.yearsExperience} yrs exp, Skills: ${n.skills}. Bio: ${n.bio}.
    Output JSON with "subject" and "body".
  `;try{const i=await Nd.models.generateContent({model:"gemini-3-pro-preview",contents:t,config:{responseMimeType:"application/json",responseSchema:{type:Tn.OBJECT,properties:{subject:{type:Tn.STRING},body:{type:Tn.STRING}},required:["subject","body"]}}});return JSON.parse(i.text||"{}")}catch(i){throw i}},X3=async(n,e)=>{const t=`
    Generate a high-converting, personalized application email based on the following details.
    CANDIDATE: ${n.name}, ${n.yearsExperience} yrs exp, Skills: ${n.skills}.
    JOB: ${e.companyName}, ${e.jobTitle}.
    DESCRIPTION: ${e.jobDescription}
    Output JSON with 'subject' and 'body'.
  `;try{const i=await Nd.models.generateContent({model:"gemini-3-pro-preview",contents:t,config:{responseMimeType:"application/json",responseSchema:{type:Tn.OBJECT,properties:{subject:{type:Tn.STRING},body:{type:Tn.STRING}},required:["subject","body"]}}});return JSON.parse(i.text||"{}")}catch(i){throw i}},jt=({children:n,variant:e="primary",isLoading:t,className:i="",disabled:o,...a})=>{const u="px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-offset-1",d={primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-md focus:ring-blue-500",secondary:"bg-slate-800 hover:bg-slate-900 text-white shadow-md focus:ring-slate-500",outline:"border border-slate-300 bg-white hover:bg-slate-50 text-slate-700 focus:ring-slate-300"};return I.jsx("button",{disabled:t||o,className:`${u} ${d[e]} ${i} ${t||o?"opacity-60 cursor-not-allowed":""}`,...a,children:t?I.jsxs(I.Fragment,{children:[I.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[I.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),I.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Thinking..."]}):n})};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),j3=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),TS=n=>{const e=j3(n);return e.charAt(0).toUpperCase()+e.slice(1)},KI=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),Z3=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=Ee.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:a,iconNode:u,...d},m)=>Ee.createElement("svg",{ref:m,...e6,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:KI("lucide",o),...!a&&!Z3(d)&&{"aria-hidden":"true"},...d},[...u.map(([h,v])=>Ee.createElement(h,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(n,e)=>{const t=Ee.forwardRef(({className:i,...o},a)=>Ee.createElement(t6,{ref:a,iconNode:e,className:KI(`lucide-${W3(TS(n))}`,`lucide-${n}`,i),...o}));return t.displayName=TS(n),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],i6=We("arrow-down",n6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Fg=We("briefcase",s6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],o6=We("check",r6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$I=We("chevron-down",a6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],u6=We("chevron-left",l6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],QI=We("chevron-up",c6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],d6=We("clipboard-list",f6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],lu=We("copy",h6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],rd=We("external-link",p6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],g6=We("file-text",m6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],_6=We("globe",y6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8",key:"18ogeb"}]],E6=We("infinity",v6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],SS=We("link",T6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],XI=We("loader-circle",S6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],WI=We("log-in",A6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],I6=We("lock",C6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],R6=We("log-out",w6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],od=We("mail",b6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],x6=We("map-pin",N6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],D6=We("menu",M6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],V6=We("save",P6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Gg=We("search",k6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],jI=We("send",U6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Tu=We("sparkles",L6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],AS=We("square-check-big",O6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],CS=We("square",F6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],q6=We("terminal",G6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Um=We("triangle-alert",B6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],z6=We("user-plus",H6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ZI=We("user",J6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],K6=We("x",Y6),$6=({userProfile:n})=>{const[e,t]=Ee.useState("Flutter Developer Remote"),[i,o]=Ee.useState([]),[a,u]=Ee.useState(!1),[d,m]=Ee.useState(!0),[h,v]=Ee.useState(null),[E,S]=Ee.useState({companyName:"",jobTitle:"Flutter Developer",recruiterEmail:"",jobDescription:"",hiringManagerName:""}),[w,P]=Ee.useState(null),[O,F]=Ee.useState(!1),[K,$]=Ee.useState(null),W=N=>{const{name:x,value:M}=N.target;S(L=>({...L,[x]:M}))},ie=async N=>{N.preventDefault(),u(!0),o([]),$(null);try{const x=await K3(e);o(x)}catch{$("Failed to search jobs.")}finally{u(!1)}},ae=N=>{S({companyName:N.company,jobTitle:N.title,recruiterEmail:N.email||"",jobDescription:N.fullDescription||N.snippet,hiringManagerName:""}),m(!1),P(null)},j=async N=>{if(N.preventDefault(),!n.name){$("Please complete your profile first.");return}F(!0),P(null);try{const x=await X3(n,E);P(x)}catch{$("Failed to generate email.")}finally{F(!1)}};return I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 h-full",children:[I.jsxs("div",{className:"flex flex-col gap-6 overflow-y-auto custom-scrollbar",children:[I.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden shrink-0",children:[I.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-100 flex items-center justify-between cursor-pointer hover:bg-slate-100 transition-colors",onClick:()=>m(!d),children:[I.jsxs("h2",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[I.jsx(Gg,{className:"w-4 h-4 text-blue-600"}),"Direct Job Search"]}),I.jsx(i6,{className:`w-4 h-4 text-slate-400 transition-transform ${d?"rotate-180":""}`})]}),d&&I.jsxs("div",{className:"p-4 space-y-4",children:[I.jsxs("form",{onSubmit:ie,className:"flex gap-2",children:[I.jsx("input",{type:"text",value:e,onChange:N=>t(N.target.value),className:"flex-1 px-4 py-2.5 bg-white text-slate-900 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. Flutter Engineer"}),I.jsx(jt,{type:"submit",isLoading:a,className:"rounded-xl px-6",children:"Find"})]}),I.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-1 custom-scrollbar",children:i.map((N,x)=>{const M=h===x;return I.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 bg-white hover:border-blue-300 transition-all shadow-sm",children:[I.jsxs("div",{className:"flex justify-between items-start mb-2",children:[I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-slate-900 text-sm",children:N.title}),I.jsx("p",{className:"text-xs text-blue-600 font-bold",children:N.company})]}),N.sourceSite&&I.jsx("span",{className:"bg-slate-50 text-slate-400 text-[10px] font-bold px-2 py-0.5 rounded border border-slate-100",children:N.sourceSite})]}),I.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-400 mb-3",children:[I.jsxs("span",{className:"flex items-center gap-1",children:[I.jsx(x6,{className:"w-3 h-3"})," ",N.location||"Remote"]}),N.url&&I.jsxs("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-blue-600 font-bold hover:underline",children:[I.jsx(rd,{className:"w-3 h-3"})," Source"]})]}),I.jsx("div",{className:`text-xs text-slate-600 leading-relaxed mb-4 p-3 bg-slate-50 rounded-lg border border-slate-100 ${M?"":"line-clamp-2"}`,children:M&&N.fullDescription||N.snippet}),I.jsxs("div",{className:"flex gap-2",children:[I.jsx(jt,{variant:"outline",onClick:()=>v(M?null:x),className:"text-[10px] py-1.5 h-auto px-3 rounded-lg flex-1",children:M?I.jsxs(I.Fragment,{children:[I.jsx(QI,{className:"w-3 h-3"})," Hide"]}):I.jsxs(I.Fragment,{children:[I.jsx($I,{className:"w-3 h-3"})," Full Context"]})}),I.jsx(jt,{variant:"primary",onClick:()=>ae(N),className:"flex-1 text-[10px] py-1.5 h-auto rounded-lg",children:"Use this Job"})]})]},x)})})]})]}),I.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 shrink-0",children:[I.jsxs("h2",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[I.jsx(Fg,{className:"w-5 h-5 text-blue-600"}),"Active Application Details"]}),I.jsxs("form",{onSubmit:j,className:"space-y-4",children:[I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{className:"space-y-1",children:[I.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Company"}),I.jsx("input",{required:!0,type:"text",name:"companyName",value:E.companyName,onChange:W,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:bg-white focus:ring-2 focus:ring-blue-100 transition-all"})]}),I.jsxs("div",{className:"space-y-1",children:[I.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),I.jsx("input",{required:!0,type:"text",name:"jobTitle",value:E.jobTitle,onChange:W,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:bg-white focus:ring-2 focus:ring-blue-100 transition-all"})]})]}),I.jsxs("div",{className:"space-y-1",children:[I.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Description"}),I.jsx("textarea",{required:!0,name:"jobDescription",value:E.jobDescription,onChange:W,rows:8,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:bg-white focus:ring-2 focus:ring-blue-100 transition-all",placeholder:"Paste requirements here..."})]}),I.jsxs(jt,{type:"submit",isLoading:O,className:"w-full py-3 rounded-xl shadow-lg shadow-blue-100",children:[I.jsx(Tu,{className:"w-4 h-4"})," Generate AI Draft"]})]})]})]}),I.jsx("div",{className:"flex flex-col gap-6",children:I.jsxs("div",{className:`bg-white rounded-2xl shadow-sm border border-slate-200 p-8 h-full flex flex-col ${w?"":"justify-center items-center"}`,children:[!w&&!O&&I.jsxs("div",{className:"text-center text-slate-400",children:[I.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-6",children:I.jsx(od,{className:"w-8 h-8 opacity-20"})}),I.jsx("h3",{className:"text-slate-800 font-bold",children:"No Draft Ready"}),I.jsx("p",{className:"text-sm mt-2",children:"Select a job or fill the form to start."})]}),O&&I.jsxs("div",{className:"text-center",children:[I.jsx(XI,{className:"w-12 h-12 text-blue-500 animate-spin mx-auto mb-4"}),I.jsx("p",{className:"text-slate-800 font-bold",children:"Analyzing skills match..."}),I.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Crafting a high-converting email"})]}),w&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"mb-8",children:[I.jsxs("div",{className:"flex justify-between items-center mb-2",children:[I.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Subject Line"}),I.jsx("button",{onClick:()=>navigator.clipboard.writeText(w.subject),className:"text-blue-600 hover:text-blue-800 transition-colors",children:I.jsx(lu,{className:"w-4 h-4"})})]}),I.jsx("h3",{className:"text-xl font-bold text-slate-900 bg-slate-50 p-4 rounded-xl border border-slate-200 leading-tight",children:w.subject})]}),I.jsxs("div",{className:"flex-1 flex flex-col",children:[I.jsxs("div",{className:"flex justify-between items-center mb-2",children:[I.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Message Body"}),I.jsx("button",{onClick:()=>navigator.clipboard.writeText(w.body),className:"text-blue-600 hover:text-blue-800 transition-colors",children:I.jsx(lu,{className:"w-4 h-4"})})]}),I.jsx("div",{className:"flex-1 whitespace-pre-wrap text-slate-700 text-sm leading-relaxed p-6 bg-slate-50 rounded-2xl border border-slate-200 overflow-y-auto",children:w.body})]}),I.jsxs("div",{className:"flex gap-3 mt-8",children:[I.jsxs(jt,{variant:"outline",onClick:()=>navigator.clipboard.writeText(w.body),className:"flex-1 py-3 rounded-xl",children:[I.jsx(lu,{className:"w-4 h-4"})," Copy All"]}),I.jsxs(jt,{variant:"primary",className:"flex-1 py-3 rounded-xl",onClick:()=>window.open(`mailto:${E.recruiterEmail}?subject=${encodeURIComponent(w.subject)}&body=${encodeURIComponent(w.body)}`),children:[I.jsx(jI,{className:"w-4 h-4"})," Send Now"]})]})]})]})})]})},Q6=({userProfile:n})=>{const[e,t]=Ee.useState("Flutter Developer Hiring"),[i,o]=Ee.useState("active_hiring"),[a,u]=Ee.useState("Remote"),[d,m]=Ee.useState([]),h=Ee.useRef([]),[v,E]=Ee.useState(null),[S,w]=Ee.useState(!1),[P,O]=Ee.useState([]),[F,K]=Ee.useState(!1),$=Ee.useRef(!1),W=Ee.useRef(null),[ie,ae]=Ee.useState([]),[j,N]=Ee.useState(!1),[x,M]=Ee.useState(null),[L,U]=Ee.useState(!1);Ee.useEffect(()=>{var de;(de=W.current)==null||de.scrollIntoView({behavior:"smooth"})},[P]),Ee.useEffect(()=>{h.current=d},[d]);const q=async(de,V=!1)=>{if(de&&de.preventDefault(),!!e.trim()){w(!0),$.current=!1,V?O(ee=>[...ee,"--- Starting next Infinity batch ---"]):(m([]),h.current=[],O(["Initializing search agent..."]),ae([]));try{const ee=V?h.current.map(ce=>ce.name||ce.company||"").filter(Boolean).slice(-40):[],le=$3(e,i,10,a,ee);for await(const ce of le){if($.current)break;ce.type==="log"?O(Te=>[...Te.slice(-10),ce.message]):ce.type==="result"&&m(Te=>Te.some(Me=>Me.email===ce.data.email)?Te:[...Te,ce.data])}F&&!$.current?(O(ce=>[...ce,"Cooldown before next batch..."]),setTimeout(()=>q(void 0,!0),3e3)):w(!1)}catch{O(le=>[...le,"Search interrupted."]),w(!1)}}},D=()=>{$.current=!0,K(!1),w(!1),O(de=>[...de,"Stopping search agent..."])},xe=de=>{ie.some(V=>V.email===de.email)?ae(V=>V.filter(ee=>ee.email!==de.email)):ae(V=>[...V,de])},nt=()=>{ie.length===d.length?ae([]):ae([...d])},Z=()=>{const de=ie.map(V=>V.email).join(", ");navigator.clipboard.writeText(de),O(V=>[...V,`Copied ${ie.length} emails to clipboard.`])},fe=()=>{const de=ie.map(V=>`${V.name||"Unknown"} (${V.role} @ ${V.company}) - ${V.email}`).join(`
`);navigator.clipboard.writeText(de),O(V=>[...V,`Copied details for ${ie.length} leads.`])},me=async de=>{if(!(n!=null&&n.name)){O(V=>[...V,"Error: Profile incomplete."]);return}N(!0),U(!0),M(null);try{const V=await Q3(n,de);M(V)}catch{O(ee=>[...ee,"Failed to draft email."])}finally{U(!1)}},ke=de=>{switch(de){case"recruitment":return"bg-green-100 text-green-700 border-green-200";case"personal":return"bg-purple-100 text-purple-700 border-purple-200";case"general":return"bg-blue-100 text-blue-700 border-blue-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}};return I.jsxs("div",{className:"max-w-5xl mx-auto h-full flex flex-col relative pb-32",children:[I.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden mb-6",children:[I.jsxs("div",{className:"p-6 border-b bg-slate-50/50 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[I.jsxs("div",{children:[I.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[I.jsx(Gg,{className:"w-5 h-5 text-blue-600"}),"Lead Prospector & Infinity Finder"]}),I.jsx("p",{className:"text-sm text-slate-500",children:"Auto-discover contacts and job posts from across the web."})]}),I.jsx("div",{className:"flex items-center gap-2",children:I.jsxs("button",{onClick:()=>K(!F),className:`flex items-center gap-2 px-4 py-2 rounded-full border transition-all font-bold text-xs ${F?"bg-orange-500 border-orange-600 text-white shadow-lg":"bg-white border-slate-200 text-slate-500"}`,children:[I.jsx(E6,{className:`w-4 h-4 ${F?"animate-pulse":""}`}),"Infinity Mode ",F?"ON":"OFF"]})})]}),I.jsxs("div",{className:"p-6 space-y-6",children:[I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:["active_hiring","recruiters","decision_makers"].map(de=>I.jsxs("label",{className:`flex items-center gap-3 p-4 rounded-xl border cursor-pointer transition-all ${i===de?"border-blue-500 bg-blue-50 ring-2 ring-blue-100":"border-slate-200 hover:border-slate-300 bg-white"}`,children:[I.jsx("input",{type:"radio",name:"strategy",checked:i===de,onChange:()=>o(de),className:"hidden"}),I.jsxs("div",{className:"flex flex-col",children:[I.jsx("span",{className:"text-sm font-bold text-slate-800 capitalize",children:de.replace("_"," ")}),I.jsxs("span",{className:"text-[10px] text-slate-400",children:["Targeting ",de," strategy"]})]})]},de))}),I.jsx("form",{onSubmit:q,className:"space-y-4",children:I.jsxs("div",{className:"flex gap-2",children:[I.jsx("input",{type:"text",value:e,onChange:de=>t(de.target.value),className:"flex-1 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all font-medium",placeholder:"Search query (e.g. Flutter Engineer hiring)"}),I.jsx("input",{type:"text",value:a,onChange:de=>u(de.target.value),className:"w-32 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all font-medium",placeholder:"Location"}),S?I.jsx(jt,{onClick:D,variant:"secondary",className:"px-6 rounded-xl",children:"Stop"}):I.jsx(jt,{type:"submit",className:"px-8 rounded-xl shadow-blue-200",children:"Search"})]})}),P.length>0&&I.jsxs("div",{className:"bg-slate-900 rounded-xl p-4 font-mono text-xs shadow-inner",children:[I.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b border-slate-800 text-slate-500",children:[I.jsx(q6,{className:"w-3 h-3"}),I.jsx("span",{children:"Agent Logs"}),S&&I.jsx(XI,{className:"w-3 h-3 animate-spin ml-auto"})]}),I.jsxs("div",{className:"space-y-1 h-24 overflow-y-auto custom-scrollbar",children:[P.map((de,V)=>I.jsxs("div",{className:"text-slate-300",children:[I.jsx("span",{className:"text-green-500 mr-2 opacity-50",children:"$"}),de]},V)),I.jsx("div",{ref:W})]})]})]})]}),d.length>0&&I.jsxs("div",{className:"sticky top-0 z-10 bg-slate-50/90 backdrop-blur-md py-3 mb-4 flex flex-wrap items-center justify-between gap-3 border-b border-slate-200",children:[I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsxs("button",{onClick:nt,className:"flex items-center gap-2 text-sm font-bold text-slate-600 hover:text-blue-600 transition-colors",children:[ie.length===d.length?I.jsx(AS,{className:"w-5 h-5 text-blue-600"}):I.jsx(CS,{className:"w-5 h-5"}),"Select All (",d.length,")"]}),ie.length>0&&I.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-bold",children:[ie.length," Selected"]})]}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsxs(jt,{variant:"outline",onClick:Z,disabled:ie.length===0,className:"text-xs h-9 px-3 border-slate-300",children:[I.jsx(od,{className:"w-3.5 h-3.5"})," Copy Emails"]}),I.jsxs(jt,{variant:"outline",onClick:fe,disabled:ie.length===0,className:"text-xs h-9 px-3 border-slate-300",children:[I.jsx(d6,{className:"w-3.5 h-3.5"})," Copy Details"]})]})]}),I.jsx("div",{className:"space-y-4",children:d.map((de,V)=>{const ee=ie.some(ce=>ce.email===de.email),le=v===V;return I.jsx("div",{className:`group rounded-2xl border p-5 transition-all cursor-pointer ${ee?"bg-blue-50 border-blue-400 shadow-md":"bg-white border-slate-200 hover:border-slate-300 hover:shadow-sm"}`,onClick:()=>xe(de),children:I.jsxs("div",{className:"flex items-start gap-4",children:[I.jsx("div",{className:"pt-1",children:ee?I.jsx(AS,{className:"w-6 h-6 text-blue-600"}):I.jsx(CS,{className:"w-6 h-6 text-slate-200 group-hover:text-slate-300 transition-colors"})}),I.jsxs("div",{className:"flex-1",children:[I.jsxs("div",{className:"flex justify-between items-start",children:[I.jsxs("div",{children:[I.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[I.jsx("h3",{className:"font-bold text-slate-800 text-lg leading-none",children:de.name||"Professional Prospect"}),I.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full border uppercase font-bold tracking-tight ${ke(de.type)}`,children:de.type})]}),I.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[I.jsx("span",{className:"font-semibold text-slate-700",children:de.role})," at ",I.jsx("span",{className:"font-bold text-blue-600",children:de.company})]})]}),de.source&&I.jsxs("span",{className:"text-[10px] font-bold text-slate-400 bg-slate-50 px-2 py-1 rounded border border-slate-100 uppercase",children:["via ",de.source]})]}),I.jsxs("div",{className:`mt-3 text-xs text-slate-600 bg-slate-50/50 p-3 rounded-xl border border-slate-100 leading-relaxed relative ${le?"":"line-clamp-2"}`,children:[de.snippet||"No additional context found for this prospect.",!le&&de.snippet&&de.snippet.length>100&&I.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-6 bg-gradient-to-t from-slate-50/80 to-transparent pointer-events-none"})]}),I.jsxs("div",{className:"flex items-center gap-3 mt-4 flex-wrap",onClick:ce=>ce.stopPropagation(),children:[I.jsx("code",{className:"text-[11px] bg-slate-100 border px-3 py-1.5 rounded-lg font-mono text-blue-700 font-bold",children:de.email}),I.jsxs("div",{className:"flex gap-2 ml-auto",children:[de.sourceUrl&&I.jsxs("a",{href:de.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-xs font-bold text-blue-600 hover:bg-blue-50 px-3 py-1.5 rounded-lg transition-colors",children:[I.jsx(rd,{className:"w-4 h-4"})," View Post"]}),I.jsx("button",{onClick:()=>E(le?null:V),className:"flex items-center gap-1 text-xs font-bold text-slate-500 hover:bg-slate-100 px-3 py-1.5 rounded-lg transition-colors",children:le?I.jsxs(I.Fragment,{children:[I.jsx(QI,{className:"w-4 h-4"})," Show Less"]}):I.jsxs(I.Fragment,{children:[I.jsx($I,{className:"w-4 h-4"})," Full Context"]})}),I.jsx(jt,{onClick:()=>me(de),className:"text-xs h-9 px-4 rounded-lg",children:"Draft"})]})]})]})]})},V)})}),j&&I.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:I.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-3xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300",children:[I.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-slate-50",children:[I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-2xl flex items-center justify-center text-blue-600",children:I.jsx(Tu,{className:"w-5 h-5"})}),I.jsxs("div",{children:[I.jsx("h3",{className:"font-bold text-slate-900 leading-tight",children:"AI Generated Pitch"}),I.jsx("p",{className:"text-xs text-slate-500",children:"Tailored to prospect context"})]})]}),I.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:I.jsx(K6,{className:"w-6 h-6 text-slate-400"})})]}),I.jsx("div",{className:"p-8 flex-1 overflow-y-auto space-y-6",children:L?I.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[I.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),I.jsx("p",{className:"text-slate-500 font-bold animate-pulse text-sm",children:"Synthesizing personalized message..."})]}):x&&I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-2",children:"Subject Line"}),I.jsxs("div",{className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl font-bold text-slate-800 flex justify-between items-center",children:[x.subject,I.jsx("button",{onClick:()=>navigator.clipboard.writeText(x.subject),className:"text-slate-400 hover:text-blue-600 transition-colors",children:I.jsx(lu,{className:"w-4 h-4"})})]})]}),I.jsxs("div",{children:[I.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-2",children:"Email Content"}),I.jsx("textarea",{defaultValue:x.body,className:"w-full h-80 p-5 bg-slate-50 border border-slate-200 rounded-2xl text-sm leading-relaxed text-slate-700 outline-none focus:ring-2 focus:ring-blue-100 transition-all font-sans"})]})]})}),I.jsxs("div",{className:"p-6 border-t bg-slate-50 flex justify-end gap-3",children:[I.jsx(jt,{variant:"outline",className:"px-6 rounded-xl",onClick:()=>N(!1),children:"Close"}),x&&I.jsxs(jt,{className:"px-8 rounded-xl shadow-lg shadow-blue-200",onClick:()=>{var V;const de=`https://mail.google.com/mail/?view=cm&fs=1&to=${(V=d.find(ee=>ee.email))==null?void 0:V.email}&su=${encodeURIComponent(x.subject)}&body=${encodeURIComponent(x.body)}`;window.open(de,"_blank")},children:[I.jsx(jI,{className:"w-4 h-4"})," Open in Gmail"]})]})]})}),d.length===0&&!S&&I.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-20 text-center text-slate-400",children:[I.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center shadow-sm mb-6 border border-slate-100",children:I.jsx(od,{className:"w-10 h-10 opacity-20"})}),I.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"No leads discovered yet"}),I.jsxs("p",{className:"max-w-xs text-sm mt-2",children:["Enter a query and toggle ",I.jsx("strong",{children:"Infinity Mode"})," to start your automated hiring search."]})]})]})},X6=({initialProfile:n,onSave:e})=>{const[t,i]=Ee.useState(n),[o,a]=Ee.useState("idle"),[u,d]=Ee.useState(""),[m,h]=Ee.useState(!1);Ee.useEffect(()=>{i(n)},[n]);const v=S=>{const{name:w,value:P}=S.target;i(O=>({...O,[w]:P})),a("idle")},E=async S=>{S.preventDefault(),h(!0),a("idle"),d("");try{await e(t),a("success"),setTimeout(()=>a("idle"),3e3)}catch(w){console.warn("Profile saved locally only. Cloud error:",w.message),a("offline"),w.message.includes("Rules")?d("Check Firestore Security Rules."):d("Cloud sync failed. Check connection."),setTimeout(()=>a("idle"),5e3)}finally{h(!1)}};return I.jsx("div",{className:"max-w-2xl mx-auto",children:I.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[I.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50",children:[I.jsxs("h2",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[I.jsx(ZI,{className:"w-5 h-5 text-blue-600"}),"Your Developer Profile"]}),I.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"The AI uses this information to personalize your application emails."})]}),I.jsxs("form",{onSubmit:E,className:"p-6 space-y-6",children:[I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Full Name"}),I.jsx("input",{type:"text",name:"name",required:!0,value:t.name,onChange:v,className:"w-full px-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"e.g. Jane Doe"})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Years of Experience"}),I.jsx("input",{type:"text",name:"yearsExperience",value:t.yearsExperience,onChange:v,className:"w-full px-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"e.g. 4"})]})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Technical Skills (comma separated)"}),I.jsxs("div",{className:"relative",children:[I.jsx(Fg,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),I.jsx("input",{type:"text",name:"skills",value:t.skills,onChange:v,className:"w-full pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Dart, Flutter, Bloc, Riverpod, Firebase, REST APIs, Git"})]})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Portfolio URL"}),I.jsxs("div",{className:"relative",children:[I.jsx(SS,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),I.jsx("input",{type:"url",name:"portfolioUrl",value:t.portfolioUrl,onChange:v,className:"w-full pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"https://github.com/janedoe"})]})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-sm font-medium text-slate-700",children:"LinkedIn URL"}),I.jsxs("div",{className:"relative",children:[I.jsx(SS,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),I.jsx("input",{type:"url",name:"linkedinUrl",value:t.linkedinUrl,onChange:v,className:"w-full pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"https://linkedin.com/in/janedoe"})]})]})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Short Bio / Summary"}),I.jsxs("div",{className:"relative",children:[I.jsx(g6,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),I.jsx("textarea",{name:"bio",value:t.bio,onChange:v,rows:4,className:"w-full pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Briefly describe your background, strengths, and what you are looking for..."})]})]}),I.jsxs("div",{className:"pt-4 flex items-center justify-end gap-3",children:[o==="success"&&I.jsxs("span",{className:"text-green-600 text-sm font-medium animate-pulse flex items-center gap-1",children:[I.jsx(o6,{className:"w-4 h-4"})," Profile Saved!"]}),o==="offline"&&I.jsxs("div",{className:"flex flex-col items-end",children:[I.jsxs("span",{className:"text-amber-600 text-sm font-medium flex items-center gap-1",children:[I.jsx(Um,{className:"w-4 h-4"})," Saved (Device Only)"]}),I.jsx("span",{className:"text-[10px] text-slate-400",children:u||"Cloud sync failed. Check internet."})]}),I.jsxs(jt,{type:"submit",isLoading:m,children:[I.jsx(V6,{className:"w-4 h-4"}),"Save Profile"]})]})]})]})})},W6=()=>{const{signInWithGoogle:n,loginWithEmail:e,registerWithEmail:t}=bg(),[i,o]=Ee.useState(!1),[a,u]=Ee.useState(null),[d,m]=Ee.useState(""),[h,v]=Ee.useState(""),[E,S]=Ee.useState(""),[w,P]=Ee.useState(!1);Ee.useEffect(()=>{m((()=>{try{return window.location.hostname||window.location.host||new URL(window.location.href).hostname}catch{return"your-preview-domain.com"}})())},[]);const O=async()=>{o(!0),u(null);try{await n()}catch($){K($)}finally{o(!1)}},F=async $=>{if($.preventDefault(),!h||!E){u("Please enter both email and password.");return}o(!0),u(null);try{w?await t(h,E):await e(h,E)}catch(W){K(W)}finally{o(!1)}},K=$=>{console.error($);let W=$.message;if($.code==="auth/invalid-credential"||$.code==="auth/wrong-password")W="Invalid email or password.";else if($.code==="auth/email-already-in-use")W="This email is already registered.";else if($.code==="auth/weak-password")W="Password should be at least 6 characters.";else if($.code==="auth/user-not-found")W="No account found with this email.";else if($.code==="auth/invalid-email")W="Please enter a valid email address.";else if($.code==="auth/popup-closed-by-user")W="Sign in was cancelled.";else if($.code==="auth/configuration-not-found"||$.code==="auth/api-key-not-valid"||$.code==="auth/internal-error")W="Firebase configuration is missing or invalid. Please check firebaseConfig.ts.";else if($.code==="auth/unauthorized-domain"){const ie=d||window.location.hostname||"unknown-domain";u(I.jsxs("div",{className:"flex flex-col items-start w-full text-left bg-red-50 p-4 rounded-lg border border-red-100 animate-in fade-in zoom-in-95 duration-300",children:[I.jsxs("h3",{className:"font-bold text-red-700 mb-2 flex items-center gap-2",children:[I.jsx(Um,{className:"w-5 h-5"}),"Action Required: Authorize Domain"]}),I.jsx("p",{className:"text-sm text-slate-700 mb-4 leading-relaxed",children:"Google Security blocks sign-ins from unknown websites. You must tell Firebase that this preview URL is safe."}),I.jsxs("div",{className:"w-full bg-white p-4 rounded-lg border-2 border-red-100 mb-4 shadow-sm relative overflow-hidden group",children:[I.jsx("div",{className:"absolute top-0 left-0 bg-red-100 text-red-700 text-[10px] font-bold px-2 py-0.5 rounded-br",children:"STEP 1: COPY THIS"}),I.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[I.jsx("div",{className:"flex-1 bg-slate-50 p-2 rounded border border-dashed border-slate-200 overflow-hidden",children:I.jsx("code",{className:"block font-mono font-bold text-slate-800 text-sm break-all select-all",children:ie})}),I.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(ie);const ae=document.getElementById("copy-btn-text");ae&&(ae.innerText="Copied!"),setTimeout(()=>{ae&&(ae.innerText="Copy")},2e3)},className:"flex items-center gap-1 text-sm bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-all shadow-sm active:scale-95 shrink-0",children:[I.jsx(lu,{className:"w-4 h-4"}),I.jsx("span",{id:"copy-btn-text",children:"Copy"})]})]})]}),I.jsxs("div",{className:"w-full bg-slate-50 p-4 rounded-lg border border-slate-200",children:[I.jsx("div",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider mb-2",children:"STEP 2: ADD TO FIREBASE"}),I.jsxs("ol",{className:"list-decimal pl-4 space-y-2 text-sm text-slate-600",children:[I.jsxs("li",{children:["Open ",I.jsxs("a",{href:"https://console.firebase.google.com/project/flutter-apply/authentication/settings",target:"_blank",rel:"noreferrer",className:"text-blue-600 underline font-medium hover:text-blue-800 flex items-center gap-1 inline-flex",children:["Firebase Console ",I.jsx(rd,{className:"w-3 h-3"})]})]}),I.jsxs("li",{children:["Go to ",I.jsx("strong",{children:"Authentication"})," > ",I.jsx("strong",{children:"Settings"})," > ",I.jsx("strong",{children:"Authorized Domains"})," tab."]}),I.jsxs("li",{children:["Click the blue ",I.jsx("strong",{children:"Add domain"})," button."]}),I.jsx("li",{children:"Paste the domain from Step 1 and Save."})]})]})]}));return}u(W)};return _2?I.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:I.jsxs("div",{className:"bg-white max-w-md w-full rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:[I.jsxs("div",{className:"bg-blue-600 p-8 text-center",children:[I.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl mx-auto flex items-center justify-center mb-4 backdrop-blur-sm",children:I.jsx(Tu,{className:"w-8 h-8 text-white"})}),I.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"FlutterApply AI"}),I.jsx("p",{className:"text-blue-100",children:"Supercharge your job search with AI."})]}),I.jsxs("div",{className:"p-8",children:[I.jsxs("div",{className:"text-center mb-6",children:[I.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:w?"Create Account":"Welcome Back"}),I.jsx("p",{className:"text-slate-500 mt-1",children:w?"Sign up to start crafting perfect emails.":"Sign in to access your profile."})]}),a&&I.jsx("div",{className:"mb-6 text-center text-red-600 text-sm bg-red-50 p-3 rounded-lg border border-red-100",children:a}),I.jsxs("form",{onSubmit:F,className:"space-y-4 mb-6",children:[I.jsxs("div",{className:"space-y-1",children:[I.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Email"}),I.jsxs("div",{className:"relative",children:[I.jsx(od,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),I.jsx("input",{type:"email",value:h,onChange:$=>v($.target.value),className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm transition-all",placeholder:"you@example.com",required:!0})]})]}),I.jsxs("div",{className:"space-y-1",children:[I.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Password"}),I.jsxs("div",{className:"relative",children:[I.jsx(I6,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),I.jsx("input",{type:"password",value:E,onChange:$=>S($.target.value),className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm transition-all",placeholder:"",required:!0})]})]}),I.jsx(jt,{type:"submit",isLoading:i,className:"w-full py-2.5",children:w?I.jsxs(I.Fragment,{children:[I.jsx(z6,{className:"w-4 h-4"})," Create Account"]}):I.jsxs(I.Fragment,{children:[I.jsx(WI,{className:"w-4 h-4"})," Sign In"]})})]}),I.jsxs("div",{className:"relative mb-6",children:[I.jsx("div",{className:"absolute inset-0 flex items-center",children:I.jsx("div",{className:"w-full border-t border-slate-200"})}),I.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:I.jsx("span",{className:"bg-white px-2 text-slate-400 font-medium",children:"Or continue with"})})]}),I.jsxs(jt,{variant:"outline",onClick:O,isLoading:i,className:"w-full py-2.5 text-slate-700 mb-4",type:"button",children:[I.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[I.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),I.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),I.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z"}),I.jsx("path",{fill:"#EA4335",d:"M12 4.75c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 1.09 14.97 0 12 0 7.7 0 3.99 2.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),I.jsx(jt,{variant:"ghost",onClick:()=>{const $=new URL(window.location.href);$.searchParams.set("guest","true"),window.history.pushState({},"",$),window.location.reload()},className:"w-full py-2.5 text-slate-500 hover:text-blue-600 mb-6",type:"button",children:"Continue as Guest"}),I.jsxs("div",{className:"text-center text-sm",children:[I.jsx("span",{className:"text-slate-500",children:w?"Already have an account? ":"Don't have an account? "}),I.jsx("button",{type:"button",onClick:()=>{P(!w),u(null),v(""),S("")},className:"font-medium text-blue-600 hover:text-blue-800 transition-colors",children:w?"Sign In":"Sign Up"})]}),I.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-100",children:[I.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-slate-400",children:[I.jsx(_6,{className:"w-3 h-3"}),I.jsx("span",{children:"Current Preview Domain:"})]}),I.jsx("code",{className:"block mt-1 text-center text-[10px] bg-slate-100 p-2 rounded text-slate-500 font-mono select-all break-all border border-slate-200",children:d||"Detecting..."})]})]})]})}):I.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4 font-sans",children:I.jsxs("div",{className:"bg-white max-w-2xl w-full rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:[I.jsxs("div",{className:"bg-amber-500 p-6 flex items-center gap-4",children:[I.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:I.jsx(Um,{className:"w-8 h-8 text-white"})}),I.jsxs("div",{children:[I.jsx("h1",{className:"text-xl font-bold text-white",children:"Setup Required"}),I.jsx("p",{className:"text-amber-100 text-sm",children:"You need to connect Firebase to use this app."})]})]}),I.jsxs("div",{className:"p-8 space-y-6",children:[I.jsx("div",{className:"prose prose-slate text-sm",children:I.jsxs("p",{className:"text-slate-600 text-base",children:["The application is running, but it's missing the ",I.jsx("strong",{children:"API Keys"})," needed to talk to Google's servers. Follow these steps to fix it:"]})}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{className:"flex gap-4",children:[I.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold",children:"1"}),I.jsxs("div",{children:[I.jsx("h3",{className:"font-semibold text-slate-800",children:"Create a Firebase Project"}),I.jsxs("p",{className:"text-slate-600 text-sm mt-1",children:["Go to ",I.jsxs("a",{href:"https://console.firebase.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline inline-flex items-center gap-1",children:["console.firebase.google.com ",I.jsx(rd,{className:"w-3 h-3"})]})," and create a new project."]})]})]}),I.jsxs("div",{className:"flex gap-4",children:[I.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold",children:"2"}),I.jsxs("div",{children:[I.jsx("h3",{className:"font-semibold text-slate-800",children:"Enable Authentication & Firestore"}),I.jsxs("p",{className:"text-slate-600 text-sm mt-1",children:["In the console, go to ",I.jsx("strong",{children:"Build"})," menu:",I.jsxs("ul",{className:"list-disc ml-5 mt-1 space-y-1",children:[I.jsxs("li",{children:[I.jsx("strong",{children:"Authentication:"}),' Enable "Google" and "Email/Password" providers.']}),I.jsxs("li",{children:[I.jsx("strong",{children:"Firestore Database:"})," Create database (start in Test Mode)."]})]})]})]})]}),I.jsxs("div",{className:"flex gap-4",children:[I.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold",children:"3"}),I.jsxs("div",{children:[I.jsx("h3",{className:"font-semibold text-slate-800",children:"Copy Config to Code"}),I.jsxs("p",{className:"text-slate-600 text-sm mt-1",children:["Go to ",I.jsx("strong",{children:"Project Settings"})," (gear icon)  ",I.jsx("strong",{children:"General"}),"  ",I.jsx("strong",{children:"Your apps"}),".",I.jsx("br",{}),"Click the ",I.jsx("code",{className:"bg-slate-100 px-1 rounded",children:"</>"})," icon to register a web app.",I.jsx("br",{}),"Copy the ",I.jsx("code",{className:"text-xs bg-slate-100 px-1",children:"firebaseConfig"})," object keys and paste them into the ",I.jsx("code",{className:"text-blue-600 font-mono",children:"firebaseConfig.ts"})," file in this editor."]})]})]})]}),I.jsxs("div",{className:"bg-slate-100 p-4 rounded-lg border border-slate-200 mt-4",children:[I.jsx("h4",{className:"text-xs font-semibold uppercase text-slate-500 mb-2",children:"Example of what to replace in firebaseConfig.ts:"}),I.jsx("pre",{className:"text-xs text-slate-700 font-mono overflow-x-auto",children:`const firebaseConfig = {
  apiKey: "AIzaSyD...", 
  authDomain: "your-project.firebaseapp.com",
  projectId: "your-project",
  // ... other keys
};`})]})]})]})})},Qp={name:"",email:"",yearsExperience:"",skills:"Dart, Flutter, Firebase",portfolioUrl:"",bio:"",linkedinUrl:""},IS=({guestMode:n=!1,onSignIn:e})=>{var P;const{currentUser:t,logout:i}=bg(),[o,a]=Ee.useState(ir.EMAIL_FINDER),[u,d]=Ee.useState(Qp),[m,h]=Ee.useState(!0),[v,E]=Ee.useState(!0);Ee.useEffect(()=>{(async()=>{if(n){d({...Qp,name:"Guest User",email:"guest@example.com"}),E(!1);return}if(t){E(!0);const F=await E2(t.uid);d(F||{...Qp,email:t.email||""}),E(!1)}})()},[t,n]);const S=async O=>{t?(await T2(t.uid,O),d(O)):n&&d(O)},w=[{id:ir.EMAIL_FINDER,label:"Email Finder",icon:Gg},{id:ir.GENERATOR,label:"Job Generator",icon:Fg},{id:ir.PROFILE,label:"My Profile",icon:ZI}];return v?I.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-slate-50",children:I.jsxs("div",{className:"flex flex-col items-center gap-4",children:[I.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),I.jsx("p",{className:"text-slate-500 font-medium",children:"Loading your workspace..."})]})}):I.jsxs("div",{className:"flex h-screen bg-slate-50 text-slate-900 font-sans overflow-hidden",children:[I.jsxs("aside",{className:`${m?"w-64":"w-20"} bg-white border-r border-slate-200 transition-all duration-300 flex flex-col z-20`,children:[I.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between shrink-0",children:[I.jsxs("div",{className:`flex items-center gap-2 overflow-hidden transition-all duration-300 ${m?"opacity-100":"opacity-0 w-0"}`,children:[I.jsx(Tu,{className:"w-6 h-6 text-blue-600 shrink-0"}),I.jsxs("h1",{className:"font-bold text-xl tracking-tight whitespace-nowrap",children:["Flutter",I.jsx("span",{className:"text-blue-600",children:"Apply"})]})]}),!m&&I.jsx(Tu,{className:"w-6 h-6 text-blue-600 mx-auto"})]}),I.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4",children:w.map(O=>I.jsxs("button",{onClick:()=>a(O.id),className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all group ${o===O.id?"bg-blue-600 text-white shadow-lg shadow-blue-200":"text-slate-500 hover:bg-slate-100"}`,title:O.label,children:[I.jsx(O.icon,{className:`w-5 h-5 shrink-0 ${o===O.id?"text-white":"group-hover:text-blue-600"}`}),I.jsx("span",{className:`font-medium whitespace-nowrap transition-all duration-300 ${m?"opacity-100":"opacity-0 w-0"}`,children:O.label})]},O.id))}),I.jsxs("div",{className:"p-4 border-t border-slate-100",children:[n?I.jsxs("button",{onClick:e,className:"w-full flex items-center gap-3 p-3 text-blue-600 hover:bg-blue-50 rounded-xl transition-all group",children:[I.jsx(WI,{className:"w-5 h-5 shrink-0"}),I.jsx("span",{className:`font-medium transition-all duration-300 ${m?"opacity-100":"opacity-0 w-0"}`,children:"Sign In"})]}):I.jsxs("button",{onClick:()=>i(),className:"w-full flex items-center gap-3 p-3 text-slate-500 hover:bg-red-50 hover:text-red-600 rounded-xl transition-all group",children:[I.jsx(R6,{className:"w-5 h-5 shrink-0"}),I.jsx("span",{className:`font-medium transition-all duration-300 ${m?"opacity-100":"opacity-0 w-0"}`,children:"Logout"})]}),I.jsx("button",{onClick:()=>h(!m),className:"mt-4 w-full flex items-center justify-center p-2 text-slate-400 hover:text-slate-600 rounded-lg hover:bg-slate-100 transition-all",children:m?I.jsx(u6,{className:"w-5 h-5"}):I.jsx(D6,{className:"w-5 h-5"})})]})]}),I.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[I.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-8 shrink-0",children:[I.jsx("h2",{className:"text-lg font-bold text-slate-800",children:(P=w.find(O=>O.id===o))==null?void 0:P.label}),I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsxs("div",{className:"text-right hidden sm:block",children:[I.jsx("p",{className:"text-xs font-bold text-slate-900",children:u.name||"Set Name"}),I.jsx("p",{className:"text-[10px] text-slate-400",children:(t==null?void 0:t.email)||(n?"guest@example.com":"")})]}),I.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 border border-blue-200 flex items-center justify-center text-blue-600 font-bold text-xs",children:(u.name||(t==null?void 0:t.email)||"G").charAt(0).toUpperCase()})]})]}),I.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:I.jsxs("div",{className:"max-w-7xl mx-auto h-full",children:[o===ir.GENERATOR&&I.jsx($6,{userProfile:u}),o===ir.EMAIL_FINDER&&I.jsx(Q6,{userProfile:u}),o===ir.PROFILE&&I.jsx(X6,{initialProfile:u,onSave:S})]})}),n&&I.jsx("div",{className:"absolute bottom-4 right-4 bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-xs font-bold border border-amber-200 shadow-sm z-50 animate-pulse",children:"Preview Mode"})]})]})},j6=()=>{const{currentUser:n,loading:e}=bg(),[t,i]=Ee.useState(!1);return e?I.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-slate-50",children:I.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):n?I.jsx(IS,{guestMode:!1}):t?I.jsx(W6,{}):I.jsx(IS,{guestMode:!0,onSignIn:()=>i(!0)})},Z6=()=>I.jsx(v2,{children:I.jsx(j6,{})}),ew=document.getElementById("root");if(!ew)throw new Error("Could not find root element to mount to");const e5=BR.createRoot(ew);e5.render(I.jsx(VR.StrictMode,{children:I.jsx(Z6,{})}));
